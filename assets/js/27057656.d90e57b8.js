"use strict";(self.webpackChunkflyskypie_github_io=self.webpackChunkflyskypie_github_io||[]).push([[67808],{57746:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>i,contentTitle:()=>t,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var s=o(11527),l=o(88717);const r={slug:"2026-01-05_k8s-longhorn-install-and-helm",authors:["weiji"],tags:["k8s"]},t="K8s \u5b78\u7fd2\u7b46\u8a18 - Longhorn \u5b89\u88dd\u8207 Helm",a={permalink:"/posts/2026-01-05_k8s-longhorn-install-and-helm",source:"@site/post/2026-01-05_k8s-longhorn-install-and-helm/index.md",title:"K8s \u5b78\u7fd2\u7b46\u8a18 - Longhorn \u5b89\u88dd\u8207 Helm",description:"Longhorn \u53ef\u4ee5\u7528\u5f88\u591a\u65b9\u5f0f\u5b89\u88dd\uff0c\u5305\u542b\u6700\u57fa\u672c\u7684 kubectl \u6307\u4ee4\uff1a",date:"2026-01-05T00:00:00.000Z",formattedDate:"January 5, 2026",tags:[{label:"k8s",permalink:"/posts/tags/k-8-s"}],hasTruncateMarker:!1,authors:[{name:"Wei Ji",title:"\u9583\u4eae\u75c7\u5019\u7fa4\u5de5\u7a0b\u5c4d",url:"https://github.com/FlySkyPie",imageURL:"https://avatars.githubusercontent.com/u/9475660",key:"weiji"}],frontMatter:{slug:"2026-01-05_k8s-longhorn-install-and-helm",authors:["weiji"],tags:["k8s"]},unlisted:!1,prevItem:{title:"K8s \u5b78\u7fd2\u7b46\u8a18 - K8s \u53ea\u662f\u6846\u67b6",permalink:"/posts/2026-01-05_k8s-is-framework"},nextItem:{title:"K8s \u5b78\u7fd2\u7b46\u8a18 - Longhorn \u7c21\u4ecb",permalink:"/posts/2026-01-05_k8s-longhorn-intro"}},i={authorsImageUrls:[void 0]},c=[{value:"Helm",id:"helm",level:2},{value:"\u7528 Helm \u5b89\u88dd Longhorn",id:"\u7528-helm-\u5b89\u88dd-longhorn",level:2}];function h(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",ul:"ul",...(0,l.a)(),...n.components},{Head:r}=e;return r||function(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r,{children:(0,s.jsx)("meta",{property:"og:image",content:"https://raw.githubusercontent.com/FlySkyPie/flyskypie.github.io/main/post/2026-01-05_k8s-longhorn-install-and-helm/02_helm.webp"})}),"\n",(0,s.jsxs)(e.p,{children:["Longhorn \u53ef\u4ee5\u7528\u5f88\u591a\u65b9\u5f0f\u5b89\u88dd\uff0c\u5305\u542b\u6700\u57fa\u672c\u7684 ",(0,s.jsx)(e.code,{children:"kubectl"})," \u6307\u4ee4\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"kubectl apply -f https://raw.githubusercontent.com/longhorn/longhorn/v1.10.1/deploy/longhorn.yaml\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u4e0d\u904e\u7b49\u7b49\uff01\u4e0d\u8981\u6025\u8457\u4e0b\u6307\u4ee4\uff01\u8b93\u6211\u5011\u7784\u4e00\u773c\u88e1\u9762\u6709\u4e9b\u4ec0\u9ebc\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"wget https://raw.githubusercontent.com/longhorn/longhorn/v1.10.1/deploy/longhorn.yaml\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:o(7383).Z+"",width:"521",height:"589"})}),"\n",(0,s.jsx)(e.p,{children:"\u662f\u7684\uff0c\u9019\u662f\u4e00\u500b\u6709\u56db\u5343\u591a\u884c\u7684 YAML\uff0c\u5584\u65bc\u5077\u61f6\u7684\u8070\u660e\u958b\u767c\u8005\u5011\u7576\u7136\u4e0d\u6703\u60f3\u76f4\u63a5\u8ddf\u9019\u5718\u6771\u897f\u6253\u4ea4\u9053\u3002"}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsx)(e.p,{children:"\u9019\u500b\u6578\u5b57\u53ef\u4ee5\u7576\u4f5c\u4e00\u500b\u53c3\u8003\uff0c\u4e00\u500b\u5b8c\u6574\u7684\u96f2\u539f\u751f\u8edf\u9ad4\u4f48\u7f72\u5230 K8s \u9700\u8981\u7684\u8072\u660e\u7684\u8cc7\u8a0a\u5927\u6982\u6703\u9054\u5230\u9019\u500b\u91cf\u9ad4\u3002"})}),"\n",(0,s.jsx)(e.h2,{id:"helm",children:"Helm"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:o(38890).Z+"",width:"1859",height:"1035"})}),"\n",(0,s.jsx)(e.p,{children:"\u5c31\u50cf Longhorn \u9700\u8981\u56db\u5343\u591a\u884c\u7684 YAML \u4e00\u6a23\uff0c\u9084\u6709\u8a31\u8a31\u591a\u591a\u7684\u96f2\u539f\u751f\u61c9\u7528\u8edf\u9ad4\u5be6\u969b\u90fd\u662f\u7531\u5927\u91cf\u7684 K8s \u8cc7\u6e90\u6216\u5be6\u9ad4\u4ea4\u932f\u7de8\u6392\u800c\u6210\uff0c\u65bc\u662f\u5c31\u6709\u4e86 Helm \u9019\u500b\u5de5\u5177\u7684\u8a95\u751f\uff1a\u4e00\u500b K8s \u4e16\u754c\u7684 APT (Advanced Packaging Tool)\u3002"}),"\n",(0,s.jsx)(e.p,{children:"\u5728 Helm \u7684\u4e16\u754c\uff0c\u9019\u4e00\u5806\u8072\u660e\u7684 YAML \u88ab\u5305\u88dd\u6210\u4e00\u500b\u7a31\u4f5c Chart \u7684\u6771\u897f\uff0c\u300c\u5b89\u88dd\u300d(\u4f48\u7f72\u61c9\u7528\u7a0b\u5f0f\u5230 K8s)\u5927\u6982\u50cf\u9019\u6a23\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"helm repo add longhorn https://charts.longhorn.io\nhelm repo update\nhelm install longhorn longhorn/longhorn \\\n    --namespace longhorn-system \\\n    --create-namespace \\\n    --version 1.10.1\n"})}),"\n",(0,s.jsx)(e.p,{children:"Helm \u9084\u6709\u53e6\u5916\u4e00\u500b\u91cd\u8981\u7684\u529f\u80fd\uff1a\u5c0d Chart \u50b3\u5165\u8b8a\u6578\uff0c\u4e5f\u662f\u4eca\u5929\u6211\u8981\u4f7f\u7528 Helm \u7684\u4e3b\u8981\u539f\u56e0\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u7528-helm-\u5b89\u88dd-longhorn",children:"\u7528 Helm \u5b89\u88dd Longhorn"}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.p,{children:["\u9019\u500b\u6bb5\u843d\u7684\u5167\u5bb9\u4e3b\u8981\u53c3\u8003 Longhorn \u7684\u5b98\u65b9\u6587\u4ef6",(0,s.jsx)(e.sup,{children:(0,s.jsx)(e.a,{href:"#user-content-fn-longhorn-config-6a8af0",id:"user-content-fnref-longhorn-config-6a8af0","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"\u3002"]})}),"\n",(0,s.jsx)(e.p,{children:"\u9996\u5148\u4e0b\u8f09\u53c3\u6578\u6a94\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"curl -Lo values.yaml https://raw.githubusercontent.com/longhorn/longhorn/refs/tags/v1.10.1/chart/values.yaml\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u6839\u64da\u9700\u6c42\u4fee\u6539 ",(0,s.jsx)(e.code,{children:"values.yaml"}),"\uff0c\u4ee5\u6211\u76ee\u524d\u7684\u9700\u6c42\u70ba\u4f8b\uff0c\u5206\u5225\u662f\uff1a"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u6301\u4e45\u5316\u9808\u5132\u5b58\u5230\u5916\u90e8 DAS \u7684\u639b\u8f09\u9ede\u3002"}),"\n",(0,s.jsx)(e.li,{children:"\u76ee\u524d\u53ea\u6709\u4e00\u500b\u5de5\u4f5c\u7bc0\u9ede\uff0c\u6240\u4ee5\u526f\u672c\u53ea\u6709\u4e00\u4efd\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:"defaultSettings:\n  defaultDataPath: /mnt/das-storage\n  defaultReplicaCount: 1\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u5b89\u88dd Longhorn \u5230 K8s\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"helm install longhorn longhorn/longhorn \\\n    --namespace longhorn-system \\\n    --create-namespace \\\n    --version 1.10.1 \\\n    --values values.yaml\n"})}),"\n",(0,s.jsx)(e.p,{children:"\u62c9\u53d6 Image \u9700\u8981\u6642\u9593\uff0c\u904e\u7a0b\u4e2d\u53ef\u4ee5\u4f7f\u7528\u6307\u4ee4\u6aa2\u67e5\u662f\u4e0d\u662f\u6240\u6709 Pod \u5df2\u7d93\u5c31\u4f4d\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"$ kubectl -n longhorn-system get pod\nNAME                                        READY   STATUS              RESTARTS      AGE\nengine-image-ei-3154f3aa-tsq6p              0/1     ContainerCreating   0             23s\nlonghorn-driver-deployer-58768fb7fd-ktpq8   1/1     Running             0             2m58s\nlonghorn-manager-bsqms                      2/2     Running             2 (44s ago)   2m58s\nlonghorn-ui-7b9c99fd9-j8bxb                 1/1     Running             0             2m58s\nlonghorn-ui-7b9c99fd9-w2l6b                 1/1     Running             0             2m58s\n"})}),"\n",(0,s.jsxs)(e.p,{children:["\u57f7\u884c Tunnel \u9023\u7dda\u5230 Longhorn \u7684 Dashboard",(0,s.jsx)(e.sup,{children:(0,s.jsx)(e.a,{href:"#user-content-fn-longhorn-ui-access-6a8af0",id:"user-content-fnref-longhorn-ui-access-6a8af0","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),"\uff1a"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"kubectl port-forward \\\n    service/longhorn-frontend \\\n    -n longhorn-system 3002:80 \\\n    --address 0.0.0.0\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.img,{src:o(90344).Z+"",width:"1440",height:"923"})}),"\n",(0,s.jsxs)(e.section,{"data-footnotes":!0,className:"footnotes",children:[(0,s.jsx)(e.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{id:"user-content-fn-longhorn-config-6a8af0",children:["\n",(0,s.jsxs)(e.p,{children:["Longhorn | Documentation. Retrieved 2026-01-05, from ",(0,s.jsx)(e.a,{href:"https://longhorn.io/docs/1.10.1/advanced-resources/deploy/customizing-default-settings/",children:"https://longhorn.io/docs/1.10.1/advanced-resources/deploy/customizing-default-settings/"})," ",(0,s.jsx)(e.a,{href:"#user-content-fnref-longhorn-config-6a8af0","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{id:"user-content-fn-longhorn-ui-access-6a8af0",children:["\n",(0,s.jsxs)(e.p,{children:["Longhorn \u90e8\u7f72\u7b46\u8a18 | \u7fe0\u9ce5\u5716\u66f8\u9928 Project Halcyon Library. Retrieved 2026-01-05, from ",(0,s.jsx)(e.a,{href:"https://wiki.pha.pub/books/109-TAs/page/longhorn",children:"https://wiki.pha.pub/books/109-TAs/page/longhorn"})," ",(0,s.jsx)(e.a,{href:"#user-content-fnref-longhorn-ui-access-6a8af0","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function d(n={}){const{wrapper:e}={...(0,l.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(h,{...n})}):h(n)}},7383:(n,e,o)=>{o.d(e,{Z:()=>s});const s=o.p+"assets/images/01_longhorn-install-yaml-1f7ad17473887f8aa9a4cda144d179b1.webp"},38890:(n,e,o)=>{o.d(e,{Z:()=>s});const s=o.p+"assets/images/02_helm-4306e187254cfeaddb4fbe25fa2d74ca.webp"},90344:(n,e,o)=>{o.d(e,{Z:()=>s});const s=o.p+"assets/images/03_longhorn-frontend-181644ffe13d8e290aad61e70bb1b0b7.webp"},88717:(n,e,o)=>{o.d(e,{Z:()=>a,a:()=>t});var s=o(50959);const l={},r=s.createContext(l);function t(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);
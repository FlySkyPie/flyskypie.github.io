"use strict";(self.webpackChunkflyskypie_github_io=self.webpackChunkflyskypie_github_io||[]).push([[57080],{82757:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var t=s(11527),a=s(88717);const i={slug:"2026-01-03_laptop-homelab",authors:["weiji"],tags:["homelab"]},l="\u7b46\u8a18\u578b Homelab \u98fc\u990a\u6ce8\u610f\u4e8b\u9805",r={permalink:"/posts/2026-01-03_laptop-homelab",source:"@site/post/2026-01-03_laptop-homelab/index.md",title:"\u7b46\u8a18\u578b Homelab \u98fc\u990a\u6ce8\u610f\u4e8b\u9805",description:"\u80cc\u666f",date:"2026-01-03T00:00:00.000Z",formattedDate:"January 3, 2026",tags:[{label:"homelab",permalink:"/posts/tags/homelab"}],hasTruncateMarker:!1,authors:[{name:"Wei Ji",title:"\u9583\u4eae\u75c7\u5019\u7fa4\u5de5\u7a0b\u5c4d",url:"https://github.com/FlySkyPie",imageURL:"https://avatars.githubusercontent.com/u/9475660",key:"weiji"}],frontMatter:{slug:"2026-01-03_laptop-homelab",authors:["weiji"],tags:["homelab"]},unlisted:!1,prevItem:{title:"\u8001\u5144\uff0c\u4f60\u771f\u7684\u627e\u932f\u4eba\u63a8\u92b7\u684c\u9762\u7167\u660e\u4e86",permalink:"/posts/2026-01-03_desktop-lighting"},nextItem:{title:"\u5b89\u88dd K3s \u8207\u9060\u7aef\u9023\u7dda",permalink:"/posts/2026-01-02_learn-k8s"}},o={authorsImageUrls:[void 0]},c=[{value:"\u80cc\u666f",id:"\u80cc\u666f",level:2},{value:"\u96fb\u6c60\u5145\u96fb\u4e0a\u9650",id:"\u96fb\u6c60\u5145\u96fb\u4e0a\u9650",level:2},{value:"\u7b46\u96fb\u87a2\u5e55\u554f\u984c",id:"\u7b46\u96fb\u87a2\u5e55\u554f\u984c",level:2},{value:"DAS \u639b\u8f09",id:"das-\u639b\u8f09",level:2},{value:"\u81ea\u52d5\u5316\u8f09",id:"\u81ea\u52d5\u5316\u8f09",level:3},{value:"\u8a2d\u5b9a\u4ef0\u8cf4",id:"\u8a2d\u5b9a\u4ef0\u8cf4",level:3},{value:"DAS SMART \u6aa2\u67e5",id:"das-smart-\u6aa2\u67e5",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",sup:"sup",...(0,a.a)(),...e.components},{Details:i,Head:l}=n;return i||m("Details",!0),l||m("Head",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l,{children:(0,t.jsx)("meta",{property:"og:image",content:"https://raw.githubusercontent.com/FlySkyPie/flyskypie.github.io/main/post/2026-01-03_laptop-homelab/00_cover.webp"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(46662).Z+"",width:"1110",height:"537"})}),"\n",(0,t.jsx)(n.h2,{id:"\u80cc\u666f",children:"\u80cc\u666f"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u7684 Homelab \u662f\u900f\u904e\u7b46\u96fb\u548c USB \u5916\u63a5 DAS (Direct Attached Storage) \u5efa\u69cb\u7684\uff0c\u4e26\u4e14\u63a1\u904e\u4e00\u4e9b\u5c0f\u5751\u3002\u6700\u8fd1\u5728\u5efa\u7f6e\u65b0\u7684\u7bc0\u9ede\u6642\uff0c\u767c\u73fe\u6211\u628a\u76f8\u95dc\u7684\u8cc7\u8a0a\u5206\u6563\u5728\u4e0d\u540c\u7684\u7b46\u8a18\u548c IaC (Infrastructure as Code) \u88e1\u9762\uff0c\u65bc\u662f\u60f3\u8aaa\u8d81\u9019\u500b\u6a5f\u6703\u6574\u7406\u4e00\u4e0b\u8cc7\u8a0a\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u96fb\u6c60\u5145\u96fb\u4e0a\u9650",children:"\u96fb\u6c60\u5145\u96fb\u4e0a\u9650"}),"\n",(0,t.jsx)(n.p,{children:"Framework \u7684\u8a71\u53ef\u4ee5\u5728 BIOS \u8a2d\u5b9a\u5145\u96fb\u4e0a\u9650\uff1a"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{src:s(53544).Z+"",width:"1600",height:"900"})}),"\n",(0,t.jsxs)(n.p,{children:["\uff08\u5f9e Framework \u7684\u8ad6\u58c7",(0,t.jsx)(n.a,{href:"https://community.frame.work/t/framework-laptop-13-ryzen-7040-bios-3-07-release-held/65582",children:"\u501f\u7528\u87a2\u5e55\u622a\u5716"}),"\uff09"]}),"\n",(0,t.jsx)(n.p,{children:"\u53e6\u5916\u4e00\u53f0 Lenovo \u7684\u7b46\u96fb\u5247\u662f\u9760\u9019\u500b\u8a2d\u5b9a\uff1a"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://github.com/makifdb/lenopow",children:"https://github.com/makifdb/lenopow"})}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u6703\u628a\u628a\u5145\u96fb\u4e0a\u9650\u8a2d\u5728 80% \u907f\u514d\u7b46\u96fb\u4f5c\u70ba\u4f3a\u670d\u5668\u9577\u6642\u9593\u63d2\u8457\u5145\u96fb\u9020\u6210\u96fb\u6c60\u81a8\u8139\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u7b46\u96fb\u87a2\u5e55\u554f\u984c",children:"\u7b46\u96fb\u87a2\u5e55\u554f\u984c"}),"\n",(0,t.jsxs)(n.p,{children:["\u8b93\u7b46\u96fb\u4e0d\u6703\u56e0\u70ba\u87a2\u5e55\u84cb\u4e0a\u800c\u9032\u5165\u4f11\u7720\u6a21\u5f0f\uff0c\u7de8\u8f2f ",(0,t.jsx)(n.code,{children:"/etc/systemd/logind.conf"}),"\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"HandleLidSwitch=ignore\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u57f7\u884c\u6307\u4ee4\u91cd\u555f\u670d\u52d9\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"systemctl restart systemd-logind.service\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u4f46\u662f\u4e0a\u8ff0\u8a2d\u5b9a\u6703\u9020\u6210\u53e6\u5916\u4e00\u500b\u554f\u984c\uff1a\u87a2\u5e55\u84cb\u8457\u9084\u662f\u7e7c\u7e8c\u767c\u5149\uff0c\u65bc\u662f\u9084\u9700\u8981\u4e00\u500b\u6b65\u9a5f\uff0c\u7de8\u8f2f ",(0,t.jsx)(n.code,{children:"/etc/default/grub"}),"\uff1a"]}),"\n",(0,t.jsxs)(n.p,{children:["\u5728 ",(0,t.jsx)(n.code,{children:"GRUB_CMDLINE_LINUX_DEFAULT"})," \u63d2\u5165 ",(0,t.jsx)(n.code,{children:"consoleblank=60"}),"\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u9019\u6703\u8b93\u87a2\u5e55\u5728 60 \u79d2\u5f8c\u7184\u6ec5\u3002"}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"\u5b8c\u6574 Ansible Playbook"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"- name: Setup laptop\n  hosts: \n    - arachne-node-beta\n  tasks:\n    - name: check if consoleblank is configured in the boot command\n      ansible.builtin.lineinfile:\n        backup: true\n        path: /etc/default/grub\n        regexp: '^GRUB_CMDLINE_LINUX_DEFAULT=\".*consoleblank=60'\n        state: absent\n      check_mode: true\n      register: grub_cmdline_check\n      changed_when: false\n    - name: insert consoleblank if missing\n      ansible.builtin.lineinfile:\n        backrefs: true\n        path: /etc/default/grub\n        regexp: '^(GRUB_CMDLINE_LINUX_DEFAULT=\".*)\"$'\n        line: '\\1 consoleblank=60\"'\n      when: grub_cmdline_check.found == 0\n      notify: update grub\n    - name: Set HandleLidSwitch\n      ansible.builtin.lineinfile:\n        backrefs: true\n        path: /etc/systemd/logind.conf\n        regexp: \"#?(HandleLidSwitch=)(?:.*)$\"\n        line: '\\1ignore'\n      notify: Restart logind\n  handlers:\n    - name: update grub\n      ansible.builtin.command: update-grub\n    - name: Restart logind\n      ansible.builtin.systemd_service:\n        name: systemd-logind\n        state: restarted\n"})})]}),"\n",(0,t.jsx)(n.h2,{id:"das-\u639b\u8f09",children:"DAS \u639b\u8f09"}),"\n",(0,t.jsx)(n.p,{children:"\u7576\u670d\u52d9\u900f\u904e Docker \u8dd1\u5728\u5bb9\u5668\u5167\uff0c\u6301\u4e45\u5316\u8cc7\u6599\u537b\u5132\u5b58\u5728\u900f\u904e USB \u9023\u7dda\u7684\u5916\u90e8\u5132\u5b58\u4e2d\uff0c\u9019\u500b\u4ef0\u8cf4\u95dc\u4fc2\u9700\u8981\u984d\u5916\u8655\u7406\u3002"}),"\n",(0,t.jsx)(n.h3,{id:"\u81ea\u52d5\u5316\u8f09",children:"\u81ea\u52d5\u5316\u8f09"}),"\n",(0,t.jsxs)(n.p,{children:["\u7de8\u8f2f ",(0,t.jsx)(n.code,{children:"/etc/fstab"})," \u52a0\u5165\u4ee5\u4e0b\u5167\u5bb9\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"# DAS\nUUID=7f858b7e-f942-45b3-92dd-8c99b497b6a4 /mnt/das-storage ext4 defaults,nofail,x-systemd.automount 0 2\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4fee\u6539\u5f8c\u57f7\u884c\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"systemctl daemon-reload\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["UUID \u53ef\u4ee5\u900f\u904e ",(0,t.jsx)(n.code,{children:"lsblk -f"})," \u4e4b\u985e\u7684\u6307\u4ee4\u7372\u5f97\u3002"]})}),"\n",(0,t.jsx)(n.h3,{id:"\u8a2d\u5b9a\u4ef0\u8cf4",children:"\u8a2d\u5b9a\u4ef0\u8cf4"}),"\n",(0,t.jsxs)(n.p,{children:["\u65b0\u589e\u6a94\u6848 ",(0,t.jsx)(n.code,{children:"/etc/systemd/system/docker.service.d/override.conf"}),"\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ini",children:"[Unit]\nAfter=mnt-das\\\\x2dstorage.automount\nConditionPathExists=/mnt/das-storage\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"systemctl restart docker.service\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u78ba\u4fdd Docker Daemon \u5728 DAS \u639b\u8f09\u5f8c\u624d\u904b\u884c\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"das-smart-\u6aa2\u67e5",children:"DAS SMART \u6aa2\u67e5"}),"\n",(0,t.jsxs)(n.p,{children:["\u56e0\u70ba\u96fb\u8166\u6c92\u6709\u76f4\u63a5\u548c\u786c\u789f\u5efa\u7acb\u9023\u7dda\u800c\u662f\u9694\u8457\u4e00\u5c64 DAS\uff0c\u56e0\u6b64\u4e0d\u80fd\u4f7f\u7528\u666e\u901a\u7684 ",(0,t.jsx)(n.code,{children:"smartctl"})," \u6307\u4ee4\u78ba\u8a8d\uff0c\u800c\u5fc5\u9808\u4f7f\u7528\u984d\u5916\u7684\u53c3\u6578",(0,t.jsx)(n.sup,{children:(0,t.jsx)(n.a,{href:"#user-content-fn-qnap-smart-c5ac0a",id:"user-content-fnref-qnap-smart-c5ac0a","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"smartctl -a -d jmb39x-q,0 /dev/sdd\nsmartctl -a --device jmb39x-q,1 /dev/sdd\nsmartctl -a -d jmb39x-q,2 /dev/sdd\nsmartctl -a --device jmb39x-q,3 /dev/sdd\n"})}),"\n",(0,t.jsxs)(n.section,{"data-footnotes":!0,className:"footnotes",children:[(0,t.jsx)(n.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{id:"user-content-fn-qnap-smart-c5ac0a",children:["\n",(0,t.jsxs)(n.p,{children:["QNAP External RAID Manager - Export SMART Data - QNAP NAS Community Forum. Retrieved 2026-01-03, from ",(0,t.jsx)(n.a,{href:"https://forum.qnap.com/viewtopic.php?p=873575&sid=573c6149a1276e4ab8d9f4785f1c6029#p873575",children:"https://forum.qnap.com/viewtopic.php?p=873575&sid=573c6149a1276e4ab8d9f4785f1c6029#p873575"})," ",(0,t.jsx)(n.a,{href:"#user-content-fnref-qnap-smart-c5ac0a","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},46662:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/00_cover-ea0a7e8308dd3ceda73995b20ee0532a.webp"},53544:(e,n,s)=>{s.d(n,{Z:()=>t});const t=s.p+"assets/images/01_fw-bios-21176c994ed1627b3bac398a51874f91.webp"},88717:(e,n,s)=>{s.d(n,{Z:()=>r,a:()=>l});var t=s(50959);const a={},i=t.createContext(a);function l(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);
"use strict";(self.webpackChunkflyskypie_github_io=self.webpackChunkflyskypie_github_io||[]).push([[4742],{46538:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var i=n(11527),a=n(88717);const t={slug:"2025-11-23_biomes",authors:["weiji"],tags:["Biomes"]},o="Biomes \u7814\u7a76\u7b46\u8a18 3",l={permalink:"/posts/2025-11-23_biomes",source:"@site/post/2025-11-23_biomes/index.md",title:"Biomes \u7814\u7a76\u7b46\u8a18 3",description:"Galois",date:"2025-11-23T00:00:00.000Z",formattedDate:"November 23, 2025",tags:[{label:"Biomes",permalink:"/posts/tags/biomes"}],hasTruncateMarker:!1,authors:[{name:"Wei Ji",title:"\u9583\u4eae\u75c7\u5019\u7fa4\u5de5\u7a0b\u5c4d",url:"https://github.com/FlySkyPie",imageURL:"https://avatars.githubusercontent.com/u/9475660",key:"weiji"}],frontMatter:{slug:"2025-11-23_biomes",authors:["weiji"],tags:["Biomes"]},unlisted:!1,nextItem:{title:"Biomes \u7814\u7a76\u7b46\u8a18 2",permalink:"/posts/2025-11-16_biomes"}},r={authorsImageUrls:[void 0]},c=[{value:"Galois",id:"galois",level:2},{value:"\u904a\u6232\u7d20\u6750",id:"\u904a\u6232\u7d20\u6750",level:3},{value:"\u7d20\u6750\u700f\u89bd\u5668\u8207\u7de8\u8f2f\u5668",id:"\u7d20\u6750\u700f\u89bd\u5668\u8207\u7de8\u8f2f\u5668",level:3},{value:"AQL (Asset Query Language) utilities",id:"aql-asset-query-language-utilities",level:2},{value:"\u7576\u524d\u6311\u6230",id:"\u7576\u524d\u6311\u6230",level:2},{value:"Galois \u7684\u5916\u90e8\u4ef0\u8cf4",id:"galois-\u7684\u5916\u90e8\u4ef0\u8cf4",level:3},{value:"shared \u7684\u5faa\u74b0\u4ef0\u8cf4",id:"shared-\u7684\u5faa\u74b0\u4ef0\u8cf4",level:3},{value:"shared \u7684\u6e2c\u8a66\u4ef0\u8cf4",id:"shared-\u7684\u6e2c\u8a66\u4ef0\u8cf4",level:3}];function d(e){const s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components},{Head:t}=s;return t||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Head",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t,{children:(0,i.jsx)("meta",{property:"og:image",content:"https://raw.githubusercontent.com/FlySkyPie/flyskypie.github.io/main/post/2025-11-23_biomes/00_cover.webp"})}),"\n",(0,i.jsx)(s.h2,{id:"galois",children:"Galois"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Galois is a collection of tools for asset generation. Galois introduces a custom DSL for defining assets (e.g. meshes, textures, game objects, configuration files, maps, worlds), a build system for generating binary asset data, and tools for viewing and editing assets through a UI."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"\u4ee5\u4e0a\u662f README \u7684\u539f\u59cb\u63cf\u8ff0\u3002"}),"\n",(0,i.jsx)(s.h3,{id:"\u904a\u6232\u7d20\u6750",children:"\u904a\u6232\u7d20\u6750"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"src/galois/data"})," \u76ee\u9304\u4e0b\u662f\u8a72\u5c08\u6848\u5927\u90e8\u5206\u900f\u904e Git LFS (Large File Storage) \u5132\u5b58\u7684\u8cc7\u6599\u6240\u5728\u7684\u8def\u5f91\uff0c\u5167\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"tree -L 1 src/galois/data\nsrc/galois/data\n\u251c\u2500\u2500 animations\n\u251c\u2500\u2500 audio\n\u251c\u2500\u2500 blocks\n\u251c\u2500\u2500 color_palettes\n\u251c\u2500\u2500 crops\n\u251c\u2500\u2500 editor\n\u251c\u2500\u2500 flora\n\u251c\u2500\u2500 gaia\n\u251c\u2500\u2500 glass\n\u251c\u2500\u2500 icons\n\u251c\u2500\u2500 item_meshes\n\u251c\u2500\u2500 mapping\n\u251c\u2500\u2500 maps\n\u251c\u2500\u2500 npcs\n\u251c\u2500\u2500 placeables\n\u251c\u2500\u2500 textures\n\u2514\u2500\u2500 wearables\n"})}),"\n",(0,i.jsxs)(s.p,{children:["\u4e26\u4e14\u7576\u4e2d\u7684\u7d50\u69cb\u8207 ",(0,i.jsx)(s.code,{children:"biomes_data_snapshot.tar.gz"})," \u7684\u5167\u5bb9\u5927\u81f4\u543b\u5408\uff1a"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:n(17290).Z+"",width:"780",height:"430"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"biomes_data_snapshot.tar.gz"})," \u662f\u4ec0\u9ebc\u5462\uff1f\u5b83\u662f Biomes \u900f\u904e\u8173\u672c\u5728\u672c\u5730\u904b\u884c\u6642\uff0c\u7406\u8ad6\u4e0a\u61c9\u8a72\u88ab\u4e0b\u8f09\u7684\u6a94\u6848\uff0c\u4f46\u662f\u5b98\u65b9\u7684\u4f3a\u670d\u5668\u5df2\u7d93\u4e0d\u518d\u63d0\u4f9b\u8a72\u6a94\u6848\uff0cGitHub \u4e0a\u6709\u4e00\u4e9b issue \u6709\u53cd\u61c9\u9019\u4ef6\u4e8b\uff1a"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://github.com/ill-inc/biomes-game/issues/93",children:"Create a mirror for missing biomes_data_snapshot.tar.gz \xb7 Issue #93 \xb7 ill-inc/biomes-game"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://github.com/ill-inc/biomes-game/issues/91",children:"Unable to download biomes_data_snapshot.tar.gz | host - static.biomes.gg is down \xb7 Issue #91 \xb7 ill-inc/biomes-game"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["\u63db\u8a00\u4e4b\uff0c\u9019\u500b ",(0,i.jsx)(s.code,{children:"biomes_data_snapshot.tar.gz"})," \u662f\u6a94\u6848\u60f3\u63a5\u624b\u9019\u500b\u958b\u6e90\u5c08\u6848\u7684\u4eba\u7b2c\u4e00\u500b\u6703\u78b0\u5230\u7684\u554f\u984c\uff08\u5728\u4e0d\u7406\u89e3\u7a0b\u5f0f\u76f4\u63a5\u4f7f\u7528\u5b98\u65b9\u63d0\u4f9b\u7684\u8173\u672c\u8a66\u5716\u904b\u884c\u8a72\u5c08\u6848\u7684\u8a71\uff09\uff0c\u800c\u9019\u500b ",(0,i.jsx)(s.code,{children:"biomes_data_snapshot.tar.gz"})," \u6a94\u6848\u7684\u7955\u5bc6\u5c31\u85cf\u5728 Galois \u7d44\u4ef6\u5167\u3002"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.p,{children:["\u6253\u5305\u7528\u7684\u8173\u672c\u5176\u5be6\u5b58\u5728\u65bc ",(0,i.jsx)(s.code,{children:"scripts/b/data_snapshot.py"}),"\uff0c\u4e0d\u904e\u6211\u8a8d\u70ba\u7406\u89e3\u8cc7\u6599\u6bd4\u8f38\u51fa\u8cc7\u6599\u9084\u91cd\u8981\u3002"]})}),"\n",(0,i.jsx)(s.h3,{id:"\u7d20\u6750\u700f\u89bd\u5668\u8207\u7de8\u8f2f\u5668",children:"\u7d20\u6750\u700f\u89bd\u5668\u8207\u7de8\u8f2f\u5668"}),"\n",(0,i.jsxs)(s.p,{children:["\u5728 ",(0,i.jsx)(s.code,{children:"src/galois/js"})," \u4e2d\u53ef\u4ee5\u770b\u5230 ",(0,i.jsx)(s.code,{children:"editor"})," \u548c ",(0,i.jsx)(s.code,{children:"viewer"}),"\uff1a"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"tree -L 1 src/galois/js\nsrc/galois/js\n\u251c\u2500\u2500 assets\n\u251c\u2500\u2500 components\n\u251c\u2500\u2500 editor\n\u251c\u2500\u2500 index.d.ts\n\u251c\u2500\u2500 interface\n\u251c\u2500\u2500 lang\n\u251c\u2500\u2500 publish\n\u251c\u2500\u2500 python\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 scripts\n\u251c\u2500\u2500 server\n\u251c\u2500\u2500 tsconfig.json\n\u2514\u2500\u2500 viewer\n"})}),"\n",(0,i.jsx)(s.p,{children:"\u6839\u64da\u7a0b\u5f0f\u78bc\u5224\u65b7\uff0c\u5b83\u5011\u61c9\u8a72\u662f Electron + React \u5be6\u73fe\u7684 GUI \u5de5\u5177\u3002"}),"\n",(0,i.jsx)(s.p,{children:"\u9019\u500b\u7d44\u4ef6\u7684\u5b9a\u4f4d\u4f7f\u5176\u4e0d\u6d89\u53ca\u904a\u6232\u672c\u8eab\u7684\u5be6\u505a\uff0c\u4e26\u4e14\u63d0\u4f9b\u4e00\u4e9b\u5fc5\u8981\u7684\u5c01\u88dd\u7d66\u904a\u6232\u958b\u767c\u4f7f\u7528\uff0c\u56e0\u6b64\u4f5c\u70ba\u6211\u7684\u4e0b\u4e00\u500b\u89e3\u6790\u76ee\u6a19\u3002"}),"\n",(0,i.jsx)(s.h2,{id:"aql-asset-query-language-utilities",children:"AQL (Asset Query Language) utilities"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:n(18264).Z+"",width:"1028",height:"614"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://github.com/FlySkyPie/biomes-aql-utils",children:"https://github.com/FlySkyPie/biomes-aql-utils"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://www.npmjs.com/package/@flyskypie/biomes-aql-utils",children:"https://www.npmjs.com/package/@flyskypie/biomes-aql-utils"})}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["\u9019\u500b\u6a21\u7d44\u5728 Biomes \u7684\u539f\u59cb\u8def\u5f91\u662f\uff1a",(0,i.jsx)(s.code,{children:"src/galois/js/lang"}),"\uff0c\n\u4e26\u4e14\u7576\u4e2d\u7f3a\u5c11\u4e00\u4e9b\u7684 Typescript \u7a0b\u5f0f\u78bc\u662f\u7531 ",(0,i.jsx)(s.code,{children:"src/galois/py/assets"})," \u4e0b\u7684 Python \u8173\u672c\u751f\u6210\u7684\uff0c\n\u56e0\u70ba\u6d89\u53ca\u8de8\u8a9e\u8a00\u7684\u64cd\u4f5c\uff0c\u800c\u4e14\u6c92\u6709\u5176\u4ed6\u4ef0\u8cf4\uff0c\u56e0\u6b64\u6211\u5c07\u5176\u62bd\u51fa\u4f5c\u70ba\u7368\u7acb\u7684\u5957\u4ef6\u3002"]}),"\n",(0,i.jsx)(s.p,{children:'"Asset Query Language" \u53ea\u662f\u6839\u64da\u5167\u90e8\u5be6\u73fe\u7684\u908f\u8f2f\u8ddf\u88ab\u547c\u53eb\u7684\u65b9\u5f0f\u5148\u96a8\u4fbf\u53d6\u7684\u66ab\u6642\u6027\u540d\u7a31\uff0c\u5b83\u88ab\u547c\u53eb\u7684\u6642\u5019\u5927\u81f4\u4e0a\u9577\u9019\u6a23\uff1a'}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'import * as l from "@/galois/lang";\n\nconst skeleton = l.toSkeleton(animationInfo.skeleton);\nconst tPose = l.ExtractInitialPose(animationsGltf, skeleton);\nconst posedVoxJointMap = l.ToPosedVoxJointMapFromVoxLayers(vox, skeleton);\n\nlet gltf = l.ToGLTF(\nmeshJointMap,\ntPose,\nl.ExtractAllAnimations(animationsGltf, skeleton)\n);\n'})}),"\n",(0,i.jsxs)(s.p,{children:["\u4e0d\u7136 ",(0,i.jsx)(s.code,{children:"lang"})," \u4e26\u4e0d\u662f\u4e00\u500b\u65b9\u4fbf\u7406\u89e3\u7684\u540d\u7a31\u3002"]}),"\n",(0,i.jsx)(s.h2,{id:"\u7576\u524d\u6311\u6230",children:"\u7576\u524d\u6311\u6230"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:n(19130).Z+"",width:"765",height:"690"})}),"\n",(0,i.jsx)(s.h3,{id:"galois-\u7684\u5916\u90e8\u4ef0\u8cf4",children:"Galois \u7684\u5916\u90e8\u4ef0\u8cf4"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:n(41163).Z+"",width:"764",height:"690"})}),"\n",(0,i.jsxs)(s.p,{children:["\u9996\u5148\uff0c Galois \u5c0d ",(0,i.jsx)(s.code,{children:"shared"})," \u6709\u4ef0\u8cf4\uff0c\u9019\u500b\u90e8\u4efd\u6c92\u6709\u4ec0\u9ebc\u554f\u984c\uff0c\u7562\u7adf ",(0,i.jsx)(s.code,{children:"shared"})," \u8077\u8cac\u4e0a\u5c31\u662f\u8655\u7406\u90a3\u4e9b\u540c\u6642\u6703\u88ab\u524d\u7aef\u8207\u5f8c\u7aef\u4f7f\u7528\u7684\u901a\u7528\u908f\u8f2f\u3002"]}),"\n",(0,i.jsxs)(s.p,{children:["\u4f46\u662f Galois \u5c0d ",(0,i.jsx)(s.code,{children:"server"})," \u4ef0\u8cf4\u5c31\u6709\u554f\u984c\u4e86\uff0c\u56e0\u70ba ",(0,i.jsx)(s.code,{children:"server"})," \u662f\u61c9\u7528\u7a0b\u5f0f\u7684\u5f8c\u7aef\u5be6\u505a\uff0c\u5728\u7d20\u6750\u700f\u89bd\u6216\u7de8\u8f2f\u968e\u6bb5\u4e0d\u61c9\u8a72\u5c0d\u5f8c\u7aef\u908f\u8f2f\u6709\u6240\u4ef0\u8cf4\u3002"]}),"\n",(0,i.jsxs)(s.p,{children:["\u4ed4\u7d30\u770b\u767c\u73fe\u8ddf\u767c\u5e03\u6709\u95dc\uff0c\u6216\u8a31\u53ef\u4ee5\u5c07\u8a72\u90e8\u4efd\u66ab\u6642\u5f9e Galois \u4e2d\u79fb\u9664\uff0c\u5269\u4e0b\u7684\u90e8\u4efd\u4e00\u5c0f\u90e8\u4efd\u5982\u679c\u5be6\u505a\u4e0d\u662f\u5f88\u591a\u53ef\u4ee5\u8996\u60c5\u6cc1\u76f4\u63a5\u5f9e ",(0,i.jsx)(s.code,{children:"server"})," \u79fb\u904e\u4f86\u3002"]}),"\n",(0,i.jsx)(s.h3,{id:"shared-\u7684\u5faa\u74b0\u4ef0\u8cf4",children:"shared \u7684\u5faa\u74b0\u4ef0\u8cf4"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:n(59814).Z+"",width:"765",height:"690"})}),"\n",(0,i.jsxs)(s.p,{children:["\u56e0\u70ba ",(0,i.jsx)(s.code,{children:"ecs"})," \u7d44\u4ef6\u5927\u90e8\u5206\u7684\u7a0b\u5f0f\u78bc\u7528 Python \u751f\u6210\u7684\uff0c\u53ef\u4ee5\u7684\u8a71\u6211\u60f3\u62c9\u51fa\u4f86\u8b8a\u6210\u55ae\u7368\u7684\u5957\u4ef6\uff0c\u4f46\u662f\u56e0\u70ba\u5b83\u8ddf ",(0,i.jsx)(s.code,{children:"shared"})," \u4e4b\u9593\u6709\u5bc6\u5207\u7684\u8026\u5408\uff08\u5faa\u74b0\u4ef0\u8cf4\uff09\uff0c\u7121\u5948\u4e4b\u4e0b\u53ea\u80fd\u7528 monorepo \u8655\u7406\u3002"]}),"\n",(0,i.jsx)(s.h3,{id:"shared-\u7684\u6e2c\u8a66\u4ef0\u8cf4",children:"shared \u7684\u6e2c\u8a66\u4ef0\u8cf4"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{src:n(494).Z+"",width:"765",height:"690"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"shared"})," \u4e5f\u6709\u5c0d ",(0,i.jsx)(s.code,{children:"server"})," \u7684\u4ef0\u8cf4\uff0c\u53e6\u5916\u4e00\u500b\u5247\u662f ",(0,i.jsx)(s.code,{children:"voxeloo"}),"\uff0c\u4f46\u662f\u5b83\u4f7f\u7528\u7684\u662f\u4e0d\u660e\u7684\u5be6\u505a\uff1a"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-typescript",children:'import wasmLoader from "@/gen/shared/cpp_ext/voxeloo-simd/wasm";\n\n  return wasmLoader({\n    wasmBinary: await readFile(wasmFile),\n    wasmMemory: makeWasmMemory(1024),\n  });\n'})}),"\n",(0,i.jsxs)(s.p,{children:["\u4e4b\u524d\u6211\u7528 Emscripten \u7de8\u8b6f\u51fa\u4f86\u7684 Voxeloo WASM \u672c\u8eab\u4e26\u6c92\u6709\u7b26\u5408\u4e0a\u8ff0 ",(0,i.jsx)(s.code,{children:"wasmLoader"})," \u754c\u9762\u7684\u6771\u897f\uff0cBazel \u88e1\u9762\u6211\u4e5f\u770b\u4e0d\u51fa\u4f86\u9019\u500b\u6771\u897f\u662f\u5728\u54ea\u88e1\u5be6\u505a\u7684\u3002"]}),"\n",(0,i.jsx)(s.p,{children:"\u9019\u500b\u90e8\u4efd\u662f\u5beb\u5728\u55ae\u5143\u6e2c\u8a66\u5167\u7684\u6771\u897f\uff0c\u4e0d\u5f71\u97ff\u904a\u6232\u672c\u9ad4\u904b\u4f5c\uff0c\u56e0\u6b64\u6211\u5408\u7406\u61f7\u7591\u9019\u500b\u662f\u5c08\u6848\u7d93\u904e\u91cd\u69cb\u5f8c\u907a\u7559\u7684\u75d5\u8de1\uff0c\u67d0\u500b\u6642\u9593\u9ede\u4e4b\u5f8c\u5c31\u4e0d\u518d\u7dad\u8b77\u55ae\u5143\u6e2c\u8a66\u800c\u53ea\u6ce8\u91cd\u904a\u6232\u904b\u884c\u6b63\u5e38\u8207\u5426\uff0c\u9020\u6210\u55ae\u5143\u6e2c\u8a66\u5167\u7684\u5be6\u4f5c\u5df2\u7d93\u904e\u671f\u3002"})]})}function h(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},17290:(e,s,n)=>{n.d(s,{Z:()=>i});const i=n.p+"assets/images/01_biomes_data_snapshot.tar.gz-15f2dd92fb81e7a21c7ecf3a400cd8df.webp"},18264:(e,s,n)=>{n.d(s,{Z:()=>i});const i=n.p+"assets/images/02_biomes-aql-utils-aa727af30982f25ae99afda2cc9ec683.webp"},19130:(e,s,n)=>{n.d(s,{Z:()=>i});const i=n.p+"assets/images/03_challenge-overview-39e769328e691c575c86acf45cd07d79.webp"},41163:(e,s,n)=>{n.d(s,{Z:()=>i});const i=n.p+"assets/images/04_challenge-galois-be11980612527423c6c31de36ed1ad3e.webp"},59814:(e,s,n)=>{n.d(s,{Z:()=>i});const i=n.p+"assets/images/05_challenge-circular-dependency-0eaf5c00a6d6c217d5989d50dc9de1bb.webp"},494:(e,s,n)=>{n.d(s,{Z:()=>i});const i=n.p+"assets/images/06_challenge-shared-194365ea6a41d60838e89a509db6ddff.webp"},88717:(e,s,n)=>{n.d(s,{Z:()=>l,a:()=>o});var i=n(50959);const a={},t=i.createContext(a);function o(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);
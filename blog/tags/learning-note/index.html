<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.20">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="工程屍 FlyPie 的異想世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="工程屍 FlyPie 的異想世界 Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><title data-rh="true">15 posts tagged with &quot;learning note&quot; | 工程屍 FlyPie 的異想世界</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://flyskypie.github.io/blog/tags/learning-note"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:locale" content="zh_tw"><meta data-rh="true" property="og:title" content="15 posts tagged with &quot;learning note&quot; | 工程屍 FlyPie 的異想世界"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" property="og:image" content="https://i.imgur.com/OmCA6cP.jpg"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://flyskypie.github.io/blog/tags/learning-note"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog/tags/learning-note" hreflang="en"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog/tags/learning-note" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.08941cdf.css">
<link rel="preload" href="/assets/js/runtime~main.ccc84e72.js" as="script">
<link rel="preload" href="/assets/js/main.dc78284a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/the-key-of-huanche/">專案文件</a><a class="navbar__item navbar__link" href="/blogs">數位手記</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_dLyj"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_TMXw thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_V4zb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_uHd5 clean-list"><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/2023-04-11_dependencies-in-cpp-project">在 C++ 專案中處理仰賴套件的幾種方式</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/2023-04-01_electron_learning_note_intro">Electron 學習筆記 - 概敘</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/2023-01-17_a-journey-about-2D-skeletal-animation-of-runtime">一場關於 2D Skeletal animation 動畫的 Web Runtime 的旅程</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/2023-01-04_origin-of-gear-redolence">底火的芬芳 - 專案起源</a></li><li class="sidebarItem_spIe"><a class="sidebarItemLink_eqrF" href="/blog/2022-12-03_3ds_bad_apple_node">Javascript x Bad Apple x Ascii 筆記</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>15 posts tagged with &quot;learning note&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2023-04-11_dependencies-in-cpp-project">在 C++ 專案中處理仰賴套件的幾種方式</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2023-04-11T00:00:00.000Z" itemprop="datePublished">April 11, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>這裡整理幾種 C++ 專案常見的處理仰賴函式庫的模式（或是工具）。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="copypaste-source">Copy/Paste Source<a class="hash-link" href="#copypaste-source" title="Direct link to heading">​</a></h2><p>最簡單暴力的方式，把仰賴函式庫的 source 跟 header 直接複製到專案的資料夾下，直接編譯進去專案本身。舉例來說 <a href="https://github.com/fogleman/Craft" target="_blank" rel="noopener noreferrer">fogleman/Craft</a> 是屬於這類。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="native-cmake">Native CMake<a class="hash-link" href="#native-cmake" title="Direct link to heading">​</a></h2><p>在 <a href="https://cmake.org/" target="_blank" rel="noopener noreferrer">CMake</a> 中有個指令 <code>find_library</code> 允許在專案的 config 階段先偵測環境中是否有指定的函式庫，找不到的話就會拋出錯誤。這種專案配置將安裝仰賴函式庫責任交給 host 本身，通常專案的 build guild 會寫著 「先執行 <code>sudo apt install ....</code>」之類的。舉例來說 <a href="https://github.com/LibreSprite/LibreSprite/blob/18e16ef410d410f18c180ec7282861ea61def68f/CMakeLists.txt#L144-L187" target="_blank" rel="noopener noreferrer">LibreSprite</a> 是屬於這類。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="git">Git<a class="hash-link" href="#git" title="Direct link to heading">​</a></h2><p>利用 Git 的 submodule 功能，把其他 repository 參考到專案中。舉例來說 <a href="https://github.com/cuberite/cuberite/tree/master/lib" target="_blank" rel="noopener noreferrer">Cuberite</a> 是屬於這類。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="dependencies-tool">Dependencies Tool<a class="hash-link" href="#dependencies-tool" title="Direct link to heading">​</a></h2><p>就像 PHP 有 Composer；Node.js 有 NPM；Python 有 pip；Rust 有 Cargo 一樣，C++ 的開發者們當然也製作了工具來處理專案仰賴函式庫的問題，不過受限於 C++ 的語言特性，目前並沒有一勞永逸的殺手級工具，仍然處於百家爭鳴的狀態。</p><ul><li><a href="https://github.com/cpm-cmake/CPM.cmake" target="_blank" rel="noopener noreferrer">CPM.cmake</a></li><li><a href="https://conan.io/" target="_blank" rel="noopener noreferrer">Conan</a></li><li><a href="https://github.com/microsoft/vcpkg" target="_blank" rel="noopener noreferrer">Vcpkg</a></li><li><a href="https://github.com/cpp-pm/hunter" target="_blank" rel="noopener noreferrer">Hunter</a></li><li><a href="https://buckaroo.pm/" target="_blank" rel="noopener noreferrer">Buckaroo</a></li></ul><hr><p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_E7b_"></a><br>
<!-- -->Wei Ji以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/c">c++</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 在 C++ 專案中處理仰賴套件的幾種方式" href="/blog/2023-04-11_dependencies-in-cpp-project"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2023-04-01_electron_learning_note_intro">Electron 學習筆記 - 概敘</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2023-04-01T00:00:00.000Z" itemprop="datePublished">April 1, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="Electron in the frontend roadmap" src="/assets/images/electron-in-the-frontend-roadmap-216770b605c3467e5fb83d37d3ee6c1e.webp" width="688" height="300" class="img_E7b_"></p><p>Electron 可以說是前端軟體工程師必學的經典工具之一 (2023 年)，也是我個人有興趣學習的主題之一，只是一直缺乏明確的動機或目的去使用它，直到那天 (2023-03-30) 協助友人改善他 Side Project UI，同一天另外一個朋友又剛好問我 Electron 的問題，看來這是要我學習 Electron 的天意啊（？）</p><p>稍微試了幾個專案樣板，然後讀了一點官方文件，我稍微整理出它的架構：</p><p><img loading="lazy" src="/assets/images/architecture-d21d8d19a8463fb1078ac51cee8db333.svg" width="1450" height="923" class="img_E7b_"></p><p>這裡有幾個知識點最好在學習 Electron 之前先知道：</p><ul><li>Javascript 是一種程式語言，但是它的直譯器不只一種</li><li>瀏覽器上的 Javascript 執行環境和 Node.js 的執行環境不同</li><li>在瀏覽器上開發者可以用 Javascript 使用 Web API (<code>window.*</code>, <code>CSS</code>, <code>DOM</code>...等)和 ES Module (符合 ES6 規範的 Javascript 模組)</li><li>在 Node.js 上開發者可以使用 Node.js 的內建模組 (<code>fs</code>, <code>os</code>, <code>path</code>...等)和 NPM 上提供的 CommonJS Module</li><li>在瀏覽器上 Javascript 沒有權限進行一些涉及作業系統的操作，如：對檔案系統進行讀寫</li></ul><p>然後我整理了幾個關於 Electron 的知識點整理：</p><ul><li>Electron 應用程式分成兩個區塊<ul><li>瀏覽器（基於 Chromium）</li><li>Node.js</li></ul></li><li>兩個區塊彼此獨立<ul><li>Main Process 不能操作 DOM</li><li>Render Process 不能使用 Node.js 模組讀寫檔案系統或是 spawn 子行程</li></ul></li><li>一個應用程式可能有複數個視窗</li><li>Preload Prcess 能夠同時訪問瀏覽器區塊和 Node.js 區塊<ul><li>我們可以把原本被隔離的兩個區塊曝露部份操作給彼此</li><li>透過 Electron 提供的 IPC API</li></ul></li></ul><hr><p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_E7b_"></a><br>
<!-- -->Wei Ji以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/javascript">javascript</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/electron">electron</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Electron 學習筆記 - 概敘" href="/blog/2023-04-01_electron_learning_note_intro"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2022-12-03_3ds_bad_apple_node">Javascript x Bad Apple x Ascii 筆記</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-12-03T00:00:00.000Z" itemprop="datePublished">December 3, 2022</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mojV" id="從影片逐幀取出畫面">從影片逐幀取出畫面<a class="hash-link" href="#從影片逐幀取出畫面" title="Direct link to heading">​</a></h2><p>這個步驟不難，使用 FFmpeg 只要一行指令就能完成：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ffmpeg -i bad_apple.mp4 -vf </span><span class="token assign-left variable" style="color:#36acaa">fps</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token plain"> output/%04d.png</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="將畫面轉換成-ascii-純文字檔">將畫面轉換成 ASCII 純文字檔<a class="hash-link" href="#將畫面轉換成-ascii-純文字檔" title="Direct link to heading">​</a></h2><p>這個步驟也不難，把剛剛生成的畫面載入、轉換再吐出去，搞定。</p><div class="language-javascript codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-javascript codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">fs</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">asciify</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;asciify-image&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">mkdirSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;data&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">recursive</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">fit</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;none&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">width</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">height</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">c_ratio</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @param {string} path </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @returns {Promise&lt;string&gt;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">imageToAsciiPromise</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> reject</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">asciify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> asciified</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">reject</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">asciified</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">replaceAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27; &#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> _files </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">readdirSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;img&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> files </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _files</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">file</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> sourcePath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">img/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">file</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> targetPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">data/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation">index </span><span class="token template-string interpolation operator" style="color:#393A34">+</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation number" style="color:#36acaa">1</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation method function property-access" style="color:#d73a49">toString</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation method function property-access" style="color:#d73a49">padStart</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation number" style="color:#36acaa">4</span><span class="token template-string interpolation punctuation" style="color:#393A34">,</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c">&#x27;0&#x27;</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">.txt</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sourcePath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targetPath</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> sourcePath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> targetPath </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> files</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> acsii </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">imageToAsciiPromise</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sourcePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">writeFileSync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">targetPath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> acsii</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sourcePath</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="播放">播放<a class="hash-link" href="#播放" title="Direct link to heading">​</a></h2><div class="language-javascript codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-javascript codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> os</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;os&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> std</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;std&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> count </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">drawFrame</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> timer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">drawFrame</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    count</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> f </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> std</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">loadFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">data/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation method function property-access" style="color:#d73a49">toString</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation method function property-access" style="color:#d73a49">padStart</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation number" style="color:#36acaa">4</span><span class="token template-string interpolation punctuation" style="color:#393A34">,</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c">&#x27;0&#x27;</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">.txt</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">clearTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">puts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;\x1B[2J&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    std</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">puts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">f </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\n&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">drawFrame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>需要特別注意的是，這個執行環境是 QuickJs，<code>os</code> 和 <code>std</code> 都是該直譯器提供的模組。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/3-ds">3ds</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/javascript">javascript</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/quickjs">quickjs</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about Javascript x Bad Apple x Ascii 筆記" href="/blog/2022-12-03_3ds_bad_apple_node"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2022-12-03_3ds_linux_javascript_bad_apple">3DS x Linux x Javascript x Bad Apple</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-12-03T00:00:00.000Z" itemprop="datePublished">December 3, 2022</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="/assets/images/touch-65310ce8b7222c3e34008a6c0e585a87.webp" width="432" height="324" class="img_E7b_"></p><p>本文以敘述的方式紀錄我在這個專案上的過程，並省略技術細節。若對實作細節有興趣，以下是以技術筆記的形式紀錄的文章：</p><ul><li><a href="/blog/2022-11-25_3ds_hack_note">3DS 刷機筆記</a></li><li><a href="/blog/2022-11-25_3ds_linux_note">3DS 刷 Linux 筆記</a></li><li><a href="/blog/2022-11-29_3ds_cross_compilation_note">交叉編譯 QuickJs 筆記</a></li><li><a href="/blog/2022-12-03_3ds_bad_apple_node">Javascript x Bad Apple x Ascii 筆記</a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="前情提要">前情提要<a class="hash-link" href="#前情提要" title="Direct link to heading">​</a></h2><p>最近 (2022-11-06) 從天上掉下來的一台 3DS (?)</p><p>老實說對於一般過時 N 年的消費性電子產品，我是完全沒興趣多花時間去玩它，根據以往的經驗，hack 這種東西多半吃力不討好；花費大量的時間也只能獲得相對於現代設備少得可憐的算力。 不過個人對於這種「有機械輸入的橫式手持行動裝置」有著莫名憧憬，隨手搜尋看看刷機的資料，發現資源蠻多的，教學也很詳細，就想著來刷刷看。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="閃亮亮症候群再次發作">閃亮亮症候群再次發作<a class="hash-link" href="#閃亮亮症候群再次發作" title="Direct link to heading">​</a></h2><p>跟朋友表示想在 3DS 上刷 Linux 之後，「工程師的成就清單」的話題就這樣被打開了，對話中除了提 「在非常見或非通用功能電腦上安裝 Linux」還提到了「在非常見的顯示器上播放 Bad Apple」。</p><p>過幾天 (2022-11-09)，我便利用下班之餘試著在 3DS 上刷 Linux。刷機的第一部就是透過系統漏洞刷入 CFW (Custom firmware)，讓 3DS 能夠從 SD Card 讀取 bootloader 開機，因為<a href="https://3ds.hacks.guide/get-started" target="_blank" rel="noopener noreferrer">教學</a>很詳細，照著步驟做沒有花太多時間就成功刷機了，當中有些教學性質的步驟也讓我看了 <a href="https://www.gamebrew.org/wiki/Linux_for_3DS" target="_blank" rel="noopener noreferrer">3DS Linux</a> 的頁面之後就知道大概要做什麼，也成功的在 3DS 上進入 Linux 了。</p><p>到目前為止都出乎我意料之外的順利，於是我想：</p><blockquote><p>我都有一台跑著 Linux 的 3DS 了，寫個程式讓它跑 Bad Apple 應該不難吧？</p></blockquote><p>接著我又想：</p><blockquote><p>如果能用我熟悉的 Javascript 寫程式就好了</p></blockquote><p>於是「在 3DS 上跑 Linux 跑 Javascript 顯示 Bad Apple」就變成一個 side project 的目標了，接著這個 side project 就一發不可收拾了。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="這個-linux-是金魚腦">這個 Linux 是金魚腦<a class="hash-link" href="#這個-linux-是金魚腦" title="Direct link to heading">​</a></h2><p>試著新增檔案並寫入一些資料，重開機之後卻發現檔案消失了，後來才了解到整個檔案樹是放在啟動 Linux 用的映像檔裡面，那些資料夾在開機之後是掛在 Ram Disk 上 <sup id="fnref-linux-3ds-files-0ba2fc"><a href="#fn-linux-3ds-files-0ba2fc" class="footnote-ref">linux-3ds-files</a></sup>，自然沒有儲存的功能。</p><p>解決的辦法就是把資料存在 SD 卡上，但是這個 Linux 預設並不會掛載 SD 卡，研究了一會兒才知道它在 <code>/dev/vda1</code>，但是每次開機都要打一次指令顯得有點麻煩（提醒，3DS 沒辦法外接鍵盤，我只能用觸控筆敲指令）。</p><p>寫個腳本讓它在開機的時候執行便理所當然的變成必須完成的任務，然而它並沒有 systemd, rc.local 這類高級的東西。<code>/etc/init.d/rcS</code> 承擔 start 的功能 <code>/etc/init.d/rcK</code> 承擔 kill(stop) 的功能，會依序執行 <code>/etc/init.d/rcS/S(\d\d.*)</code>。</p><p>腳本倒是容易搞定，但是我要怎麼把它包進去開機用的 img 裡面？建置 3DS Linux 的過程涉及一個 <code>rootfs.cpio.gz</code> 檔案，我必須把它解包之後加入我要的修改再包回去。</p><p>花了一點時間搞懂上述這些東西，才終於讓我的 Linux 開機會自動掛載 SD 卡 (2022-11-12)。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="第一個挫折">第一個挫折<a class="hash-link" href="#第一個挫折" title="Direct link to heading">​</a></h2><p>依照自己的以往經驗：「要在 Host 上跑 Javascript 就先裝 Node.js」，然而最新版的 Node.js 並沒有 Armv6 的 prebuild release，不過一直到 11 版，還是有官方版的 armv6 prebuild 可以<a href="https://nodejs.org/dist/latest-v11.x/" target="_blank" rel="noopener noreferrer">下載</a>。下載之後在 3DS 上執行會拋出 <code>-sh: ./node: not found</code> 的錯誤，原因是官方的 prebuild 是仰賴 glibc，但是 3DS Linux 使用的是 musl libc。好吧，這個問題我也不是太陌生，之前在包 Docker 接觸過 Alpine Linux，所以對這類問題有個概念。</p><blockquote><p>好唄，自己 build 就是了</p></blockquote><p>雖然網路上找了一些 build 參數，但是怎麼試怎麼有問題，畢竟我平常又不寫 C，對專案的編譯配置不熟悉。後來找到一個叫做 <a href="https://github.com/dockcross/dockcross" target="_blank" rel="noopener noreferrer">Dockcross</a> 的工具專門用來處理交叉編譯 (Cross Compiling)。但是相對舊版的 Node.js 仰賴 Python 2.X，Dockcross 的 Image 只有 3.X，這時我才知道 Node.js 的編譯過程居然仰賴 Python，我內心 OS：「SHAME， 程式語言之恥，Node.js 你作為一個直譯語言的直譯器的編譯過程居然仰賴另外一種直譯語言」。</p><p><img loading="lazy" src="/assets/images/shame-334ebdb49c394aaa13e1aaf95bdd5121.webp" width="1536" height="2048" class="img_E7b_"></p><p>好加在 Dockcross 允許<a href="https://github.com/dockcross/dockcross#how-to-extend-dockcross-images" target="_blank" rel="noopener noreferrer">擴充</a> Docker image 以符合專案需要，然而事情並沒有這麼簡單。Node.js 的編譯過程仰賴了編譯的產出物，也就是當我指定了編譯目標為 <code>linux-armv6-musl</code> ，會生成一些 tool，接著在編譯出 <code>node</code> 以前，它會在 host 呼叫這些 tool，但是我的 host 不是 <code>linux-armv6-musl</code>；於是拋出錯誤，編譯中止。<code>(#╯O皿O)╯┻━┻</code></p><p>接著我發現在建置 3DS Linux 過程中使用的工具：<a href="https://github.com/linux-3ds/buildroot" target="_blank" rel="noopener noreferrer">buildroot</a> 其實提供了一個界面可以勾選 node，而它的實作方式就是先編譯一份 x86 的版本，再跑 arm 的編譯，而編譯過程中用到的 tool 就回去 call x86 的版本。經過一波三折我終於弄出了「musl-armv6 版本的 Node.js v14」，然而問題並沒有因此解決，不然段落標題就不會是「第一個挫折」了。</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> --version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v14.18.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> -h</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Process </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pid: </span><span class="token number" style="color:#36acaa">153</span><span class="token plain">, stack limit </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> 0xc6135dc6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">c011161</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v6_coherent_kern_range</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">c01094c</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arm_syscall+0x15c/0x26c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">c01094c</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">arm_syscall</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> from </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">c010006</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res_fast_syscall+0x0/0x58</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception stack </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">0xc15elfa8 to 0xc15elff0</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><img loading="lazy" src="/assets/images/too-powerful-7bc66d604bf88ca99154b3ebebe25038.webp" width="800" height="450" class="img_E7b_"></p><p>總之 Node.js 對於那個年代的 3DS 來說 too powerful 了。(2022-11-13)</p><p>作為 ECMAScript 的信徒，這個挫折讓我很不甘心。</p><blockquote><p>如果能用 node.js 跑的話感覺真的滿酷的，用 C 或 shell 就感覺很一般</p></blockquote><p>並且正如我朋友說的，雖然我也不是不會寫 Shell 或是 C，但是感覺這樣就太無聊了（？）既然都難得要解 Bad Apple 的成就了，當然是加點料比較有趣，而且作為網頁前端工程師，窩真的不是很想用 Shell 或是 C 寫啊 <code>_(:3」∠)_</code>。誰知道 Node.js 毫無反應，就只是一團 stack 直接死在 Armv6 上。</p><p><img loading="lazy" src="/assets/images/rake-9113dbba7c8351351e4f18c878d3bfea.webp" width="720" height="479" class="img_E7b_"></p><p>碰巧那天 (2022-11-13) 跟朋友聊天的時候有提到在 Javascript 的圈子有個叫做「包」的東西，後來趁著放假整理瀏覽器書籤的時候發現 Bun 相關的東西，稍微查一下資料才想起來除了 Node.js 之外還有 Deno 跟 Bun 兩個實作 Javascript 的專案。</p><p>Bun 因為是後起之秀，Deno 又是用 Rust 寫的，具我所知 Rust 也能拿來寫嵌入式韌體，移植到 3DS Linux 的機率比較高一點，於是我便朝著這個方向去研究。</p><p>雖然 Deno 本身有一些很酷的 feature，包含交叉編譯的功能，可以把 Javascript 編譯成目標平台的執行檔。但是它本身卻沒有 arm linux 的 prebuild。就算自己跑編譯也會在下載仰賴套件 <code>rusty_v8</code> 的時候失敗，加上官方關於 32 bit ARM 支援的 <a href="https://github.com/denoland/deno/issues/2295" target="_blank" rel="noopener noreferrer">issue</a> 仍然開著。這些都還不包括 musl libc 可能會遇到的問題。看來此路仍然不通。我甚至一度產生了「乾脆用 Rust 寫吧，順便學一下這個我有興趣但是保持觀望一段時間的語言」的念頭。(2022-11-18)</p><p>等等，既然 Javascript 都有諸如 Node.js, Bun, Deno 這些不同的實作，甚至使用不同的 runtime 引擎(V8, JavaScriptCore)，ECMAScript 單純作為標準，它的實作應該不只這樣吧？我也應該不是第一個想在嵌入式系統跑 Javascript 的人吧？</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="any-application-that-can-be-written-in-javascript-will-eventually-be-written-in-javascript">「Any application that can be written in JavaScript, will eventually be written in JavaScript.」<a class="hash-link" href="#any-application-that-can-be-written-in-javascript-will-eventually-be-written-in-javascript" title="Direct link to heading">​</a></h2><p><a href="https://stackoverflow.com/questions/5384762" target="_blank" rel="noopener noreferrer">事實</a>證明我不孤單：</p><ul><li><a href="https://duktape.org/" target="_blank" rel="noopener noreferrer">https://duktape.org/</a></li><li><a href="https://github.com/gfwilliams/tiny-js" target="_blank" rel="noopener noreferrer">https://github.com/gfwilliams/tiny-js</a></li><li><a href="https://github.com/cesanta/mjs" target="_blank" rel="noopener noreferrer">https://github.com/cesanta/mjs</a></li><li><a href="https://github.com/jerryscript-project/jerryscript" target="_blank" rel="noopener noreferrer">https://github.com/jerryscript-project/jerryscript</a></li></ul><p>一開始我嘗試了 tiny-js，因為在問答串的分數也相對高，它看起來足夠精簡，背後又是 Google。然而很快又遇到了 Musl libc 的問題，透過 <a href="https://github.com/richfelker/musl-cross-make" target="_blank" rel="noopener noreferrer">musl-cross-make</a> 這個工具沒有花多久就排除問題了，但是執行後直接跳 Segmentation fault，畢竟是個年久失修的專案，會這樣似乎也不怎麼意外。</p><p>後來我在<a href="https://github.com/topics/javascript-engine?l=c&amp;o=asc&amp;s=stars" target="_blank" rel="noopener noreferrer">這裡</a>發現 <a href="https://github.com/bellard/quickjs" target="_blank" rel="noopener noreferrer">quickjs</a> 不只有中文資源，README 也有提到可以直接執行而不是只有 lib，相較於 <a href="https://github.com/jerryscript-project/jerryscript" target="_blank" rel="noopener noreferrer">jerryscript</a> 的 README 沒有明講是 lib 還是可以直接跑，又有仰賴 Python 編譯，我就先選擇了 quickjs 嘗試。（對，我就歧視 Python，OHO）</p><p>它跟 Node.js 一樣，編譯過程仰賴自己編譯的 tool (<code>qjsc</code>)，一樣要 build 兩次來解決，因為有前面的經驗，沒有花太久就把問題排除並成功在 3DS Linux 上跑起來了。 (2022-11-20)</p><p><img loading="lazy" src="/assets/images/3ds_linux-d08e47870b383941835e0267a7f618d7.webp" width="2048" height="1296" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="voila">Voila!<a class="hash-link" href="#voila" title="Direct link to heading">​</a></h2><p>Javascript 能夠跑起來，實作的部份就簡單了（？）</p><ol><li>用 FFmpeg 對影片以 5 FPS 取樣轉成圖片（原本試過 10 FPS，無奈設備太老舊跟不上）</li><li>把圖片轉成 ASCII 文字檔</li><li>用 Javascript 讀擋然後 print 出來</li></ol><p>因為我現在手上同時有 arm 跟 x86 版本的 qjs 直譯器，改 Javascript 程式執行 debug 的速度就很快了，不用重新編譯，只要在 dev 環境測試到沒問題直接複製到 3DS 去再做第二次測試。</p><p><a href="https://youtu.be/xYr9pNCv0YQ" target="_blank" rel="noopener noreferrer" title="3DS x Linux x Javascript x Bad Apple"><img loading="lazy" src="http://img.youtube.com/vi/xYr9pNCv0YQ/0.jpg" class="img_E7b_"></a></p><p>(縮圖有影片連結)</p><hr><p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_E7b_"></a><br>
<!-- -->Wei Ji以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p><div class="footnotes"><hr><ol><li id="fn-linux-3ds-files-0ba2fc"><a href="https://github.com/linux-3ds/linux/wiki" target="_blank" rel="noopener noreferrer">https://github.com/linux-3ds/linux/wiki</a><a href="#fnref-linux-3ds-files-0ba2fc" class="footnote-backref">↩</a></li></ol></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/3-ds">3ds</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/javascript">javascript</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/quickjs">quickjs</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/cross-compilation">cross compilation</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 3DS x Linux x Javascript x Bad Apple" href="/blog/2022-12-03_3ds_linux_javascript_bad_apple"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2022-11-29_3ds_cross_compilation_note">交叉編譯 QuickJs 筆記</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-11-29T00:00:00.000Z" itemprop="datePublished">November 29, 2022</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mojV" id="前情提要">前情提要<a class="hash-link" href="#前情提要" title="Direct link to heading">​</a></h2><p>我已經成功的完成了 3DS 刷機並且在它上面跑起了 Linux，作為一個網頁前端工程師，我一點也不想為了在上面跑點東西跑去寫 C，而是想把我的舒適圈帶進去，也就是我要弄一個 Javascript runtime 進去 3DS Linux。</p><p>然而 3DS Linux 算是一個相對罕見的環境：Armv6 的硬體以及使用 musl libc，主流的 Javascript runtime 並沒有提供官方版本的 pre-build release，而是需要自己想辦法編譯。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="musl-libc">musl libc<a class="hash-link" href="#musl-libc" title="Direct link to heading">​</a></h3><p>C 語言程式的執行其實仰賴 libc (C Run-Time Library)，並且 libc 的實作<a href="https://wdv4758h-notes.readthedocs.io/zh_TW/latest/libc.html" target="_blank" rel="noopener noreferrer">不只一種</a>，musl libc 便是其中的一種，而且被不少 Linux 發行版作為 C 標準函式庫。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="交叉編譯-cross-compilation">交叉編譯 (Cross Compilation)<a class="hash-link" href="#交叉編譯-cross-compilation" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="https://preshing.com/images/gcc-cross-compiler.png" src="/assets/images/cross_compilation-ea4a5f6193c4232b545e0746c3eaa312.webp" width="596" height="291" class="img_E7b_"></p><p>交叉編譯就是先在 host 編譯出交叉編譯器 (cross compiler)，再用這個交叉編譯器去編譯你的程式，最終目的是你的程式能夠跑在 target 上。</p><p>另外一個方法就是直接在 target 上跑編譯，但是 target 有可能是性能很低的晶片，這種方法效率非常差甚至無法完成（沒有足夠的記憶體完成編譯之類的），交叉編譯就是為了解決這種問題而存在的。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="quickjs">QuickJs<a class="hash-link" href="#quickjs" title="Direct link to heading">​</a></h2><p>眾所皆知 ECMAScript 是一個語言的規範，而不是實作，因此遵守該規範的直譯器 (runtime) 其實有百百種。除了 <a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js</a> 之外，Javascript runtime 還有後起之秀 <a href="https://deno.land/" target="_blank" rel="noopener noreferrer">Deno</a> 和 <a href="https://bun.sh/" target="_blank" rel="noopener noreferrer">Bun</a>，而引擎 (engnine) 自然也不少，被各種瀏覽器、 Node.js 以及 Deno 使用的 V8 或是被 Bun 使用的 JavaScriptCore，除了這些之外還有<a href="https://en.wikipedia.org/wiki/List_of_ECMAScript_engines" target="_blank" rel="noopener noreferrer">諸多</a>的實作。</p><p><a href="https://bellard.org/quickjs/" target="_blank" rel="noopener noreferrer">QuickJS</a> 是一個嬌小且可嵌入式的 Javascript 引擎。它支援 ES2020 規範，包含模組、非同步 Generator、Proxy、BigInt。它是以 C 語言撰寫並且沒有仰賴其他函式酷。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="編譯-cross-compiler">編譯 Cross Compiler<a class="hash-link" href="#編譯-cross-compiler" title="Direct link to heading">​</a></h2><p>已經有人準備了方便的工具 <a href="https://github.com/richfelker/musl-cross-make" target="_blank" rel="noopener noreferrer">musl-cross-make</a> 讓我們能簡單的製作交叉編譯器。</p><p>首先下載這個 repo：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone git@github.com:richfelker/musl-cross-make.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> musl-cross-make</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>新增 <code>config.mak</code> 檔案：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> config.mak</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>加入以下內容：</p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">TARGET = arm-linux-musleabihf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COMMON_CONFIG += CFLAGS=&quot;-g0 -Os&quot; CXXFLAGS=&quot;-g0 -Os&quot; LDFLAGS=&quot;-s&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GCC_CONFIG += --with-arch=armv6 --with-mode=arm --with-fpu=vfp</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>執行編譯：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> -j </span><span class="token variable" style="color:#36acaa">${nproc}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>安裝（輸出執行檔），預設會輸出到專案目錄下的 <code>output/</code> 資料夾：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>複製到 <code>home</code></p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">touch</span><span class="token plain"> ~/.musl-cross-make</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> output/* ~/.musl-cross-make/.</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>把環境變數加到 <code>.bashrc</code></p><div class="language-bash codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-bash codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">MUSL_CROSS_INSTALL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string environment constant" style="color:#36acaa">$HOME</span><span class="token string" style="color:#e3116c">/.musl-cross-make&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable environment constant" style="color:#36acaa">PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$MUSL_CROSS_INSTALL</span><span class="token string" style="color:#e3116c">/bin:</span><span class="token string environment constant" style="color:#36acaa">$PATH</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="編譯-quickjs">編譯 QuickJs<a class="hash-link" href="#編譯-quickjs" title="Direct link to heading">​</a></h2><p>下載 quickjs</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/bellard/quickjs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> quickjs</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>需要更動 <code>Makefile</code> 的一些內容：</p><p>新增 <code>CROSS_PREFIX=arm-linux-musleabihf-</code></p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">  CROSS_PREFIX=arm-linux-musleabihf-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  HOST_CC=gcc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  CC=$(CROSS_PREFIX)gcc</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">LIBS+=-ldl -lpthread          #找到這行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LIBS+=-ldl -lpthread -latomic #增加參數</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接著跑編譯：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">make</span><span class="token plain"> -j </span><span class="token variable" style="color:#36acaa">${nproc}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>檢查編譯結果是不是符合我們的目標：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> qjs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">qjs: ELF </span><span class="token number" style="color:#36acaa">32</span><span class="token plain">-bit LSB executable, ARM, EABI5 version </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SYSV</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">, dynamically linked, interpreter /lib/ld-musl-armhf.so.1, with debug_info, not stripped</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_E7b_"></a><br>
<!-- -->Wei Ji以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/3-ds">3ds</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/javascript">javascript</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/cross-compilation">cross compilation</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/quickjs">quickjs</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 交叉編譯 QuickJs 筆記" href="/blog/2022-11-29_3ds_cross_compilation_note"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2022-11-25_3ds_hack_note">3DS 刷機筆記</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-11-25T00:00:00.000Z" itemprop="datePublished">November 25, 2022</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>關於刷機流程，已經有非常詳盡的<a href="https://3ds.hacks.guide/zh_TW/get-started.html" target="_blank" rel="noopener noreferrer">教學</a>，並且操作細節跟跟當前 3DS 版本或是機型會有一些落差， 繁瑣過得流程我就不在本文一一介紹。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="刷-cfw-custom-firmware">刷 CFW (Custom firmware)<a class="hash-link" href="#刷-cfw-custom-firmware" title="Direct link to heading">​</a></h2><p>不論型號，第一步就是刷 CFW，如此一來我們就能透過 CFW 作為 bootloader 去載入其他 bootloader 程式。</p><p>根據不同的系統版本，能夠利用的漏洞會有所差異，而本人持有的 3DS 處於 5.x.x 版的狀態，因此選擇 <a href="https://3ds.hacks.guide/zh_TW/installing-boot9strap-(soundhax)" target="_blank" rel="noopener noreferrer">soundhax</a> 來安裝 <a href="#boot9strap">boot9strap</a>。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="luma3ds">Luma3DS<a class="hash-link" href="#luma3ds" title="Direct link to heading">​</a></h2><p>Luma3DS 是一個系統補丁，允許使用者獲得更多權限或功能，並且能夠安裝非官方的 3DS 應用程式。</p><p>並且它能夠進行 chainload，也就是 boot9strap 引導到 Luma3DS；Luma3DS 再引導到其他韌體，如：Linux。</p><p>在「<a href="https://3ds.hacks.guide/zh_TW/finalizing-setup" target="_blank" rel="noopener noreferrer">完成安裝</a>」的步驟中，包含了安裝 Luma3DS、更新系統、安裝第三方應用程式等操作。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="名詞註解">名詞註解<a class="hash-link" href="#名詞註解" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="boot9strap">boot9strap<a class="hash-link" href="#boot9strap" title="Direct link to heading">​</a></h3><p>boot9strap 是一個漏洞利用工具，效果是能夠使 3DS 載入並執行第三方的程式。</p><p>Boot9 (ARM9 BootROM) 是任天堂在晶片內燒錄的韌體，它會對載入的韌體進行加密驗證，來確保韌體來自任天堂官方，然而這個算法存在漏洞，允許第三方韌體欺騙 BootROM 並被載入到 3DS 中執行獲得控制權。該漏洞由 derrekr 在 <a href="#33C3">33C3</a> 發表<sup id="fnref-33c3-derrekr-9a8f08"><a href="#fn-33c3-derrekr-9a8f08" class="footnote-ref">33C3-derrekr</a></sup>。 網路上有<a href="http://www.databusworld.cn/9963.html" target="_blank" rel="noopener noreferrer">中文的資料</a>對漏洞的具體技術細節做更進一步的解釋，有興趣的朋友可以參考看看。</p><p>並且更進一步的 boot9strap 透過 NDMA 漏洞對受保護的 Boot9 記憶體位址寫入資料，從而執行其他程式<sup id="fnref-boot9strap-hack-9a8f08"><a href="#fn-boot9strap-hack-9a8f08" class="footnote-ref">boot9strap-hack</a></sup>。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="33c3">33C3<a class="hash-link" href="#33c3" title="Direct link to heading">​</a></h3><p>全名是 「The 33rd Chaos Communication Congress」，總之就是一個非常大的駭客年會。<sup id="fnref-33c3-intro-9a8f08"><a href="#fn-33c3-intro-9a8f08" class="footnote-ref">33C3-intro</a></sup></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="ndma-dsi-new-dma">NDMA (DSi New DMA)<a class="hash-link" href="#ndma-dsi-new-dma" title="Direct link to heading">​</a></h3><p>暫存器的名稱。<sup id="fnref-ndma-1-9a8f08"><a href="#fn-ndma-1-9a8f08" class="footnote-ref">ndma-1</a></sup><sup id="fnref-dma_registers-9a8f08"><a href="#fn-dma_registers-9a8f08" class="footnote-ref">DMA_registers</a></sup></p><div class="footnotes"><hr><ol><li id="fn-33c3-derrekr-9a8f08">Nintendo Hacking 2016 - Game Over 33C3. derrekr. Retrieved 2022-11-25, from <a href="https://derrekr.github.io/3ds/33c3" target="_blank" rel="noopener noreferrer">https://derrekr.github.io/3ds/33c3</a><a href="#fnref-33c3-derrekr-9a8f08" class="footnote-backref">↩</a></li><li id="fn-boot9strap-hack-9a8f08">sighax and boot9strap. SciresM. Retrieved 2022-11-25, from <a href="https://sciresm.github.io/33-and-a-half-c3/" target="_blank" rel="noopener noreferrer">https://sciresm.github.io/33-and-a-half-c3/</a><a href="#fnref-boot9strap-hack-9a8f08" class="footnote-backref">↩</a></li><li id="fn-33c3-intro-9a8f08">33c3 intro | Just for noting. (n.d.). Retrieved 2022-11-25, from <a href="https://blog.m157q.tw/posts/2016/12/27/33c3-0/" target="_blank" rel="noopener noreferrer">https://blog.m157q.tw/posts/2016/12/27/33c3-0/</a><a href="#fnref-33c3-intro-9a8f08" class="footnote-backref">↩</a></li><li id="fn-ndma-1-9a8f08">GBATEK - GBA/NDS Technical Info. (n.d.). Retrieved 2022-11-25, from <a href="https://problemkaputt.de/gbatek.htm#dsinewdmandma" target="_blank" rel="noopener noreferrer">https://problemkaputt.de/gbatek.htm#dsinewdmandma</a><a href="#fnref-ndma-1-9a8f08" class="footnote-backref">↩</a></li><li id="fn-dma_registers-9a8f08">Super NES Programming/DMA tutorial - Wikibooks, open books for an open world. (n.d.). Retrieved 2022-11-25, from <a href="https://en.wikibooks.org/wiki/Super_NES_Programming/DMA_tutorial#DMA_registers" target="_blank" rel="noopener noreferrer">https://en.wikibooks.org/wiki/Super_NES_Programming/DMA_tutorial#DMA_registers</a><a href="#fnref-dma_registers-9a8f08" class="footnote-backref">↩</a></li></ol></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/3-ds">3ds</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 3DS 刷機筆記" href="/blog/2022-11-25_3ds_hack_note"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2022-11-25_3ds_linux_note">3DS 刷 Linux 筆記</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2022-11-25T00:00:00.000Z" itemprop="datePublished">November 25, 2022</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mojV" id="刷-linux">刷 Linux<a class="hash-link" href="#刷-linux" title="Direct link to heading">​</a></h2><p>如果已經刷完 CFW，並且安裝 Luma3DS 的話，在 3DS 上跑起來並不會太困難，只要照著<a href="https://www.gamebrew.org/wiki/Linux_for_3DS" target="_blank" rel="noopener noreferrer">指示</a>下載檔案並放到 SD 卡內，接著從 Luma3DS 的 ChainLoader 開機就能成功進入 Linux 了。使用者為 <code>root</code> ，密碼為 <code>toor</code> 。</p><p>然而這個 Linux 的檔案系統是跑在 Ram Disk 上，並且預設不會掛載記憶卡，因此在系統內進行任何修改在開機之後都會消失。要把檔案弄進去的方法有兩種：</p><ol><li>將檔案放到 SD 卡內，並掛載 <code>/dev/vda1</code></li><li>將檔案放到開機映像檔 <code>zImage</code> 內</li></ol><p>其實單論我的目的是在 Linux 跑一個 Jvascript 程式，大可直接用掛載的方式處理，但是使用 3DS Linux 的觸控板打指令真的是一件頗麻煩的事情（包含掛載指令），如果可以預載並自動執行一些腳本免除我手動輸入的步驟是再好不過了。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="製作開機映像檔">製作開機映像檔<a class="hash-link" href="#製作開機映像檔" title="Direct link to heading">​</a></h2><p>在處理自動掛載以前，我們要知道如何把東西放進 <code>zImage</code> 內，這過程涉及兩個步驟：</p><ol><li>產生 <code>rootfs.cpio.gz</code></li><li>製作 <code>zImage</code></li></ol><h3 class="anchor anchorWithStickyNavbar_mojV" id="產生-rootfscpiogz">產生 <code>rootfs.cpio.gz</code><a class="hash-link" href="#產生-rootfscpiogz" title="Direct link to heading">​</a></h3><p>cpio 是 UNIX 作業系統的一個檔案備份程式及檔案格式<sup id="fnref-cpio-intro-b62f93"><a href="#fn-cpio-intro-b62f93" class="footnote-ref">cpio-intro</a></sup>。cpio 是一個比較古老的備份命令，也是用於磁帶機備份的工具，雖然如此現在許多時侯仍然需要使用這命令，例如製作系統內存映像檔時等。像是系統映像檔通常位於 /boot 中，文件名以 initrd 開頭。<sup id="fnref-cpio-command-b62f93"><a href="#fn-cpio-command-b62f93" class="footnote-ref">cpio-command</a></sup></p><p>因為它是基於磁帶的備份工具，因此無法直接替換掉該檔案裡面的特定文件，必須要把整個 cpio 解包進行編輯後再包回去。</p><p><a href="https://github.com/linux-3ds" target="_blank" rel="noopener noreferrer">linux-3ds</a> 的專案有提供一個樣板可以直接下載：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">wget</span><span class="token plain"> https://github.com/linux-3ds/buildroot/releases/download/latest/rootfs.cpio.gz</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或是你也可以從 buildroot 自己 build ，Buildroot 是一個可高度客製化的嵌入式 Linux 映像檔生成工具。Buildroot很強大，也很容易上手使用。<sup id="fnref-buildroot-intro-b62f93"><a href="#fn-buildroot-intro-b62f93" class="footnote-ref">Buildroot-intro</a></sup> Linux 3DS 專案下有一個已經與先準備好相關設定的 <a href="https://github.com/linux-3ds/buildroot" target="_blank" rel="noopener noreferrer">buildroot fork</a>，照著<a href="https://github.com/linux-3ds/buildroot/wiki" target="_blank" rel="noopener noreferrer">指示</a>做一樣很快就能生成 <code>cpio</code> 檔了。</p><p>cpio 作為 initrd 的格式，而 initrd 的英文含義是 boot loader initialized RAM disk，就是由 boot loader 初始化的 RAM Disk。在 linux 核心啟動前， boot loader 會將儲存介質中的 initrd 檔案載入到記憶體，核心啟動時會在訪問真正的根檔案系統前先訪問該記憶體中的 initrd 檔案系統。在 boot loader 組態了 initrd 的情況下，核心啟動被分成了兩個階段，第一階段先執行 initrd檔案系統中的&quot;某個檔案&quot;，完成載入驅動模組等任務，第二階段才會執行真正的根檔案系統中的 /sbin/init 處理程序。<sup id="fnref-initrd-b62f93"><a href="#fn-initrd-b62f93" class="footnote-ref">initrd</a></sup></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="編輯-cpio-檔">編輯 <code>cpio</code> 檔<a class="hash-link" href="#編輯-cpio-檔" title="Direct link to heading">​</a></h3><p>我寫了一個小腳本來處理解包、覆蓋、包回去的步驟，
只要把檔案放在 <code>original/rootfs.cpio</code>，
要覆蓋的檔案樹放在 <code>override/</code> 下。</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">EXTRACT_TEMPD</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">mktemp -d</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">OUTPUT_TEMPD</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">mktemp -d</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">WORK_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable builtin class-name" style="color:#36acaa">pwd</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$EXTRACT_TEMPD</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token file-descriptor important">&amp;2</span><span class="token plain"> </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Failed to create temp directory&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> Extract Path: </span><span class="token variable" style="color:#36acaa">${EXTRACT_TEMPD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> Output Path: </span><span class="token variable" style="color:#36acaa">${OUTPUT_TEMPD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Extract and Archive again, /dev/console would missing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${EXTRACT_TEMPD}</span><span class="token plain">/root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${EXTRACT_TEMPD}</span><span class="token plain">/root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cpio -idv </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${WORK_PATH}</span><span class="token string" style="color:#e3116c">/original/rootfs.cpio&quot;</span><span class="token plain"> </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${EXTRACT_TEMPD}</span><span class="token plain">/log.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rf </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${WORK_PATH}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain">/override/* ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#find . &gt; ${OUTPUT_TEMPD}/log-1.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> cpio -ov -H newc </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${OUTPUT_TEMPD}</span><span class="token plain">/rootfs.cpio </span><span class="token operator file-descriptor important" style="color:#393A34">2</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${OUTPUT_TEMPD}</span><span class="token plain">/log.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${OUTPUT_TEMPD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">gzip</span><span class="token plain"> -c rootfs.cpio </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> rootfs.cpio.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Normal-User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -R </span><span class="token variable" style="color:#36acaa">${OUTPUT_TEMPD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chgrp</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Normal-User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -R </span><span class="token variable" style="color:#36acaa">${OUTPUT_TEMPD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Normal-User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -R </span><span class="token variable" style="color:#36acaa">${EXTRACT_TEMPD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chgrp</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Normal-User</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> -R </span><span class="token variable" style="color:#36acaa">${EXTRACT_TEMPD}</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>比如，編譯出來的程式會仰賴 <code>/usr/lib/ld-linux-armhf.so.3</code>，但是 linux 3ds 提供的 cpio 並沒有這個路徑，就可以在 <code>override/</code> 下加入：</p><div class="codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-text codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">./usr/lib:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ld-linux-armhf.so.3 -&gt; ../lib/libc.so</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>記得執行操作的時候要有 root 權限，因為 <code>rootfs.cpio</code> 裡面有些檔案類型需要 root 才能新增。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="製作-zimage">製作 <code>zImage</code><a class="hash-link" href="#製作-zimage" title="Direct link to heading">​</a></h3><p>照著<a href="https://github.com/linux-3ds/linux/wiki" target="_blank" rel="noopener noreferrer">指引</a>安裝仰賴的函式庫、clone repo、把 <code>rootfs.cpio.gz</code> 放到專案目錄下，接著執行：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">$ $ </span><span class="token assign-left variable" style="color:#36acaa">ARCH</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm </span><span class="token assign-left variable" style="color:#36acaa">CROSS_COMPILE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">arm-linux-gnueabi- </span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> -j</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">nproc</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"> nintendo3ds_defconfig all</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>它就會 build 出包含 <code>zImage</code> 在內，在 3DS 上跑起 Linux 需要的一些檔案。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="自動掛載">自動掛載<a class="hash-link" href="#自動掛載" title="Direct link to heading">​</a></h2><p>這個 Linux 並沒有諸如 systemd, rc.local 之類的高級玩意，倒是有這些東西：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> /etc/init.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rcK  rcS  S01syslogd  S02klogd  S02sysctl</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>/etc/init.d/rcS</code> 承擔 start 的功能 <code>/etc/init.d/rcK</code> 承擔 kill(stop) 的功能，會依序執行 <code>/etc/init.d/rcS/S(\d\d.*)</code>，很好理解。</p><p>於是我就做了一個 <code>/etc/init.d/S03sdmnt</code> 來自動掛載 SD 卡：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$1</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">start</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mount SD card&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Mount SD card</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /mnt/sdcard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mount</span><span class="token plain"> /dev/vda1 /mnt/sdcard</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Unmount SD card&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Todo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Usage: /etc/init.d/S03sdmnt {start|stop}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">esac</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="小結">小結<a class="hash-link" href="#小結" title="Direct link to heading">​</a></h2><p>研究到這裡，會發現 Chain Loading<sup id="fnref-chain_loading-b62f93"><a href="#fn-chain_loading-b62f93" class="footnote-ref">Chain_loading</a></sup> 的影子非常明顯：
刷進去的 boot9strap 會 boot Luma3DS；
Luma3DS 會從 <code>luma/payloads/</code> boot <code>firm_linux_loader.firm</code>；
<code>firm_linux_loader.firm</code> 再去 boot <code>arm9linuxfw.bin</code>；
<code>arm9linuxfw.bin</code> 再用 <code>zImage</code> 開機（？）</p><hr><p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_E7b_"></a><br>
<!-- -->Wei Ji以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p><div class="footnotes"><hr><ol><li id="fn-cpio-intro-b62f93">Cpio - 維基百科，自由的百科全書. Retrieved 2022-11-25, from <a href="https://zh.wikipedia.org/zh-tw/Cpio" target="_blank" rel="noopener noreferrer">https://zh.wikipedia.org/zh-tw/Cpio</a><a href="#fnref-cpio-intro-b62f93" class="footnote-backref">↩</a></li><li id="fn-cpio-command-b62f93">會紅的 Linux 筆記: cpio指令. Retrieved 2022-11-25, from <a href="http://canred.blogspot.com/2013/04/cpio.html" target="_blank" rel="noopener noreferrer">http://canred.blogspot.com/2013/04/cpio.html</a><a href="#fnref-cpio-command-b62f93" class="footnote-backref">↩</a></li><li id="fn-buildroot-intro-b62f93">精通嵌入式Linux 第三章：Buildroot – LotLab. Retrieved 2022-11-25, from <a href="https://www.lotlab.org/2020/04/08/mastering-embedded-linux-part-3-buildroot/" target="_blank" rel="noopener noreferrer">https://www.lotlab.org/2020/04/08/mastering-embedded-linux-part-3-buildroot/</a><a href="#fnref-buildroot-intro-b62f93" class="footnote-backref">↩</a></li><li id="fn-initrd-b62f93">【Linux技術】Linux核心Initrd機制解析，核心更新步驟，grub組態說明-阿里雲開發者社區. Retrieved 2022-11-25, from <a href="https://developer.aliyun.com/article/445357" target="_blank" rel="noopener noreferrer">https://developer.aliyun.com/article/445357</a><a href="#fnref-initrd-b62f93" class="footnote-backref">↩</a></li><li id="fn-chain_loading-b62f93">Chain loading - Wikipedia. Retrieved 2022-11-25, from <a href="https://en.wikipedia.org/wiki/Chain_loading" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Chain_loading</a><a href="#fnref-chain_loading-b62f93" class="footnote-backref">↩</a></li></ol></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/3-ds">3ds</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 3DS 刷 Linux 筆記" href="/blog/2022-11-25_3ds_linux_note"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2021-12-04_from-goxel-to-blender">從 Goxel 到 Blender (Voxel art → 綁人物模型骨架)</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-12-04T00:00:00.000Z" itemprop="datePublished">December 4, 2021</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mojV" id="緣起-aka-廢話">緣起 （aka 廢話）<a class="hash-link" href="#緣起-aka-廢話" title="Direct link to heading">​</a></h2><p><em>（這一段在講整個學習過程的因果關係，只想看步驟的人可以直接跳到下一個段落）</em></p><p>前一陣子在尋找合適的方案來儲存 Voxel terrain 的資料，所以花了一點時間在琢磨 voxel 的檔案格式。</p><p>接著想想，或許我該把 side project 的風格都統一成 Voxel ，這樣彼此之間就可以共用技術棧，而同時手邊還有一個 FPS 相關的專案，就想：</p><blockquote><p>去找找看免費的 Voxel 槍模型匯進遊戲內看效果怎樣。</p></blockquote><p>就跑去 Github 翻 Ace Of Spades 的開源專案，然後發現它使用的模型檔案是 <code>.kv6</code> ，全名是 &quot;Ken Silverman&#x27;s version 6 model file&quot; 如果順著這條線索會找到一個頗有年代感的網頁<sup id="fnref-ken-silverman-web-1c7d1b"><a href="#fn-ken-silverman-web-1c7d1b" class="footnote-ref">Ken-Silverman-web</a></sup>。</p><p>在找這個檔案相關資料的過程中，會找到一堆 voxel 編輯器。接著我想：</p><blockquote><p>既然都有編輯器了，我還用現成的幹麻，自己畫啊？</p></blockquote><p>於是找到了：</p><ul><li>MagicaVoxel</li><li>VoxelShop</li><li>Goxel</li></ul><p>MagicaVoxel 雖然是免費的但是沒有開源；VoxelShop 則是用 Java 寫的，於是最後我就使用了 Goxel。</p><p>而在找軟體的過程想到，最近看到同事在用看起來很炫的 PureRef，但是它沒有開源，最後找了個 BeeRef 來用。</p><p><img loading="lazy" src="/assets/images/01_beeref-e1bcee723ce0e5b8c3f1b735f38f2325.webp" width="1350" height="787" class="img_E7b_"></p><p>不過我想畫的角色有點複雜，一開始還是從簡單的開始好了，於是我就試著一邊摸索一邊畫我的 Minecraft avatar。</p><p><img loading="lazy" src="/assets/images/02_minecraft-avatar-1ef9398bdec4b2edfc90ee292f74f99d.webp" width="1440" height="849" class="img_E7b_"></p><p>接著要輸出通用的 3D 檔案格式，我試著匯出幾個格式到 blender 但是會有幾個問題：</p><ul><li>貼圖遺失</li><li>每個 voxel 由 2 個三角面構成；沒有 optimized，而且 mesh 沒有封閉</li></ul><p>我想起在查資料的過程，有個 github repo 提供免費的 voxel 模型，並且作者有提到自己是怎麼輸出的。<sup id="fnref-mini-mikes-metro-minis-1c7d1b"><a href="#fn-mini-mikes-metro-minis-1c7d1b" class="footnote-ref">Mini-Mikes-Metro-Minis</a></sup></p><p>於是我又載了 VoxelShop 為了做轉檔，最後成功匯進 Blender ，下一步是綁骨架；試了一個晚上還是沒能設定好權重，剛好有在 FB 看到 Blender 相關的線下小聚，就報名了。在小聚上遇到野生路人指點與陪伴，終於學會正確的流程，但是權重還是沒畫好。</p><p>隔天剛好有遊戲開發相關的小聚，原本是不打算去的（前一個禮拜才去過），但是到家後發現主辦方貼文表示：「人太少啦～人來即可入場」。</p><blockquote><p>去一趟吧。</p></blockquote><p>到了會場我就默默的打開筆電繼續沒完成的調權重，不過還是不太熟悉要怎麼操作，沒辦法作到細緻的操作，直到一個野生的路人指點才豁然開朗。</p><p><img loading="lazy" src="/assets/images/03_result-fea8d548994c443853a5094dabd7d002.gif" width="1024" height="640" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="製作-voxel">製作 Voxel<a class="hash-link" href="#製作-voxel" title="Direct link to heading">​</a></h2><p>個人是習慣使用 Goxel 作圖，輸出成 <code>.vox</code>：</p><p><img loading="lazy" src="data:image/webp;base64,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" width="257" height="349" class="img_E7b_"></p><p>再匯入 VoxelShop ，只是圖層資訊會遺失，匯入後要重建圖層。</p><p>當然也可以直接在 VoxelShop 完成繪圖，包含調色盤、對稱繪圖等功能比 Goxel 更完整。</p><p>題外話，<code>.vox</code> 檔案的規格是公開的<sup id="fnref-vox-spec-1c7d1b"><a href="#fn-vox-spec-1c7d1b" class="footnote-ref">vox-spec</a></sup>，完全可以照它的格式實做在其他軟體上。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="輸出-collada-dae">輸出 Collada (.dae)<a class="hash-link" href="#輸出-collada-dae" title="Direct link to heading">​</a></h2><p>到<a href="https://github.com/simlu/voxelshop/releases" target="_blank" rel="noopener noreferrer">這裡</a>可以下載 VoxelShop，執行方式如下：</p><div class="language-shell codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-shell codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token plain">java -jar voxelshop-start.jar</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>輸出的時候 Object Seoaration 記得選 &quot;Per Layer&quot;， &quot;Merged&quot; 會把所有圖層合併：</p><p><img loading="lazy" src="/assets/images/05_VoxelShop-c2f783b71059b71425041d315ceb83d7.webp" width="634" height="863" class="img_E7b_"></p><p>完成輸出後，你會得到兩個檔案：</p><ul><li><code>&lt;name&gt;_texture0.png</code></li><li><code>&lt;name&gt;.dae</code></li></ul><p>其中 dae 檔中對於貼圖路徑的描述在 blender 匯入的時候會有問題，至少在這個環境下是有問題的：</p><ul><li>Linux (Ubuntu)</li><li>VoxelShop 1.8.26</li><li>Blender 2.82</li></ul><p>要把 dae 檔案中的：</p><div class="language-xml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-xml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init_from</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">file://test_texture0.png</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init_from</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>改成（檔名請依實際情況做修改）：</p><div class="language-xml codeBlockContainer_MPoW theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_B9tL"><pre tabindex="0" class="prism-code language-xml codeBlock__0OG thin-scrollbar"><code class="codeBlockLines_gEuF"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">init_from</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">./test_texture0.png</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">init_from</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_hRr1"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="blender-time">Blender Time<a class="hash-link" href="#blender-time" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="改變貼圖模式">改變貼圖模式<a class="hash-link" href="#改變貼圖模式" title="Direct link to heading">​</a></h3><p>匯入模型後會發現貼圖糊糊的：</p><p><img loading="lazy" src="data:image/webp;base64,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" width="536" height="528" class="img_E7b_"></p><p>這需要修改貼圖的內插模式 (texture interpolation)，選擇模型後到材質的工具選項，展開 Base Color ，把 <code>Linear</code> 改成 <code>Closest</code>：</p><p><img loading="lazy" src="/assets/images/07_blender-4c22c448838375f1b2d1c96ec77625b8.webp" width="330" height="528" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="重新命名-uv-map">重新命名 UV map<a class="hash-link" href="#重新命名-uv-map" title="Direct link to heading">​</a></h3><p>因為需要把拆件的模型合併成單一物件才能綁骨架，但是直接進行合併的話會造成 UV map 設定損壞（貼圖失效），在合併之前要先把 UV map 命名成相同的名稱。</p><p>▼依序點開不同的部件然後修改成相同的名稱</p><p><img loading="lazy" src="/assets/images/08_blender-2708ea984f3ac3a5573a6c83e77e3e31.webp" width="1440" height="864" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="join-模型">Join 模型<a class="hash-link" href="#join-模型" title="Direct link to heading">​</a></h3><p>▼匡選所有要合併的部件後，按下滑鼠右鍵之後選擇 &quot;Join&quot;</p><p><img loading="lazy" src="/assets/images/09_blender-c37061d1bc6cb03f6b1b611c8d7ab87f.webp" width="646" height="634" class="img_E7b_"></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="綁骨架">綁骨架<a class="hash-link" href="#綁骨架" title="Direct link to heading">​</a></h3><p>▼<code>Shift + A</code> 叫出選單後選擇 Armature</p><p><img loading="lazy" src="data:image/webp;base64,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" width="291" height="435" class="img_E7b_"></p><p>▼開啟 <code>In Front</code> 我們才能看到被模型包住的骨架</p><p><img loading="lazy" src="/assets/images/11_blender-13321745fa362b01a79d8207135dcf9e.webp" width="1336" height="730" class="img_E7b_"></p><p>▼在選擇 Armature 時的編輯模式，按 <code>Shift + A</code> 可以繼續新增骨架</p><p><img loading="lazy" src="/assets/images/12_blender-bd8e5884df6345a4bda920d3e0cef97b.webp" width="1440" height="754" class="img_E7b_"></p><p>▼持續新增、調整位置的動作直到完成骨架</p><p><img loading="lazy" src="/assets/images/13_blender-c12cfd8a8dec6ea274f4a072e23c08a1.webp" width="1440" height="779" class="img_E7b_"></p><p>▼記得要幫骨架命名，不然等等調權重時候會分不清楚是在調哪個骨架的權重</p><p><img loading="lazy" src="/assets/images/14_blender-8fa6b5f5f209832b3b7c6137ec142d21.webp" width="1440" height="759" class="img_E7b_"></p><p>▼接著先用滑鼠選擇人物模型，按住 <code>Shift</code> 再用滑鼠選擇骨架，然後按下 <code>Ctrl + P</code> 會跳出選單</p><p><img loading="lazy" src="data:image/webp;base64,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" width="463" height="241" class="img_E7b_"></p><p>一般的骨架教學會選擇 &quot;With Automatic Weights&quot; 即自動權重，不過因為 Voxel 的模型所需要的權重模式和自動權重賦予的模式不相同，這裡我們選 &quot;With Empty Groups&quot; 就好，選了自動權重也沒關係，就是要把多餘的權重「塗掉」有點麻煩。</p><p>▼接著我們選擇模型後進入權重編輯模式</p><p><img loading="lazy" src="/assets/images/16_blender-22eda55bf12ef56da9a66e72c68fbd33.webp" width="582" height="402" class="img_E7b_"></p><p><img loading="lazy" src="/assets/images/17_blender-2f157d388ce8c33c916565fc3519a9fa.webp" width="1440" height="767" class="img_E7b_"></p><p>▼在編輯權重之前記得從 「Vertex Groups」 選擇想要編輯的骨架</p><p><img loading="lazy" src="data:image/webp;base64,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" width="248" height="466" class="img_E7b_"></p><p>▼接著我們需要選定要編輯的區域，「塗權重」時候才不會影響到不想影響的頂點。</p><ol><li>進入面選擇模式</li><li>選擇一個三角面</li><li><code>Ctrl + L</code> 選擇所有相連的頂點</li></ol><p><img loading="lazy" src="/assets/images/19_blender-f4e77362a5fb038b817f9b20e0c51861.webp" width="1316" height="765" class="img_E7b_"></p><p>▼選擇筆刷模式後，選擇點編輯模式，接著拿筆刷對著頂點塗塗塗</p><p><img loading="lazy" src="/assets/images/20_blender-8406927166784099257f13dd93f608fe.webp" width="1166" height="749" class="img_E7b_"></p><p>▼設定完權重之後，骨架的綁定才算完成，接著只要控制骨架就能控制模型囉！</p><p><img loading="lazy" src="/assets/images/03_result-fea8d548994c443853a5094dabd7d002.gif" width="1024" height="640" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="後記aka-廢話-part-2">後記（aka 廢話 part 2）<a class="hash-link" href="#後記aka-廢話-part-2" title="Direct link to heading">​</a></h2><p>除了 Warzone2100, FreeCiv 這種被文章盤點開源遊戲時一定會收錄的「大作」之外，我平時也會在 Github 上逛逛看有沒有不知名但是有趣的開源遊戲，撇除程式面的不完整，大部分作品就算具備相對完整的遊戲機制但是其美術方面通常都慘不忍睹，或是其素材的部份並沒有給出開源的 license。</p><p>舉例來說這是 Javscript 圈最大型的 Voxel 專案 (つд⊂)：</p><p><img loading="lazy" alt="https://miro.medium.com/max/5752/1*cuXvo8U9Vj0VILU9yXwYew.png" src="/assets/images/21_voxel-39e4edbfc570dd4279153bec92b9f5c6.webp" width="2876" height="2144" class="img_E7b_"></p><p>當然這樣比較有失公允，畢竟開源圈也有 0 A.D. 這種優質作品。</p><p>而另外一個面向是素材平台，opengameart 上的素材不論是質還是量都比不上 itch 這類還是以上架為核心訴求的平台。</p><p>當然這種比較基本上是滷蛋比雞腿，開源圈跟獨立遊戲圈的創作者（一併稱呼開發者跟媒體創作者）其根源就不太一樣。獨立遊戲的創作者的終極目標通常是上架獲利，對於 license 的開放與重視程度也比不上開源圈的創作者，itch 上就有很多「免費素材」但是上傳者並沒有明確的聲明 license。</p><p>而開源圈 (github) 上許多作品都是工程師拿來練手的 side project，頂多就是進階版的「Hello World」，完成度當然不能跟本就衝著遊戲開發去獨立創作者相提並論。</p><p>雖然自己也會畫一些 pixel 素材用在專案上，但是我感興趣的題目類型還是 3D 的居多。</p><blockquote><p>希望我的 side project 有個好看一點的門面</p></blockquote><p>在這樣的心情下，試著去學習如何使用 blender 實現我的目的。</p><p>從產生動機到綁完骨架的時間順序大致如下：</p><blockquote><p>2021-11-27 找到畫 voxel 的開源軟體</p><p>2021-11-28 把人物生出來</p><p>2021-11-29 試著輸出成拆件的模型（有些軟體輸出面數很高，甚至不是封閉面）</p><p>2021-11-30 試著匯入 blender</p><p>2021-12-01 匯入 blender 試著綁骨架</p><p>2021-12-02 早上摸了一會還是不會調權重，畫面跟教學長得不一樣</p><p>2021-12-02 晚上參加 blender 小聚，解決模型合併跟 UV map 壞掉的問題（野生路人一起討論）</p><p>2021-12-03 晚上參加獨立開發小聚，解決不會畫權重的問題（野生路人指點）</p></blockquote><p>我都覺得自己在「speedrun 學習綁骨架」了 (°﹃°)</p><p>雖然本職是軟體工程師，不過畢竟本人不算真正意義上的零經驗者：</p><ul><li>有學過參數建模（俗稱工程建模）</li><li>做過 CS 1.6 地圖</li><li><del>在遊戲公司上班，可以從空氣中吸收美術同事的經驗值</del></li></ul><p>所以我想這個 Blender 學習曲線不能當作通例 XD</p><hr><p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_E7b_"></a><br>
<!-- -->Wei Ji以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p><div class="footnotes"><hr><ol><li id="fn-ken-silverman-web-1c7d1b">Ken Silverman&#x27;s Voxlap Page. (Ken Silverman). Retrieved 2021-12-10, from <a href="http://advsys.net/ken/voxlap.htm" target="_blank" rel="noopener noreferrer">http://advsys.net/ken/voxlap.htm</a><a href="#fnref-ken-silverman-web-1c7d1b" class="footnote-backref">↩</a></li><li id="fn-mini-mikes-metro-minis-1c7d1b">mikelovesrobots/mmmm. (Mike Judge). Retrieved 2021-12-10, from <a href="https://github.com/mikelovesrobots/mmmm" target="_blank" rel="noopener noreferrer">https://github.com/mikelovesrobots/mmmm</a><a href="#fnref-mini-mikes-metro-minis-1c7d1b" class="footnote-backref">↩</a></li><li id="fn-vox-spec-1c7d1b">voxel-model. (ephtracy). Retrieved 2021-12-10, from <a href="https://github.com/ephtracy/voxel-model/blob/master/MagicaVoxel-file-format-vox.txt" target="_blank" rel="noopener noreferrer">https://github.com/ephtracy/voxel-model/blob/master/MagicaVoxel-file-format-vox.txt</a><a href="#fnref-vox-spec-1c7d1b" class="footnote-backref">↩</a></li></ol></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/3-d">3d</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/goxel">goxel</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/blender">blender</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 從 Goxel 到 Blender (Voxel art → 綁人物模型骨架)" href="/blog/2021-12-04_from-goxel-to-blender"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2021-11-21_the-feeling-been-hacked">前一晚參加 HackMD 小聚，隔天早上就發現公司伺服器被 hack</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-11-21T00:00:00.000Z" itemprop="datePublished">November 21, 2021</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p><img loading="lazy" src="/assets/images/stickers-a98d68b463dffd56058ad4c77c0be8b4.webp" width="4160" height="3120" class="img_E7b_"></p><p>好吧，這兩件事完全是獨立事件，但是放在一起講就多了幾分戲劇性，而且 24 小時內解完兩個人生成就也是事實。</p><p>雖然稱不上資深、剋金或是忠實用戶，但是<del>憑借著我對 Markdown 的信仰</del>混入了 HackMD 的線下小聚。在自我介紹中，發現 16 個與會者包含我在內就有 3 個 Linux 使用者，這種同溫層空氣不禁讓我舒適了起來（？）</p><p>而在其他人自我介紹的過程中，發現有人提到用 Markdown 紀錄法規，這對我而言無疑是一個千載難逢的機會，在主議程結束後的自由時間我當然湊了過去聊天，並展示我寫的<a href="https://github.com/FlySkyPie/markdown-regulation-editor" target="_blank" rel="noopener noreferrer">簡易 Markdown 法規編輯器</a>，現場反應熱烈的程度是出乎我意料之外的，連開發團隊的工程師都脫口而出「哇！好漂亮」；當然我知道這個轉換過程是基於十分有限的條件，也就是十分可控的，跟他實際上遇到的輸出條件有著巨大的落差，但是聽到稱讚還是很開心。那天晚上我因為基底現實的萍水相逢而獲得了 3 顆 Github 星星。</p><p>這個 Markdown 撰寫的法規轉換成 ODT 的實作我在 2020 年二月的時候就以 PHP <a href="https://github.com/FlySkyPie/regulation-odt" target="_blank" rel="noopener noreferrer">完成</a>了，無奈當時並沒有能力架設一個穩定的伺服器與一個完整的服務來調用這項功能。到了 2021 年我用 Javascript 重寫了一遍、給它一個 GUI 並在五月份的時候用 Github Page 的服務架設靜態網站。後來也在網路上以及幾次線下的技術性質小聚介紹這個 side project，大多數的反應當然是不明覺厲。畢竟對法規與 Markdown 都有點了解的人，應該可以想像這兩個東西的圈子幾乎不存在交集。因為在場的都是 Markdown 使用者（與相關開發者 XD），一群看官讀懂這麼一個小魔術值得驚奇的地方，以及被一個相對資深的工程師在面前翻 source code ，真的是一段很愉快的經驗。</p><p>當晚我興奮的幾乎難以入眠，不過劇本似乎尚未就此結束，24 小時之內還有另一段故事等著我。</p><p>「I need your help.」一早老闆就晃到我的座位交待一個高優先級的任務：我們用來管理客戶程式碼的版控伺服器出了問題無法正常使用，要我排除故障，並提到他覺得是環境設定錯誤造成的。我對該服務有點陌生，又因為服務是由多個組件構成的，而老闆特別提到的錯誤訊息看起來是主服務無法和資料庫溝通，在簡單的閱讀入門文件之後就翻開資料庫相關的設定檔，不過乍看之下並沒有問題。</p><p>接著試著把包含伺服器和 service 在內的所有 status 都調出來看，發現系統資源被某個 process 佔用的異常，跟著關鍵字查到了一篇文章，是關於軟體漏洞的，文內也附上了被攻擊跡象的確認方式，於是我把伺服器的 logs 拉回本機，並寫了小腳本把關鍵的紀錄調出來。核對之後確認伺服器被攻擊的事實回報給老闆，但是他認為這只能證明有人嘗試攻擊，但是不見得是伺服器異常的原因。</p><p>於是我繼續試著找出製造 process 佔用系統資源的原因，最後發現伺服器各處都有病毒；從 Mirai、木馬到挖礦程式都有，最後回報是挖礦程式佔用系統資源，然後因為不知道攻擊者還動了什麼手腳，所以只能試著備份資料重灌系統。（畢竟不確定資料是不是也被感染了，相關 issue 中有苦主試過備份資料後還原系統問題並沒有消失）</p><p>從手上有限的資料、鎖定 CVE 編號、調閱 Log 排查、確認攻擊者手段到確認攻擊事實存在，對我而言是十分新鮮的體驗，並且就像冒險一般。</p><p>而這件事對我而言也有著特別的意義，如果 RPG 製作大師是引起我對程式設計興趣的火花的話，The Cuckoo&#x27;s Egg 這本書就是引導我進入 Linux 世界的麵包屑。這是一本關於柏克萊大學電腦被駭，作者抽絲剝繭與駭客進行一系列捉迷藏的故事，發生在中央伺服器跑著 UNIX、科學家需要用程式跑學術運算才會使用電腦的年代。我今天不是成為一個單純的開發者（一部分程式開發者的光譜並不在開源的世界內），是因為我走入 Linux 與開源的世界；而我走入 Linux 與開源的世界最初的一大動機就是來自於這本書。它對我的意義重大到在公共圖書館閱讀；我連書名都不記得的多年之後，因為一些緣故得知了書名後立刻買下一本二手書（我連所有畢業紀念冊都沒有留下，這本書是我少有的收藏品）。並且在那天，我以小規模的形式親身體驗了一次「伺服器被駭的感覺」。</p></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/life">life</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 前一晚參加 HackMD 小聚，隔天早上就發現公司伺服器被 hack" href="/blog/2021-11-21_the-feeling-been-hacked"><b>Read More</b></a></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="blogPostTitle_rzP5" itemprop="headline"><a itemprop="url" href="/blog/2021-11-14_RIFF_Inro">資源交換檔案格式 (RIFF) 介紹</a></h2><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-11-14T00:00:00.000Z" itemprop="datePublished">November 14, 2021</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_FlmR"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>資料的組成的基本結構是 &quot;Chunk&quot;，而 Chunk 分成三種：</p><ul><li>RIFF Chunk</li><li>List Chunk</li><li>Data Chunk</li></ul><p><img loading="lazy" alt="https://docs.microsoft.com/en-us/windows/win32/multimedia/images/mmio2.gif" src="data:image/gif;base64,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" width="414" height="369" class="img_E7b_"></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="格式">格式<a class="hash-link" href="#格式" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="chunk">Chunk<a class="hash-link" href="#chunk" title="Direct link to heading">​</a></h3><p>RIFF 格式中最小的資料單元，Chunk 定義上包含了三個（或四個）部份：</p><ul><li>ID (Chunk Type)<ul><li>這個 Chunk 的類型，除了 &quot;RIFF&quot; 和 &quot;List&quot; 可以另外定義不同的類型。</li></ul></li><li>Size<ul><li>這個 Chunk 的資料長度（Data &amp; Type 的長度，不包含填充字元）。</li><li>以  little-endian 儲存。</li><li>單位：位元組。</li></ul></li><li>Type<ul><li>只有 &quot;RIFF&quot; 和 &quot;List&quot; Chunk 有這個段落。</li><li>用來描述檔案或列表的類型。</li></ul></li><li>Data<ul><li>資料本體。</li><li>以 Word 為最小單元，也就是偶數個位元組。</li><li>如果資料為奇數位元組，在最後補上 1 byte 的 NULL 填充字元。</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="riff-chunk">RIFF Chunk<a class="hash-link" href="#riff-chunk" title="Direct link to heading">​</a></h3><p>一個 RIFF 檔案就是一個 RIFF Chunk 它可以包含零個或數個 Chunk。<sup id="fnref-riff-zero-or-more-48ccd5"><a href="#fn-riff-zero-or-more-48ccd5" class="footnote-ref">riff-zero-or-more</a></sup></p><ul><li>ID (Chunk Type)<ul><li>4 Bytes</li><li>內容為 <code>RIFF</code></li></ul></li><li>Size<ul><li>4 Bytes</li><li>資料大小，即整個檔案的大小扣掉檔案頭 (&quot;RIFF&quot;) 和這個欄位本身。</li><li>內容為 <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>−</mo><mn>8</mn></mrow><annotation encoding="application/x-tex">N-8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">8</span></span></span></span></span>，N 為整個檔案的大小。</li></ul></li><li>Type<ul><li>4 Bytes</li><li>用來描述檔案類型。</li><li>例如：<code>AVI</code> 或 <code>WAVE</code></li></ul></li><li>Data<ul><li>包含 Data Chunk 或是 List Chunk。</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="list-chunk">List Chunk<a class="hash-link" href="#list-chunk" title="Direct link to heading">​</a></h3><ul><li>ID (Chunk Type)<ul><li>4 Bytes</li><li>內容為 <code>List</code></li></ul></li><li>Size<ul><li>同 Chunk 描述。</li></ul></li><li>Type<ul><li>4 Bytes</li><li>用來描述列表類型。</li><li>例如：<code>INFO</code>。</li></ul></li><li>Data<ul><li>包含 Data Chunk。</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="data-chunk">Data Chunk<a class="hash-link" href="#data-chunk" title="Direct link to heading">​</a></h3><ul><li>ID (Chunk Type)<ul><li>4 Bytes</li><li>自訂內容。</li><li>例如：<code>fmt </code> 或 <code>data</code>。</li></ul></li><li>Size<ul><li>同 Chunk 描述。</li></ul></li><li>Data<ul><li>同 Chunk 描述。</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="riff-style">RIFF Style<a class="hash-link" href="#riff-style" title="Direct link to heading">​</a></h2><p>如果參考 RIFF 的 chunk 結構，但是沒有嚴謹的遵守規範，那麼這種檔案格式則稱為 &quot;RIFF Style&quot;。</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="小結">小結<a class="hash-link" href="#小結" title="Direct link to heading">​</a></h2><p>本文只是簡單的介紹 RIFF 的結構，具體的規格細節還是要依 spec 的為準。<sup id="fnref-spec-48ccd5"><a href="#fn-spec-48ccd5" class="footnote-ref">spec</a></sup></p><p>有一些技術細節就沒有照搬了，比如用 C 語言定義的資料類型跟結構；或是程式可以根據 ID 和 SIZE 欄，如果遇到不認識的 Chunk 類型可以直接跳過之類的。
<del>（其實只是懶得把整個 spec 仔細的看過）</del></p><hr><p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_E7b_"></a><br>
<!-- -->Wei Ji以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p><div class="footnotes"><hr><ol><li id="fn-riff-zero-or-more-48ccd5">Resource Interchange File Format (RIFF) - Win32 apps | Microsoft Docs.  Retrieved 2021-11-14, from <a href="https://docs.microsoft.com/en-us/windows/win32/xaudio2/resource-interchange-file-format--riff-" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/en-us/windows/win32/xaudio2/resource-interchange-file-format--riff-</a><a href="#fnref-riff-zero-or-more-48ccd5" class="footnote-backref">↩</a></li><li id="fn-spec-48ccd5">Multimedia Programming Interface
and Data Specifications 1.0. (IBM Corporation and Microsoft Corporation). Retrieved 2021-11-14, from <a href="https://www.aelius.com/njh/wavemetatools/doc/riffmci.pdf" target="_blank" rel="noopener noreferrer">https://www.aelius.com/njh/wavemetatools/doc/riffmci.pdf</a><a href="#fnref-spec-48ccd5" class="footnote-backref">↩</a></li></ol></div></div><footer class="row docusaurus-mt-lg"><div class="col col--9"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/learning-note">learning note</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/blog/tags/riff">RIFF</a></li></ul></div><div class="col text--right col--3"><a aria-label="Read more about 資源交換檔案格式 (RIFF) 介紹" href="/blog/2021-11-14_RIFF_Inro"><b>Read More</b></a></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/tags/learning-note/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 FlyPie (Wei Ji)</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ccc84e72.js"></script>
<script src="/assets/js/main.dc78284a.js"></script>
</body>
</html>
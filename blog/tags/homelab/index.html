<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">3 posts tagged with &quot;homelab&quot; | 工程屍 FlyPie 的異想世界</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://flyskypie.github.io/blog/tags/homelab"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:locale" content="zh_tw"><meta data-rh="true" property="og:title" content="3 posts tagged with &quot;homelab&quot; | 工程屍 FlyPie 的異想世界"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" property="og:image" content="https://raw.githubusercontent.com/FlySkyPie/flyskypie.github.io/main/blog/2025-04-23_my-homelab/img/00_cover.webp"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://flyskypie.github.io/blog/tags/homelab"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog/tags/homelab" hreflang="en"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog/tags/homelab" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="工程屍 FlyPie 的異想世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="工程屍 FlyPie 的異想世界 Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="工程屍 FlyPie 的異想世界 JSON Feed">




<link rel="alternate" type="application/rss+xml" href="/posts/rss.xml" title="工程屍 FlyPie 的異想世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/atom.xml" title="工程屍 FlyPie 的異想世界 Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4a9022c6.css">
<script src="/assets/js/runtime~main.ea7d72b0.js" defer="defer"></script>
<script src="/assets/js/main.c0c05e75.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_LBgp" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_RjML themedComponent--light_RyNI"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_RjML themedComponent--dark_ntqO"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/the-key-of-huanche/">專案文件</a><a class="navbar__item navbar__link" href="/blogs">數位手記</a><a class="navbar__item navbar__link" href="/posts">廢文雜談</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_s2nU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_DonJ colorModeToggle_KBLq"><button class="clean-btn toggleButton_qwn5 toggleButtonDisabled_tRn_" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_bYdl"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_D9Q4"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Cbrq"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_GUBX"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_UgN6 thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_PkUw margin-bottom--md">Recent posts</div><ul class="sidebarItemList_HFnO clean-list"><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-10-06_a-idea-about-using-tiddlywiki-as-llmstxt">一種人類友善 llms.txt 構想</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-07-05_harbor">OCI Image 本地鏡像站遷移之旅</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-04-23_my-homelab">我的 Homelab</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-03-15_opensource-3d-workflow">一種開源工具鏈嘗試，以最近幫風機製作角座為例</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2024-11-04_blender-anatomy">從 Blender 開始的解剖學筆記 - 骨骼篇 - 啟程</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><header class="margin-bottom--xl"><h1>3 posts tagged with &quot;homelab&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="前情提要"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2025-10-06_a-idea-about-using-tiddlywiki-as-llmstxt">一種人類友善 llms.txt 構想</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2025-10-06T00:00:00.000Z" itemprop="datePublished">October 6, 2025</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="#前情提要" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>前情提要有點長，摘要如下：</p><ul>
<li>我的開源專案口袋名單有很多專案等著我去探索，LLM (Large language model) 是一種潛在 能協助我的工具。</li>
<li>我不傾向使用 LLM 來寫程式。<sup><a href="#user-content-fn-oil-seller-2f6184" id="user-content-fnref-oil-seller-2f6184" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></li>
<li>就算使用 LLM 產生文件也應該處於某種程度的控制。<sup><a href="#user-content-fn-llm-and-robot-arm-2f6184" id="user-content-fnref-llm-and-robot-arm-2f6184" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></li>
<li>文件本身應該是 RAG 體系兼容或是 RAG 體系友善的。<sup><a href="#user-content-fn-the-cornerstone-of-llm-system-rag-2f6184" id="user-content-fnref-the-cornerstone-of-llm-system-rag-2f6184" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup></li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="閃亮事物">閃亮事物<a href="#閃亮事物" class="hash-link" aria-label="Direct link to 閃亮事物" title="Direct link to 閃亮事物">​</a></h3>
<p>作為一個重度閃亮事物症候群患者，我的口袋名單裡有一堆「我想理解、我想修改」的開源專案，諸如：</p>
<ul>
<li><a href="https://github.com/fogleman/Craft" target="_blank" rel="noopener noreferrer">https://github.com/fogleman/Craft</a>
<ul>
<li>10.8k ⭐</li>
<li>一個優雅的純 C 「Classic Minecraft」實做</li>
</ul>
</li>
<li><a href="https://github.com/swift502/Sketchbook" target="_blank" rel="noopener noreferrer">https://github.com/swift502/Sketchbook</a>
<ul>
<li>1.7k ⭐</li>
<li>一個建構於 Three.js 之上的「迷你 GTA (Grand Theft Auto)」實做</li>
</ul>
</li>
<li><a href="https://github.com/screeps/screeps" target="_blank" rel="noopener noreferrer">https://github.com/screeps/screeps</a>
<ul>
<li>3.2k ⭐</li>
<li>一個用 Javscript 實做的「零玩家 RTS (Real-time strategy)」伺服器端實做</li>
<li>客戶端是閉源的，並且在 Steam 上販售</li>
</ul>
</li>
<li><a href="https://github.com/ill-inc/biomes-game" target="_blank" rel="noopener noreferrer">https://github.com/ill-inc/biomes-game</a>
<ul>
<li>2.6k ⭐</li>
<li>一個（主要是） Typescript 實做的多人連線 Minecraft 風格遊戲</li>
<li>該專案自從背後的開發商被 OpenAI 收購之後就被棄置了</li>
</ul>
</li>
<li><a href="https://github.com/FlySkyPie/SweetHome3DTS" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/SweetHome3DTS</a>
<ul>
<li>我從 Sweet Home 3D 專案 fork 出來的版本</li>
<li>從 「Java 佐 Javscript 實做」遷移到純 Typescript 實做</li>
<li>大約還有七萬行的程序化生成程式碼需要重構、拆解。</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>「Classic Minecraft」是指非常早期的 Minecraft 版本，不包含血量、怪物...等生存要素，事實是網路上流傳很多工程師練手的開源「Minecraft Clone」 都是 Classic 版。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="llm">LLM<a href="#llm" class="hash-link" aria-label="Direct link to LLM" title="Direct link to LLM">​</a></h3>
<p>LLM 橫空出世，衝擊了產業生態，甚至公司內也開始推廣使用 Agent Coding，具體地說是使用 Cursor 寫程式。親自使用一段時間之後，加上公司內其他人的使用情況，我認為這不是正確的 LLM 使用方式。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="用-llm-來寫文件">用 LLM 來「寫文件」<a href="#用-llm-來寫文件" class="hash-link" aria-label="Direct link to 用 LLM 來「寫文件」" title="Direct link to 用 LLM 來「寫文件」">​</a></h3>
<p>同事使用 LLM 生成的數千行的垃圾文件讓我有感而發寫了一篇「<a href="https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm" target="_blank" rel="noopener noreferrer">LLM 與機械手臂的類比</a>」，簡單來說：忽略「人類大腦處理資料的能力是有限的」而讓大量生成式資訊灌入專案反而是一種精神傷害而沒有任何幫助。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="用-llm-來寫程式">用 LLM 來「寫程式」<a href="#用-llm-來寫程式" class="hash-link" aria-label="Direct link to 用 LLM 來「寫程式」" title="Direct link to 用 LLM 來「寫程式」">​</a></h3>
<p>LLM 用來產生「零到一」的範例程式碼確實方便，不過 LLM 有「自己造輪子」的傾向，在複雜的專案中它的表現不盡理想。從職涯規劃的角度，我也有感而發寫了一篇「<a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller" target="_blank" rel="noopener noreferrer">從賣油翁談『人寫程式』與『人寫提示詞讓 LLM 寫程式』的抉擇</a>」，簡單來說：手寫磨練自己的肌肉記憶或是用提示詞來逃避程式碼，我個人傾向選擇前者。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="llmstxt-的缺點"><code>llms.txt</code> 的缺點<a href="#llmstxt-的缺點" class="hash-link" aria-label="Direct link to llmstxt-的缺點" title="Direct link to llmstxt-的缺點">​</a></h3>
<p>為了將資訊傳遞給 LLM，出現了像是 <code>repomix</code> 或 <code>gitingest</code> 這樣的工具，用來將其他型態的資料轉換成一個巨大的純文字檔案。這種檔案不只不適合人類閱讀，而且很容易超出 LLM 的上下文窗口，實際上依然需要透過切塊 (Chunk)、嵌入 (Embedding)、向量資料庫...等流程建立的 RAG 系統才能有效的使用這些資訊。</p>
<p>在嘗試使用了 AnythingLLM、Repomix 和 Gitingest 等工具之後，有感而發寫了一篇關於 <code>llms.txt</code> 的廢文「<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag" target="_blank" rel="noopener noreferrer">回到一切的原點、LLM 系統的基石 - LLMs.txt、向量資料庫與 RAG</a>」。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="tiddlywiki---人類與機器通用的可攜格式">TiddlyWiki - 人類與機器通用的可攜格式<a href="#tiddlywiki---人類與機器通用的可攜格式" class="hash-link" aria-label="Direct link to TiddlyWiki - 人類與機器通用的可攜格式" title="Direct link to TiddlyWiki - 人類與機器通用的可攜格式">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-ee6b47d84fe34487b5f7649d0fe45cb4.webp" width="1024" height="779" class="img_RpFt"></p>
<p>TiddlyWiki 的幾個特點剛好可以用來解決上述問題，TiddlyWiki 有兩種儲存資料的型態：</p>
<ul>
<li>前端的 SPA 模式：單一 html 包含了資料以及 Tiddlywiki 本身的程式。</li>
<li>後端的 server 模式：每個條目(Tiddlers)可以獨立以檔案的形式存在。</li>
</ul>
<p>在 SPA 模式下，它提供一種人類友善的可攜體驗，只要有網頁瀏覽器就能閱讀或編輯，無須安裝其他軟體。並且其「非線性閱讀」的特性可以大幅降低認知負荷，避免人類在上千行的文件穿梭。</p>
<p>在 server 模式下，條目(Tiddlers) 可以放在個別的檔案內，提供一個版本控制 (git) 友善的環境。更可以透過 HTTP API 對條目進行新增、修改、移除。</p>
<p>TiddlyWiki 的設計上，鼓勵不要在一個 Tiddler 放入過多的資訊，每個 Tiddler 都應該像便條紙一樣傳遞一個單一主題的資訊，如此設計除了有效的降低人類的認知負荷以外，更讓 Tiddler 成為 RAG 切塊絕佳的單元，大型單一文件進行切塊的風險就是可能切割在不理想的地方造成語意被破壞。</p>
<p>因此 TiddlyWiki 提供了一種可攜、適合人類而且同時適合機械的資料型態。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-oil-seller-2f6184">
<p>從賣油翁談「人寫程式」與「人寫提示詞讓 LLM 寫程式」的抉擇. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/posts/2025-10-06_oil-seller</a> <a href="#user-content-fnref-oil-seller-2f6184" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-llm-and-robot-arm-2f6184">
<p>LLM 與機械手臂的類比. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm</a> <a href="#user-content-fnref-llm-and-robot-arm-2f6184" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-the-cornerstone-of-llm-system-rag-2f6184">
<p>回到一切的原點、LLM 系統的基石 - LLMs.txt、向量資料庫與 RAG. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag</a> <a href="#user-content-fnref-the-cornerstone-of-llm-system-rag-2f6184" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/homelab">homelab</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="OCI Image 實際上不是單一檔案，而是一層一層的 layer 構成的，但是為了簡化描述，本文使用 image 一詞時可能是在描述 layer(s)。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2025-07-05_harbor">OCI Image 本地鏡像站遷移之旅</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2025-07-05T00:00:00.000Z" itemprop="datePublished">July 5, 2025</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>OCI Image 實際上不是單一檔案，而是一層一層的 layer 構成的，但是為了簡化描述，本文使用 image 一詞時可能是在描述 layer(s)。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="背景">背景<a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2>
<p>我在 Homelab 中架設了簡易的 <a href="https://github.com/distribution/distribution" target="_blank" rel="noopener noreferrer">Docker Registry</a> 作為鏡像/代理，來節省我工作筆電的硬碟空間和下載時間，更具體的細節請見另外一篇文章：<a href="https://flyskypie.github.io/blog/2025-04-23_my-homelab/#oci-registry" target="_blank" rel="noopener noreferrer">我的 Homelab</a>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="起因">起因<a href="#起因" class="hash-link" aria-label="Direct link to 起因" title="Direct link to 起因">​</a></h2>
<p>一切都源自於上班的時候需要用到這個 image: <code>quay.io/keycloak/keycloak</code>，拉了幾次卻發現我的鏡像站沒有快取這個 image。</p>
<p>下班之後在 homelab 開了另外一個 service：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">registry-server-2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">2.8.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> REGISTRY_PROXY_REMOTEURL=&quot;https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//quay.io/v2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> quay</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.docker.network=traefik</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.registry</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quay</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mirror.entrypoints=web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.registry</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quay</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mirror.rule=Host(`mirror.quay.oci</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image.arachne`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;traefik.http.services.registry-quay-mirror.loadbalancer.server.port=5000&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>發現依然不會快取。</p>
<blockquote>
<p>No, this is a limitation of the docker engine, <code>registry-mirrors</code> is only for Docker Hub. You can follow <a href="https://github.com/moby/moby/issues/18818" target="_blank" rel="noopener noreferrer">issue 18818</a> for more details.<sup><a href="#user-content-fn-docker-limit-1-c1c2c9" id="user-content-fnref-docker-limit-1-c1c2c9" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></p>
</blockquote>
<blockquote>
<p>Unfortunately and infuriatingly, it is not possible.
This is a most desired feature, by me, and by many others.
However, Docker, on purpose, does not implement this feature.<sup><a href="#user-content-fn-docker-limit-2-c1c2c9" id="user-content-fnref-docker-limit-2-c1c2c9" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
</blockquote>
<p>這似乎是 Docker 本身的設計所致，不過在我發現這個限制以前，以為是 <code>distribution/distribution</code> 的限制因此做了一些嘗試。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="sonatype-nexus-repository">Sonatype Nexus Repository<a href="#sonatype-nexus-repository" class="hash-link" aria-label="Direct link to Sonatype Nexus Repository" title="Direct link to Sonatype Nexus Repository">​</a></h2>
<p>我先是嘗試 <code>sonatype/nexus3</code>，然後看到了這個：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_sonatype-e8317344f0c91366ef6aea0b2e1e40c0.webp" width="1440" height="828" class="img_RpFt"></p>
<p>蛤？為什麼我用自架的開源軟體還要有額度限制？下一個。下一個。</p>
<p>接著試了 <code>sonatype/nexus:oss</code>：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_sonatype-3de0dfbf9e6f77af18896ecb6e9f5a7c.webp" width="1440" height="834" class="img_RpFt"></p>
<p>不支援 Docker？好吧。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="harbor">Harbor<a href="#harbor" class="hash-link" aria-label="Direct link to Harbor" title="Direct link to Harbor">​</a></h2>
<p>當我在考慮自架 OCI Registry 時，Harbor 不在考慮範圍的原因是我在官方網站只找得到兩種安裝方式：</p>
<ul>
<li><a href="https://github.com/goharbor/harbor-helm" target="_blank" rel="noopener noreferrer">Helm Chart</a></li>
<li><a href="https://goharbor.io/docs/2.13.0/install-config/download-installer/" target="_blank" rel="noopener noreferrer">安裝精靈</a></li>
</ul>
<p>我目前不是使用 K8s，Helm Chart 自然是不考慮。安裝精靈又可能導向裸機 (baremetal) 安裝，讓我沒辦法用 Docker 管理叢集。</p>
<p>後來經過調查才發現安裝精靈最後是產生 Docker Compose 的組態來執行的，可以在原始碼中發現 Docker Compose YAML 的樣板：<code>harbor/make/photon/prepare/templates/docker_compose/docker-compose.yml.jinja</code>。</p>
<p>不過很遺憾，我使用 Docker Swarm 來編排 homelab 的服務，Compose 的 YAML 沒辦法直接拿來使用。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="分而治之">分而治之<a href="#分而治之" class="hash-link" aria-label="Direct link to 分而治之" title="Direct link to 分而治之">​</a></h3>
<p>Harbor 由八個微服務構成：</p>
<ul>
<li>proxy (<code>goharbor/nginx-photon:v2.13.1</code>)</li>
<li>core (<code>goharbor/harbor-core:v2.13.1</code>)</li>
<li>registry (<code>goharbor/registry-photon:v2.13.1</code>)</li>
<li>redis (<code>goharbor/redis-photon:v2.13.1</code>)</li>
<li>postgresql (<code>goharbor/harbor-db:v2.13.1</code>)</li>
<li>portal (<code>goharbor/harbor-portal:v2.13.1</code>)</li>
<li>jobservice (<code>goharbor/harbor-jobservice:v2.13.1</code>)</li>
<li>registryctl (<code>goharbor/harbor-registryctl:v2.13.1</code>)</li>
</ul>
<p>我試著以最小仰賴的方式，一個一個服務跑起來試試看，然後用自己寫的腳本完成必要的配置，而不是使用 Harbor 安裝精靈。細節就不在本文贅述，最後建起來 Docker Compose YAML 在這裡：</p>
<p><a href="https://github.com/FlySkyPie/harbor-docker-compose" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/harbor-docker-compose</a></p>
<p>在 Harbor 官方的版本中，所有組態都是仰賴 <code>volumes</code> 或是 <code>env_file</code> 完成的，這在 Swarm 模式是行不通得。在 Compose 模式下可以用本地的相對路徑來組織檔案或是資料夾，而 Swarm 模式必須抱持著「一切都發生在遠端」的思路：機敏資訊由 <code>secrets</code> 實例儲存、設定檔以 <code>configs</code> 實例儲存...。完成 Compose 版本後再轉成 Swarm 的版本：</p>
<p><a href="https://github.com/FlySkyPie/harbor-docker-swarm" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/harbor-docker-swarm</a></p>
<p>最後有些密碼還是用 <code>environment</code> 傳遞，因為服務本身可能沒有設計支援 Secret File，我也不想花太多時間在這件事上折騰，就先這樣將就著用吧。</p>
<p>另外，安裝精靈建立的當中其實還有一個 log 容器用來從其他微服務蒐集 log，我的版本並沒有包含它，一來是它不是執行服務必要的功能，二來是如果我有蒐集 log 的需求會再搭配 Promtail 和 Grafana Loki 之類專門用來做這檔事的工具。</p>
<p>附上成果圖：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-c3a1686c2af8d1d987d2e7a9d6dd629c.webp" width="1440" height="877" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="資料轉移">資料轉移<a href="#資料轉移" class="hash-link" aria-label="Direct link to 資料轉移" title="Direct link to 資料轉移">​</a></h2>
<p>為了把舊的鏡像資料遷移到 Harbor，我做了一些措施，雖然整體而言稱不上完美。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="建立-image-清單">建立 image 清單<a href="#建立-image-清單" class="hash-link" aria-label="Direct link to 建立 image 清單" title="Direct link to 建立 image 清單">​</a></h3>
<p>首先要建立鏡像站快取過得清單：</p>
<ol>
<li><code>GET /v2/_catalog</code> 取得 N 個 repositories 的資料。</li>
<li><code>GET/v2/${repository}/tags/list</code> 取得每一個 repository 的 tag 資料，要注意的是 <code>distribution/distribution</code> 鏡像站可能快取了 tag 但是還沒有快取映像檔本身。</li>
<li><code>GET /v2/${repo}/manifests/${tag}</code> 取得 manifest 資訊</li>
<li><code>HEAD /v2/${repository}/blobs/${digest}</code> 根據 manifest 判斷 layers 有沒有被快取。<!-- -->
<ul>
<li>這裡要注意，必須暫時關閉 <code>REGISTRY_PROXY_REMOTEURL</code> 的設定，不然會直接觸發代理鏡像機制，關閉代理之後，沒有被快取過得檔案會直接 404 作為判斷有沒有被快取過得機制。</li>
</ul>
</li>
</ol>
<p>關於更多 API 操作的細節可以閱讀官方的文件<sup><a href="#user-content-fn-distribution-api-c1c2c9" id="user-content-fnref-distribution-api-c1c2c9" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>。</p>
<p>整個過程完成會得到類似這樣的清單：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">goharbor/nginx-photon:v2.13.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">goharbor/redis-photon:v2.11.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">goharbor/registry-photon:v2.13.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grafana/loki:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grafana/loki:2.7.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="設定-harbor">設定 Harbor<a href="#設定-harbor" class="hash-link" aria-label="Direct link to 設定 Harbor" title="Direct link to 設定 Harbor">​</a></h3>
<p>接著在 Harbor 設定 <code>registries</code> 和 <code>projects</code> 指向舊的鏡像站。</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,UklGRrQfAABXRUJQVlA4IKgfAADQxACdASpHAh8CPpFInUulpCMhopXqSLASCWlu/E85bWwGtaFQ3avQF+jX/Y7sjnefSBvL/9L6a31Z/9fkq/kb/Idpn+F/tfjL4lfb/7T56GL/sk1JvlH3I/i+aX+b8C/kFqBex/+F/c/Jt2Jmaf5v9mPYF9a/pn/H/yXiw/3v989Sf0T+9/9b3AP5f/cv+D61/9XwTPxn+99gT+Z/33/qf5b8y/pe/rf2t88X6N/qvYL/m/919Oj2R/vD7O/7e//8ZpAC9fCAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEA+P+PmxTepjoOXChtbYJPXToT6f8hT7G3UATHGO6GZlRJbSvaXV9LwZDJ7gvTIYO7VDK79hkYmHcbyfkZQQmCtu/uRtRmQ4SKf4DflkdhBdeOEyy9ST106E+n/IU+x0HFoEh55LF4gK9Sxi7Im8SAmJGnhdOoSHDk0NjC/28cnQn0/5Cn2Og5cKG1E2D2JkF5tszAwobW2CT106E+n/ITSWGLhy4UNrbBJ66dCfT/kKfY6C1XqhJ66dCfT/kKfY6DlwobW2CTR4mH0tUd6utIdjpfPZlH+IFi4ez35KeDud7sdBRhNVfGxJ/Bsep2O56hyX4e9fSfsZbPWAztoWXswOMOeuFDa2wSec8TMqtgnYT6fz3VAbIN/yu4025weunQn0/30o8ejEwSeunQn0/5Cn2Og5cKG1tgiq9OVrLj+QlC5Ddm0+5d7tF4Vdi/kKfHdJe4x82/csXtgXlcl5pSMLOW1jnl9V4TBHVftUEGDRIHQn0/5Cn2NuoAmMJDbJ9P+QptcakXJeXl5eT/0IGyEDZCBsgOqlZfjJRuhgRCTEQOg5cKG1tgk9dOhPp/yFPsdBaqS0ScKkL9wsiimeJKmjXT//nB7r4odlv/jt6xJra+F9joKuck7RGWOqwzxfLHVYZqS2b14unQj7CF0HrW2FDaiOCCFbjq4S06Seum5rRrk7wn0/5Cn181/+7m66dCfOoQXjuT95J62IZg+x0HLhQ1LxGdZ2dnZ2dnZ2dnZ2c3ykKbkDCeSec8TMhT7HQcuFBfBpydCfT/kKfY6C1XqEBfn98Cdor25+7eQEt8YP/yTqc4TqMNAnhQDFu9lzhQkIcNsikICfJMgveBiBEgZt6wMFPfZ4MxA5FOaqFf70uq+4/V+lVd1tKY87JAHNru//plto3e2qtaIk8K7dSvEJu3scoIOi5AZ5whiBM3uHqamgqEqo0s8D7hnhg3p/oHTIm8XHyHd2Og5YskqTDw8PDw8PDw8PDw8PDw/5By84hcF2D7HQcuFDa2wSeunQn0/5Cn2ByCrENj9GwGD5oy3/0TAsrLkU9Hx0COXlSZfWJy4UNPgFMDz8QvFoR40M8Id8WrALo7I+vVFsEnrp0J9P99JWuymj/kKfY6Crea0XmSMDFv5i38xb+Yt5llVC4LsH2Og5cKG1tgk9dOhPp/yFPr5r7hPhvvBLgngmO7yuBl8XNuifDjnDPMl3iiq1l5E/TmBSG46FZ2Ctfz1Rv+IDtO8sBJVratpx8B0F7eY42ieMdBy4UNrbBEfs2JZbYJPXToRjwYWRgPsMJLJElkiSyRJYhdRBar1Qk9dOhPp1vPBXLc4UNrbBJ66dCfQQzXpu8NenvlzMl00S+OiPqPJXFDF9JRhOGMTEfyJgC4b7+6yVTaPJDVB9t9cpPXqYY+dKZkcebdpxHiriKdutpjTNgk9dOhPp/yE0lhANeVCxWeKy3EhDa2wSeunQn0/qsqsuFDa2wSeunQn0/5Cn2Og5b+1AUunQn0/3+/yKe0tLS0tLS0tKtCoqRiY0/wgEA+TlWSkYrvo9jw8I5X0pENtg8J9P+Qp8v14IiIpmHytIFvEiYDLtnidrzWGEKupFvyIEZ1mQpAdQ/JPi7PYJ2+KXwM1MNvt6XcluMaO6eFKBMZAkW957gpiuYuAxoNgsy6H3k0OFAFqWPHeSg2il0nQn0/49wjTFhWVlZWVlZWVlT2TrdywoL2vSIiIiCgyGehxqQIH2tVSAFUBUq6QKWto0koiCeHh4eHh4eHhwUFh4eHh4eHh4eHBYeHh4eHhwWHh4eCo4OgsAAD+6nsRn9iNeVieQOHFffJLhAd60dizbQy/gX8C/gX8C/gX8C/gX8C/gX8C/gX8C/gX8C/gX8BtDLxp1XLqZoUQnTgAEfd6K2VsvGUmV/tq/iInQ8eiz5QAFPv5f4Q4z3O7ZKqv0LoHwGBWL1lAvDcJTtVSfOiZEUPQyw2XI/bfuPAp/Kl0PFgt66XLTLTTqLqhxvNfSfz4oqW/z2YOBpmVFD7/PuZ5wRjL7Y9Gs/ICF2QPH02gb/lfk+2DzG/Ctr8wqaRVoQpalDw/0mxvccxWsI6u0IoRaZzmolkyt+s5ChBmv7Si0uPy49yi5fOIUE/t3yomamZkB4Gq/IqYKXWdYPjzcMT8haFXQOpyFOHZhrcxjM6QjoV3cVXd2NwYzXveCSkE9rC2HsUSn9FKa5sVwVSOUCaa3tC8xGAXKst3koOhtGlcbkmjPodC09fzhWTX9/hOjWHzGGxAxpixP8MjsmedW7cANyG4zCPQVYKruZTJMk5MeRTguWROexfJOSlnLYLBW4NK3KYHLLQ/tDBzbod15K3DH6q/MeQyezGsv9BdlTokNWtaWtYM3ZXEUneaqkToSDIa9cDLccjYEh1SP4eWoijPx9r9nUnkz2vyqdNATI4gqgTjgHePIuwsDNlzRYSxDmEpQbU+hqvp8Q1epqus5kZvZzVACsSbYNwH94SyhY6o7VoZqfsdEJ9QH3VybkxUZMBj594ZDBsmjR7FmyGILUmtfOxWKKbuJkehdLQgvFK56mE354yYBVOwijOUJQn8TyAkjwghPbjlgfx+hDW1kUqE6IDFNRLK04s5nKT5d3ibeAAoQGEMnifSlvPW6KbHItMMXh1nrbddpohZ4FtX4KQv8bfBb+3TWXfkDFFo9IH7wDMTR/cLfIiNaQKbi3uNjjljDID8ljwI7kojl83KImp3KdJQIE1x58wlD9NKKH4lzJDJznA90+SgAXTzC7sRf61MdKf8r9pc8ZQhH+uksTjlUp+lKemYqtx9OkCyc29PhE2eotrIH9tPO/ezymcu96Dj8HMyTy4pimdFRgNo11qG5UgAABkWogACBJhLuF/YAqAAEqJwjgWhgAC9U1xtA5NWchztEpasReMODCCjpGbtPJBsKqOGjzDcn1nNorQI7vVrKQQEOQcROfJmcsaeFvxLpkIwETX8rdaEzGxADAqqQIhtNWzjqs9csMsBo/mtPouSmOLlkez69xIwCAndFVR9MeQ4ut+3mcZmYNBntYYkicgHw5Me8tkIr8yVWzRMWrb/XeV4BU6ONtDon9G3jEwAM9pPtGt72Bc4ruHhz5SDEJ4Jrmjlp/n2YapPTHpXtFqgwBTWPvbnPOSRgwtVURL46bLpVP0jKZMRPuNruICRLku6/Il2MYIJxo108GXCrGQfCqnr51V951T9t4wvJSvh0UtC1+Z6RaM3CBQv1F0itAKq8GRb4jKeTzWapsEGOX+7O1ApXLdqD3MTgyVOfRdxylCokbpq08Eh/8rME91epixznhgbVejVIn1/nLEuPVBnTlx9a9JA29GLBMw5wKipj29x/xgzqsmh/HquRuMjOuy/XIyNDmrLgvrR6sVVVETRrd95rCxAwPtf+nkoulGkzhKT5vkMaKm8e68sIzCx1JByhNRPLtiPpnGFSzym1+TWkny5QawHnSiias5Q26Y44it1sTs9rJ69VvBXtPN0ZttFtADEmQwSU2UjgkWWmTgVN/nA/Owtb+jyY3FxQtAykWd8ycQABb0uEtzRToabh69kDsjYgP+e9lMvdi68eMvd8HIosdSqwW37xZyU5MdHv94V3YQipCz+3nvNoE1aLPx8HD9mKyl8ec8JkETKEJYUnlHCnD5fjuJ+6Mx/Vf57OeqCWMtAWKvgI9wt+CifQ6RMWyBKDWmADGmHJG1Lei4MZ8xDDrgUUmxF3ba+63z3fYT8myFN/S5wq0B8J/pXsRGU/nwhgkjUBqaxMHXDTwz0j5uN6OcxO6vzVTWfT+7vC/bvzmud4t12VUA9x56FhtrUHCB6QH69thnFpmtpi9/PlUp+W89jdxgwWUofQcCxeKI3y9TdGlFjK3xez7scAIudzeEz+MQ+XdyBUxHcEzIM5eU3QM+N4maxJt6LwUZuxRA5mo08Ntbl0cr+jdt17lFCqF7gxjUedSKHtq2flHod3rXbmW45T2Wk1kw2IGIAR8oTiUGk0gM8tBqtPhdBdu2ofE7qxQeB5JVsrHhDy+WSa32jkRvB61aYGjtuqTUpwFzsb1CL05cxNLg2sG8q7yoVfpLU76gm7cKs9bzW8A2atXZXlRp01qgD6AsKbHC+5/7Zm870y7bjYzxUxukkt2fEWNM2+AuF40Dc2sWm1mvVf0B+7ja0gZGIgCQsz8qoPb8hdC+oHBObl6gAEPQZGw/G7JNsoUcjV5z5iltdE4AAf36A6sSyl1ODbT1ov369koPpOQrtjJOni+HapbJ1LzIHiYEpJHl8oURplKhHGgvjPxtsuR7XDaafoixlW4eI/KxixIxIgRbiTXg/g44vLR+lC/Rzd50nIeKqNvwkMZUN1hRTdb1nGgPWGlKozl3eTrgng48JdEn+G942BD5un6IRVPubVKPFYcu5adiNOgOq3qAEplul9im98ZkJx8QV9oNiGAq+OR4RO8I2rPkT1+X0Hp8ATffQ3IuVPDdj+VZggY2McJHliXqnqFX2SNrwAJFUGKTxCBO75LU0i+F8o6si3/1DmIk0G4ujIL8rug4TUMwXoNcCj3UBGqbNjLJwKxmtzI0FnImdR+nGlXgv5C7TvNi8Q9RiKdAwnIfgeQvNFIeA+WGVwbwuTsBsdeNrhzm+bJPBoQF0AI4AGQUP1KGhG1oHmcjp7RVzWDnnTsMOM7seaJDqIO0WlQPITlW/we9eO0a9e2c7+fwOdYPMX2aZsAkzo7hTBcJC1d/nQAaOF9xmbcBCH4yBDYsTebzVUPM8wefnMTL4Aor1vKHIEW8KJvujgYyZFM9ln6Mo/bqP2iGoOQ2P4/wz3M75Td1nWzVaUHkucFJCqrZwGbf2d23HjTqNk3XWZo8w1vjvsC+K/JT1chn55ec/6L03hOBDzcVp8NH/TaBCUUlhp9ZiBbLawm7ZQuIB15eFym/YAUvKgQJbuqPV3gKty/CRSlvWKc17k3KvCY4NBJ8WC2MkRSnROtspiAlxWbVbyyJeEFcRIf/+q8XPwCEVcYzw4nvsYC/2H1n2/lZFE87YrtgOyTDRMOv6wUwbtEbxrIg2njjSUK0gx0xALB3giC1FBhtIv0ElFY6MEnN0ebiS6LzZf7RKtwuNR71H1+Ntnh9ORJqiS67EMgznWGUg735nAu16zF32Vc6ciMFz8LgR91oCPwWCSh+0DrINRQD8KcSh8rFoBCpc8CNxHYEKTO5S6vbHuNeB2d0PknHGzSSBlD0sNPFNX5Uaaz+f/Zb3nHWJXTQfKZtNsD0vnVUkOxY+phU82HuiQHPmluIkoReuz1jR2e/+xJw/M8O701yWG/sfy/pZdI3CFYiQxY8iI3hoqyb5gpBQHW1zqWaiDAISQd9IR4Ul8M0Aect7eiULlG8cYJLJdYT48zzvpfSJydwmtv0J8sQ7ppVQIEf9KW8fC0SfdINTheHfZP78nZ/PL0gvh46SV7z2bMGzZoTZVvUYMbrwnR+62WWiOwO2PmGxdDOllsryItsNE08VrkhKcPdyth3H7gdECsSrvBBqT8OKsWjUK9yZ+KfMowU6oVX9/QB0ICQuyBePdGsEmT0XsCG9gKMLaA9VlnxNOcTL6QHgQzmT/y3LRjKao6Zz8T1xn/GRovetfwQHcJBFEbR2mBjQ2r9skWw2J1tqRPsrfUzgeZumQ+vkU85tUVedDxx1UGHfTfX+RpmM15hphD5PgGela1YA1t6cKwynrvgH7qeNfN4Hj4YgYaYRbflVEuAfcm3luPk2j7Yaf+109vjftXEJZezxn96o75c8znGKzOaJw9thsuqqB+dFRedhATNrH2kdhp41ENxyOAHwEuh5WPtaBZcX0eA1pkZS9Vqzfu/nFBjs6t1YsLh1iSNOwUO3cQAyehhf2txxaogm3pknp8dqaMh/1ejtZGfXcSZZYiWY0xJowwEEn1FKXzLbFGFJQkI4s9OF3EtHF1SmmoYLCbvJTbaIe75LnEU9gEc7oNIj88J8JLulZn94Fb0UsiE1Wz2TfkFgSQIcSn3jctHrgOnRj6mlUJp1Fl1F2B2HbBmPr505dztZAIlLhbnNpZ20lccjrbfhx0cmV7qIjpTRW6Z4qdDYlhgTwghJT3GyhUyzibnRlESD5z2cW49d2hFsSghUJWVTAYmp7HhiV9tCx6/AASsSr2HjaeCeEW+t+2qGC30BcLqyGoaNj0hMD8O7Napr6HUc63j99tCxSDlBw40uVFSucdFajm+c9cMI2/mmpP0FPhZdAbIjjosWajbWg7LMkbWiQGHXSPxdft2J+Hw5cNTKqVgXIN3yaZvV92sE8MH6jGxB/cn4aX5qxXmDG//QscIiPgVpKbfE8CnImWNB+d1ZDmYmIH/d0h73Wsx1pHrh4a+DvaSt+jl/giFYClD/YHyMZBroQlcf5v3KGQC8ME+AIJw5fiDyb+2ndDEa6jMHWnegXEu8By2f3SJVtsnQZyM+NSLbqceuGkI+kKBaEy0xjXBFjIIF13i0XOv9fY8vhjknbPfBMa7qS3USac5YMgLZ3WwqgdEpiScSP+skYRNbkRIIO/VTnUTLTGvoh9BXlblEr05z6pOM8tn99dEcLnBCTUuL3LH20hDk2KXZvOFvXtvQyZ8TQ6/Yp9HLI0Kr215D32A+sKdSrATrIHb239+FCjdf3zEENjOxmCHi6I1+j4HuuLnC7/s1jUoxoHu/+Pg/ArbWlRA0ACm4YJsQAHa3YEL7h5tLLezwABPrSgTh++xS6Pb0z+D8T30zixhDO8jMpbREdJRkERU3IG6SL6LhfIGqF5jUeq6QKLFN+d2bHJ+nMX5bLwrzOTS9BM0vVZ21DbKFYvxrEZAMaUoDtqzhiahLEiEodkiGOr8I9XJgb8acbdP+zijt6MtCWenQoxLniRGHtSHaVfWtvVY68VvPNm3NZxb7FTIiP6Gm4VJ73YAhfOZsalWWpb1U4oii6J4Q+DiRCaAFgdUZS2FqURzHSYgvXjZ4n/iZF6fUKlYLG5wl3Dr4JuUZi94yOpB1dTmjFJDBWHVXypez/lCiUZyMAPZEGTwLI4Li71cfJtsMrQCtSOr6IvMNgeAyFr8odgDQ3RE0JtueIe8V2FDClAm+zPv/ppCVJqAz8S8R2TWaMpBmC/Ho/hm4XkNqxRWrkewj06dAa+x87ygJmj/9T6lwpF5V9PtHxplnUgweU2rP2Bi+lxEZBH7n0PJHm7Vw8KAkVhqokkx4whQZXYqgyq6+kNcFDWxy/GkD5dzdn3zE5/5v2aCexviBLiS2rkJ9TiRAznfLjF9AbkaiENj4dy5FLEv5uS37RVNYc6l1y4G/XyWGJkH75pAvsgtoArTagyWZdG24fg8h2OT11iIj/ECYmnkEIzqlkv+hqU46xLjFNhnCG7anl+36FVEpEZLcF1BjaHcWA2MX5E4AAsCODBt1wxB88jdWHrrydgn2SAHc7sIHauCtmBDzojal3o90QdX8xov70qOsHQZ5I8RP+vV3DiWp8ciF+/lSwTlsvCvM5NLp5a/2oMzOFNrEaGSRLW1wj+6h7as4YmoO1jJ0CjcsBUUTANJzF68L0BJ13J75ifFjlEZXCr4k2NoCx+hLUQA1uv3iM6SJWBktRJJfwn/HjODOlK76jrqf7izqM4r51mCBtMmpS2jO38/DeA23DHU7qLK2/KAm4dm9wstvmx2cOuySw9dtoOyI8mBltoUZ+N9RcD2RGi4VPU+x1/HmkdFqkdVh/EOGKom0dQWkL+7eaSgz/lbTnaUPLTk1NTXDXjFGoaqJ5EWiI5F79Bxo31atRXY0K3vacSeNjKa93m3XN29XYoLRpxJGOn6A8H0F/8c3iDZjFxDymt4sXMGKmEtFbqPXuysHP9+Kse5UXKjdJbkghE5Q6K4Q7Zg0z5SZEJHzD/obJaLQvAXDTb1qViMo0gmDJx7CGB9k7tNkYQ2etZqPJB0hkNIMqYLKnNWRcPv8ZEa9kCjXqe/WxVZ9ahPY/kHucIGsJqUXhL9tHbfIoeZ9/OZjeqJfpYAayM3YTXLJBdzSJkA7TmaspRG1PVMFpxEXP1gSAALzTt/Z2NLLKradtE0iX2dNlhvmYgg/DAr83FZNMd7gHImaSQ3gybmE9U6FvaJilsMG/ZeR0KKvKGZgTEIKx0ClUsMOuUKU7fR9wYlAPNKY2VM7WPJABBbKA+JDUATp559L7S0TGmEVjjD8QJvC5CcUfEAarEcu+xb42Vzq6D9mzAq1O+AuD/fgWIAMQbk1Q5KJKaCiZAwHqA4B8KqcUFz2VCxc64dU8FntS0iKtNM/iHB6PUCNVQhQQm2rKGs+/kvcBDZYpSGgpL6uTifk4fZq4gyjiW5g27sqni7ExJOKNjb7yXpuPAoCsDXMKcRz7CXeYxxNCb9+A9kepCX6mxBCB0WqEnukKC9z6LOFyI6I9kWFOypVG1Ga7AWSJ0ey2GTOoP7CNRK6e1JR4KV+GYoYzXNtyWKW96cKmuX3d1oWejH5uiZ6psslqMH/LW2cqlnHDxMAhKUBge+BK2u7hSgIa5m9eXgL6tcz5Y7w7EUPjDbaOP3kNz22+jhLctcIbu6Skk7N8nddi7A23AWKcCrQl7szwW3ZA6GiNV0M8lLaF9lX5JH2idA1Ofd4Pme8uUk6nclh377QF7DfPxW7d0h8yqzxzwQX8qi7gWfxZhqhRJNtKqkH2CPBMR1dl1AALhJOdHp/FZCMpV3+1MKb3xmItr60rDWZA+dP9OKd68ynnsGMD0XCfLHw4PxbKcTrNu1xytNUrZHLJoD66aqDsbML59lD4/cDjL8j7Vlt6O+01yHNaO9i0jYoKTvV6HxSTmGuuv4CFEVVjmokB525CYMh5l6kzKfcGkz/17INIJwmfgnEnqm0KTHPCxlzgabzaSbHllGyNsbcJCgcu02+zbpBLqT10GPMVN2+Fvxnsg2C9I81DJk+KDAoeTC/KSaHQeR9qYbifCBkDuEaqI4tDHW+zWVheCS1cGQCkzbNo68FjC14V6Y0lH8bERsDgDlT7MT7WgAOVKYAAlNMLUBw+z+foOKhnoHvfWpADWaAZk7+F70iYxqSn26nAjsF/Av4F/Av6fUkfZIJB738hgkDWdUWR+ZjZJDT3PrqKM6IhIZM8d2z+AgdvFIrZR/Bfc2PYaXm5XRsjoHGm7TGwdHVIhQXPO1iJZ2AkQUnSsXvf5s8rEF5YrOAOXBjLMKRTvQGWSkN8qf2jCzGqvu87uh9w9WVHF0taw7EIZNubj0nQ33vO8Wa6aqNM9ZOQVoQs5GbFI1aLj0O1qvbTxtcnYsYNCPWwM33AbR5k0y12y9CfwAB2To5yIzsrFLmDUvX/p0ZEmjSDZ8y7yHgBkmy56Z+OdM7Pu7iJwXqEIEqzKjG50DpEGkdxnDSgwNDgRp1yRsiO03GWyKfvSoaKmI8MeKP7ZMPc2p3Vf4SUafpo+ydSH+uo+hz4LQNOalF5vBHbtABNhTCzY2OAa7SESZ2wkKf6Je+5Vqr5KCAfQvdUHT1hh1MoAa4LWcQmuM1n6EjDT2qBTTmksaCKEShAktpapUVci9ru7FKjCuVG5EAvyEfanqfNwkp34tR7RqfyHxq31JKfycuUbcKL9MwbLmLN1C1LdKd88C6IaLluRzR8dLUt1BhFiR42436i/XcC32ZsVkv9if+/XSjj8YOIR20cMxVkJkksFkMsfhxVZaY/Fodq594OFsBcavBbp3wIrrHdLIBjLMBVY3leDRfeDR260+hTiPv3eqUJUQ6n6m5yxg16RD7XlBfbnw7kweul03iN9GN8OCQb04ghYJH0xJsoGUQzcdQp141G7e0OWcv34NyJG35cnaOQxXLzR/PhAZ3GLtZOYWAWQSpFl6LEX8KNdsG+no2/PJ57wKGLmdXhSrHl6sEcjvOSCUPA/8iTjVpqZhhY2wv592IJ8tY1OiAdu7M/YDtcU19hnQvsIQ0TbHVNipSQqZeXLqS4k6Wgxr07zBSMcMsKU7DYZwZuqY2ZkcABcydxr8+VuxT0fWod0mm9EjtDGFzNpDqDF6hRy7kgG0Kz9V2UFKEIS0sK6m9TuhRyVQQ4CwA8KGIGVPjpacdOn+o+DhTCpt6ZvswS0mzSE0nWxwDwDJXiAv1Y1JTRkboY9BvRspiAwX4IMMHULC9INoZftCwQdyxCWzXtcW+ZvINqSg6HueLJ1gCo9+6tIxNdThlaktC0YQ/q3UASGErqPGp3ktV8waRhwciChBe+Ly92BPYy8eItcTk6JF6cducj8T9xxiF+/d90+Kk36lsoy5y4C5dBxq6UUG314G/XEQYyWXenibkEcBXRA1rGMidK9sPqGp0v0DmOo86ce2v9ghuK8ZBXBDywjP39o4Iqbvhf7fkYq8iBY8JRxFlTUMKUicJBgcF6BlJcgI4xKDh9p8w8lHY7ldwzdgMLgS1cNBNYn9Bh56znj4HoVPZL8vfX21KaAhYbi704V15MsGDBgwYMGDBg++Z97pB56aFC60UNJsnCxx/WWF7YVsIZPAcWPFf4KAuuiAA" width="583" height="543" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/04_harbor-5806fc52a18aaf60e00f3dc3ccef0d48.webp" width="1195" height="773" class="img_RpFt"></p>
<p>要注意的是，設定 Proxy Cache 之後既不能關閉也不能修改。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="從-harbor-鏡像本地鏡像站">從 Harbor 鏡像本地鏡像站<a href="#從-harbor-鏡像本地鏡像站" class="hash-link" aria-label="Direct link to 從 Harbor 鏡像本地鏡像站" title="Direct link to 從 Harbor 鏡像本地鏡像站">​</a></h3>
<p>接著使用腳本從 Harbor 新設定的 Project 依照清單拉取 image</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull harbor.arachne/docker-hub-proxy/getpinry/pinry:latest</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這樣就可以把一部分 image 從舊的鏡像站轉移到 Harbor 去了，雖然在其他 Project 不會顯示 image 的存在，但是 image 的檔案在 Harbor 是跨 Project 儲存的，之後如果從其他 Project 拉取 image 時有已經快取過的檔案，Harbor 會直接使用已經存在的檔案。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="限制">限制<a href="#限制" class="hash-link" aria-label="Direct link to 限制" title="Direct link to 限制">​</a></h3>
<p>我這個作法是 「不完美」而且只能遷移「一部分」的原因在於，像 <code>docker.io/library/mysql</code> 這種 image，因為安全性的問題，同一個 tag 其實會一直更新，因此有些 image 在我的鏡像站上是過期的，所以當腳本拿著最新的 <code>manifest</code> 去檢查快取的時候，是有可能全部 404 的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="podman">Podman<a href="#podman" class="hash-link" aria-label="Direct link to Podman" title="Direct link to Podman">​</a></h2>
<p>還記得我前面提到的「Docker 本身的設計就不允許設定 <code>docker.io</code> 以外的鏡像站」嗎？於是我試著使用 Podman，發現很輕易的就設定好本地鏡像站了（<code>/etc/containers/registries.conf</code>）：</p>
<div class="language-toml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-toml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">[[registry]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;quay.io&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[registry.mirror]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;harbor.arachne/quay-proxy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insecure = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[registry]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;docker.io&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[registry.mirror]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;harbor.arachne/docker-hub-proxy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insecure = false</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>當然，「使用 Podman 解決非 <code>docker.io</code> 本地鏡像站問題」與「使用 Harbor 取代 <code>distribution/distribution</code>」變成兩個獨立事件了，不過既然我都已經折騰完 Harbor 了，那就乾脆直接當作非預期的升級計畫換過去吧。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-docker-limit-1-c1c2c9">
<p>mirroring - docker registry-mirrors is not used for fqdn images - Server Fault. Retrieved 2025-07-05 from <a href="https://serverfault.com/a/1125577" target="_blank" rel="noopener noreferrer">https://serverfault.com/a/1125577</a> <a href="#user-content-fnref-docker-limit-1-c1c2c9" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-docker-limit-2-c1c2c9">
<p>Configure dockerd to use a regsitry mirror for a private registry - General - Docker Community Forums. Retrieved 2025-07-05 from <a href="https://forums.docker.com/t/configure-dockerd-to-use-a-regsitry-mirror-for-a-private-registry/135180/2" target="_blank" rel="noopener noreferrer">https://forums.docker.com/t/configure-dockerd-to-use-a-regsitry-mirror-for-a-private-registry/135180/2</a> <a href="#user-content-fnref-docker-limit-2-c1c2c9" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-distribution-api-c1c2c9">
<p>HTTP API V2 | CNCF Distribution. Retrieved 2025-07-05 from <a href="https://distribution.github.io/distribution/spec/api/" target="_blank" rel="noopener noreferrer">https://distribution.github.io/distribution/spec/api/</a> <a href="#user-content-fnref-distribution-api-c1c2c9" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/homelab">homelab</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="從我開始計畫建一個 Homelab 至今已經超過半年了，如今它的規模也算是有點東西可以拿出來講了。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2025-04-23_my-homelab">我的 Homelab</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2025-04-23T00:00:00.000Z" itemprop="datePublished">April 23, 2025</time> · <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-b6e2ba28d48ffce91f8068a7c6aa8cd5.webp" width="1440" height="835" class="img_RpFt"></p>
<p>從我開始計畫建一個 Homelab 至今已經超過半年了，如今它的規模也算是有點東西可以拿出來講了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="什麼是-homelab">什麼是 Homelab？<a href="#什麼是-homelab" class="hash-link" aria-label="Direct link to 什麼是 Homelab？" title="Direct link to 什麼是 Homelab？">​</a></h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/-b3t37SIyBs?si=CR6mSxdgHd1Dtv7i" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>Homelab 就是資訊工程師平常在公司管伺服器管得不夠爽，所以在自己家裡蓋一個資料中心繼續玩。</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,UklGRvYhAABXRUJQVlA4IOohAADwxACdASrgAWgBPpFGnEulo6kqItPaYUASCWducsTdTaTEmk9RB/w53tRMzTl9QOk32AWlecV/zDK8kLMD5eiaVZaQwbtz+4aeSOz109+zfc3+4b6RhX/ufXB/i+Ofy7/yPUg9r/6zhlwDfpH9w/5Pio66/h7YuzPeql6uFjqy23g0H6u4Ya50DQPtDXM4VMl2cOeJ3cRc8br0xvNvOm7PEng/O2PEKYYq5ofDja/8IF2J8rccYQCVg+gMoFRFoTRVFvUw6iF0Qr1EQG2aFsTuRLThlzqOcpcGRYX0Wj/DlyZ4fYa0dM8Yje870o53ydktTt7cOxYnemDorLRWMVq0ROre0cgy6h0s9ya2bxiDLyLouNK66nYEd5gZhyyNKpW0nO4sxf2qM5QaVPg9vvCFtZb6+uN1gw0yKBCGGi46sM/Hhdr2j1XIZScwTYwl1450HaUrlhKhigg7TWVWf3TfYL3bEOw8PoJu7I27DhHYeSwIg3OtJz18FB5tnRyAPrPhUblsIxQibVsWliXA80XBGiJdEGE7QYb0mg34jKFxpNCKYfYfTG53WxSLmrl08070xNRD9RNRRdA+wiCAVXLgsOjbeQtbhziNSiOBPlseLUXOBkdK5Wl5ALiQG+9WfscOpW+dgBhyoR8efa+SiRhw64oswWXtMCyqZUky7qG7CaW1fgJEjW+58hUXtSc5Wp0KuAlHFHFmsZWFAzCaU6l0HaSTPj/LDcaaM8Mksg0nkRlEL5Bj4xuJnicL4N9lDNbjKR12OTF6zGv3nhifL9b+N+9OgxlCr/YmYFIQCQDObWDSZX7cxhtjkTD1M8MX8jTqM8hr5qG+KKScoC8uEVFjj805R7i9g7nMmEgD3rkEdxT2aQI05GM7Dv5uYkT3/Jhu/pBHnMZ97Sv4xkGcDuilDc65k1NLnCtmhoBZNtOsTXeD0n4aCIRCZAbZ8bu26myN/L65PWomC1i82p9wZPfMwKjBVbewHP9jDCCTyEC20+wl05O6cQrWpMdEHVAqC2K/NtStYkiRIVkg4qJ3CnJhiqT9+GCnpWMC1YXYRf5PUl8y6qhaCCsoknoRR1sNSAU4hwYaRRpjxIjiGh7+vJczolUvNdvA5cPIPnvDNzmJ2+pU6NTusqpkLGXi3Xbr/Hg5+1GZViTRtkxPvuw1MO4o2r0fDP4a+nlWaP94mjNoUnF9C+JadgXL3vss34AR0Py8O8n0S4uK4OHhyjdDmyjBvq9jZ+3cH7FeDtTh1Uhkl3E1CIEiN4O3y1hfTgwk7IDGJ5cZEDwVEVTmYUodbJTKMEqwCTnnE7EsdArPZ2btjH3hn9XwA80zqLHORo9BB1EGSi9J18TUqWxENkpTP9qHhqCB8uTOczdkxjYDHdd2mOH1UY3sL7ukKGyS5PjMI5T4FOHeoDClfGAKVqq1t2JCwgK1nb9Oxf8SE6/mBRGnPlvfnyd87whfKo5iBA4Rvc620PFAWD6rZnWjYJ/YLS9QQmbAtN8WH111jLBq5NCNEp2wAbEwo0LYn8upDtS+FOAgKyfLELtqeL7CSyGNehDrHTHxTFvVu+1y8LjldlqqLlzd6nBsNRaZADZJ619Nx36IZGAAPH3wtJCUCmOrUvOXJ9TnEoIvKp8LOmnSWI+eDZJpgJzad6pJun4OIVzra8dMqzQBRyP5mm4DapSRosiZCcv6eCXrR3wXu0RkKi3MjGLH6AFdZAqhHWYCFjL53pP3N4b39T7tV3BXitdSI3rHJ2YEvUw019EB2fET1ZArjHWr+VTEgFxGEJ9V/ByHC0yQxBbi1NiOA9dMSfPmILRoNCeyhLfFD2qMAW1vGb7rsDNAA7JRQZHy51arb1k1IAJBF/xxeSBYnFuN17jSKGz5ba5zRaOL8jmlJ1o17v5X6m89mY5YLuOzu2mlYpY6PS53c5gT60uC/UitV4SG+MVkaufvDYW7ksMlcZCk9o0AXqA/eH5GUpdUf3Adcn38qMZmyKbnKa5j/6H30ZS3ESkmAxaQqO0yL+/PLkFBuVgdsJHHoXVA2/UdVjuE+YxHiwBtJdfzq4mL/Hc7ifamLIkXhd3dh+n8ravJgWXGvR4dPmAPRy7mAOyU4OtqAdS6tGAA/v7BTtafoIvi329cdUqWiY3fqZMHuEsJ8b3IQw9m4m8OAVrzNA1FheTpTbTOsR+jxaCPzxiasf6A8AWPyu0nBScIGt969BM1WkkzNyX4+WPizihc6f6Bb3mOgmoRfYHUHvGW+uP9sQO6Q/vYg1DBrTN7kiAH+jMXRx18LKwZ6sd03t8oODwKYFcc5do94jGcCeHsvLKD4UuuC6+BkC0u4vzh3aYW8oljmE+5Wr4796c3/FKY9b5vunlQbpVw9neIy5/UWVI3MY8J6IGmH+g2HQFvmMMYikBPaeR+BUSW9LtIwkrKhd1JFiatOulvWMJZdN7OwQZ7EzFXUe1h3nLx+x660ztNUWCKQWcpvgvPeNFpJq355GEBJ0u1348KG1E5TVKuBZ6ABDJhnHZwHcA1kDaHF7IEgrJNoDqbUdF+ftGMWdmFZhW/vPzmSsBnAE4ttkjDOQ48RU/iOIiJ/BBCNCj6l2FYkApJiLr1n/gu1FmIAbtjEsPFk6657Nh4/RF6KU9ZFgn9fFglwmAGn3a/0BCDgXIYgwQPM6KB/CyP5gRUSvMiz1V0K6U3K4ilGvwpTeJvGpXio5ejY9vwPrn1YaYBO7GPubMu8XMmJ1UYN8CVwKhpTGz9hLM0SkoerPPMV2bKBF7q97VuyGdi/jTpWB4nz0T4rIJPiL0/y2d7V2S2Ep8f29+i3ARL6pCyd6nhTVa7KTm1AO3oxClzavS87EBenJl3waTjFXaQ1zmYBhHMdYfxy5QxDOadnqQrv9pGXnlZAzuV2FTcuZoTMublBAsfWAjASDyeKxgIOBZBTQolFwS1lK2vbKIBHjt7ojmgoY+ARu4ltJ8Z9nyLgnLWogLrYfgLFaleAzQ2l4/Lq2XRzlwekAqIMAwaL+LctwTl7iA47FZPOWA/V4lZqlCXCIfSpcZkXkvHT+4xs98TVDg9JEcw0yMOcWd11gKIp0dabyFCy42bVUSYAClsFf78SIsq60XH3kRP+gLFi1oPf1vp59EaSQxKblJ+Ek7uI4Xo7hAtNyoe07G5GCdahDRRM2p/ioleOZrpjHZChabhCihRc8KwerSZeMULcfCxN0tmsgb+n6QAH79+LgKfLaQqH+/s3xfWKeRJnTw95Q/m2RD9zsk9+Jg1c17sPnebxSoQcXj0Tfzj4S8lftDwyuPqYS5RKgNOOnFR1mikkxjCkkbOgdWPmwqdeIUEFmoWxuHilykY/UXm8q5dP8EvaEgnj7tvOCq/izKCtiAe/BBg3XATpUGwpGekVsYTRgMb3Opb+N/4WtSQ7I7aDT9kxBKZ1mdopNbTW3dbIOb/cApf6Ptn9PCpxZFdiW0g9touGj8johbGZeFNdIHemtBnKbHW7BtnsNe83OxiMlQZ0yVOiAujMHjNbxAyLC43AR6WXZQ4J7kNkoMnhoG9pUf30IVPjSqboNs4mFWON9NDPYJs32+2EAT9NX6/3NUMPDPREbynVOF1l9UnjTiwfPASGxdbBRy5dSL0Mi6MPNmDRIjERJhkuv/T25WNjS9NP2psaJ9KsD1QMT9pxq8Cih0KwqBDkdd29bBWantyggp0Ju7VbCxAdd9XYlgL24DAQdC0t+bs0P+Xe5+zF+UmMq4vPgfX1pJA8vSu9gVnmi82IN145i3dzmoLjN+EtoQwPE+g9oIoeCt3ChyZZ3aYDmfckp1R7VDBP/DWJ3c6ToNiwjF76cEKDHy5FVP7ZZ/lzQkyBcKXeqAExoFYdokmmZe+E7SD2VLxQHP9lOKixwr/1BL2WTPfzqRoN9Gk929BJ1BubWbm66dKKemVX8vYHiB+AGwVmPVnsfRLAR5B4Arn58E/P9s2VYMdnOP8c1finuZPIg7/IHyt0Lwl/AJRho1k/Zxvw5Z/A3B9LtHc3ULxHdbpIYfF3zKTpJvj4acfkiW9+TO2liNHG+iHQ8bxD9I50L2jI+eHM3RTQerEDlUq2gIJmpJv28GOppo2dxf3lY9bBVw7KO/oxCBmugD6FG2mGk1tOh+X6DAjZDb+TGiqeJnItTHAu7jo8ZedmKRcuPzFx4I8JlO8oELs+hsmIMi28r6l2dSrcBdQzzCHxwsjk0f/QLaXn2gm+QdkoeQO2Y7eR9FHyCo7ITMmOfHsAGt3mScxQoGcZXoCQN9YvCKHyqu4/S1vaYpwvqSAxgpbP+fWaTLyns99hjypN0bknDUuo7VSifFP8fyJbSD7FbMhov86pOAvQ5aqhemaV8kOB6E6bczb1ucWls8F3eXBBiJlb5dhzqHaRCHpnM3bj+aQ9tTcz1G/x09YkPrrzN1XJbmERgmKIFFFF+lrYeAShZqPN+wW6Qgd0dfiWUaEq47hZw5PXvEAZ8gFDMMr2DBKKCJt68X9sxz8ZBt6kmtprJwDYHNt/WAlWunKRRd0xQ97CIUssoZT8uIb0R1OWddWM4+i+p2M+r2xgeQMS+aQvTvZD8+ohPdLdkHcIP7mcRfRdKKNOz4xbqbXYxaHcvut8LuAK17H/LJMWys9tj2h4RB01xEXhJSQaCtosDB5t8G2aOvU9VqWD+mF51mGgkSS4q+EWemc3ebz7LcLk8QV0QeGan3IMUZTwRARl1UCIuC+1sfNrsOetCkXpgf/Zbpqzt0Xb9D4APF5iJblnC0MYqmMGPUz+MYwIihhj8ELKlygbcbZcWuAfkK13VfF1PT0vs0CHRWqp3Vv7AIwInaYZWs7g8dFKDPy2/YCvgpy+vvIZ45HtPUBLP/n2b21SOZBhT088UWA4b4ccz0Qut42OCtD2BWD6lM9ZstMeOJSl+hoxJxo2FLOq4cAIKzVdm/n4LNn7ew5knSBmzRYVvhJuYSzbfg+K4whz2GNdfJU4FGiMYz8L4Fxfv/Iuhdf26LgHr6Xo54WFmwahdX+MnTogSMA54QhusRQE07cQorZQvlp+Luftx5W6yLclj+3nBZBTNCY0ybtqTDi9S/F+pI1Ba//X29lGJbAsIVSnTJFQA9hcebdOWcCf8Pww0K9X9FPiR12wLUqKxo1fCx+y1hRsTKZeQsOrRqFCH9cQwev7H3OS93wSp22aiiijYcF3FsjCBJLwg34atUJUbw0Z2kJ0DNkNNdguDfmXKzWIJBd84yGHAow4nNkMiLNSPB40I6tuGBSX5BFj2FMmLaiOl/i2j9c8U+ConzMBpJmWswT1cBQ0lnuwR08yM2vrh+5VCXP6Zl/EhTTOXl5qjYbGyG5z80nMpD59rhzxJerZ2JUvk/BpW+YIypB2zUcP5OpC3TxjE04b6mzj9VszU+kURpa3zo7L7pmMmw9Ta3oZc0dL1Lry4Fq+JSSFj79DAIS2d8FOv1uF3+4E+shRAWPbTzEKWYSlql9XbQ2Y8QPW0kEWiZlMx5bS17pyU20PoJAYOf59j3HSNKkvzSQdwqtCRQegCrrrfGQNo/ZjgMfgj5H7zAoPKRsAUuTUI4GDWhr1SLlc0ndz2Fl/czmE6opAc9pcu7YfEKGBXfda8YiBUs8gRy/PK61bK8jWHPczo97rm/s25JvVhY6oA9iBAu/OgIG0/4834bMHpAdzh0TyEnOi8BftRHn7B8mRGkXDkNA5CpamBwb/WvWRN9Z6d2CoHLFpZ2ZOAV614lIP/H6K00nwhFeZiahgo55Otm9uv6sq6M23U+myUuWkkKm8slzyXpPAieZsqHJ3LSHJPH3yVMPE2JLSHbNQw0ukCDH9Evp4RwFOzoPlY4k4VuTH9pNCO78vs98an1fkcv1MhsWK4zjgwWJC5orBNHe5YjP/VpThQAAP1t9C1aiohyKZKwJyquvRNoYXRh1EivjsngPUR+WeM3CRLG36b5jx3GNM3iTo0CLEucAOayW7KR3WAaI9gQDRzq9ErT0onVKjwmCo5x/LpUAPI3RYRav4nVuabvVmg/CwL6nqqWxt4ylbB1FZM+veCQMU1Sw1xKC8bZe3sJEFZW7I1/sPlPULuVWJsNVhjMhm8fhXDJJ5nu8JdF4rbT1IFvcrqiYKEjxM4INtvwsHnsdSrEJ0zYeE4/v1y6DwkeIbsYp5JpAU17ZROLwe6aljRjOekafMgjzNsG0o54zEi88SXDS7U3oResTydCMoOqvIwTPE4H3lQ/JwBUs3juVUlnBcZYHX0sB9DpCc7van+xJkIRjPN7oq8jqewLrsv29+SROXhj7mLf9zrs5K6tXidrXmqKYxNd3v6wlQC9iE2+yxh28uwyKwVMpAnAP7jI70mvIBVFwAW3wfyKFNiTiA7cpfsvZlHNuf3foW/ruDLCvz7gad9pxSRcSIethHfv5lmJyUzcOu9frqiH8tdJfYOG7r3Cecj3A8MRJB5fXMHaVBhvARdMGBs/HKV0elLh2OAJgndXrSYu1w5ukXH5R+fz5TzyHzesDmv7o4eMbvbLwAZutjNN7VkiCCrqTNvqZgljowjaI582MJWGVWf1DOxuPAynm7fI8AF8qEJ99Rsw4yVVQcyC9vgKGVR2t4mXuMd3tSb2D7jqFZnkZrMQ03zugjuKdDIwBhvkSTbA7XDQkkcspcQsdHfu0trj+9J+XV5dDauDjFEWxXMBm61RrjuGR4qVfyC3a/9PoTUCKiJtRzqYzmF0G3tnQ3JMZ1GOB/EINtgfZ6aiBpJpfn0NbT76yyYs5AZWKugJha6ZpIAHCMNVp7JxRRRs+DW0AxEHBTZr6rvinXcnhWGXgnKE+2lkyXv7w6zBuzpYusSuQv/SpwaMXQR85qCS9M8otmBC2FNWRgiYUJmXJL5QvdXrMJexXjMmSudPnYw4veMDsx1VBzSSVrw4G+h/NCNDYoH+RL13Izik5GmDokSnV6tNpvCEel4YkZX4t5PLMq2K1koqMBk/kUTcaoTWdhJOc7kS51cWI/re6Okp59wgK8IA+i5UxNXjV4KsgJB2sSbFrtHGCwGEhE92WVUY0UMc4DqdS0ZQ/+j5WScq3MVmWa/pdIbHwOt/SfstO1MACOj4OAIF4ceHiqFP0uZ4FML5lqLBjATdcFl5E9MwNN9QOlBODwCCKWDf5ZvxPfQiHs+gZ3r7H43huR1rPYk7wYgWE8LQlg39UPTDP2pzZn6RlWe/o4ygFgaJvnLkzAArqrfQrxijjFH/UXIR0oh//su8O1RrMGEQA9mzrWlRWJxGIhChoiunbchbkFExcziLa/DD8iUU+Er+OsOe3shbmPLL9n8H0E6cNMJhhWivC7xAdQlUJFvld1dmrL7pGd91CxXH3JkkIq4j1BDeGV3ddTwk+7BhennltaZ/Vs6cUKJgNlCi9sA0cmYvIRa/4xdclYSyfceAcjXOiSagGhuEPVCpf2nXoYSUD92//eUtSV4bwKY+YtTcFzVEBRgqwdMBtAhbSHrsKx5gAW7XlpbtOKldcYEZo7wzCwWPlaVlB3Efk9emTLWjaAA/k6G/cAHtofxlt3kAk71G/fB6XPX7EQedvRk4Onxmm7jeCMgWbe3HbBXDD1MNz4DXnPhZmYXddF1Cq/P6zhK2qNsBUBwUPM4AVzvy3shOEeY0+d/x9X+QOr71xPYEYkNEP/Hb38B1N9woGIuyUmFFJEpEUKcblTgg5JR/T4xIM96OCqRqXEoy1lv5PzbCQwPSQybsb5jDUF06XXiYhREzBOXT+hNnAh9DT8RiX9UrOQ/8C88WRnQ4w2foKEiGCjsgWrqLDTJvcLF2yPmZi6KncBe78iIfsvh2xRdB/64b3P4XBd2uNPH/nPEH1DA8D4umgbUiF1IOma94ibLpwU5WPcG1oz1VBUZbvrYwio86RKyRRl4PFy/AXm7HnK7O3EFZlCuf6rysU/b4kLejhI59VRColbCw4BJhnFy+P5/P5y7j9pXXMYOxO3JXF+uk5kdICtzXaAUSJDe0uJKSuY2/BqW5mkJArjQsA9r3qgX/WuXjT7s+TmpgHsWcZlp8tGSg4gcxbesaf9C5BFamKPpoZ3NKi1aFXCahbz5uJthS8XDNQ7qObx1Cymesvn7yf8BUTi6eayqybF2E82O4MZTqWnGz8GfzLyM3ZMvz8yIavL1sUqgQUhSMK58b4jbJKnmW3LXaVesxscxImAWkcxkUBlT/MeBu7PrHF1riApNteMov9NuepoHnQH2YcsDphIiXhGbdiAjtAAANaQJJOGfeMTuATcvDWEXAW6G19M4RJJWSYsCfDT86qpj0pQlgEwiMl1i0Q47QGp3Ti6GnsuIpHWhp0aFElRdBCd+nQjSdoougoK58vXYFz6jq8fCMj8nGFRPsoNQ1HXzN0tWBH/HugaSb33mUI6FpOw2WTxiSC4aAU+mWVYjUVZCdjciRZStXmbG4DU9MDFdc2gLS+lUEgyg75wJ2gsbOlZMA1QmZTsAU4qNT6LkUo/+BzYCoRjRLOl0xK8Ym0gRFijPF9TFbfrWBWzUhYdL2ln0DBGdyjKTJ1wGAZHFR8jv1bgDV2iYUxHjxE0xER/4ANJ07sbDPvH34n2V8dfixvZQ6XT+zzxGrTI3ZU1K6LD3TabvNAkNdm4XYceu0w76D+bXeHLgbEksflM7TSLG+iFWDw2ntmpRtdM2/CKHiBljEXGaLc0C0L2iMQ6TzkBHgMnw+5cg5z78HTusCw4uFieJajJf6tpajb8PzLroalUnMIk+dvdt9NynaySGO0OFMJLN08gEB+A85TvgK+OnBbB1MAjRJmt+PxPQV//THGxX2k+hTlpxf/J77j7kKWCvX07oaqbKPu3fug9sfPD3aS+vsBNUAqFeZL99rbDVF/OuS9mRPTs44S7Hv6s8K5lPoT0dSDlrfIfBsxIqYiVdeHcmB0e7cFsyIYF78bcI+Ao2xR239FwjRV9wofBSY1mhSvlgEgv9RlmqiPPFiQFbRdSXRRDRuT6Jc3UGEBViBYzwJKdiyDJhzDiaYMSCEIamZYuJi9hHEofGRBi3fYjBurcnRjGj/09f9MGcmWhkybLnZdV22bSZrkprizmcc+9QWvhrbg2Y340irz/1rKVP0O/23YxV9jzLgAmMP4zyrcg0NMBnAC7DNFRyUj7YZPVQcPLphc48Q/mC/gX0LkTWV9qKFDRunbkgR2JrdmEFcvRyup1mZEAp3+bQe3kR659kjUXTGFiCIpFJZVYgDUbfNtH2jyjzyzaPrBMn498IYRavcPCN0h22ovhOmcojKz9H1FTFb4SnKLmC1X2+yRbQpvRvc9Nm/RUmcrNKwd0ATL9SPXvvRyTGhhHwK0BljrBZpb4LJd/UkeyJqlDc21NDyXdU+1D5cF/p5UUldVkOPHnMjm8TBO5UcpY6AkvinwKmC2wLnCFMDSPxMGxWSleRe8h3ezIZExOEIpdeHdbA0M4psQ4MC21PpP9KbYyxfZdhUKgc+AsY4hLo3JVyhfusMaHuF362cbcZ/UVLne+8VyP7cKaKpa/huFJCRMifbeQ2LC8z09W+/fhoceYxJTax23zeV/oVKxzxVtK/OVQ3/ZxvkNoGi45PnijSIOpsOpmMN6hC0LpxYafcsFXjC400LO2B3gZNmKRxsh1cEbsuckJetcByfMB+rQk7XQcXTkwvj1MWvq3KzLLmaOWJPdf4mgZjS8F2UU5jo24HK7xyBQB1duqaKVz4+s0jl41yj0UsBnBnssn6Pw12ezvInXffBRiYpV9zS3mX1Mw/KxMAbvj1tY7TLXtSFJhkmTO/FFflUO5d9v+i9T5CZDOcYsVX3qNLx5AQ7v8+n7h572PXm43JK9CPl/56QANHjVe262FQG+293x0EXAHQcD2DI6wZNuQ0ETiqBnsozyZi8wYwD17LRTSE+1p+O/PnEF/iM315xxAkw56ojwz61NQ/5cdYd7vVPqO7SnQ+AQapVeoYB/pOpXX+pb6kAffs92b0psKblQPGDI6IGjTFXCqRaN9ToJEEPx8gIB9ILlbCsj8Rez58VvinSJ+Wf/ddCY7hsPO7fbvQIVRHXbDOZ8xB0KLs9GeeDnO83hqhIPJLZvLDXcoVAqkoANwu/J9A6GIDhA5nt3e8Tt+XmTQKxnNN/1DEekLsQPhEBWHQVN3oVvDfR+d3pcCFrX/cl8CqVk7hENrl3ZRJW2LRL8RZfcDR038OlxpyWa09924A6etcGKffPwgSngkh+waawNUce2/3Dhd5Sygta+483ekzaQsgzVkPt3FVp0LWAOzOjYyzfebAQOQ1amVRtGiKg/BoJtALf3dczm16kEwvkK6uCg93AHkkR4nVn6Su0hzCenr1YHJbReuUSHj142eOyGKcxYWQH4/wq2L4J0z/z2WuKY8Sg62Cv4LCQ9DlCrJiGYgv6FvIkELg8xeSnIGhW7FbVu7zz1dP/X1raVDv+T7FSfyhWB497qIhFX3XOUSdkBQFyPlzLTmthrcK5bGoBK6x3Mf0cqCpetukA4uu7yfRSYKrOqjR/WydrWu7mwthZlc1bb8NfVngCbYAmLbukUZg/Ovq0mbO4Zncr2Y5dOIq0+dK72YI7klU/kkJTioWWICGmPVXa/fjuRCQA+jX1Q7N6R+0878tuUsJkesiKM46e6Y1HUB6krdr0KWe/X5eTnvxL5D/nmX77RRuNZP3rVxibJT8pk0yr/69SNQaO7oGD/mPRQJNz1k8q06nDQdng+kWcFAVLt5XNANNUsiUe0ewpog0HB1HJ4jP+V4XTXjWysqG3f0sW8EkpclF/k/JBBgqGtrQR5DWd7je9viXE/v9gq3YmEvRFi8T7TNSJvBc3E7XyuwbJM9h61pHmfgp2gqT8zKkXmyjEKvXsS/efXzdMB7g311N53fvSffeIW4p7qCFztC/P3aW61YbnDs/O64jLqsoR63HMIjJcsdy+G/3NXD/+DQmXWqQJvokI1J3+bkaGweHz80nhLJjL14NzfOJXN2geuAFqStMCCNLc6oK3Q8zA3Ow6M3GlWcxbF8HyGUW/2q7d0AY80peAFRe9ra4MCOtJVIU9YAHmaKciPI07Ie6M+9Ki8l2opQb+B4dFcVvGGwO3xFNi/h5+2SQXG3pKtS3nc0mnnESChlKgsISosNSa5V2pCLJd2dJnk7tgscRfl/9Jhl+rS4ZNgeD9UQEyVsfMN5BdWt/GPAoaGoErO3iefbmdeXUlPaNn55MAO9qt19ZmeRp6o2gWQt1TF/JOdiJjrXLZvPTutjPDBCWq+BZhnwA53xyk/OSAhpLP3RgNt1QqOO02/DDLLMvKceCegpY4O3vDd6XIBIzNJFACzsmTFOPqFtpvMnE5wdfQniYV+Hv36LY1tjmJtstJog2xid+bk9lMCGZMIr7zTFMRTUbHH2a79oAQACX8LayxlWrgYks/X0ndHbVG7oyUd0Rl1YmDKthR1saGadheSbK9CGjN5r+tAz3pQSck0BC5TapCQm1+v1tS9iubvSEKZ7Y6kx+weerLK5wkj/9VU0yMa9yWvsCVE7ZgXuU5cICeMlEoAhQ0n0Km0z1n+ksIh+3EpYZrtDACXP/6aTbkczAik17ZbPCs5dQZQLEqLoAKv/oZ92PYAAAA=" width="480" height="360" class="img_RpFt"></p>
<p>好吧，對某些人來說或許是這樣，不過要稱得上是 Homelab 的門檻其實很低：只要在家中放一台伺服器，它可以是一般的桌機、NAS、筆電或是樹莓派。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="硬體架構">硬體架構<a href="#硬體架構" class="hash-link" aria-label="Direct link to 硬體架構" title="Direct link to 硬體架構">​</a></h2>
<p>黑線是乙太網路、藍線是其他（主要是 USB）：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_architecture-20daf3ca336388a7c266f48f7b1d0286.webp" width="2560" height="1813" class="img_RpFt"></p>
<p>目前我的 Homelab 硬體配置大概如下：</p>
<ul>
<li>4G 路由器<!-- -->
<ul>
<li>TOTOLINK LR350 4G LTE</li>
</ul>
</li>
<li>交換器<!-- -->
<ul>
<li>Zyxel GS-108B v3</li>
</ul>
</li>
<li>樹莓派<!-- -->
<ul>
<li>Raspberry Pi 3B</li>
</ul>
</li>
<li>筆電（伺服器）<!-- -->
<ul>
<li>Lenovo Yoga Slim 7 Carbon 13ITL5</li>
</ul>
</li>
<li>DAS (Direct-Attached Storage)<!-- -->
<ul>
<li>QNAP TR-004U 4-bay</li>
</ul>
</li>
<li>USB Dock<!-- -->
<ul>
<li>j5create JCD533</li>
</ul>
</li>
<li>USB 網路卡<!-- -->
<ul>
<li>j5create JCE145</li>
</ul>
</li>
<li>筆電<!-- -->
<ul>
<li>Framework Laptop 13 (13th Intel i7-1360P)</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="入口網站">入口網站<a href="#入口網站" class="hash-link" aria-label="Direct link to 入口網站" title="Direct link to 入口網站">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-b6e2ba28d48ffce91f8068a7c6aa8cd5.webp" width="1440" height="835" class="img_RpFt"></p>
<p>當自架的服務越來越多，一個簡單的入口網站來尋找需要的服務是十分必要的。目前我是使用 <a href="https://github.com/Lissy93/dashy" target="_blank" rel="noopener noreferrer">Dashy</a>，關於其他最後沒使用的候選方案我補充在<a href="https://flyskypie.github.io/posts/2025-04-26_homelab-homepage" target="_blank" rel="noopener noreferrer">另外一篇貼文</a>。</p>
<p>目前我把所有服務大致分成四類：</p>
<ul>
<li>數位基礎設施<!-- -->
<ul>
<li>一些情況不會直接面對終端使用者 (End User)，而是在背景默默工作的東西會放在這裡。</li>
</ul>
</li>
<li>專案 (Side Project) 基礎設施<!-- -->
<ul>
<li>「管理」相關的東西會放在這裡。</li>
</ul>
</li>
<li>生活<!-- -->
<ul>
<li>比較屬於個人會使用到的服務會放在這裡。</li>
</ul>
</li>
<li>開發工具<!-- -->
<ul>
<li>「研發工具」之類的東西會放在這裡。</li>
</ul>
</li>
</ul>
<p>經濟學裡裡的生產要素被分成四類：自然資源、人力資源、資本、企業才能。如果用經濟學裡生產要素的概念來比喻，「數位基礎設施」就像是自然資源的陽光、空氣、水；「專案基礎設施」則是資本裡的機器、設備、廠房。</p>
<p>「生活」是不直接涉及生產東西，比較像是個人消耗品。「開發工具」則是尺度比較小的工具，像是電鑽、板手...之類的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="數位基礎設施">數位基礎設施<a href="#數位基礎設施" class="hash-link" aria-label="Direct link to 數位基礎設施" title="Direct link to 數位基礎設施">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="pi-hole-與-dns">Pi Hole 與 DNS<a href="#pi-hole-與-dns" class="hash-link" aria-label="Direct link to Pi Hole 與 DNS" title="Direct link to Pi Hole 與 DNS">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjE2MCIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMjQwIDE2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiA8ZGVmcz4KICA8bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIyLjc0NTIiIHgyPSI0NC4yMyIgeTE9Ii4yNzgwMyIgeTI9Ii4yNzgwMyIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKDEuMjkzMiAuNzczMjkpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgIDxzdG9wIHN0b3AtY29sb3I9IiMyMmIyMjUiIG9mZnNldD0iMCIvPgogICA8c3RvcCBzdG9wLWNvbG9yPSIjMjlmYzJlIiBvZmZzZXQ9IjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxzdHlsZT5AbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOmRhcmspeyN0e2ZpbGw6I2ZmZn19PC9zdHlsZT4KICA8cGF0aCBpZD0iYiIgZD0ibTEgODUuNDU5YzAtMS43MTcgMS43MDctMTYuOTkzIDE2LjkwNy0xNi45OTMgOS45OTgtMC43MTcgMTcuNzY2IDcuMTY5IDI3LjQ2NCA3LjE2OSAyNC4yMDgtMS44MTQgMjAuOTUyLTM0LjI5My0wLjI1Mi0zNC4yOTMtNS4zLTAuMDE0LTEwLjE3OSAyLjIyLTEzLjkyOSA1Ljk1NGwtMjQuNDUyIDI0LjQ1MWMtNC4wNTggNC4wNDUtNS43MzggOS4yMjUtNS43MzggMTMuNzEyIi8+CiA8L2RlZnM+CiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NSkiPgogIDxwYXRoIGQ9Im0zNy40IDQwLjE0NWMtMTYuMjItMS43My0zMi41Ni0xMy45OS0zMy44NS0zOS45MyAyNS4xNyAwIDM4LjYzIDE0LjkgMzkuOTMgMzguNTEgNC43Ni0yOC4zMiAyNy4wNy0yNSAyNy4wNy0yNSAxLjA2IDE2LjA1LTEyLjEyIDI1Ljc4LTI3LjA3IDI2LjU5LTQuMi04Ljg1LTI5LjM2LTMwLjU2LTI5LjM2LTMwLjU2YTAuMDcgMC4wNyAwIDAgMC0wLjExIDAuMDhzMjQuMjggMjEuMTUgMjMuMzkgMzAuMzEiIGZpbGw9InVybCgjYSkiLz4KICA8dXNlIHRyYW5zZm9ybT0icm90YXRlKDE4MCw0NSw4NS4zKSIgZmlsbD0iI2Y2MGQxYSIgeGxpbms6aHJlZj0iI2IiLz4KICA8dXNlIHRyYW5zZm9ybT0icm90YXRlKDkwLDQ1LDg1LjMpIiBmaWxsPSIjOTYwNjBjIiB4bGluazpocmVmPSIjYiIvPgogIDx1c2UgdHJhbnNmb3JtPSJyb3RhdGUoLTkwLDQ1LDg1LjMpIiBmaWxsPSIjOTYwNjBjIiB4bGluazpocmVmPSIjYiIvPgogIDx1c2UgZmlsbD0iI2Y2MGQxYSIgeGxpbms6aHJlZj0iI2IiLz4KICA8cGF0aCBpZD0idCIgZD0ibTcuMjkgMTM5LjI1YTguMTcgOC4xNyAwIDAgMSA1IDEuMjkgNC4zOCA0LjM4IDAgMCAxIDEuNzEgMy42NiA1LjEgNS4xIDAgMCAxLTAuNDggMi4zMSAzLjg3IDMuODcgMCAwIDEtMS4zOCAxLjU0IDYuMiA2LjIgMCAwIDEtMi4yIDAuODUgMTQuNCAxNC40IDAgMCAxLTIuOTMgMC4yN2gtMi4xOHY2LjE2aC0xLjU3di0xNS42NGExMiAxMiAwIDAgMSAyLTAuMzNjMC43NC0wLjA3IDEuMzktMC4xMSAyLjAzLTAuMTFtMC4wNyAxLjM2Yy0wLjU5IDAtMS4wOCAwLTEuNDkgMC4wNmwtMSAwLjF2N2gyYTE2IDE2IDAgMCAwIDIuMjgtMC4xNSA1IDUgMCAwIDAgMS43NS0wLjU1IDIuNzUgMi43NSAwIDAgMCAxLjEtMS4wNyAzLjcgMy43IDAgMCAwIDAuMzktMS44MSAzLjIgMy4yIDAgMCAwLTAuNDMtMS43NSAzLjEgMy4xIDAgMCAwLTEuMTItMS4wOSA1IDUgMCAwIDAtMS42LTAuNTcgMTEgMTEgMCAwIDAtMS44OC0wLjE3bTEyLjM1LTAuNzZhMS4xMiAxLjEyIDAgMCAxLTAuMzIgMC44NCAxLjE1IDEuMTUgMCAwIDEtMS41NyAwIDEuMTIgMS4xMiAwIDAgMS0wLjMyLTAuODQgMS4xMSAxLjExIDAgMSAxIDIuMjEgMG0tMC4zNSAxNS40OGgtMS40OXYtMTEuODloMS40OXptMy43MS03LjMzaDUuMTl2MS40NWgtNS4xOXptOC42NSA3LjMzdi0xNy4zM2wzLjQzLTAuNTZ2NS44YTcgNyAwIDAgMSAwLjg4LTAuMjIgNS41IDUuNSAwIDAgMSAxLTAuMSA2LjQgNi40IDAgMCAxIDIuNDUgMC40IDMuOCAzLjggMCAwIDEgMS41NiAxLjE0IDQuNCA0LjQgMCAwIDEgMC44MyAxLjc1IDkuNyA5LjcgMCAwIDEgMC4yNCAyLjI1djYuODNoLTMuMzd2LTYuNDJhNC43NCA0Ljc0IDAgMCAwLTAuNDMtMi4zNCAxLjcgMS43IDAgMCAwLTEuNTgtMC42OSA0LjcgNC43IDAgMCAwLTAuODYgMC4wOGMtMC4yNyAwLTAuNTEgMC4xMS0wLjcyIDAuMTd2OS4yem0yNS45NC02LjA3YTcuOCA3LjggMCAwIDEtMC40MSAyLjYxIDUuNiA1LjYgMCAwIDEtMS4yIDIgNS4yNSA1LjI1IDAgMCAxLTEuODcgMS4zIDYuMiA2LjIgMCAwIDEtMi40NSAwLjQ2IDYuMiA2LjIgMCAwIDEtMi40My0wLjQ2IDUuMyA1LjMgMCAwIDEtMS44Ny0xLjMgNS45IDUuOSAwIDAgMS0xLjIyLTIgNy41IDcuNSAwIDAgMS0wLjQ0LTIuNjEgNy4yIDcuMiAwIDAgMSAwLjQ1LTIuNiA1LjkgNS45IDAgMCAxIDEuMjQtMiA1LjcgNS43IDAgMCAxIDEuODktMS4yOSA2LjQ0IDYuNDQgMCAwIDEgNC43OCAwIDUuNSA1LjUgMCAwIDEgMS44NyAxLjI5IDUuOCA1LjggMCAwIDEgMS4yMiAyIDcuNCA3LjQgMCAwIDEgMC40NCAyLjZtLTMuNDkgMGE0LjM0IDQuMzQgMCAwIDAtMC42My0yLjUgMi4yOCAyLjI4IDAgMCAwLTMuNjMgMCA0LjI3IDQuMjcgMCAwIDAtMC42NCAyLjUgNC4zNSA0LjM1IDAgMCAwIDAuNjQgMi41MiAyLjI0IDIuMjQgMCAwIDAgMy42MyAwIDQuNDMgNC40MyAwIDAgMCAwLjYzLTIuNTJtMTIuMDUgNi4zYTguNCA4LjQgMCAwIDEtMi40My0wLjMyIDMuNiAzLjYgMCAwIDEtMS40Ny0wLjg0IDIuOCAyLjggMCAwIDEtMC43My0xLjMxIDcgNyAwIDAgMS0wLjItMS43NHYtMTMuMzVsMy40My0wLjU2djEzLjE4YTQgNCAwIDAgMCAwLjA3IDAuODMgMS4zNCAxLjM0IDAgMCAwIDAuMjYgMC42MiAxLjQ1IDEuNDUgMCAwIDAgMC41NiAwLjQyIDMuNCAzLjQgMCAwIDAgMSAwLjJ6bTIuOTQtNi4xOWE3LjMgNy4zIDAgMCAxIDAuNS0yLjgxIDYgNiAwIDAgMSAxLjMtMiA1LjMgNS4zIDAgMCAxIDEuODUtMS4yMSA1LjcgNS43IDAgMCAxIDIuMTUtMC40MiA1LjM1IDUuMzUgMCAwIDEgNC4wNCAxLjU2IDYuNDYgNi40NiAwIDAgMSAxLjUgNC42M3YxLjI5aC03LjgyYTIuMzIgMi4zMiAwIDAgMCAxIDEuNjggNCA0IDAgMCAwIDIuMzUgMC42MiAxMC40IDEwLjQgMCAwIDAgMS44NS0wLjE3IDcuMiA3LjIgMCAwIDAgMS40OC0wLjQzbDAuNDYgMi43OGE0IDQgMCAwIDEtMC43MyAwLjI4IDExIDExIDAgMCAxLTEgMC4yNGMtMC4zNyAwLjA3LTAuNzcgMC4xMy0xLjIgMC4xN2ExMSAxMSAwIDAgMS0xLjI5IDAuMDcgNy42IDcuNiAwIDAgMS0yLjg0LTAuNDggNS41IDUuNSAwIDAgMS0yLTEuMzIgNS4zIDUuMyAwIDAgMS0xLjE4LTIgOCA4IDAgMCAxLTAuNDItMi40OG04LTEuMzFhMy4xIDMuMSAwIDAgMC0wLjE1LTAuODUgMiAyIDAgMCAwLTAuMzktMC43MyAyIDIgMCAwIDAtMC42Mi0wLjQ4IDIuMiAyLjIgMCAwIDAtMS0wLjIxIDIuMyAyLjMgMCAwIDAtMSAwLjIgMiAyIDAgMCAwLTAuNjkgMC41MSAyLjMgMi4zIDAgMCAwLTAuNDMgMC43NSA1IDUgMCAwIDAtMC4yMiAwLjg2em0xMC43MS01Ljg3YTMuOSAzLjkgMCAwIDEtMC4yNyAxLjUgMy41IDMuNSAwIDAgMS0wLjc0IDEuMTIgMy4yIDMuMiAwIDAgMS0xLjA3IDAuNjkgMy40IDMuNCAwIDAgMS0xLjI3IDAuMjQgMy41IDMuNSAwIDAgMS0xLjI4LTAuMjQgMy4zIDMuMyAwIDAgMS0xLjA3LTAuNjkgMy41IDMuNSAwIDAgMS0wLjczLTEuMTIgNC4xMyA0LjEzIDAgMCAxIDAtMyAzLjQgMy40IDAgMCAxIDAuNzMtMS4xMiAzLjMgMy4zIDAgMCAxIDEuMDctMC43IDMuNSAzLjUgMCAwIDEgMS4yOC0wLjI0IDMuNCAzLjQgMCAwIDEgMS4yNyAwLjI0IDMuMiAzLjIgMCAwIDEgMS4wNyAwLjcgMy40IDMuNCAwIDAgMSAwLjc0IDEuMTIgMy45IDMuOSAwIDAgMSAwLjI3IDEuNW0tMC43MSAwYTMuNCAzLjQgMCAwIDAtMC4xNi0xLjE5IDIuOSAyLjkgMCAwIDAtMC41NC0wLjkyIDIuMzUgMi4zNSAwIDAgMC0wLjg0LTAuNTggMi42IDIuNiAwIDAgMC0xLjA2LTAuMjEgMi43IDIuNyAwIDAgMC0xLjA3IDAuMjEgMi4zIDIuMyAwIDAgMC0wLjgzIDAuNTggMi45IDIuOSAwIDAgMC0wLjU0IDAuOTIgMy40IDMuNCAwIDAgMC0wLjIgMS4xOCAzLjQgMy40IDAgMCAwIDAuMiAxLjE4IDIuNyAyLjcgMCAwIDAgMC41NCAwLjkyIDIuMyAyLjMgMCAwIDAgMC44MyAwLjU5IDIuNyAyLjcgMCAwIDAgMS4wNyAwLjIxIDIuNiAyLjYgMCAwIDAgMS4wNi0wLjIxIDIuNCAyLjQgMCAwIDAgMC44NC0wLjU5IDIuNyAyLjcgMCAwIDAgMC41NC0wLjkyIDMuNCAzLjQgMCAwIDAgMC4xNi0xLjE3bS0xLjY3IDEuOTVhNi40IDYuNCAwIDAgMC0wLjUxLTAuODMgNiA2IDAgMCAwLTAuNDgtMC42NGgtMC42NnYxLjQ3aC0wLjY5di0zLjhhNSA1IDAgMCAxIDAuNTUtMC4wOWgwLjU0YTIuMiAyLjIgMCAwIDEgMS4yOSAwLjMyIDEuMDggMS4wOCAwIDAgMSAwLjQ0IDEgMSAxIDAgMCAxLTAuMTkgMC42MyAxLjI1IDEuMjUgMCAwIDEtMC41NSAwLjQybDAuMjMgMC4yOSAwLjI2IDAuMzljMC4xIDAuMTUgMC4xOSAwLjMgMC4yOCAwLjQ1czAuMTcgMC4zMiAwLjI0IDAuNDd6bS0xLjY1LTJoMC4zN2EyIDIgMCAwIDAgMC43OS0wLjE0IDAuNDggMC40OCAwIDAgMCAwLjI5LTAuNSAwLjUzIDAuNTMgMCAwIDAtMC4yOS0wLjUgMS41IDEuNSAwIDAgMC0wLjY3LTAuMTRoLTAuNDV6Ii8+CiA8L2c+Cjwvc3ZnPgo=" width="240" height="160" class="img_RpFt"></p>
<p>架設的服務一多，單靠埠號去分辨服務其實不理想，而為了實現這個需求就需要 DNS 和反向代理 (Reverse Proxy)，反向代理的部份稍後再回來談，我使用 <a href="https://github.com/pi-hole/pi-hole" target="_blank" rel="noopener noreferrer">Pi-hole</a> 來擔任我的 DNS 伺服器。</p>
<p>Pi-hole 除了 DNS 另外一個功能是封鎖黑名單內的域名，如此一來就可以在 DNS 層級封鎖掉一些廣告。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="dhcp">DHCP<a href="#dhcp" class="hash-link" aria-label="Direct link to DHCP" title="Direct link to DHCP">​</a></h3>
<p>因為我會帶著主力筆電出門，如果每次都還要重新設定 DNS 同樣不夠理想，因此 DNS 能夠直接由 DHCP 發送完成設定是十分必要的，最後是成功完成了，然而過程中有遇到一些小阻礙，在此紀錄一下。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="容器內的-pi-hole-dhcp">容器內的 Pi-hole DHCP<a href="#容器內的-pi-hole-dhcp" class="hash-link" aria-label="Direct link to 容器內的 Pi-hole DHCP" title="Direct link to 容器內的 Pi-hole DHCP">​</a></h4>
<p>Pi-hole 本身就支援 DHCP，但是我是把它跑在 Docker 容器內，因此需要一些額外的處理<sup><a href="#user-content-fn-pi-hole-dhcp-24e6e4" id="user-content-fnref-pi-hole-dhcp-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>，然而在這方面我沒有成功讓容器內的 Pi-hole DHCP 正常運作。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="host-上的-isc-dhcp-server">Host 上的 <code>isc-dhcp-server</code><a href="#host-上的-isc-dhcp-server" class="hash-link" aria-label="Direct link to host-上的-isc-dhcp-server" title="Direct link to host-上的-isc-dhcp-server">​</a></h4>
<p>無奈之下我只好在主機 (Host) 上直接安裝 DHCP 伺服器，然而這讓我碰到另外一個問題：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">receive_packet failed on enx00051b52140f: Network is down</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>要排除問題必須先切到固定 IP 配置遠端進 homelab （或是直接物理訪問伺服器），把 DHCP 的 Daemon 重新啟動：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">sudo service isc-dhcp-server restart</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>問題發生的時候 Daemon 本身顯示正常，所以我也找不到其他方法偵測問題來自動重起 Daemon。</p>
<p>最後懷疑是 USB 網路卡 j5create JCE145 不夠可靠、掉封包造成 DHCP 故障。</p>
<p>至於為什麼需要掛一個 USB 網路卡是因為擔任伺服器的筆電是薄型筆電，只有三個 USB Type-C。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="樹莓派上的-isc-dhcp-server">樹莓派上的 <code>isc-dhcp-server</code><a href="#樹莓派上的-isc-dhcp-server" class="hash-link" aria-label="Direct link to 樹莓派上的-isc-dhcp-server" title="Direct link to 樹莓派上的-isc-dhcp-server">​</a></h4>
<p>剛好之前借給親戚當文書電腦的樹莓派被反還了，索性試著把 DHCP 伺服器轉移到樹莓派上，然後那個討厭的問題就再也沒有出現過了。</p>
<p>DHCP 伺服器，結案。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="traefik-與反向代理">Traefik 與反向代理<a href="#traefik-與反向代理" class="hash-link" aria-label="Direct link to Traefik 與反向代理" title="Direct link to Traefik 與反向代理">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/04_traefik-c0e3b030d71e6e9c53908519a78e5db0.webp" width="2875" height="1501" class="img_RpFt"></p>
<p>用 <a href="https://en.wikipedia.org/wiki/Apache_HTTP_Server" target="_blank" rel="noopener noreferrer">Apache</a> 或 <a href="https://nginx.org/" target="_blank" rel="noopener noreferrer">Nginx</a> 做反向代理的組態檔我都寫過，因此當我第一次<a href="https://flyskypie.github.io/posts/2024-07-27_traefik" target="_blank" rel="noopener noreferrer">接觸到 Traefik</a> 的時候是十分的驚豔，確實感受到來自開發團隊所謂的：</p>
<blockquote>
<p>We forgot what was impossible so we could build it!<sup><a href="#user-content-fn-traefik-24e6e4" id="user-content-fnref-traefik-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
</blockquote>
<p>整個流程大概是這樣的，在 Docker 新增一個網路：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">docker network create --driver=overlay --attachable traefik-public</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>開一個容器跑 Traefik 的服務然後接到剛剛開網路：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">proxy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> traefik</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">api.insecure=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">providers.docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">entrypoints.ep1.address=</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">entrypoints.ep2.address=</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">9090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:8080:8080&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;9090:9090&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /var/run/docker.sock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/run/docker.sock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">traefik-public</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">external</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>對於想要反向代理的服務則是在它的組態上加上反向代理的資訊像這樣：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">app1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker.io/alpinelinux/darkhttpd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.app1.entrypoints=ep1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.app1.rule=Host(`example.com`)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如此一來就不用每次更改規則的時候都要去修改或重新啟動反向代理的配置與伺服器，又或是目標服務因為某些原因掉線時候讓反向代理伺服器找不目標而出錯，使用上十分方便。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="oci-registry">OCI Registry<a href="#oci-registry" class="hash-link" aria-label="Direct link to OCI Registry" title="Direct link to OCI Registry">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Qm94PSIwIDAgMTI4IDEyOCI+PHBhdGggZmlsbD0iIzNhNGQ1NCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjAgOTYuOXYtOC4xYzAtMS4xLjctMS45IDEuOC0xLjloLjNjMS4xIDAgMS44LjkgMS44IDEuOXYxN2MwIDQuMS0yIDcuNC01LjYgOS41cS0yLjU1IDEuNS01LjQgMS41aC0uOGMtNC4xIDAtNy40LTItOS41LTUuNnEtMS41LTIuNTUtMS41LTUuNHYtLjhjMC00LjEgMi03LjQgNS42LTkuNVE5LjI1IDk0IDEyLjEgOTRoLjhjMi43LjEgNS4xIDEuMSA3LjEgMi45bS0xNS4xIDguNWMwIDMgMS41IDUuMiA0LjEgNi43YzEuMS42IDIuMi45IDMuNC45YzIuOSAwIDUuMS0xLjQgNi42LTMuOWMuNy0xLjIgMS0yLjQgMS0zLjhjMC0yLjYtMS4yLTQuNi0zLjMtNi4xYy0xLjMtLjktMi43LTEuNC00LjItMS40Yy0zLjIgMC01LjUgMS42LTYuOSA0LjVjLS41IDEtLjcgMi4xLS43IDMuMW0zMi4yLTExLjNoLjVjNC40IDAgNy44IDIuMSA5LjkgNmMuOSAxLjUgMS4zIDMuMiAxLjMgNXYuOGMwIDQuMS0yIDcuNC01LjYgOS41cS0yLjU1IDEuNS01LjQgMS41SDM3Yy00LjEgMC03LjQtMi05LjUtNS42cS0xLjUtMi41NS0xLjUtNS40di0uOGMwLTQuMSAyLjEtNy40IDUuNi05LjVjMS43LTEuMSAzLjYtMS41IDUuNS0xLjVtLTcuMiAxMS4zYzAgMi45IDEuNCA1IDMuOSA2LjVjMS4yLjcgMi40IDEgMy44IDFjMi45IDAgNS0xLjUgNi41LTMuOWMuNy0xLjIgMS0yLjQgMS0zLjhjMC0yLjctMS4zLTQuOC0zLjUtNi4zYy0xLjItLjgtMi42LTEuMi00LTEuMmMtMy4yIDAtNS41IDEuNi02LjkgNC41Yy0uNiAxLjEtLjggMi4yLS44IDMuMm0zNC44LTcuMmMtLjYtLjMtMS43LS40LTIuMy0uNGMtMy4yLS4xLTUuNSAxLjctNi45IDQuNWMtLjUgMS0uNyAyLS43IDMuMWMwIDMuMyAxLjcgNS42IDQuNiA3YzEuMS41IDIuNC42IDMuNi42YzEgMCAyLjUtLjYgMy40LTEuMWwuMi0uMWguOGMuOS4yIDEuNS43IDEuNSAxLjd2LjRjMCAyLjMtNC4zIDIuOS01LjkgM2MtNS43LjQtMTAtMi43LTExLjYtOC4yYy0uMy0uOS0uNC0xLjktLjQtMi45di0uOGMwLTQuMSAyLjEtNy40IDUuNi05LjVRNTkuMTUgOTQgNjIgOTRoLjhjMiAwIDMuOS42IDUuNiAxLjdsLjEuMWwuMS4xYy4yLjMuMy42LjMgMXYuNGMwIDEtLjcgMS41LTEuNiAxLjdINjdjLS41IDAtMS44LS42LTIuMy0uOG0xMi40IDIuNmMxLjUtMS41IDMtMyA0LjUtNC40Yy40LS40IDItMi4xIDIuNi0yLjFoLjhjLjkuMiAxLjUuNyAxLjUgMS43di40YzAgLjYtLjcgMS40LTEuMiAxLjhsLTIuNyAyLjdsLTQuNiA0LjdjMiAyIDQgNCA1LjkgNmwxLjYgMS43Yy4yLjIuNS40LjYuN3EuMy40NS4zLjl2LjVjLS4yLjktLjggMS42LTEuNyAxLjZoLS4zYy0uNiAwLTEuMy0uNy0xLjgtMS4xYy0uOS0uOC0xLjgtMS43LTIuNi0yLjZsLTIuOS0yLjl2NC42YzAgMS4xLS43IDEuOS0xLjggMS45SDc1Yy0xLjEgMC0xLjgtLjktMS44LTEuOVY4OC45YzAtMS4xLjctMS45IDEuOC0xLjloLjNjMS4xIDAgMS44LjggMS44IDEuOXptNDcuNi02LjZoLjRjMS4xIDAgMS45LjggMS45IDEuOWMwIDEuNi0xLjUgMi0yLjggMmMtMS43IDAtMy40IDEtNC41IDIuMmMtMS41IDEuNS0yLjEgMy4zLTIuMSA1LjR2OS4yYzAgMS4xLS43IDEuOS0xLjggMS45aC0uM2MtMS4xIDAtMS44LS45LTEuOC0xLjl2LTkuOGMwLTMuOCAxLjgtNi44IDQuOS05YzEuOC0xLjIgMy45LTEuOSA2LjEtMS45bS0yNy4xIDE4LjNjMS40LjUgMyAuNCA0LjQuMmMuNy0uMyAyLjYtMS4xIDMuMy0xaC4yYy40LjIuOC41IDEgLjljLjUgMSAuMyAyLS43IDIuNmwtLjMuMmMtMy42IDIuMS03LjUgMS44LTExLjEtLjJjLTEuNy0uOS0zLTIuMy00LTRsLS4yLS40Yy0yLjMtNC0yLTguMy42LTEyLjFjLjktMS4zIDIuMS0yLjMgMy41LTMuMWwuNS0uM2MzLjQtMiA3LjEtMS44IDEwLjYtLjFjMS45LjkgMy40IDIuMyA0LjUgNC4xbC4yLjNjLjggMS4zLS4yIDIuNS0xLjIgMy4zYy0xLjIuOS0yLjQgMi0zLjUgM3EtNC4wNSAzLjMtNy44IDYuNm0tMy4zLTIuM2w4LjUtNy4zYzEtLjggMi0xLjcgMy0yLjZjLS44LTEtMi4xLTEuNy0zLjEtMi4xYy0yLjItLjgtNC40LS42LTYuNC42Yy0yLjYgMS41LTMuOCA0LTMuNyA3YzAgMS4yLjQgMi4zIDEgMy40Yy4yLjQuNC43LjcgMU03My43IDMzLjdIODV2MTEuNWg1LjdjMi42IDAgNS4zLS41IDcuOC0xLjNjMS4yLS40IDIuNi0xIDMuOC0xLjdjLTEuNi0yLjEtMi40LTQuNy0yLjYtNy4zYy0uMy0zLjUuNC04LjEgMi44LTEwLjhsMS4yLTEuNGwxLjQgMS4xYzMuNiAyLjkgNi41IDYuOCA3LjEgMTEuNGM0LjMtMS4zIDkuMy0xIDEzLjEgMS4ybDEuNS45bC0uOCAxLjZjLTMuMiA2LjItOS45IDguMi0xNi40IDcuOGMtOS44IDI0LjMtMzEgMzUuOC01Ni44IDM1LjhjLTEzLjMgMC0yNS41LTUtMzIuNS0xNi44bC0uMS0uMmwtMS0yLjFjLTIuNC01LjItMy4xLTEwLjktMi42LTE2LjZsLjItMS43aDkuNlYzMy43aDExLjNWMjIuNGgyMi41VjExLjFoMTMuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMGFhZGEiIGQ9Ik0xMTAuMiAzNy45Yy44LTUuOS0zLjYtMTAuNS02LjQtMTIuN2MtMy4xIDMuNi0zLjYgMTMuMiAxLjMgMTcuMmMtMi44IDIuNC04LjUgNC43LTE0LjUgNC43SDE4LjRjLS42IDYuMi41IDExLjkgMyAxNi44bC44IDEuNWMuNS45IDEuMSAxLjcgMS43IDIuNmMzIC4yIDUuNy4zIDguMi4yYzQuOS0uMSA4LjktLjcgMTItMS43Yy41LS4yLjkuMSAxLjEuNWMuMi41LS4xLjktLjUgMS4xYy0uNC4xLS44LjMtMS4zLjRjLTIuNC43LTUgMS4xLTguMyAxLjNoLS42Yy0xLjMuMS0yLjcuMS00LjIuMWMtMS42IDAtMy4xIDAtNC45LS4xYzYgNi44IDE1LjQgMTAuOCAyNy4yIDEwLjhjMjUgMCA0Ni4yLTExLjEgNTUuNS0zNS45YzYuNy43IDEzLjEtMSAxNi02LjdjLTQuNS0yLjYtMTAuNS0xLjgtMTMuOS0uMSIvPjxwYXRoIGZpbGw9IiMyOGI4ZWIiIGQ9Ik0xMTAuMiAzNy45Yy44LTUuOS0zLjYtMTAuNS02LjQtMTIuN2MtMy4xIDMuNi0zLjYgMTMuMiAxLjMgMTcuMmMtMi44IDIuNC04LjUgNC43LTE0LjUgNC43aC02OGMtLjMgOS41IDMuMiAxNi43IDkuNSAyMWM0LjktLjEgOC45LS43IDEyLTEuN2MuNS0uMi45LjEgMS4xLjVjLjIuNS0uMS45LS41IDEuMWMtLjQuMS0uOC4zLTEuMy40Yy0yLjQuNy01LjIgMS4yLTguNSAxLjRsLS4xLS4xYzguNSA0LjQgMjAuOCA0LjMgMzUtMS4xYzE1LjgtNi4xIDMwLjYtMTcuNyA0MC45LTMwLjljLS4yLjEtLjMuMi0uNS4yIi8+PHBhdGggZmlsbD0iIzAyOGJiOCIgZD0iTTE4LjUgNTQuNmMuNCAzLjMgMS40IDYuNCAyLjkgOS4zbC44IDEuNWMuNS45IDEuMSAxLjcgMS43IDIuNmMzIC4yIDUuNy4zIDguMi4yYzQuOS0uMSA4LjktLjcgMTItMS43Yy41LS4yLjkuMSAxLjEuNWMuMi41LS4xLjktLjUgMS4xYy0uNC4xLS44LjMtMS4zLjRjLTIuNC43LTUuMiAxLjItOC41IDEuNGgtLjRjLTEuMy4xLTIuNy4xLTQuMS4xYy0xLjYgMC0zLjIgMC00LjktLjFjNiA2LjggMTUuNSAxMC44IDI3LjMgMTAuOGMyMS40IDAgNDAtOC4xIDUwLjgtMjZIMTguNXoiLz48cGF0aCBmaWxsPSIjMDE5YmM2IiBkPSJNMjMuMyA1NC42YzEuMyA1LjggNC4zIDEwLjQgOC44IDEzLjVjNC45LS4xIDguOS0uNyAxMi0xLjdjLjUtLjIuOS4xIDEuMS41Yy4yLjUtLjEuOS0uNSAxLjFjLS40LjEtLjguMy0xLjMuNGMtMi40LjctNS4yIDEuMi04LjYgMS40YzguNSA0LjQgMjAuOCA0LjMgMzQuOS0xLjFjOC41LTMuMyAxNi44LTguMiAyNC4yLTE0LjF6Ii8+PHBhdGggZmlsbD0iIzAwYWNkMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjguMiAzNS41SDM4djkuOGgtOS44em0uOC45aC44djguMUgyOXptMS41IDBoLjh2OC4xaC0uOHptMS41IDBoLjh2OC4xSDMyem0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0zLjEtMTIuMWg5LjhWMzRoLTkuOHptLjguOGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzIzYzJlZSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMzkuNSAzNS41aDkuOHY5LjhoLTkuOHptLjguOWguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwYWNkMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNTAuOCAzNS41aDkuOHY5LjhoLTkuOHptLjguOWguOHY4LjFoLS44em0xLjQgMGguOHY4LjFINTN6bTEuNSAwaC44djguMWgtLjh6bTEuNSAwaC44djguMUg1NnptMS41IDBoLjh2OC4xaC0uOHptMS40IDBoLjh2OC4xaC0uOHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMyM2MyZWUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUwLjggMjQuM2g5LjhWMzRoLTkuOHptLjguOGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFINTN6bTEuNSAwaC44djguMWgtLjh6bTEuNSAwaC44djguMUg1NnptMS41IDBoLjh2OC4xaC0uOHptMS40IDBoLjh2OC4xaC0uOHpNNjIgMzUuNWg5Ljh2OS44SDYyem0uOS45aC44djguMWgtLjh6bTEuNCAwaC44djguMWgtLjh6bTEuNSAwaC44djguMWgtLjh6bTEuNSAwaC44djguMWgtLjh6bTEuNCAwaC44djguMWgtLjh6bTEuNSAwaC44djguMWgtLjh6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjMDBhY2QzIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02MiAyNC4zaDkuOFYzNEg2MnptLjkuOGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzIzYzJlZSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNjIgMTNoOS44djkuOEg2MnptLjkuOGguOFYyMmgtLjh6bTEuNCAwaC44VjIyaC0uOHptMS41IDBoLjhWMjJoLS44em0xLjUgMGguOFYyMmgtLjh6bTEuNCAwaC44VjIyaC0uOHptMS41IDBoLjhWMjJoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwYWNkMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNzMuMyAzNS41aDkuOHY5LjhoLTkuOHptLjguOWguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFIODB6bTEuNSAwaC44djguMWgtLjh6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZDRlZWYxIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC42IDYxLjJjMS41IDAgMi43IDEuMiAyLjcgMi43cy0xLjIgMi43LTIuNyAyLjdzLTIuNy0xLjItMi43LTIuN2MuMS0xLjUgMS4zLTIuNyAyLjctMi43IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjM2E0ZDU0IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC42IDYxLjljLjIgMCAuNSAwIC43LjFjLS4yLjEtLjQuNC0uNC43YzAgLjQuNC44LjguOGMuMyAwIC42LS4yLjctLjRjLjEuMi4xLjUuMS43YzAgMS4xLS45IDEuOS0xLjkgMS45Yy0xLjEgMC0xLjktLjktMS45LTEuOXMuOS0xLjkgMS45LTEuOU0xIDU1LjZoMTI1LjNjLTIuNy0uNy04LjYtMS42LTcuNy01LjJjLTUgNS43LTE2LjkgNC0yMCAxLjJjLTMuNCA0LjktMjMgMy0yNC4zLS44Yy00LjIgNS0xNy4zIDUtMjEuNSAwYy0xLjQgMy44LTIxIDUuNy0yNC4zLjhjLTMgMi44LTE1IDQuNS0yMC0xLjJjMS4xIDMuNS00LjggNC41LTcuNSA1LjIiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNiZmRiZTAiIGQ9Ik01NS44IDgwLjZjLTYuNy0zLjItMTAuMy03LjUtMTIuNC0xMi4yYy0yLjUuNy01LjUgMS4yLTguOSAxLjRjLTEuMy4xLTIuNy4xLTQuMS4xYy0xLjcgMC0zLjQgMC01LjItLjFjNi4xIDYuMSAxMy43IDEwLjggMjcuNiAxMC45YzEtLjEgMi0uMSAzLS4xIi8+PHBhdGggZmlsbD0iI2Q0ZWVmMSIgZD0iTTQ1LjkgNzIuN2MtLjktMS4zLTEuOC0yLjgtMi41LTQuM2MtMi41LjctNS41IDEuMi04LjkgMS40YzIuNCAxLjMgNS44IDIuNSAxMS40IDIuOSIvPjwvc3ZnPg==" width="128" height="128" class="img_RpFt"></p>
<p>OCI (Open Container Initiative) Registry，或是通俗的講 Docker 庫，用來存放 Docker 映像檔 (Image) 的地方。</p>
<p>我使用一個庫搭配遺一個 Web UI 的方案：</p>
<ul>
<li><a href="https://github.com/distribution/distribution" target="_blank" rel="noopener noreferrer">https://github.com/distribution/distribution</a>
<ul>
<li>9.5k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/Joxit/docker-registry-ui" target="_blank" rel="noopener noreferrer">https://github.com/Joxit/docker-registry-ui</a>
<ul>
<li>2.9k ⭐</li>
</ul>
</li>
</ul>
<p><a href="https://github.com/distribution/distribution" target="_blank" rel="noopener noreferrer">https://github.com/distribution/distribution</a></p>
<p>即使短期內沒有自己的映像檔要佈署，當成鏡像站也很好用，在 client 端的 <code>/etc/docker/daemon.json</code> 加入<sup><a href="#user-content-fn-docker-mirror-24e6e4" id="user-content-fnref-docker-mirror-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>：</p>
<div class="language-json codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-json codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;registry-mirrors&quot;: [&quot;https://&lt;my-docker-mirror-host&gt;&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這樣 pull 的時候就會留一份副本在鏡像站，下次拉取一樣的東西就可以直接從 homelab 下載。</p>
<p>這對我而言有用是因為一些條件：</p>
<ol>
<li>我對外網路是無線網路，速度本來就十分有限，能夠快取映像檔，之後重複拉取可以節省我的時間。</li>
<li>我偶爾還會處理像 GitLab 或是 SideFX Houdini 那種一個 1 GB 起跳的映像檔。</li>
<li>我使用 Docker 的時候經常會接觸不同的映像檔，會不定期清理筆電上的映像檔，不然硬碟空間會被吃光。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="npm-registry">NPM Registry<a href="#npm-registry" class="hash-link" aria-label="Direct link to NPM Registry" title="Direct link to NPM Registry">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Qm94PSIwIDAgMTI4IDEyOCI+PHBhdGggZmlsbD0idXJsKCNkZXZpY29uTm9kZWpzMCkiIGQ9Ik02Ni45NTguODI1YTYuMDcgNi4wNyAwIDAgMC02LjAzNSAwTDExLjEwMyAyOS43NmMtMS44OTUgMS4wNzItMi45NiAzLjA5NS0yLjk2IDUuMjR2NTcuOTg4YzAgMi4xNDMgMS4xODMgNC4xNjcgMi45NTggNS4yNGw0OS44MiAyOC45MzRhNi4wNyA2LjA3IDAgMCAwIDYuMDM2IDBsNDkuODItMjguOTM1YzEuODk0LTEuMDcyIDIuOTU4LTMuMDk2IDIuOTU4LTUuMjRWMzVjMC0yLjE0NC0xLjE4My00LjE2Ny0yLjk1OC01LjI0eiIvPjxwYXRoIGZpbGw9InVybCgjZGV2aWNvbk5vZGVqczEpIiBkPSJNMTE2Ljg5NyAyOS43Nkw2Ni44NDEuODI1QTggOCAwIDAgMCA2NS4zMDIuMjNMOS4yMSA5Ni43OThhNi4zIDYuMyAwIDAgMCAxLjY1NyAxLjQzbDUwLjA1NyAyOC45MzRjMS40Mi44MzMgMy4wNzYgMS4wNzIgNC42MTUuNTk1bDUyLjY2LTk2LjkyNWEzLjcgMy43IDAgMCAwLTEuMzAyLTEuMDcyIi8+PHBhdGggZmlsbD0idXJsKCNkZXZpY29uTm9kZWpzMikiIGQ9Ik0xMTYuODk4IDk4LjIyNWMxLjQyLS44MzMgMi40ODUtMi4yNjIgMi45NTgtMy44MUw2NS4wNjYuMTA4Yy0xLjQyLS4yMzgtMi45NTktLjExOS00LjI2LjcxNUwxMS4xMDQgMjkuNjM5bDUzLjYwNiA5OC4zNTVjLjcxLS4xMiAxLjU0LS4zNTggMi4yNS0uNzE1eiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZGV2aWNvbk5vZGVqczAiIHgxPSIzNC41MTMiIHgyPSIyNy4xNTciIHkxPSIxNS41MzUiIHkyPSIzMC40NDgiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyOS4yNDIgLTczLjcxNSlzY2FsZSg2LjE4NTIzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzZjg3M2YiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iIzNmOGIzZCIvPjxzdG9wIG9mZnNldD0iLjYzNyIgc3RvcC1jb2xvcj0iIzNlOTYzOCIvPjxzdG9wIG9mZnNldD0iLjkzNCIgc3RvcC1jb2xvcj0iIzNkYTkyZSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzNkYWUyYiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJkZXZpY29uTm9kZWpzMSIgeDE9IjMwLjAwOSIgeDI9IjUwLjUzMyIgeTE9IjIzLjM1OSIgeTI9IjguMjg4IiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMjkuMjQyIC03My43MTUpc2NhbGUoNi4xODUyMykiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4xMzgiIHN0b3AtY29sb3I9IiMzZjg3M2YiLz48c3RvcCBvZmZzZXQ9Ii40MDIiIHN0b3AtY29sb3I9IiM1MmEwNDQiLz48c3RvcCBvZmZzZXQ9Ii43MTMiIHN0b3AtY29sb3I9IiM2NGI3NDkiLz48c3RvcCBvZmZzZXQ9Ii45MDgiIHN0b3AtY29sb3I9IiM2YWJmNGIiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZGV2aWNvbk5vZGVqczIiIHgxPSIyMS45MTciIHgyPSI0MC41NTUiIHkxPSIyMi4yNjEiIHkyPSIyMi4yNjEiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyOS4yNDIgLTczLjcxNSlzY2FsZSg2LjE4NTIzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjA5MiIgc3RvcC1jb2xvcj0iIzZhYmY0YiIvPjxzdG9wIG9mZnNldD0iLjI4NyIgc3RvcC1jb2xvcj0iIzY0Yjc0OSIvPjxzdG9wIG9mZnNldD0iLjU5OCIgc3RvcC1jb2xvcj0iIzUyYTA0NCIvPjxzdG9wIG9mZnNldD0iLjg2MiIgc3RvcC1jb2xvcj0iIzNmODczZiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==" width="128" height="128" class="img_RpFt"></p>
<p>作為一個 (Web) 前端仔，自架一個私有 NPM 庫是再合理不過的事，跟 Docker 的情況相同，就算沒有要佈署東西，作為鏡像站依然有它的作用，並且同樣使用一個庫一個 Web UI 的搭配：</p>
<ul>
<li><a href="https://github.com/verdaccio/verdaccio" target="_blank" rel="noopener noreferrer">https://github.com/verdaccio/verdaccio</a>
<ul>
<li>16.8k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noopener noreferrer">https://github.com/filebrowser/filebrowser</a>
<ul>
<li>28.8k ⭐</li>
</ul>
</li>
</ul>
<p>Verdaccio 雖然有 Web UI 能夠管理私人 (private) 套件，卻不會顯示快取的套件。filebrowser 是一個簡單的服務，只要把 Volume 掛給它就能透過瀏覽器查看檔案系統的檔案以及簡單的管理，包含上傳、下載、新增資料夾、刪除、重新命名...等。</p>
<p>在網路不穩定的情況 Verdaccio 有機會快取失敗留下損壞的組態檔，這時就能從瀏覽器刪除損壞的組態讓它重新下載。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="s3-simple-storage-service-物件儲存">S3 (Simple Storage Service) 物件儲存<a href="#s3-simple-storage-service-物件儲存" class="hash-link" aria-label="Direct link to S3 (Simple Storage Service) 物件儲存" title="Direct link to S3 (Simple Storage Service) 物件儲存">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2IiB2aWV3Qm94PSIwIDAgMjU2IDI1NiI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJsb2dvc0F3c1MzMCIgeDE9IjAlIiB4Mj0iMTAwJSIgeTE9IjEwMCUiIHkyPSIwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFiNjYwZiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzZjYWUzZSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxwYXRoIGZpbGw9InVybCgjbG9nb3NBd3NTMzApIiBkPSJNMCAwaDI1NnYyNTZIMHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMTk0LjY3NSAxMzcuMjU2bDEuMjI5LTguNjUyYzExLjMzIDYuNzg3IDExLjQ3OCA5LjU5IDExLjQ3NSA5LjY2N2MtLjAyLjAxNi0xLjk1MiAxLjYyOS0xMi43MDQtMS4wMTVtLTYuMjE4LTEuNzI4Yy0xOS41ODQtNS45MjYtNDYuODU3LTE4LjQzOC01Ny44OTQtMjMuNjU0YzAtLjA0NS4wMTMtLjA4Ni4wMTMtLjEzMWMwLTQuMjQtMy40NS03LjY5LTcuNjkzLTcuNjljLTQuMjM3IDAtNy42ODcgMy40NS03LjY4NyA3LjY5czMuNDUgNy42OSA3LjY4NyA3LjY5YzEuODYyIDAgMy41NTItLjY5NSA0Ljg4Ni0xLjhjMTIuOTg2IDYuMTQ4IDQwLjA0OCAxOC40NzggNTkuNzc2IDI0LjMwMmwtNy44MDEgNTUuMDU5cS0uMDMzLjIyNS0uMDMyLjQ1MWMwIDQuODQ4LTIxLjQ2MyAxMy43NTQtNTYuNTMyIDEzLjc1NGMtMzUuNDQgMC01Ny4xMy04LjkwNi01Ny4xMy0xMy43NTRxMC0uMjItLjAyOC0uNDM1bC0xNi4zLTExOS4wNjJjMTQuMTA4IDkuNzEyIDQ0LjQ1NCAxNC44NSA3My40NzggMTQuODVjMjguOTc5IDAgNTkuMjczLTUuMTIgNzMuNDEtMTQuODAyek00OCA2NS41MjhjLjIzLTQuMjEgMjQuNDI4LTIwLjczIDc1LjItMjAuNzNjNTAuNzY0IDAgNzQuOTY2IDE2LjUxNiA3NS4yIDIwLjczdjEuNDM3Yy0yLjc4NCA5LjQ0My0zNC4xNDQgMTkuNDM0LTc1LjIgMTkuNDM0Yy00MS4xMjcgMC03Mi41MDMtMTAuMDIzLTc1LjItMTkuNDc5em0xNTYuOC4wN2MwLTExLjA4Ny0zMS43OS0yNy4yLTgxLjYtMjcuMmMtNDkuODEyIDAtODEuNiAxNi4xMTMtODEuNiAyNy4ybC4zIDIuNDE0bDE3Ljc1NCAxMjkuNjc2Yy40MjYgMTQuNTAzIDM5LjEgMTkuOTEgNjMuNTI2IDE5LjkxYzMwLjMxIDAgNjIuNTEyLTYuOTY5IDYyLjkyOC0xOS45bDcuNjY4LTU0LjA3YzQuMjY1IDEuMDIgNy43NzYgMS41NDIgMTAuNTk1IDEuNTQyYzMuNzg1IDAgNi4zNDUtLjkyNSA3Ljg5Ny0yLjc3NGMxLjI3NC0xLjUxNyAxLjc2LTMuMzU0IDEuMzk2LTUuMzFjLS44My00LjQyOC02LjA4Ny05LjIwMi0xNi43OTQtMTUuMzExbDcuNjAzLTUzLjYzOXoiLz48L3N2Zz4=" width="256" height="256" class="img_RpFt"></p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>S3 原本是 AWS 的雲端服務，更準確的用詞應該是 S3 兼容 (S3 compatible) 服務，只是因為它在雲端世界已經實質上是一種通用標準了，以下我直接簡稱 S3。</p></div></div>
<p>對我而言輕量級的東西總是有特別的吸引力，因此一開始我試著使用 <a href="https://git.deuxfleurs.fr/Deuxfleurs/garage" target="_blank" rel="noopener noreferrer">Garage</a>，但是也因為它的精簡，因此並沒有內建 Web UI，加上我對 S3 的使用也稱不上熟悉，相對複雜的安裝文件最後讓我卻步而改用比較普通的 MinIO:</p>
<ul>
<li><a href="https://github.com/minio/minio" target="_blank" rel="noopener noreferrer">https://github.com/minio/minio</a>
<ul>
<li>52k ⭐</li>
</ul>
</li>
</ul>
<p>正如我說的，我對 S3 的使用仍然缺乏經驗，自架一個 S3 實例就是為了長經驗，另一方面是目前不少網路服務會把儲存資料或檔案的部份抽象化並且把職責交給外部的 S3 服務，例如 <a href="https://github.com/iterative/dvc" target="_blank" rel="noopener noreferrer">DVC</a> 是我預計想玩的東西；前端使用 Git 風格的 CLI、後端則是把版控的大型檔案儲存在 S3 （或其他支援的儲存形式）。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="專案基礎設施">專案基礎設施<a href="#專案基礎設施" class="hash-link" aria-label="Direct link to 專案基礎設施" title="Direct link to 專案基礎設施">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="專案管理">專案管理<a href="#專案管理" class="hash-link" aria-label="Direct link to 專案管理" title="Direct link to 專案管理">​</a></h3>
<p>專案管理的部份在<a href="/blog/2025-03-15_opensource-3d-workflow">前一篇</a>文章有稍微提過，那個時候使用 WeKan。</p>
<p>目前我選擇使用 <a href="https://github.com/go-vikunja/vikunja" target="_blank" rel="noopener noreferrer">Vikunja</a>，雖然跟其他<a href="https://flyskypie.github.io/posts/2025-04-26_homelab-project-manage" target="_blank" rel="noopener noreferrer">候選</a>相比星星少而且發展時間也比較短，但是算是一個後起之秀，兩個我很看中的功能都有支援，連續流水號：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/09_vikunja-4579bc2cfe3159985360ef2a60af6907.webp" width="1440" height="832" class="img_RpFt"></p>
<p>卡片之間的關聯：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/10_vikunja-4926ede38bdf0d10b1f7a866b63f1337.webp" width="1440" height="832" class="img_RpFt"></p>
<p>並且整體的 UI/UX 也更貼近現代的風格，更具體地說，跟我平時工作使用的 Jira 有一定程度的相似度：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/08_vikunja-79f1fba937e09e3ee68a60212d9791a9.webp" width="1440" height="831" class="img_RpFt"></p>
<p>曬一下目前在 Homelab 裡紀錄的 side project:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/11_vikunja-ee34c95a86c7b284baad73d77b19c1ad.webp" width="1177" height="830" class="img_RpFt"></p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="版本控制">版本控制<a href="#版本控制" class="hash-link" aria-label="Direct link to 版本控制" title="Direct link to 版本控制">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/12_gitea-cc8b0796e1e4e5b2b2d91f39e3d39e23.webp" width="1440" height="833" class="img_RpFt"></p>
<p>我使用 <a href="https://github.com/go-gitea/gitea" target="_blank" rel="noopener noreferrer">Gitea</a>，因為它比較簡單。另外一個常見的自架選擇是 GitLab，也是俗稱的全家桶，不過對我而言過於笨重了，我有接觸過它的 Docker Image 不論是<a href="https://hub.docker.com/r/gitlab/gitlab-ce" target="_blank" rel="noopener noreferrer">官方</a>的還是<a href="https://github.com/sameersbn/docker-gitlab" target="_blank" rel="noopener noreferrer">第三方</a>的，總而言之就是笨重。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="物料管理">物料管理<a href="#物料管理" class="hash-link" aria-label="Direct link to 物料管理" title="Direct link to 物料管理">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/13_partdb-7d972bf3be553b5a897407ba51b85a3b.webp" width="1440" height="834" class="img_RpFt"></p>
<p>我使用 <a href="https://github.com/Part-DB/Part-DB-server" target="_blank" rel="noopener noreferrer">Part-DB</a> 來管理我的零件與物品，在<a href="/blog/2025-03-15_opensource-3d-workflow">前一篇</a>文章也有稍微提過。</p>
<p>實際上運作起來的樣子我在 <a href="https://www.facebook.com/wei.ji.355/posts/pfbid0k6HBivjCg3AuTgmWdKr7T2GhEPQmxuWjCAWynBhM87VKmotJSFvcUowe2F8MU1nNl" target="_blank" rel="noopener noreferrer">FB</a> 和 <a href="https://x.com/FlySkyPie/status/1890755061648630093" target="_blank" rel="noopener noreferrer">Twitter</a> 都有貼文分享過。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="pinry">Pinry<a href="#pinry" class="hash-link" aria-label="Direct link to Pinry" title="Direct link to Pinry">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/14_pinry-c45ba6ecf0cfe60a45f1640e48b81ece.webp" width="1440" height="831" class="img_RpFt"></p>
<p><a href="https://github.com/pinry/pinry" target="_blank" rel="noopener noreferrer">Pinry</a> 基本上是開源自架版本的 Pinterest。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="生活">生活<a href="#生活" class="hash-link" aria-label="Direct link to 生活" title="Direct link to 生活">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="個人影音">個人影音<a href="#個人影音" class="hash-link" aria-label="Direct link to 個人影音" title="Direct link to 個人影音">​</a></h3>
<p>我使用 Jellyfin 搭配 Filebrowser 的方式：</p>
<ul>
<li><a href="https://github.com/jellyfin/jellyfin" target="_blank" rel="noopener noreferrer">https://github.com/jellyfin/jellyfin</a>
<ul>
<li>39.1k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noopener noreferrer">https://github.com/filebrowser/filebrowser</a>
<ul>
<li>28.8k ⭐</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/15_jellyfin-8ceb33ea484c97268140643a1828908f.webp" width="1440" height="826" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/16_web-fs-9284ea0fd0bc5a168bb0bb41e4f4ac7f.webp" width="1440" height="833" class="img_RpFt"></p>
<p>其實這是我第一個使用 filebrowser 的組合，之後才套用到其他服務去的，這方法也不是我原創的，是在網路上找到的<sup><a href="#user-content-fn-jellyfin-filebrowser-24e6e4" id="user-content-fnref-jellyfin-filebrowser-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="資訊訂閱器">資訊訂閱器<a href="#資訊訂閱器" class="hash-link" aria-label="Direct link to 資訊訂閱器" title="Direct link to 資訊訂閱器">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/17_rss-0e70a861464b71e7df6413125a46802a.webp" width="1440" height="830" class="img_RpFt"></p>
<p>RSS (Really Simple Syndication) 是一種把網站內容建立摘要的協定，像<a href="https://flyskypie.github.io/blog/rss.xml" target="_blank" rel="noopener noreferrer">這樣</a>，接著其他人就可以定期的去撈 (Creep) 這個文件，有更新的話就會知道，達到類似訂閱的效果，不過定期撈資料這個動作一般交由特定的軟體完成。</p>
<p>我目前是使用 <a href="https://tt-rss.org/" target="_blank" rel="noopener noreferrer">Tiny Tiny RSS</a>，關於其他沒使用到的候選我放在另外一個<a href="https://flyskypie.github.io/posts/2025-04-27_homelab-rss" target="_blank" rel="noopener noreferrer">貼文</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="網頁備份器">網頁備份器<a href="#網頁備份器" class="hash-link" aria-label="Direct link to 網頁備份器" title="Direct link to 網頁備份器">​</a></h3>
<p>不知道你有沒有使用過 <a href="https://web.archive.org/" target="_blank" rel="noopener noreferrer">Wayback Machine</a> 呢？這是一個快取網站，讓人可以調閱那些已經不存在的網頁的網站。<a href="https://github.com/ArchiveBox/ArchiveBox" target="_blank" rel="noopener noreferrer">ArchiveBox</a> 就是它的自架版本。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="電子書">電子書<a href="#電子書" class="hash-link" aria-label="Direct link to 電子書" title="Direct link to 電子書">​</a></h3>
<p>其實我沒有看電子書的習慣，出於方便歸檔跟調閱的目的架架看的，目前使用 <a href="https://github.com/Kareadita/Kavita" target="_blank" rel="noopener noreferrer">Kavita</a>。跟 Jellyfin 一樣我搭配了一個 <a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noopener noreferrer">Filebrowser</a> 使用。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="開發工具">開發工具<a href="#開發工具" class="hash-link" aria-label="Direct link to 開發工具" title="Direct link to 開發工具">​</a></h2>
<p>目前就是放一些上網也能用的平台，但是還是自己架一個以防萬一。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="虛擬白板">虛擬白板<a href="#虛擬白板" class="hash-link" aria-label="Direct link to 虛擬白板" title="Direct link to 虛擬白板">​</a></h3>
<p><a href="https://github.com/excalidraw/excalidraw" target="_blank" rel="noopener noreferrer">Excalidraw</a>是一個開源的協作虛擬白板，包含讓遠端工作者進行線上腦力激盪 (Brainstorming) 之類的用例。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="open-apiasynapi-編輯器">Open API/AsynAPI 編輯器<a href="#open-apiasynapi-編輯器" class="hash-link" aria-label="Direct link to Open API/AsynAPI 編輯器" title="Direct link to Open API/AsynAPI 編輯器">​</a></h3>
<p><a href="https://github.com/swagger-api/swagger-editor" target="_blank" rel="noopener noreferrer">Swagger Editor</a></p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-pi-hole-dhcp-24e6e4">
<p>Docker DHCP and Network Modes - Pi-hole documentation. Retrieved 2025-04-26 from <a href="https://docs.pi-hole.net/docker/dhcp/" target="_blank" rel="noopener noreferrer">https://docs.pi-hole.net/docker/dhcp/</a> <a href="#user-content-fnref-pi-hole-dhcp-24e6e4" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-traefik-24e6e4">
<p>Traefik 2.0 - The Wait is Over! Retrieved 2025-04-26 from <a href="https://traefik.io/blog/traefik-2-0-6531ec5196c2/" target="_blank" rel="noopener noreferrer">https://traefik.io/blog/traefik-2-0-6531ec5196c2/</a> <a href="#user-content-fnref-traefik-24e6e4" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-docker-mirror-24e6e4">
<p>Mirror | Docker Docs. Retrieved 2025-04-26 from <a href="https://docs.docker.com/docker-hub/image-library/mirror/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/docker-hub/image-library/mirror/</a> <a href="#user-content-fnref-docker-mirror-24e6e4" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-jellyfin-filebrowser-24e6e4">
<p>Upload file from the app or site · Jellyfin Feature Requests. Retrieved 2025-04-27 from <a href="https://features.jellyfin.org/posts/543/upload-file-from-the-app-or-site#comment-5160" target="_blank" rel="noopener noreferrer">https://features.jellyfin.org/posts/543/upload-file-from-the-app-or-site#comment-5160</a> <a href="#user-content-fnref-jellyfin-filebrowser-24e6e4" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/homelab">homelab</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 FlyPie (Wei Ji)</div></div></div></footer></div>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Blog | 工程屍 FlyPie 的異想世界</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://flyskypie.github.io/blog/page/2"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:locale" content="zh_tw"><meta data-rh="true" property="og:title" content="Blog | 工程屍 FlyPie 的異想世界"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><meta data-rh="true" property="og:image" content="https://i.imgur.com/BfkbXOK.png"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://flyskypie.github.io/blog/page/2"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog/page/2" hreflang="en"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog/page/2" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="工程屍 FlyPie 的異想世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="工程屍 FlyPie 的異想世界 Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="工程屍 FlyPie 的異想世界 JSON Feed">




<link rel="alternate" type="application/rss+xml" href="/posts/rss.xml" title="工程屍 FlyPie 的異想世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/atom.xml" title="工程屍 FlyPie 的異想世界 Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4a9022c6.css">
<script src="/assets/js/runtime~main.ffdde287.js" defer="defer"></script>
<script src="/assets/js/main.c76d97d4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_LBgp" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_RjML themedComponent--light_RyNI"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_RjML themedComponent--dark_ntqO"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/the-key-of-huanche/">專案文件</a><a class="navbar__item navbar__link" href="/blogs">數位手記</a><a class="navbar__item navbar__link" href="/posts">廢文雜談</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_s2nU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_DonJ colorModeToggle_KBLq"><button class="clean-btn toggleButton_qwn5 toggleButtonDisabled_tRn_" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_bYdl"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_D9Q4"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Cbrq"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_GUBX"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_UgN6 thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_PkUw margin-bottom--md">Recent posts</div><ul class="sidebarItemList_HFnO clean-list"><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-04-23_my-homelab">我的 Homelab</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-03-15_opensource-3d-workflow">一種開源工具鏈嘗試，以最近幫風機製作角座為例</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2024-11-04_blender-anatomy">從 Blender 開始的解剖學筆記 - 骨骼篇 - 啟程</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2024-08-31_polis-dev-log">Polis 專案研究進度</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2024-06-15_pocket-ai">Pocket AI 開箱</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="前情提要"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-03-24_24_tellus-voxel-test">一種包含旋轉資訊的 Voxel 資料格式 | Tellus Dev Log</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-03-24T00:00:00.000Z" itemprop="datePublished">March 24, 2024</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="#前情提要" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<ul>
<li><a href="https://flyskypie.github.io/sideprojects-wiki/#Project%3ATellus" target="_blank" rel="noopener noreferrer">Tellus</a> 是<a href="https://flyskypie.github.io/sideprojects-wiki/#Project%3A%E7%92%B0%E9%A9%85%E4%B9%8B%E9%91%B0" target="_blank" rel="noopener noreferrer">環驅之鑰</a>下的子專案，專案目的為「建立儲存 Voxel 世界資料的系統」。</li>
<li>2021 年的時候，我受到 MBTiles 的啟發寫了一個基於 SQLite 檔案的 Voxel 儲存格式<sup><a href="#user-content-fn-voxtt-spec-bbcb5d" id="user-content-fnref-voxtt-spec-bbcb5d" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="背景">背景<a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2>
<p>最近 （2024 二月）買了 <a href="https://store.steampowered.com/app/285920/TerraTech/" target="_blank" rel="noopener noreferrer">TerraTech</a> ，玩著玩著、在遊戲內轉著方塊，突然靈光一閃，想要處理旋轉方向的資料格式問題。</p>
<p>原本（2021 年寫的那份格式）我打算採取儲存 Voxel 的格式是用任意無損壓縮的點陣圖檔來儲存，舉例來說一個 16×16×16 Chunk 的資料會長得像這樣：</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="299" height="460" class="img_RpFt"></p>
<p>也就是一個 Pixel 等於一個 Voxel，但是這種方式單純是把一個 Voxel 當成一個像素點紀錄，無法支援像 Minecraft 那樣方塊有方向性的情況。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="儲存的哲學">儲存的哲學<a href="#儲存的哲學" class="hash-link" aria-label="Direct link to 儲存的哲學" title="Direct link to 儲存的哲學">​</a></h2>
<p>我無意針對儲存 Voxel 資料去創造一個二進制文件的定義，而是使用一般的點陣圖檔，其原因源自於 Unix 哲學<sup><a href="#user-content-fn-unix_philosophy-bbcb5d" id="user-content-fnref-unix_philosophy-bbcb5d" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>：</p>
<blockquote>
<p>Store data in flat text files.</p>
</blockquote>
<p>二維點陣圖檔是一種常見且十分普及的資料格式，不論是透過圖形化界面的軟體還是函式庫，對其進行讀寫都是一件簡單的事情，我認為在這個意義上它與「純文字檔案」無異，而且具有更好的資料密度（壓縮率）。</p>
<p>在這個基礎上，我打算拿 8 個 Pixels 來描述一個 Block，令其中夾帶「方塊方向」的資訊，就結果而言可能過於浪費記憶體，不過作為一個（預計）遊戲的開發者，資料儲存的效率不是我當下最在意的事情，況且不少點陣圖片的檔案格式就有各自的無損壓縮演算法了，這個想法的基礎同樣來自  Unix 哲學<sup><a href="#user-content-fn-unix_philosophy-bbcb5d" id="user-content-fnref-unix_philosophy-bbcb5d-2" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>：</p>
<blockquote>
<p>Make each program do one thing well.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="單位晶胞">單位晶胞<a href="#單位晶胞" class="hash-link" aria-label="Direct link to 單位晶胞" title="Direct link to 單位晶胞">​</a></h2>
<p>單位晶胞 (Unit cell) 是固態物理 學使用的一種概念，與之相對的是另外一個名為晶格 (Crystal Lattice) 的概念：</p>
<p><img decoding="async" loading="lazy" alt="https://www.expii.com/t/crystal-lattice-structure-formation-7999" src="/assets/images/02_crystal-lattice-structure-formation-142cadd0a0ec153b29c6ec9d4de70b12.webp" width="1341" height="1041" class="img_RpFt"></p>
<p>晶格是討論的結晶材料時候的最小單位，因為我們可以從它的結構與方向去探討這些參數如何影響宏觀特性，但是當我們把它切得更小會得到一個可以透過旋轉而構成晶格的最小不重複單元，那就是單位晶胞。</p>
<p>於是我把原本設計的資料格式再往下切割，用 8 個 Voxels 去構成一個 Block：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_unit-voxel-31590ba83d8bd4fe3fde41e00c0a2fef.webp" width="674" height="502" class="img_RpFt"></p>
<p>透過解析 8 個 Pixels 的排列模式就能定義出一個 Block 不同的旋轉方向。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="次生-voxel">次生 Voxel<a href="#次生-voxel" class="hash-link" aria-label="Direct link to 次生 Voxel" title="Direct link to 次生 Voxel">​</a></h2>
<p>接下來我會明確的區分這三個用語：</p>
<ul>
<li>Pixel<!-- -->
<ul>
<li>二維空間的色點。</li>
</ul>
</li>
<li>Voxel<!-- -->
<ul>
<li>三圍空間的色點，沒有方向性。</li>
</ul>
</li>
<li>Block<!-- -->
<ul>
<li>由 8 個 Voxel 構成的方塊，有方向性。</li>
</ul>
</li>
</ul>
<p>對於一個 3 Bytes 的像素空間而言（RGB 三個頻道個佔 1 個 Byte），能夠表達的 Voxel 種類其實足夠可觀了，即便拿 8 個排列組合來描述一種 Block 也綽綽有餘：</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><msup><mn>2</mn><mn>8</mn></msup><mo>×</mo><msup><mn>2</mn><mn>8</mn></msup><mo>×</mo><msup><mn>2</mn><mn>8</mn></msup></mrow><mn>8</mn></mfrac><mo>=</mo><mfrac><mrow><mn>256</mn><mo>×</mo><mn>256</mn><mo>×</mo><mn>256</mn></mrow><mn>8</mn></mfrac><mo>=</mo><mn>2</mn><mo separator="true">,</mo><mn>097</mn><mo separator="true">,</mo><mn>152</mn></mrow><annotation encoding="application/x-tex">\frac{2^8 \times 2^8 \times 2^8 }{8} =
\frac{256 \times 256 \times 256}{8} =
2,097,152</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.1771em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">256</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">256</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord">256</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">097</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">152</span></span></span></span></span>
<p>假定一個 Block 的基礎 Voxel 值為 <code>#000000</code>，為了描述其方向而衍生的 7 個 Voxel 則為次生 Voxel：</p>
<ul>
<li><code>#000001</code></li>
<li><code>#000002</code></li>
<li><code>#000003</code></li>
<li><code>#000004</code></li>
<li><code>#000005</code></li>
<li><code>#000006</code></li>
<li><code>#000007</code></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="旋轉模式">旋轉模式<a href="#旋轉模式" class="hash-link" aria-label="Direct link to 旋轉模式" title="Direct link to 旋轉模式">​</a></h2>
<p>不同旋轉模式所需要的次生 Voxel 數量並不相同，目前我定義了幾種模式：</p>
<ul>
<li>固體 (Solid)</li>
<li>Y 軸對稱 (XZ-Reflection / Y-Symmetric)</li>
<li>Y 軸旋轉</li>
<li>Y 軸旋轉對稱 (Y-Symmetric-Rotation)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="固體-solid">固體 (Solid)<a href="#固體-solid" class="hash-link" aria-label="Direct link to 固體 (Solid)" title="Direct link to 固體 (Solid)">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/04_solid-b455afdad234117465c15b787338dc3d.webp" width="757" height="507" class="img_RpFt"></p>
<p>只需要 1 個次生 Voxel，只有 1 種排列組合（方向性），類似 Minecraft 的<a href="https://minecraft.fandom.com/wiki/Stone" target="_blank" rel="noopener noreferrer">石頭 (Stone)</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="y-軸對稱-xz-reflection--y-symmetric">Y 軸對稱 (XZ-Reflection / Y-Symmetric)<a href="#y-軸對稱-xz-reflection--y-symmetric" class="hash-link" aria-label="Direct link to Y 軸對稱 (XZ-Reflection / Y-Symmetric)" title="Direct link to Y 軸對稱 (XZ-Reflection / Y-Symmetric)">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/05_y-symmetric-d32773202f1f2f0766b13d2edc3ecd23.webp" width="792" height="524" class="img_RpFt"></p>
<p>我不確定稱它為「 Y 軸對稱」還是「XZ 平面對稱」比較精確。需要 2 個次生 Voxel，有 2 種排列組合（上與下），類似 Minecraft 的<a href="https://minecraft.fandom.com/wiki/Slab" target="_blank" rel="noopener noreferrer">半磚 (Slab)</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="y-軸旋轉">Y 軸旋轉<a href="#y-軸旋轉" class="hash-link" aria-label="Direct link to Y 軸旋轉" title="Direct link to Y 軸旋轉">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/06_y-rotation-8111f75a3418aa764a4f54531897b93a.webp" width="784" height="496" class="img_RpFt"></p>
<p>需要 4 個次生 Voxel，有 4 種排列組合（東南西北），類似 Minecraft 的<a href="https://minecraft.fandom.com/wiki/Chest" target="_blank" rel="noopener noreferrer">儲物箱 (Chest)</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="y-軸旋轉對稱-y-symmetric-rotation">Y 軸旋轉對稱 (Y-Symmetric-Rotation)<a href="#y-軸旋轉對稱-y-symmetric-rotation" class="hash-link" aria-label="Direct link to Y 軸旋轉對稱 (Y-Symmetric-Rotation)" title="Direct link to Y 軸旋轉對稱 (Y-Symmetric-Rotation)">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/03_unit-voxel-31590ba83d8bd4fe3fde41e00c0a2fef.webp" width="674" height="502" class="img_RpFt"></p>
<p>需要 8 個次生 Voxel，有 16 種排列組合（東南西北×上下），類似 Minecraft 的<a href="https://minecraft.fandom.com/wiki/Stairs" target="_blank" rel="noopener noreferrer">階梯角 (Corner Stairs)</a>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="demo">Demo<a href="#demo" class="hash-link" aria-label="Direct link to Demo" title="Direct link to Demo">​</a></h2>
<p>為了呈現這個概念，我寫了一個編輯器，因為只是演示作用，不保證可靠性：</p>
<ul>
<li><a href="https://flyskypie.github.io/tellus-voxel-test/" target="_blank" rel="noopener noreferrer">Live Demo</a></li>
<li><a href="https://github.com/FlySkyPie/tellus-voxel-test" target="_blank" rel="noopener noreferrer">程式碼</a></li>
</ul>
<p>另外，在這個 Demo 中我試著嘗試了幾個之前沒用過得東西：</p>
<ul>
<li>Tailwind<!-- -->
<ul>
<li>因為有幾個同事很喜歡用，所以我想試試看這東西建構 Prototype 的速度如何。</li>
</ul>
</li>
<li>PrimeReact<!-- -->
<ul>
<li>MUI 用習慣了，試試其他 Component 庫建構 Prototype 的速度如何。</li>
</ul>
</li>
<li>React Hook Form<!-- -->
<ul>
<li>之前寫了一份 React 問卷，發現我沒有用過表單管理套件，趁著這個專案摸摸看。</li>
</ul>
</li>
<li>Dexie.js (React Hook)<!-- -->
<ul>
<li>因為前一陣子研究 TiddlyWiki 的時候得知 PouchDB 這類東西，對前端儲存方案有些興趣就趁著這個專案摸摸看了。</li>
</ul>
</li>
<li><a href="https://github.com/egoist/presite" target="_blank" rel="noopener noreferrer">Presite</a>
<ul>
<li>久違的想試試看預渲染 (pre-render)，不過 react-snap 貌似壞掉了（不支援 React 18），就找了個類似的替代品。</li>
</ul>
</li>
</ul>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-voxtt-spec-bbcb5d">
<p>Voxel Terrain Tiles Specification. (FlyPie).  Retrieved 2024-03-24, from <a href="https://github.com/FlySkyPie/voxtt-spec" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/voxtt-spec</a>. <a href="#user-content-fnref-voxtt-spec-bbcb5d" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-unix_philosophy-bbcb5d">
<p>Mike Gancarz: The UNIX Philosophy. (n.d.). Retrieved 2024-03-24, from <a href="https://en.wikipedia.org/wiki/Unix_philosophy#Mike_Gancarz:_The_UNIX_Philosophy" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Unix_philosophy#Mike_Gancarz:_The_UNIX_Philosophy</a> <a href="#user-content-fnref-unix_philosophy-bbcb5d" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a> <a href="#user-content-fnref-unix_philosophy-bbcb5d-2" data-footnote-backref="" aria-label="Back to reference 2-2" class="data-footnote-backref">↩<sup>2</sup></a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/tellus">Tellus</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/hakoniwa">Hakoniwa</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/the-key-of-huanche">The Key of Huanche</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="撰寫 Tiddlywiki 條目的預設語法是 Wikitext，這自然便成為我這個 Markdown 使用者在使用 Tiddlywiki 遇到的第一個問題。幸好這個問題可以透過安裝官方的 Markdown 插件解決。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-02-28_tiddlywiki-journey-2">我的 Tiddlywiki 之旅 - 插件</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-02-28T00:00:00.000Z" itemprop="datePublished">February 28, 2024</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>撰寫 Tiddlywiki 條目的預設語法是 Wikitext，這自然便成為我這個 Markdown 使用者在使用 Tiddlywiki 遇到的第一個問題。幸好這個問題可以透過安裝官方的 <a href="https://tiddlywiki.com/plugins/tiddlywiki/markdown/" target="_blank" rel="noopener noreferrer">Markdown 插件</a>解決。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="安裝插件">安裝插件<a href="#安裝插件" class="hash-link" aria-label="Direct link to 安裝插件" title="Direct link to 安裝插件">​</a></h2>
<p>在 Tiddlywiki 安裝插件的方式有兩種：</p>
<ul>
<li>網頁拖曳<sup><a href="#user-content-fn-install-plugin-web-0b8902" id="user-content-fnref-install-plugin-web-0b8902" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></li>
<li>檔案安裝<sup><a href="#user-content-fn-install-plugin-nodejs-0b8902" id="user-content-fnref-install-plugin-nodejs-0b8902" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="網頁拖曳">網頁拖曳<a href="#網頁拖曳" class="hash-link" aria-label="Direct link to 網頁拖曳" title="Direct link to 網頁拖曳">​</a></h3>
<p>大部分 Tiddlywiki 的插件都有自己的 Tiddlywiki，然後會有像是這樣的連結  ：</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="590" height="155" class="img_RpFt"></p>
<p>對它按下滑鼠，然後拖曳到自己的 Tiddlywiki 上放開，它會引導你匯入東西：</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="793" height="326" class="img_RpFt"></p>
<p>部份插件會要求重新載入網頁：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_reload-f2e4610e584948a054b50d900e502841.webp" width="799" height="317" class="img_RpFt"></p>
<hr>
<p>值得注意的是，這個魔法（我猜）是透過瀏覽器實做的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/DragEvent/dataTransfer" target="_blank" rel="noopener noreferrer">DataTransfer API</a> 達成的，因此使用 Desktop 版本的 Tiddlywiki 或是其他跨越瀏覽器的情況（從 Chrome 把插件拉到 Firefox 上）是不支援的。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="檔案安裝">檔案安裝<a href="#檔案安裝" class="hash-link" aria-label="Direct link to 檔案安裝" title="Direct link to 檔案安裝">​</a></h3>
<p>只能在 Node.js 模式下使用，把插件複製到 <code>/plugins</code> 的資料夾下，像這樣：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">├── plugins/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── relink/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── js/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── tiddlers/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── plugin.info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── relink-markdown/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── js/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── plugin.info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── readme.tid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tiddlers/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── tiddlywiki.info</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="插件系統">插件系統<a href="#插件系統" class="hash-link" aria-label="Direct link to 插件系統" title="Direct link to 插件系統">​</a></h2>
<p>插件本質上是由一組名為「影子條目」的特殊的條目 (Tiddlers) 打包而成的。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="影子條目-shadowtiddlers">影子條目 (ShadowTiddlers)<a href="#影子條目-shadowtiddlers" class="hash-link" aria-label="Direct link to 影子條目 (ShadowTiddlers)" title="Direct link to 影子條目 (ShadowTiddlers)">​</a></h3>
<p>相較於一般的條目只是一些使用者可以任意編輯的資料，影子條目是一些跟 Tiddlywiki 核心運作有關的條目，比如：定義按鈕的外觀與行為。</p>
<p>當使用者編輯影子條目時，Tiddlywiki 會創建一個同名的副本，並且覆蓋原始條目的行為，當使用者刪除這個副本，則會切換回使用原本的影子條目，形同預設值一般的作用。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="插件的型態">插件的型態<a href="#插件的型態" class="hash-link" aria-label="Direct link to 插件的型態" title="Direct link to 插件的型態">​</a></h3>
<p>當使用「檔案安裝」時，插件是以類似專案資料夾的方式存在，並且以資料夾下的 <code>plugin.info</code> 檔案作為進入點，例如：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">├── plugins/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── relink/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── js/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ├── tiddlers/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── plugin.info</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>而使用「網頁拖曳」時，插件  中的數個影子條目會被打包成單一 JSON 檔的型態，例如：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">├── tiddlers/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── $__plugins_tiddlywiki_markdown.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── $__plugins_tiddlywiki_markdown.json.meta</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="幾個目前我正在使用的插件">幾個目前我正在使用的插件<a href="#幾個目前我正在使用的插件" class="hash-link" aria-label="Direct link to 幾個目前我正在使用的插件" title="Direct link to 幾個目前我正在使用的插件">​</a></h2>
<ul>
<li><a href="https://tiddlywiki.com/plugins/tiddlywiki/markdown/" target="_blank" rel="noopener noreferrer">https://tiddlywiki.com/plugins/tiddlywiki/markdown/</a>
<ul>
<li>讓條目能夠以 Markdown 撰寫</li>
</ul>
</li>
<li><a href="https://github.com/kookma/TW-Shiraz" target="_blank" rel="noopener noreferrer">https://github.com/kookma/TW-Shiraz</a>
<ul>
<li>提供一些諸如 Alert 或動態表格之類的 UI 組件</li>
</ul>
</li>
<li><a href="https://ibnishak.github.io/Tesseract/projects/tekan/Tekan.html" target="_blank" rel="noopener noreferrer">https://ibnishak.github.io/Tesseract/projects/tekan/Tekan.html</a>
<ul>
<li>並沒有正在使用，但是是一個讓我越陷越深的兔子洞</li>
</ul>
</li>
</ul>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-install-plugin-web-0b8902">
<p>Manually installing a plugin. Retrieved 2024-02-25, from <a href="https://tiddlywiki.com/static/Manually%2520installing%2520a%2520plugin.html" target="_blank" rel="noopener noreferrer">https://tiddlywiki.com/static/Manually%2520installing%2520a%2520plugin.html</a> <a href="#user-content-fnref-install-plugin-web-0b8902" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-install-plugin-nodejs-0b8902">
<p>Installing custom plugins on Node.js. Retrieved 2024-02-25, from <a href="https://tiddlywiki.com/static/Installing%2520custom%2520plugins%2520on%2520Node.js.html" target="_blank" rel="noopener noreferrer">https://tiddlywiki.com/static/Installing%2520custom%2520plugins%2520on%2520Node.js.html</a> <a href="#user-content-fnref-install-plugin-nodejs-0b8902" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/tiddly-wiki">TiddlyWiki</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="我從接觸 Tiddlywiki 到現在 (2023-10-29~2024-01-30) 也已經三個月了，雖然預計要做的事情還沒完成，不過想把累積的筆記做個階段性的總整理。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-02-25_tiddlywiki-journey-1">我的 Tiddlywiki 之旅 - 啟程</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-02-25T00:00:00.000Z" itemprop="datePublished">February 25, 2024</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>我從接觸 Tiddlywiki 到現在 (2023-10-29~2024-01-30) 也已經三個月了，雖然預計要做的事情還沒完成，不過想把累積的筆記做個階段性的總整理。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="旅程的起點">旅程的起點<a href="#旅程的起點" class="hash-link" aria-label="Direct link to 旅程的起點" title="Direct link to 旅程的起點">​</a></h2>
<p>目前我使用 <a href="https://docusaurus.io/" target="_blank" rel="noopener noreferrer">Docusaurus</a> 撰寫網誌並作為個人網站，但是用來表達我的 Side Project 仍然不夠合適，想來想去還是 wiki 的形式最符合我的需求，不久前跟人聊天的時候提到了 <a href="https://js.wiki/" target="_blank" rel="noopener noreferrer">Wiki.js</a>，於是我便朝這個<a href="https://alternativeto.net/software/wiki-js/" target="_blank" rel="noopener noreferrer">方向</a>去搜尋了。</p>
<p>接著我發現了 Tiddlywiki，當時正戴著耳機聽著<a href="https://www.youtube.com/watch?v=ztzq05IzYds" target="_blank" rel="noopener noreferrer">戰鎚 40K 機械神教的 BGM</a> ，當下我腦海中浮現了一個念頭：</p>
<blockquote>
<p>Goddess of open source just kissed my forehead.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="非線性">非線性<a href="#非線性" class="hash-link" aria-label="Direct link to 非線性" title="Direct link to 非線性">​</a></h2>
<blockquote>
<p>一個非線性的網頁式筆記
a non-linear personal web notebook</p>
</blockquote>
<p>這是 Tiddlywiki 官方對自己簡介，不過「非線性」一詞其實非常抽象，不過我想它想要相對於「線性」概念應該是指線性敘事 (<a href="https://en.wikipedia.org/wiki/Story_structure#Linear_narrative" target="_blank" rel="noopener noreferrer">Linear narrative</a>)，換句話說 Tiddlywiki 指稱的非線性應該是指非線性敘事 (<a href="https://en.wikipedia.org/wiki/Nonlinear_narrative" target="_blank" rel="noopener noreferrer">Nonlinear narrative</a>)；在紀錄或閱讀資料的時候能夠透過超連結在不同的條目之間穿梭瀏覽。相較之下一般的電子文件是由上而下（線性）閱讀的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="使用-tiddlywiki">使用 Tiddlywiki<a href="#使用-tiddlywiki" class="hash-link" aria-label="Direct link to 使用 Tiddlywiki" title="Direct link to 使用 Tiddlywiki">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="基本模式">基本模式<a href="#基本模式" class="hash-link" aria-label="Direct link to 基本模式" title="Direct link to 基本模式">​</a></h3>
<p>一個&quot;經典&quot;的 Tiddlywiki 檔案會是一個單一的 HTML 檔案，一個 Wiki 的資料（條目、檔案...等）和 Tiddlywiki 的程式都被放在這個單一的 HTML 檔案裡面，使用者可以透過網頁瀏覽器開啟這個檔案使用 Tiddlywiki。</p>
<p>當使用者編輯內容，所有修改都會<strong>暫時</strong>存在瀏覽器的記憶體之中，直到使用者按下&quot;儲存&quot;紐，這時瀏覽器會下載一個新的 HTML，這個新的檔案是原本檔案的副本，但是包含了剛才修改的內容。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="進階模式">進階模式<a href="#進階模式" class="hash-link" aria-label="Direct link to 進階模式" title="Direct link to 進階模式">​</a></h3>
<p>在基本模式中，使用者必須反覆下載更新版來實現「存檔」功能，這是因為出於安全考量，一般情況下瀏覽器不具有任意讀寫硬碟上資料的權限。透過一些輔助工具可以提高 Tiddlywiki 的使用者體驗：</p>
<ul>
<li>應用程式</li>
<li>瀏覽器插件</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="應用程式">應用程式<a href="#應用程式" class="hash-link" aria-label="Direct link to 應用程式" title="Direct link to 應用程式">​</a></h4>
<p><a href="https://github.com/TiddlyWiki/TiddlyDesktop" target="_blank" rel="noopener noreferrer">TiddlyDesktop</a> 或是 <a href="https://github.com/tiddly-gittly/TidGi-Desktop" target="_blank" rel="noopener noreferrer">TidGi</a> 等應用程式在執行 Tiddlywiki 的同時，允許使用者直接進行存檔（或自動存檔）而無須額外重複下載更新，有些應用程式甚至提供管理多個 Tiddlywiki 檔案的功能。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="瀏覽器插件">瀏覽器插件<a href="#瀏覽器插件" class="hash-link" aria-label="Direct link to 瀏覽器插件" title="Direct link to 瀏覽器插件">​</a></h4>
<p><a href="https://github.com/ibnishak/Timimi/" target="_blank" rel="noopener noreferrer">Timimi</a> 同樣可以允許使用者直接對 Tiddlywiki 進行存檔，只是不是以應用程式的方式實現，而是以瀏覽器插件的形式存在。</p>
<p>使用它需要完成兩個前置作業：</p>
<ul>
<li>下載並執行 &quot;Timimi 程式&quot;</li>
<li>安裝 &quot;Timimi 瀏覽器插件&quot;</li>
</ul>
<p>這個方案允許使用者使用自己熟悉的網頁瀏覽器編輯 Tiddlywiki，只是額外的步驟可能會讓人覺得不方便。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="伺服器-nodejs-模式">伺服器 (Node.js) 模式<a href="#伺服器-nodejs-模式" class="hash-link" aria-label="Direct link to 伺服器 (Node.js) 模式" title="Direct link to 伺服器 (Node.js) 模式">​</a></h3>
<p>Tiddlywiki 允許以 Node.js 執行，至於 Node.js 與 NPM (或其他套件管理工具) 的安裝與環境設定我就不在此多做解釋了。安裝 <code>tiddlywiki</code> 指令：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">npm install -g tiddlywiki</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>新增一個 Tiddlywiki Node.js 專案：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">tiddlywiki &lt;Name&gt; --init server</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這個指令會初始化一個 Tiddlywiki 並設定一些在 Node.js 模式下需要的插件，諸如：<code>tiddlywiki/tiddlyweb</code> 和 <code>tiddlywiki/filesystem</code>。</p>
<p>接著執行：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">tiddlywiki &lt;Name&gt; --listen</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再打開 <a href="http://127.0.0.1:8080" target="_blank" rel="noopener noreferrer">http://127.0.0.1:8080</a> 就能看到你的 Tiddlywiki 了！</p>
<p>與「基本模式」和「進階模式」不同是，新增的條目並不會被打包成單一 HTML，而是一個條目對應一（或兩個）檔案的方式儲存在資料夾中。</p>
<hr>
<p>另外值得一提的是，<code>tiddlywiki</code> 不只能夠以 Node.js 啟動一個伺服器，還提供了一系列的 CLI 操作，比如：建構 (Build) 靜態版本、從 HTML 抽出指定條目...等。</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">$ tiddlywiki --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">usage: tiddlywiki [&lt;wikifolder&gt;] [--&lt;command&gt; [&lt;args&gt;...]...]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Available commands:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* build: Automatically run configured commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* clearpassword: Clear a password for subsequent crypto operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* commands: Run commands returned from a filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* deletetiddlers: Deletes a group of tiddlers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* editions: Lists the available editions of TiddlyWiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* fetch: Fetch tiddlers from wiki by URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* help: Display help for TiddlyWiki commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* import: Import tiddlers from a file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* init: Initialise a new wiki folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* listen: Provides an HTTP server interface to TiddlyWiki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* load: Load tiddlers from a file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* makelibrary: Construct library plugin required by upgrade process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* output: Set the base output directory for subsequent commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* password: Set a password for subsequent crypto operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* render: Renders individual tiddlers to files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* rendertiddler: Render an individual tiddler as a specified ContentType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* rendertiddlers: Render tiddlers matching a filter to a specified ContentType</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* save: Saves individual raw tiddlers to files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* savelibrarytiddlers: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* savetiddler: Saves a raw tiddler to a file</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* savetiddlers: Saves a group of raw tiddlers to a directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* savewikifolder: Saves a wiki to a new wiki folder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* server: Provides an HTTP server interface to TiddlyWiki (deprecated in favour of the new listen command)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* setfield: Prepares external tiddlers for use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* unpackplugin: Unpack the payload tiddlers from a plugin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* verbose: Triggers verbose output mode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">* version: Displays the version number of TiddlyWiki</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="變體與其他衍生">變體與其他衍生<a href="#變體與其他衍生" class="hash-link" aria-label="Direct link to 變體與其他衍生" title="Direct link to 變體與其他衍生">​</a></h2>
<p>基於 Tiddlywiki 的設計哲學，而造就了「基本模式」、「進階模式」或是「伺服器模式」這幾種不同的使用方式，不過其實它們都不太符合一般使用者使用軟體的習慣，因此有不少衍生專案正是為了改善它的使用體驗而存在的。這裡是一些我在爬文的過程發現的衍生型 Tiddlywiki<sup><a href="#user-content-fn-variant-57f790" id="user-content-fnref-variant-57f790" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>：</p>
<ul>
<li><a href="https://noteself.org/" target="_blank" rel="noopener noreferrer">NoteSelf</a>
<ul>
<li>使用 <a href="https://pouchdb.com/" target="_blank" rel="noopener noreferrer">PouchDB</a> 將資料儲存在瀏覽器</li>
</ul>
</li>
<li><a href="https://tiddlyhost.com/" target="_blank" rel="noopener noreferrer">Tiddlyhost</a>
<ul>
<li>使用 Ruby 作為後端語言</li>
<li>可以直接註冊使用</li>
</ul>
</li>
<li><a href="https://feather.wiki/" target="_blank" rel="noopener noreferrer">Feather Wiki</a>
<ul>
<li>追求輕量化實現的網頁 Wiki</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="補充說明">補充說明<a href="#補充說明" class="hash-link" aria-label="Direct link to 補充說明" title="Direct link to 補充說明">​</a></h2>
<p>「基本模式」、「進階模式」或是「伺服器模式」是我為了方便解釋而使用的詞彙，並以單純使用者的角度去區分，實際上 Tiddlywiki 本身並不是以這樣的方式區分或是稱呼它們。</p>
<p>本文使用的「條目」同樣是為了方便解釋而沿用 Wikipedia 的使用習慣，實際上在 Tiddlywiki 中，條目被稱作 「Tiddler」。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-variant-57f790">
<p>知識連結的工具：TiddlyWiki. (n.d.). Retrieved 2024-01-30, from <a href="https://roulesophy.github.io/%E7%9F%A5%E8%AD%98%E9%80%A3%E7%B5%90%E7%9A%84%E5%B7%A5%E5%85%B7-tiddlywiki/" target="_blank" rel="noopener noreferrer">https://roulesophy.github.io/知識連結的工具-tiddlywiki/</a> <a href="#user-content-fnref-variant-57f790" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/tiddly-wiki">TiddlyWiki</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="本人因為公司的專案而接觸 GIS (Geographic Information System)，並且在 Three.js 和 Mapbox GL JS 兩個函式庫都已經累積了基本的經驗。最近為了跟客戶的後端工程師解釋資料結構而寫了一些文件，個人感到十分滿意就整理一下發成一篇文章好了。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-01-02_mapbox-layer">淺談 Mapbox GL JS 的渲染邏輯</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-01-02T00:00:00.000Z" itemprop="datePublished">January 2, 2024</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p>本人因為公司的專案而接觸 GIS (Geographic Information System)，並且在 Three.js 和 Mapbox GL JS 兩個函式庫都已經累積了基本的經驗。最近為了跟客戶的後端工程師解釋資料結構而寫了一些文件，個人感到十分滿意就整理一下發成一篇文章好了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="不是-mapbox-gl-的方式">不是 Mapbox GL 的方式<a href="#不是-mapbox-gl-的方式" class="hash-link" aria-label="Direct link to 不是 Mapbox GL 的方式" title="Direct link to 不是 Mapbox GL 的方式">​</a></h2>
<p>這是資料和 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model" target="_blank" rel="noopener noreferrer">DOM</a>：</p>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBDcmVhdGVkIHdpdGggSW5rc2NhcGUgKGh0dHA6Ly93d3cuaW5rc2NhcGUub3JnLykgLS0+Cjxzdmcgd2lkdGg9IjI0NS4xN21tIiBoZWlnaHQ9IjEwOS41bW0iIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0NS4xNyAxMDkuNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjIuNTM1IC0xMTY0LjYpIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjYuMTc0IC0xMi42OTYpIj48cmVjdCB4PSI0OC43NTgiIHk9IjExNzcuMyIgd2lkdGg9IjI0NS4wNyIgaGVpZ2h0PSIxMDkuNCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjEiIHN0eWxlPSJwYWludC1vcmRlcjpzdHJva2UgZmlsbCBtYXJrZXJzIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTE5Ny41NiA4OTYuMTQpIj48ZWxsaXBzZSBjeD0iNDE2LjIxIiBjeT0iMzU4LjM2IiByeD0iNC45NTg1IiByeT0iMi4yMDk4IiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxwYXRoIGQ9Im00MjMuNjUgMzQzLjkzYy01LjQwNjcgNC4zMjQtNC44MDc3IDkuMzY4NC00LjEwNDMgMTQuNDI1IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIi8+PGVsbGlwc2UgdHJhbnNmb3JtPSJzY2FsZSgtMSwxKSIgY3g9Ii00MzguMTkiIGN5PSIzNTguNjkiIHJ4PSI0Ljk1ODUiIHJ5PSIyLjIwOTgiIHN0eWxlPSJwYWludC1vcmRlcjpzdHJva2UgZmlsbCBtYXJrZXJzIi8+PHBhdGggZD0ibTQzMC41NiAzNDQuMDhjNS40MDY3IDQuMzI0IDQuODA3NyA5LjM2ODQgNC4xMDQzIDE0LjQyNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMyIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNDUwLjIgMTExMi41KSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjMiPjxwYXRoIGQ9Im02NjUuMDMgODYtMTUuMDEgOC43NTg4IDE1LjAxIDguNzU4OCIvPjxwYXRoIGQ9Im02OTIuODggODYgMTUuMDEgOC43NTg4LTE1LjAxIDguNzU4OCIvPjxwYXRoIGQ9Im02ODkuMjEgODUuMjEzLTkuMDE4OCAxOS4wOTEiLz48L2c+PGc+PHBhdGggZD0ibTg3LjkyMyAxMjQwLjJjLTIuMDQwMS0wLjU1NzEtMy43MzM0LTIuMDMwMS00LjY5MTEtNC4wODA2bC0wLjU3MjMzLTEuMjI1NXYtNDAuNjQ0bDAuNTcyMzMtMS4yMjU0YzAuNjI0LTEuMzM2MSAxLjY1Mi0yLjUyNCAyLjg0ODgtMy4yOTIxIDEuNjI0Ny0xLjA0MjcgMi4yOTk0LTEuMDk5IDEzLjE1Ni0xLjA5OSA2Ljk5NTUgMCAxMC4yIDAuMDY5IDEwLjUyNiAwLjIyODMgMC41NzMyNSAwLjI3ODkgMTIuMzc0IDEzLjA1MSAxMi44ODIgMTMuOTQyIDAuMzQwMjggMC41OTcyIDAuMzU5MjkgMS42MTE3IDAuMzA2MzYgMTYuMzYzbC0wLjA1NjQgMTUuNzI2LTAuNTQ3MzcgMS4xNjc5Yy0wLjc2NjUzIDEuNjM1NC0yLjE1NDEgMy4wNDczLTMuNjkzOCAzLjc1ODVsLTEuMjczMyAwLjU4ODEtMTQuMTk1IDAuMDQyYy0xMS43NiAwLjAzNC0xNC4zNzgtMC4wMS0xNS4yNjMtMC4yNXptMjkuMjkxLTMuMTc0NmMwLjc3MTQ4LTAuMjkxNCAxLjY1MDEtMS4xNDggMi4xMjU0LTIuMDcyMyAwLjM3MjIyLTAuNzIzNiAwLjM4OTc3LTEuMzc5MyAwLjM4OTc3LTE0LjU1MnYtMTMuNzk0aC0zLjAxMjVjLTEuODYyNCAwLTMuNDAyNC0wLjEwNjgtNC4wMzM3LTAuMjc1Ny0yLjQ4NTUtMC42NjQ5LTQuMTYzOS0yLjAyMjYtNS4xODA1LTQuMTkwNy0wLjUyMjc0LTEuMTE0OC0wLjU0MDE3LTEuMjc4Ni0wLjYwNjMzLTUuNjk4MWwtMC4wNjgxLTQuNTUwMi05LjI2MSAwLjA1N2MtMTAuNDEzIDAuMDY0LTkuNjE1My0wLjA1Ny0xMS4wMTUgMS42NzJsLTAuNjI0NTQgMC43NzE2LTAuMDU5MSAxOS42MzljLTAuMDMyNSAxMC44MDItOGUtMyAxOS45MjMgMC4wNTQxIDIwLjI3IDAuMDYyMiAwLjM0NjggMC40Mjg5MSAwLjk5OTUgMC44MTQ4NiAxLjQ1MDQgMS4zNDUzIDEuNTcxNiAwLjM5ODcxIDEuNDgzNCAxNS45NzUgMS40ODg2IDkuMzUzOCAwIDE0LjExNS0wLjA2NyAxNC41MDEtMC4yMTI2em0tMjMuODQ3LTcuMTE5NmMtMC4zMjgzNS0wLjMyODQtMC41OTcwMS0wLjc5NS0wLjU5NzAxLTEuMDM2OSAwLTAuMjQyIDAuMjY4NjYtMC43MDg2IDAuNTk3MDEtMS4wMzY5bDAuNTk3MDEtMC41OTdoMTQuMzA1bDAuNTU2MDMgMC40NzgzYzAuMzk3MyAwLjM0MTcgMC41NTYwMyAwLjY3MTYgMC41NTYwMyAxLjE1NTZzLTAuMTU4NzMgMC44MTM5LTAuNTU2MDMgMS4xNTU2bC0wLjU1NjAzIDAuNDc4M2gtMTQuMzA1em0tMmUtMyAtNy45NTQ3Yy0wLjM0MTU4LTAuMjc2Ni0wLjQ3MTk2LTAuNTk0Mi0wLjQ3MTk2LTEuMTQ5NiAwLTAuNTU1NSAwLjEzMDM4LTAuODczMSAwLjQ3MTk2LTEuMTQ5NyAwLjQ0NDI2LTAuMzU5NyAwLjk3MTgtMC4zODIxIDguOTkxNy0wLjM4MjFoOC41MTk4bDAuNDQ0MDggMC40NzI3YzAuNTY1MTggMC42MDE2IDAuNTgyMDYgMS42MzU5IDAuMDM1NiAyLjE4MjQtMC4zOTU0OSAwLjM5NTQtMC42ODA4IDAuNDA4NS04Ljk2MzkgMC40MDg1LTguMDU0NyAwLTguNTgzLTAuMDIyLTkuMDI3My0wLjM4MjJ6bTAuMDIzNC03Ljk4NjRjLTAuODkzODMtMC44OTM5LTAuNjI5MDUtMi4yMjkgMC41MjkzOC0yLjY2OTUgMC4yOTY1LTAuMTEyNyA0LjA2NTMtMC4xOTM4IDguOTI0OC0wLjE5MjEgOS4wODIzIDAgOS4xOTExIDAuMDE1IDkuNzA2NSAxLjA5MDUgMC4zNDc5NiAwLjcyNTcgMC4wMjY5IDEuNjA5OC0wLjcwNTY0IDEuOTQzNi0wLjM1MTI3IDAuMTYwMS0zLjE5NDEgMC4yMzA3LTkuMjc5MSAwLjIzMDctOC40NjI3IDAtOC43ODY5LTAuMDE0LTkuMTc1OS0wLjQwMzJ6bTI1LjE4OS0xMS4wODVjLTAuMzQwOTgtMC4zNjUxLTIuMzU0MS0yLjU0NzktNC40NzM1LTQuODUwN3MtMy45MzYzLTQuMjIwOC00LjAzNzQtNC4yNjIyYy0wLjEwNjM2LTAuMDQ0LTAuMTUgMS4yOTA1LTAuMTAzNTcgMy4xNjU3IDAuMDY1MyAyLjYzNjIgMC4xNTAwNiAzLjM3NDQgMC40NTQzMSAzLjk1NTkgMS4wOTk2IDIuMTAxNCAyLjMwMjggMi41OTMxIDYuNDQyNCAyLjYzMjdsMi4zMzc4IDAuMDIyeiIgc3Ryb2tlLXdpZHRoPSIuNzcxOTMiLz48Y2lyY2xlIGN4PSI2NS45MDkiIGN5PSIxMjI4LjIiIHI9IjMuNjkwNCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48ZWxsaXBzZSBjeD0iOTEuNzU1IiBjeT0iMTI1My41IiByeD0iNC45NTg1IiByeT0iMi4yMDk4IiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjwvZz48cGF0aCBkPSJtNjUuMTMyIDEyMjguN2M0LjU5MjItNy4yMjMyIDEwLjczNy0xMC45ODUgMTguNjUzLTEwLjc5NyIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMyIvPjxjaXJjbGUgdHJhbnNmb3JtPSJzY2FsZSgtMSwxKSIgY3g9Ii0xNDAuNzIiIGN5PSIxMjI3LjkiIHI9IjMuNjkwNCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48cGF0aCBkPSJtMTQxLjQ5IDEyMjguNGMtNC41OTIyLTcuMjIzMS0xMC43MzctMTAuOTg1LTE4LjY1My0xMC43OTciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiLz48cGF0aCBkPSJtOTkuMTk2IDEyMzkuMWMtNS40MDY3IDQuMzIzOS00LjgwNzcgOS4zNjgzLTQuMTA0MyAxNC40MjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InNjYWxlKC0xLDEpIiBjeD0iLTExMy43MyIgY3k9IjEyNTMuOCIgcng9IjQuOTU4NSIgcnk9IjIuMjA5OCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48cGF0aCBkPSJtMTA2LjEgMTIzOS4yYzUuNDA2NyA0LjMyNCA0LjgwNzcgOS4zNjg0IDQuMTA0MyAxNC40MjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiLz48Y2lyY2xlIHRyYW5zZm9ybT0ibWF0cml4KC0uODY2MDMgLS41IC0uNSAuODY2MDMgMCAwKSIgY3g9Ii04NDkuMyIgY3k9Ijk0NCIgcj0iMy42OTA0IiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxwYXRoIGQ9Im0yNjMuOTQgMTI0M2MtMC4zNjUzOC04LjU1MTUtMy44MDU4LTE0Ljg4Mi0xMC43NTUtMTguNjc3IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIzIi8+PGNpcmNsZSB0cmFuc2Zvcm09InJvdGF0ZSgtMzApIiBjeD0iLTQ1My4wNyIgY3k9IjExNzMuNSIgcj0iMy42OTA0IiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxnIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cGF0aCBkPSJtMTkzLjk1IDEyNDMuNmMwLjM2NTM4LTguNTUxNSAzLjgwNTgtMTQuODgyIDEwLjc1NS0xOC42NzciIGZpbGw9Im5vbmUiIHN0cm9rZS13aWR0aD0iMyIvPjxjaXJjbGUgY3g9Ijg5LjM2OSIgY3k9IjEyMDQuMiIgcj0iOS4xMjM1IiBmaWxsPSIjZmZmIiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxjaXJjbGUgY3g9IjExNS43MSIgY3k9IjEyMDQuMiIgcj0iOS4xMjM1IiBmaWxsPSIjZmZmIiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjwvZz48Y2lyY2xlIGN4PSI4OS4zNjkiIGN5PSIxMjA0LjIiIHI9IjMuNjkwNCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48Y2lyY2xlIGN4PSIxMTUuNzEiIGN5PSIxMjA0LjIiIHI9IjMuNjkwNCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48Y2lyY2xlIGN4PSIyMTYuNjgiIGN5PSIxMjE4LjUiIHI9IjkuMTIzNSIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0eWxlPSJwYWludC1vcmRlcjpzdHJva2UgZmlsbCBtYXJrZXJzIi8+PGNpcmNsZSBjeD0iMjQzLjAyIiBjeT0iMTIxOC41IiByPSI5LjEyMzUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxjaXJjbGUgY3g9IjIxNi42OCIgY3k9IjEyMTguNSIgcj0iMy42OTA0IiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxjaXJjbGUgY3g9IjI0My4wMiIgY3k9IjEyMTguNSIgcj0iMy42OTA0IiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjx0ZXh0IHg9IjgyLjYxMzUxIiB5PSIxMjc0LjkzNzUiIGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE4LjkwMXB4IiBsZXR0ZXItc3BhY2luZz0iMHB4IiBzdHJva2Utd2lkdGg9Ii40NzI1MyIgd29yZC1zcGFjaW5nPSIwcHgiIHN0eWxlPSJsaW5lLWhlaWdodDoxLjI1IiB4bWw6c3BhY2U9InByZXNlcnZlIj48dHNwYW4geD0iODIuNjEzNTEiIHk9IjEyNzQuOTM3NSIgc3Ryb2tlLXdpZHRoPSIuNDcyNTMiPkRhdGE8L3RzcGFuPjwvdGV4dD48dGV4dCB4PSIyMDcuMzQ3MjEiIHk9IjEyNzQuNTk3NCIgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTguOTAxcHgiIGxldHRlci1zcGFjaW5nPSIwcHgiIHN0cm9rZS13aWR0aD0iLjQ3MjUzIiB3b3JkLXNwYWNpbmc9IjBweCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEuMjUiIHhtbDpzcGFjZT0icHJlc2VydmUiPjx0c3BhbiB4PSIyMDcuMzQ3MjEiIHk9IjEyNzQuNTk3NCIgc3Ryb2tlLXdpZHRoPSIuNDcyNTMiPkRPTTwvdHNwYW4+PC90ZXh0PjwvZz48L2c+PC9zdmc+Cg==" width="927" height="414" class="img_RpFt"></p>
<p>一般來說，網頁前端的開發者會透過資料的屬性 (properties) 來決定渲染的樣式 (Style)：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_data-properties-styles-f8d53cc2bea14c33baf6b69c5e8a2cd8.webp" width="905" height="350" class="img_RpFt"></p>
<p>如果不經過特殊的處理，當大量的資料進入程式，程式就會試圖渲染大量的 DOM：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_data-properties-styles-heavy-15a88d4a544afe503fc61a4468d03df4.webp" width="1086" height="424" class="img_RpFt"></p>
<p>因此基於 DOM 的 GIS 函式庫通常無法用來顯示巨量的資料點。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="mapbox-gl-js-的方式">Mapbox GL JS 的方式<a href="#mapbox-gl-js-的方式" class="hash-link" aria-label="Direct link to Mapbox GL JS 的方式" title="Direct link to Mapbox GL JS 的方式">​</a></h2>
<p>Mapbox GL JS 預設是以 WebGL 模式處理資料的，並且額外支援 DOM 的渲染（部份 GIS 函式庫剛好相反，預設是 DOM，WebGL 的支援是附帶的）。</p>
<p>而這是 <a href="https://docs.mapbox.com/help/glossary/layer/" target="_blank" rel="noopener noreferrer">圖層 (Layer)</a>：</p>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCEtLSBDcmVhdGVkIHdpdGggSW5rc2NhcGUgKGh0dHA6Ly93d3cuaW5rc2NhcGUub3JnLykgLS0+Cjxzdmcgd2lkdGg9IjEyMy45MW1tIiBoZWlnaHQ9IjEwOS43OG1tIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMjMuOTEgMTA5Ljc4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMy4zMjQgLTE1NDkpIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcuNzUyIC01MS4wNDYpIj48cmVjdCB4PSI1MS4xMjYiIHk9IjE2MDAuMSIgd2lkdGg9IjEyMy44MSIgaGVpZ2h0PSIxMDkuNjgiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9Ii4xIiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjx0ZXh0IHg9IjgyLjMwNDcwMyIgeT0iMTY5Ny42ODMyIiBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOC45MDFweCIgbGV0dGVyLXNwYWNpbmc9IjBweCIgc3Ryb2tlLXdpZHRoPSIuNDcyNTMiIHdvcmQtc3BhY2luZz0iMHB4IiBzdHlsZT0ibGluZS1oZWlnaHQ6MS4yNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHRzcGFuIHg9IjgyLjMwNDcwMyIgeT0iMTY5Ny42ODMyIiBzdHJva2Utd2lkdGg9Ii40NzI1MyI+TGF5ZXI8L3RzcGFuPjwvdGV4dD48Y2lyY2xlIHRyYW5zZm9ybT0icm90YXRlKC0xNi4zMDYpIiBjeD0iLTM5OS4yNCIgY3k9IjE2MDEuMiIgcj0iMy42OTA0IiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxlbGxpcHNlIGN4PSI5OC45MTMiIGN5PSIxNjc0LjQiIHJ4PSI0Ljk1ODUiIHJ5PSIyLjIwOTgiIHN0eWxlPSJwYWludC1vcmRlcjpzdHJva2UgZmlsbCBtYXJrZXJzIi8+PHBhdGggZD0ibTY1Ljc5MSAxNjQ5LjZjMi4zNzk1LTguMjIyIDcuMjIwNy0xMy41NTggMTQuODcxLTE1LjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiLz48Y2lyY2xlIHRyYW5zZm9ybT0ibWF0cml4KC0uOTU5NzcgLS4yODA3NyAtLjI4MDc3IC45NTk3NyAwIDApIiBjeD0iLTYwNy41NiIgY3k9IjE1NDEiIHI9IjMuNjkwNCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48cGF0aCBkPSJtMTUxLjA2IDE2NTAuM2MtMi4zNzk1LTguMjIyLTcuMjIwNy0xMy41NTgtMTQuODcxLTE1LjYiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiLz48cGF0aCBkPSJtMTA2LjM1IDE2NjBjLTUuNDA2NyA0LjMyNC00LjgwNzcgOS4zNjg0LTQuMTA0MyAxNC40MjUiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiLz48ZWxsaXBzZSB0cmFuc2Zvcm09InNjYWxlKC0xLDEpIiBjeD0iLTEyMC44OSIgY3k9IjE2NzQuNyIgcng9IjQuOTU4NSIgcnk9IjIuMjA5OCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48cGF0aCBkPSJtMTEzLjI2IDE2NjAuMWM1LjQwNjcgNC4zMjM5IDQuODA3NyA5LjM2ODMgNC4xMDQzIDE0LjQyNSIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMyIvPjxwYXRoIGQ9Im0xMDYuNiAxNjU5LjVjLTMuNzQ1OS0wLjM5NC02LjQ1ODgtMS4xNjk5LTkuNDUwNC0yLjcwMjktMy45NzkzLTIuMDM5Mi03LjQ5MDQtNS4yNTc0LTkuODQyNS05LjAyMTQtMC44MDgzNS0xLjI5MzYtMS43NjM4LTMuMjExNS0yLjI0ODQtNC41MTMzLTAuMjE2ODMtMC41ODI0LTAuNDE1MDQtMS4wNzk3LTAuNDQwNS0xLjEwNTItMC4wMjUxLTAuMDI1LTEuMTQ0NyAwLjAzMS0yLjQ4NyAwLjEyNDktMS4zNDIzIDAuMDk0LTIuNDQ5NCAwLjE2MDgtMi40NjAyIDAuMTQ4MS0wLjAxOTEtMC4wMjMgMS4zMjM1LTEuNzU2IDQuNjUzOC02LjAwNDMgMC45ODAwMS0xLjI1MDEgMS44MTcxLTIuMjU0NSAxLjg2MDMtMi4yMzE5IDAuMjkzMzkgMC4xNTMgNy40NTY5IDcuMjE0OCA3LjM4ODQgNy4yODM0LTAuMDI0MSAwLjAyNC0xLjA1OTMgMC4xMDkxLTIuMzAwOSAwLjE4OTZsLTIuMjU3NiAwLjE0NjIgMC4wMjMxIDAuMzMyNGMwLjAyOTIgMC40MjIyIDEuMTgyNCAyLjcyNSAxLjkxODYgMy44MzIzIDIuMzYyOSAzLjU1NDMgNS44NzQ3IDYuNDQ0MyA5LjY4MTQgNy45NjcxIDIuODI0MiAxLjEyOTggNC43NDMgMS40OTAxIDcuOTM1NiAxLjQ5MDEgMi41MDYyIDAgMy43Nzc3LTAuMTYwOCA1Ljc0Mi0wLjcyNjUgNi4yNjExLTEuODAyOSAxMS4zODItNi40MTQ3IDEzLjc5My0xMi40MjJsMC40MzE5NS0xLjA3NiAyLjA5ODUtMC4wMzNjMS4yMDgtMC4wMTkgMi4wOTg2IDAuMDEzIDIuMDk4NiAwLjA3NiAwIDAuMzQxNy0xLjA2MTMgMy4wOTg5LTEuNjI2OSA0LjIyNjctMS4zMjI4IDIuNjM3NS0yLjU1MTMgNC4zNzE4LTQuNTc5NyA2LjQ2NS0zLjg0NDkgMy45Njc4LTguNzA1NCA2LjQ3ODctMTQuMTkzIDcuMzMxOS0xLjE2NzMgMC4xODE1LTQuNzkwMSAwLjMyMTUtNS43Mzg1IDAuMjIxOHptLTEuMzc1Ni0xMS4yMTh2LTIuMjAwMWwtMC4zMjA0NS0wLjA4Yy0wLjE3NjE5LTAuMDQ0LTAuNzQ1MDctMC4yNzQ1LTEuMjY0LTAuNTExN2wtMC45NDM1OC0wLjQzMTMtMS41NDc5IDEuNTQ0NC0xLjU0NzkgMS41NDQ1LTQuNzIxNy00LjcyMTggMS41NDQ0LTEuNTQ3OSAxLjU0NDUtMS41NDc5LTAuNDIyNy0wLjkzNWMtMC4yMzI0Mi0wLjUxNDItMC40NTc5LTEuMDgzLTAuNTAwOTYtMS4yNjRsLTAuMDc4NS0wLjMyOWgtNC40MjE2di02LjY5OWgyLjIwNWMyLjE4NDkgMCAyLjIwNTYtMWUtMyAyLjI3OTQtMC4yNjkyIDAuMDQxMy0wLjE0OCAwLjI2ODU0LTAuNzE3MiAwLjUwNTktMS4yNjQ4bDAuNDMxNjUtMC45OTU3LTEuNTQzNi0xLjU0NzEtMS41NDM2LTEuNTQ2OSA0LjcyMTctNC43MjE4IDEuNTQ3OSAxLjU0NDQgMS41NDc5IDEuNTQ0NSAwLjk0MzU5LTAuNDMxNGMwLjUxODk4LTAuMjM3MiAxLjA4NzgtMC40Njc0IDEuMjY0LTAuNTExN2wwLjMyMDQ1LTAuMDh2LTQuNDAwMmg2LjY5OXY0LjQwMDJsMC4zMjA0NiAwLjA4YzAuMTc2MTggMC4wNDQgMC43NDUwNyAwLjI3NDUgMS4yNjQgMC41MTE3bDAuOTQzNTkgMC40MzE0IDEuNTQ3OS0xLjU0NDUgMS41NDc5LTEuNTQ0NCA0LjcyMTggNC43MjE4LTMuMDg4OCAzLjA5NTcgMC40MjI2OSAwLjkzNWMwLjIzMjQzIDAuNTE0MyAwLjQ1NzkxIDEuMDgzMSAwLjUwMDk4IDEuMjY0bDAuMDc4NCAwLjMyOWg0LjQyMTZ2Ni43MDg5bC0yLjAwMzctMC4wMWMtMS4xMDIxLTAuMDEtMi4wOTM4LTAuMDEtMi4yMDM4IDAtMC4xMjQzMSAwLTAuMjUzNDUgMC4xNzUxLTAuMzQxMDkgMC40NTM4LTAuMDc3NSAwLjI0NjctMC4zMDY0OCAwLjgxNTItMC41MDg4MiAxLjI2MzNsLTAuMzY3NzUgMC44MTQ2IDEuNTQ1MiAxLjU0ODcgMS41NDUyIDEuNTQ4Ni0yLjM2MDkgMi4zNjA5LTIuMzYwOSAyLjM2MDgtMS41NDc5LTEuNTQ0NC0xLjU0NzktMS41NDQ1LTAuOTM1MDMgMC40MjI3Yy0wLjUxNDI1IDAuMjMyNS0xLjA4MyAwLjQ1NzktMS4yNjQgMC41MDExbC0wLjMyOTAyIDAuMDc4djQuNDIxNmgtNi42OTl2LTIuMjAwMXptNS4yMDg0LTUuOTk4YzIuNzc1OS0wLjcxMzMgNC44MDg1LTIuNjA3NSA1LjgyNDgtNS40MjgyIDAuMzQzMDEtMC45NTIzIDAuNDI4NDMtMy4xNTA5IDAuMTYzMDEtNC4yMDEtMC43NzQ1Ny0zLjA2NDQtMi45MzkxLTUuMjM1NC01Ljk4OTEtNi4wMDY3LTEuMzQwOC0wLjMzOTEtMy4yMTkyLTAuMjUzNS00LjQ2NzUgMC4yMDM1LTMuMTgwNyAxLjE2NDQtNS4yMDIgMy44MjY0LTUuMzczOSA3LjA3NzEtMC4wNzk0IDEuNTA4NyAwLjEwMTM2IDIuNTQ2MyAwLjY2NTU5IDMuODEzMyAwLjkzMTcxIDIuMDkyMiAyLjUyNTQgMy41NDUgNC43MTI3IDQuMjk2MSAxLjE1ODEgMC4zOTc3IDEuMTY3NyAwLjM5OTMgMi41NTAzIDAuNDE1MyAwLjczMzYgMC4wMSAxLjQ3ODYtMC4wNTcgMS45MTQtMC4xNjk0em0xOS40OTQtOC41MTM0Yy0yLjEyNDYtMi4wMzY1LTYuMzk1My02LjMwMTEtNi4zNTI3LTYuMzQzNyAwLjAyNDEtMC4wMjQgMS4wNTkzLTAuMTA5MSAyLjMwMDktMC4xODk1bDIuMjU3NC0wLjE0NjMtMC4wMjMxLTAuMzMyNGMtMC4wMzEyLTAuNDQyNy0xLjIxNjItMi43ODg0LTEuOTc1OC0zLjkxMDEtMy4zMjc1LTQuOTE0MS04LjIyLTguMTA5MS0xNC4wMzEtOS4xNjI1LTEuNjczNi0wLjMwMzQtNS4zODQzLTAuMzAzNC03LjA1NzkgMC03LjI4NzcgMS4zMjExLTEzLjI5NCA2LjE3MzMtMTYuMDA3IDEyLjkzMWwtMC40MzE5NSAxLjA3Ni0yLjA5ODUgMC4wMzNjLTEuMjA4IDAuMDE5LTIuMDk4Ni0wLjAxMy0yLjA5ODYtMC4wNzYgMC0wLjM0MTcgMS4wNjEzLTMuMDk5IDEuNjI2OS00LjIyNjcgMS4zMjI3LTIuNjM3NSAyLjU1MTMtNC4zNzE5IDQuNTc5Ny02LjQ2NTEgMy44NTkzLTMuOTgyNyA4LjYzMDgtNi40NDI2IDE0LjI1NS03LjM0OTIgMS43MjItMC4yNzc1IDUuNjgyOS0wLjI3NzUgNy40MDUgMCA0LjQ2NjMgMC43MTk5IDguMTI4MiAyLjI5OTEgMTEuNzQzIDUuMDY0IDEuMzE5OCAxLjAwOTUgMy41NjI0IDMuMjczNSA0LjU0MzggNC41ODc0IDEuNDEyNyAxLjg5MDkgMi43NjU0IDQuMzM5NSAzLjUyNTcgNi4zODE4IDAuMjE2NzMgMC41ODI0IDAuNDE0OTYgMS4wNzk3IDAuNDQwNTEgMS4xMDUyIDAuMDI1MSAwLjAyNiAxLjE0NDYtMC4wMzEgMi40ODctMC4xMjQ5IDEuMzQyMy0wLjA5NCAyLjQ0OTMtMC4xNjA5IDIuNDU5OS0wLjE0ODIgMC4wMTkxIDAuMDIzLTAuNzgwMjggMS4wNTQzLTQuNDE0MiA1LjY5NzItMS4wMDA2IDEuMjc4NS0xLjg3MzIgMi4zOTM2LTEuOTM5IDIuNDc3OS0wLjA5MDUgMC4xMTY3LTAuMzc4MDMtMC4wOTQtMS4xOTYyLTAuODc4NnoiIHN0cm9rZS13aWR0aD0iLjExOTYyIi8+PGNpcmNsZSBjeD0iOTUuNDk4IiBjeT0iMTYyMy44IiByPSI5LjEyMzUiIGZpbGw9IiNmZmYiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHlsZT0icGFpbnQtb3JkZXI6c3Ryb2tlIGZpbGwgbWFya2VycyIvPjxjaXJjbGUgY3g9IjEyMS44NCIgY3k9IjE2MjMuOSIgcj0iOS4xMjM1IiBmaWxsPSIjZmZmIiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48Y2lyY2xlIGN4PSI5NS40OTgiIGN5PSIxNjIzLjgiIHI9IjMuNjkwNCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48Y2lyY2xlIGN4PSIxMjEuODQiIGN5PSIxNjIzLjkiIHI9IjMuNjkwNCIgc3R5bGU9InBhaW50LW9yZGVyOnN0cm9rZSBmaWxsIG1hcmtlcnMiLz48L2c+PC9nPjwvc3ZnPgo=" width="468" height="415" class="img_RpFt"></p>
<p>你可以把 Layer 想像成這樣：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/05_layer-power-0a127750a6c307def72367047402d7c2.webp" width="1809" height="645" class="img_RpFt"></p>
<p>Layer 運作起來就像這樣：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/06_layer-working-0216d8ee3870da88431514ef05889487.webp" width="2045" height="1640" class="img_RpFt"></p>
<p>可以注意到，它的運作方式和一般 (Data→Style) 的有所差異，要渲染成什麼樣子什麼不是資料決定的，而是 Layer 決定的，它喪失了對單一資料點進行 Style 客製化的彈性，但是獲得了大量渲染資料的能力。</p>
<p>關於如何設定 Layer，Mapbox 的<a href="https://docs.mapbox.com/style-spec/reference/layers/" target="_blank" rel="noopener noreferrer">官方文件</a>提供了十分充足的資訊，即便是透過 Mapbox 官方的編輯器製作的「客製化地圖」也完全遵守這些 Style 的設定，只是官方提供的<a href="https://www.mapbox.com/gallery" target="_blank" rel="noopener noreferrer">樣式</a> 一個大約有 200 層 Layer 左右。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/mapbox-gl-js">Mapbox GL JS</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="前情提要"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/about-ecs-distributed-minecraft-rl-rbnn-bar-code-language">關於我想用 ECS 實作 Minecraft 以分散式架構運行並在其中用增強式學習訓練完全視覺化之遞迴布林類神經網路以產出二維條碼人造語言那檔事</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2023-10-07T00:00:00.000Z" itemprop="datePublished">October 7, 2023</time> · <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="#前情提要" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<p>關於我的 Side Project 「環驅之鑰」其實是一個很複雜、很難三言兩語說清楚東西，試著用一些像是<a href="https://flyskypie.github.io/docs/the-key-of-huanche/" target="_blank" rel="noopener noreferrer">條目</a>的東西來解釋它，作為我現場跟其他人解釋的參考資料算是蠻方便的輔助，但是讓人自行閱讀一目了然似乎還是稍嫌不足。</p>
<p>於是我決定試試用其他方式向一個可能沒什麼背景知識的解釋我想做的東西：先把其中一個主線用輕小說一般標題展開，再根據其中的內容慢慢解釋。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="ecs-entity-component-system">ECS (Entity Component System)<a href="#ecs-entity-component-system" class="hash-link" aria-label="Direct link to ECS (Entity Component System)" title="Direct link to ECS (Entity Component System)">​</a></h2>
<blockquote>
<p>關於我<strong>想用 ECS 實作 Minecraft</strong> 以  分散式架構運行並在其中用增強式學習訓練完全視覺化之遞迴布林類神經網路以產出二維條碼人造語言那檔事</p>
</blockquote>
<p>ECS 是種軟體架構，鬥陣特攻 (Overwatch) 的團隊在遊戲上使用並且在 GDC 2017 中介紹而遊戲開發圈廣為人知，Unity3D 更在 2018 將 ECS 框架引入遊戲引擎中。它的核心概念是不使用原本流行的物件導向 (OOP, Object-oriented programming) 的軟體抽象化方式轉而使用資料導向 (Data Oriented)。</p>
<p>OOP 的邏輯是：把程式邏輯抽象化成一個一個的「物件」，然後透過「方法」去操作物件，隨著專案越來越複雜，這些物件通常會一層包一層。而 ECS 的邏輯是：把資料跟運算邏輯分離，Component 只有資料、Entity 是 Component 的索引、System 則不儲存狀態專注於運算邏輯。</p>
<p>關於 ECS 的介紹我就點到這裡為止，至於我想在專案中使用這種架構的原因源自 2018 年我試著寫一個 Minecraft <a href="https://youtu.be/vH0KOeijNeQ?si=NnObrN-XhnVk9zFc" target="_blank" rel="noopener noreferrer">插件</a>的時候經歷了非常痛苦的開發體驗，以我當時想修改的殭屍實體為例：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_minecraft-npc-8ebe3b7b05f99bc5c9204aed503ae661.webp" width="873" height="496" class="img_RpFt"></p>
<p>Minecraft 裡充滿了多層繼承 (Multilevel Inheritance)，這使得釐清物件之間如何交互作用的認知負荷變得非常高，雪上加霜的是 Minecraft 插件源自逆向工程的產物，並不是所有變數和方法都是人類可讀的。</p>
<p>雖然當時體驗的困難並不是所有都是軟體架構造成的，然而後來我才知道這種開發風格在遊戲開發圈也算是很有爭議的主題之一，在知道 Minecraft 的程式碼有多難除錯，看著它那滿坑滿谷的 <a href="https://bugs.mojang.com/projects/MC/issues" target="_blank" rel="noopener noreferrer">Bug 清單</a>，當中不少  還直接被標記「這個不會被修復」似乎也不奇怪了。</p>
<p>作為一個想開發類似於 Minecraft 這等高度複雜的沙盒開放世界遊戲的後進者，自然會想避免步上 Minecraft 的後塵，而 ECS 便是我目前優先考慮的架構。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="分散式架構">分散式架構<a href="#分散式架構" class="hash-link" aria-label="Direct link to 分散式架構" title="Direct link to 分散式架構">​</a></h2>
<blockquote>
<p>關於我想用 ECS 實作 Minecraft <strong>以分散式架構運行</strong>並在其中用增強式學習訓練完全視覺化之遞迴布林類神經網路以產出二維條碼人造語言那檔事</p>
</blockquote>
<p>Minecraft 大部分的運算是在同一個執行緒 (Thread) 上完成的，這在 Minecraft 的圈子也算是很有名的特性，因為你不能單純拿著多核心處理器去架遊戲伺服器就很神奇的可以容納更多的玩家。</p>
<p>這限制源自於它的遊戲運算不能簡單的被化為獨立的任務並分配成平行運算，作為一個寫網站的工程師，我並沒有足夠的知識與經驗去設計一個多執行緒的架構或系統，但是作為一個 Web 工程師我知道一種叫做微服務 (Microservices) 的東西，那麼我何不把遊戲拆成一組 Microservices 叢集，使其成為一個方便水平擴充的系統。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="增強式學習-rl-reinforcement-learning">增強式學習 (RL, Reinforcement learning)<a href="#增強式學習-rl-reinforcement-learning" class="hash-link" aria-label="Direct link to 增強式學習 (RL, Reinforcement learning)" title="Direct link to 增強式學習 (RL, Reinforcement learning)">​</a></h2>
<blockquote>
<p>關於我想用 ECS 實作 Minecraft 以分散式架構運行並在其中<strong>用增強式學習訓練</strong>完全視覺化之遞迴布林類神經網路以產出二維條碼人造語言那檔事</p>
</blockquote>
<p><img decoding="async" loading="lazy" alt="https://ictinstitute.nl/ai-machine-learning-and-neural-networks-explained/" src="/assets/images/02_ai-f629980bbc540947c35b61a08f06019a.webp" width="700" height="296" class="img_RpFt"></p>
<p>增強式學習是機器學習 (Machine Learning) 領域的一個子集（分支），相較於其他著重資料分析、統計之類的機器學習主題，RL 著重於玩家 (Agent) 與環境 (Environment) 互動 (Action/Observe)，透過獎勵 (Reward) 來最佳化策略 (Policy)。RL 可以說是「遊戲感」最重的機器學習分支。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="遞迴布林類神經網路-rbnn-recurrent-boolean-neural-network">遞迴布林類神經網路 (RBNN, Recurrent Boolean Neural Network)<a href="#遞迴布林類神經網路-rbnn-recurrent-boolean-neural-network" class="hash-link" aria-label="Direct link to 遞迴布林類神經網路 (RBNN, Recurrent Boolean Neural Network)" title="Direct link to 遞迴布林類神經網路 (RBNN, Recurrent Boolean Neural Network)">​</a></h2>
<blockquote>
<p>關於我想用 ECS 實作 Minecraft 以分散式架構運行並在其中用增強式學習訓練完全視覺化之<strong>遞迴布林類神經網路</strong>以產出二維條碼人造語言那檔事</p>
</blockquote>
<p>人工智慧 (AI, Artificial Intelligence)與深度學習 (Deep Learning) 算是近幾年被用到爛大街的詞彙了，起因來自於一個被稱作類神經網路 (Neural Network) 的不新鮮的數學模型在晶片性能提昇以及算法改善的現代而終於獲得實用化，又因為 AlphaGo 在 2016 擊敗人類棋手等事件而形成話題才終於進入大眾的視野。</p>
<p>而布林類神經網路 (BNN)<sup><a href="#user-content-fn-bnn-ce8ad3" id="user-content-fnref-bnn-ce8ad3" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup> 則是參考了類神經網路的設計，但是不使用實數而是使用布林代數的一種算法，這個選擇並不是基於性能或實用性考量，老實說因為不是使用實數體系的代數，因此不能用微積分作弊（倒傳遞算法 Backpropagation），也不能直接以類神經模型主流的方式用顯示卡加速運算。</p>
<p>而是一種基於哲學上的選擇，私以為「因為類神經網路是對人類神經元的數學建模，因此類神經網路是通往『通用型人工<strong>智慧</strong>』的道路」是一種身為人類的傲慢。如果基於二進制的電腦能夠產生「通用智慧」，那它應該回歸二進制運算的本質，即布林代數本身，而不是透過浮點數 (IEEE 754) 運算去模仿神經元，這種模仿終究只能得到偽物。</p>
<p>根據奧卡姆剃刀 (Occam&#x27;s razor)，簡單的解釋通常比較接近真理，因此我想嘗試這條用布林代數去探索的道路。</p>
<p>RBNN 單純是參考了遞迴類神經網路 (RNN) 加入了遞迴的要素使該演算法具備記憶性。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="完全視覺化">完全視覺化<a href="#完全視覺化" class="hash-link" aria-label="Direct link to 完全視覺化" title="Direct link to 完全視覺化">​</a></h2>
<blockquote>
<p>關於我想用 ECS 實作 Minecraft 以分散式架構運行並在其中用增強式學習訓練<strong>完全視覺化</strong>之遞迴布林類神經網路以產出二維條碼人造語言那檔事</p>
</blockquote>
<p>拿 Minecraft 來做機器學習訓練 AI 的專案不少，不過它們並不是沈浸式 (Immersive Experience) 的。在 Minecraft 之中除了第一人稱視角 (PFV, First-person view) 之外還有大量基於滑鼠操作的 UX。</p>
<p>對增強式學習而言，玩家與環境的互動來自操作 (Action) 與觀察 (Observe)，對人類而言可以觀察到 Minecraft 的兩個資訊：第一人稱 3D 渲染與 HUD/UI；而操作同樣有兩個：第一人稱控制器與滑鼠。</p>
<p>但是對大多數的 Minecraft AI 專案而言，AI 觀察與操作都與人類大相逕庭。以 <a href="https://github.com/cabaletta/baritone" target="_blank" rel="noopener noreferrer">Baritone</a> （知名 Minecraft 自動外掛）為例，程式是直接讀取地圖上的方塊資料來規劃路徑，操作則是直接丟封包給伺服器，所以可以作到諸如隔著牆壁打開箱子之類的事情。</p>
<p>另外一個機器學習專案 <a href="https://github.com/MineDojo/Voyager" target="_blank" rel="noopener noreferrer">Voyager</a>則是包了一層的 Minecraft Client，真正操作與觀察的程式是一個叫做 <a href="https://github.com/PrismarineJS/mineflayer" target="_blank" rel="noopener noreferrer">Mineflayer</a> 的 Javascript 函式庫，與 Baritone 相同，直接讀取地圖資訊並呼叫函式來丟封包給伺服器完成操作。不同的是 Voyager 透過機器學習的 GPT-4 模型負責撰寫 Javascript 程式碼來控制玩家。</p>
<p>據我所知唯一使用視覺化資料的是一個名為 <a href="https://minerl.io/" target="_blank" rel="noopener noreferrer">MineRL</a> 的專案，它其實是一個 AI 競賽，目標就是用 AI 玩 Minecraft 挖到鑽石，但是 AI 只能跟玩家一樣觀察到一張 3D 渲染的第一人稱畫面，即便如此，它的操作依然不是沈浸式的<sup><a href="#user-content-fn-minerl-api-ce8ad3" id="user-content-fnref-minerl-api-ce8ad3" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_minerl-action-cd55e139cb6f050ff6876af4c65b6d98.webp" width="719" height="357" class="img_RpFt"></p>
<p>它直接提供一個函式，當玩家附近有工作台並且身上有足夠的原料，就直接完成合成，以人類可以理解的體驗就像是：</p>
<blockquote>
<p>你桌上放著一排按鈕，只要附近有工作台，按下對應的按鈕自動完成合成，過程中於需操作遊戲中的那個操作界面用滑鼠拖拉材料。</p>
</blockquote>
<p>因為 MineRL 設計上就是為了挖到鑽石，因此只需要提供部份必要的界面 (Interface) 供玩家操作即可。</p>
<p>「完全視覺化  」意味著在這個專案中，視覺資料是 AI 唯一能夠獲得環境資訊的方式，FPV 控制器是 AI 唯一能和環境互動的手段，因此，沒有血量或體力值的變數、沒有額外的裝備欄變數、沒有任何基於滑鼠操作的彈出視窗、沒有快捷的 function call。</p>
<p>「完全視覺化」意味著必須重新設計一套完全基於 FPV 控制器的遊戲體驗。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="二維條碼人造語言">二維條碼人造語言<a href="#二維條碼人造語言" class="hash-link" aria-label="Direct link to 二維條碼人造語言" title="Direct link to 二維條碼人造語言">​</a></h2>
<blockquote>
<p>關於我想用 ECS 實作 Minecraft 以分散式架構運行並在其中用增強式學習訓練完全視覺化之遞迴布林類神經網路以產出<strong>二維條碼人造語言</strong>那檔事</p>
</blockquote>
<p>其實我還期望從這個專案中獲得其他產物，不過「二維條碼人造語言」算是這個專案的主線之一。</p>
<p>如果你看過或是知道異星入境 (Arrival) 這部電影，要理解這個概念就會顯得很容易，沒有沒有也沒關係。</p>
<details class="details_kzw7 alert alert--info details_D2hA" data-collapsed="true"><summary>可能涉及「異星入境」的劇透，請斟酌點閱</summary><div><div class="collapsibleContent_UYJG"><div><div>劇中的外星人不具備基於聲音的「語言」，</div><div>它們透過操控懸浮的沙粒構成文字來傳達意思：</div><img src="data:image/webp;base64,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" alt="https://brand-new-life.org/b-n-l/learning-from-time/"></div></div></div></details>
<p>我希望訓練 AI 在遊戲中表現出「部落」的特性，也就是複數個獨立的 AI 能夠溝通並且協調作業，在這個基礎上透過解析它們的溝通方式來實現「人類對某種數位智慧進行溝通」這件事。</p>
<p>一般玩家在 Minecraft 內使用文字頻道溝通，但是這有違前述的「完全視覺化」原則，因此我需要另外一種能夠讓玩家在遊戲內溝通的方式。在遊戲內重建聲學模型又過於複雜。</p>
<p>「基於<strong>視覺化</strong>的語言」這樣的概念便自然而然的被到這個專案之中，現實中其實也有這種東西：手語，而我所想像在 Minecraft 中的視覺化語言會像這個樣子：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/04_barcode_language-33fbd182e107dc4451880a0192a0180f.svg" width="541" height="556" class="img_RpFt"></p>
<p>後來想想，基於二進制的智能體，溝通用的語言是二維條碼好像也很合理？</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-bnn-ce8ad3">
<p>Boolean Neural Network. (R. Kohut, B. Steinbach). Retrieved 2023-10-08, from <a href="https://www.semanticscholar.org/paper/Boolean-Neural-Networks-Kohut-Steinbach/1c472945ab2970a709efe97f81d9a5e7bf37baae" target="_blank" rel="noopener noreferrer">https://www.semanticscholar.org/paper/Boolean-Neural-Networks-Kohut-Steinbach/1c472945ab2970a709efe97f81d9a5e7bf37baae</a> <a href="#user-content-fnref-bnn-ce8ad3" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-minerl-api-ce8ad3">
<p>MineRL 0.3.0 documentation. (William H. Guss, Brandon Houghton). Retrieved 2023-10-08, from <a href="https://minerl.io/docs/environments/index.html#id20" target="_blank" rel="noopener noreferrer">https://minerl.io/docs/environments/index.html#id20</a> <a href="#user-content-fnref-minerl-api-ce8ad3" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/the-key-of-huanche">The Key of Huanche</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="前情提要"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2023-09-24_a-journey-about-learning-ecs">ECS 學習與 aimAndShoot 重構之旅</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2023-09-24T00:00:00.000Z" itemprop="datePublished">September 24, 2023</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p><img decoding="async" loading="lazy" src="/assets/images/00_hero-e6a285351e1adeec8573e4484429069c.webp" width="1440" height="762" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="#前情提要" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<p>隨著 Polis 專案的串流功能完成，開發開始往下一個階段發展，PoC 還剩下兩個功能需要實作：</p>
<ul>
<li>基本遊戲系統</li>
<li>P2P 連線</li>
</ul>
<p>因為 P2P 連線還需要解決遊戲狀態同步的問題，因此它在某種程度上仰賴遊戲系統，所以遊戲系統的實作就是我下一個階段要處理的事情。而遊戲系統預計要使用 ECS (Entity Component System) 實作則是很早就決定的事。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="ecs-entity-component-system">ECS (Entity Component System)<a href="#ecs-entity-component-system" class="hash-link" aria-label="Direct link to ECS (Entity Component System)" title="Direct link to ECS (Entity Component System)">​</a></h3>
<p>關於 ECS 的具體細節本文就不再贅述，簡言之就是使用 ECS 架構的遊戲在做職責分離的時候會跟物件導向 (OOP) 中抽象化的思考方式不相同，這對我而言是一個挑戰，因為我沒有真正用 ECS 架構去寫遊戲過。</p>
<p>最早會接觸 ECS 這個新鮮玩意兒是因為工作的關係接觸了 <a href="https://github.com/bberak/react-game-engine" target="_blank" rel="noopener noreferrer">React Game Engine</a> 但是它只是 ECS 的弱實現 (loose implementation)，因此與實際 ECS 的思考方式之間還是存在落差，加上同事其實跟我提過我的寫法很大程度還是一般的 React 程式，並沒有發揮 ECS 的特性。</p>
<p>另外一個困擾我的點是，部分 Javascript/Typescript 實作的 ECS 函式庫著重於 ECS 中「資料緊湊」的特性，它們使用 TypedArray 定義的基本型態來儲存資料，這使得它們的原始設計與 Three.js 或 Rapier 這種有自己定義 class 的函式庫之間不好協調。</p>
<p>因此我認為在正式引入 ECS 這個技術 棧 (Tech Stack) 到 Polis 以前應該先寫一個短期專案對選定函式庫的可行性做驗證，以及累積足夠的「ECS 思維」。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="aimandshoot">aimAndShoot<a href="#aimandshoot" class="hash-link" aria-label="Direct link to aimAndShoot" title="Direct link to aimAndShoot">​</a></h3>
<p><a href="https://github.com/victorqribeiro/aimAndShoot" target="_blank" rel="noopener noreferrer">aimAndShoot</a> 便是我的實驗對象。在「<a href="/blog/2023-01-04_origin-of-gear-redolence/">底火的芬芳 - 專案起源</a>」一文中有提到過這個 repository，它是一個有點像 <code>diep.io</code> 的簡單小遊戲，作為重構改寫的對象是再適合不過了。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="miniplex">Miniplex<a href="#miniplex" class="hash-link" aria-label="Direct link to Miniplex" title="Direct link to Miniplex">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/01_ecs-libs-ff9c1ec0cb14d9a23114b45e93215095.webp" width="1333" height="456" class="img_RpFt"></p>
<p>Javascript/Typescript 中有不少 <a href="https://npmtrends.com/@javelin/ecs-vs-ape-ecs-vs-bitecs-vs-ecs-lib-vs-ecsy-vs-miniplex-vs-yagl-ecs" target="_blank" rel="noopener noreferrer">ECS 套件</a>，雖然跟一般的熱門套件相較之下都算是冷門套件。</p>
<p>正如我提過得，它們之中的大部分著重於資料緊湊的設計，或是有著不支援/不友善 Typescript 的問題，另外一點則是一些套件更預設了一套框架，開發者必須在這個架構下開發。</p>
<p>相較之下 <a href="https://github.com/hmans/miniplex" target="_blank" rel="noopener noreferrer">Miniplex</a> 更深刻的體現了「一次做好一件事」的哲學，讓我們來看看它的介紹：</p>
<blockquote>
<p>A 👩‍💻 developer-friendly entity management system for 🕹 games and similarly demanding applications, based on 🛠 ECS architecture.</p>
</blockquote>
<p>是的，它只把自己定位在 「Entity Management」的部份，既不管資料緊不僅湊，也不管開發者想怎麼實作 System，即便看著範例程式碼，我也不會浮現「這玩意兒到底要怎麼跟 Three.js 或 Rapier 整合？」的問題，我只需要煩惱如何把問題使用 ECS 的架構去實現就好。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="重構">重構<a href="#重構" class="hash-link" aria-label="Direct link to 重構" title="Direct link to 重構">​</a></h2>
<p>很快就完成了從 Javascript 轉換成 Typescript 的重構 (2023-09-13~2023-09-15)，這個部份應該算是整個重構中最簡單的，畢竟遷移 Legacy Code 我也不是第一次幹了，有一些工具可以協助完成這種事：</p>
<ul>
<li>AMD to es6<!-- -->
<ul>
<li><a href="https://github.com/jonbretman/amd-to-as6" target="_blank" rel="noopener noreferrer">https://github.com/jonbretman/amd-to-as6</a></li>
</ul>
</li>
<li>Prototype to Class<!-- -->
<ul>
<li><a href="https://github.com/lebab/lebab" target="_blank" rel="noopener noreferrer">https://github.com/lebab/lebab</a></li>
</ul>
</li>
<li>Javascript to Typescript<!-- -->
<ul>
<li><a href="https://github.com/gregjacobs/js-to-ts-converter" target="_blank" rel="noopener noreferrer">https://github.com/gregjacobs/js-to-ts-converter</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="web-component-custom-element-初體驗">Web Component (Custom Element) 初體驗<a href="#web-component-custom-element-初體驗" class="hash-link" aria-label="Direct link to Web Component (Custom Element) 初體驗" title="Direct link to Web Component (Custom Element) 初體驗">​</a></h3>
<p>微前端 (Micro frontends) 其實也不是什麼新鮮的玩意了，不過一直沒有機會或動機去使用它。第一次知道這個東西是為了解決客戶的（相對）大型專案而查資料查到的，只是客戶方面的技術相對落後（沒有 CI/CD、整合仰賴客戶的工程師手動複製程式碼、預計使用 iframe 作為大型專案的 solution...），而公司作為代工方並沒有技術決策的權限，自己本身也沒有 side project 有面臨類似的問題。</p>
<p>作為一個網頁前端工程師，UI 之類的問題我一律想用 React 解決，在 Canvas 上刻 UI 根本浪費時間效果又差。但是這個 ECS 的練習我並不想直接讓它跟 React App 耦合，發現這似乎是使用 Web Component 這個 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components" target="_blank" rel="noopener noreferrer">Web API</a> 的好時機。</p>
<p>於是一開始 (2023-09-16) 我先根據我預想的排版用 React 實作，再把它包裝成 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_components/Using_custom_elements" target="_blank" rel="noopener noreferrer">Custom Element</a>，透過一個 callback (EventListener) 當 Canvas 被掛上 DOM 之後回傳 <code>HTMLCanvasElement</code> ，再用遊戲的實例去接收它來繪製遊戲內容。</p>
<p>當我把遊戲邏輯實作的差不多之後 (2023-09-20)，發現應該反過來操作：</p>
<blockquote>
<p>把遊戲封裝成 Custom Element 給 React 使</p>
</blockquote>
<p>因為整個遊戲其實只仰賴一塊 Canvas 作為 I/O，只要能夠恰當的完成初始化跟釋放資源，就能被封裝到 React 的 Cycle life 內才對。</p>
<p>另一方面也是因為我已經在 React 內寫過諸如 Three.js 和 MapBox GL JS 的東西，對於這種「非 React 原生的套件如何整合進 React App 內」已經很直覺的知道怎麼做了：用 <code>ref</code> 取得實例並搭配 <code>useEffect</code> 來把事件掛上去跟釋放 callback。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="ecs">ECS<a href="#ecs" class="hash-link" aria-label="Direct link to ECS" title="Direct link to ECS">​</a></h3>
<p>Miniplex 的 Typescript 友善程度算是比我預期的的還好，關於 Entity 的型別如何聲明，Github 上面有一則討論算是給出了蠻明確的方向<sup><a href="#user-content-fn-miniplex-entity-type-b6b5a5" id="user-content-fnref-miniplex-entity-type-b6b5a5" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">IPosition</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  position</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> Vector3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">IHealth</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  health</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> current</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Entity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">IPosition </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> IHealth </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">...</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我個人是使用類似但是有一點差異的方式：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">AgentEntity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  particle</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ParticleComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  health</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> HealthComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  projectileEmitter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ProjectileEmitterComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  warrior</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> WarriorMiscComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  brain</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> DejavuComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  statistics</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> WarriorStatisticsComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">BulletEntity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  particle</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> ParticleComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  attackEffect</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> AttackEffectComponent</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">Entity</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Partial</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  TimeEntity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> EventEntity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> AgentEntity </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> BulletEntity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>以 ECS 的思考模式，其實並不在乎 Entity 要多具體，而是以 Component 為操作單元，而 Component 在中 Miniplex 實質等於 Entity 的 properties，因此如果思考方式依然受到 OOP 影響，至少可以用這種方式輔助產生一種介於「依照物件設計邏輯的切割方式」與「依照 Component 邏輯的切割方之」之間的過渡狀態。</p>
<p>另外因為我是從一個既存專案做重構，因此我懶得重新用「The Component Way」的思考模式去重新設計資料結構，所以我把物件的屬性隨便包成 Component 丟進去。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="joy-ui-初體驗">Joy UI 初體驗<a href="#joy-ui-初體驗" class="hash-link" aria-label="Direct link to Joy UI 初體驗" title="Direct link to Joy UI 初體驗">​</a></h3>
<p>工作上很常要寫一些 B2B 的後台 (Dashboard)，<a href="https://mui.com/material-ui/" target="_blank" rel="noopener noreferrer">Material UI</a> 算是我最常使用的 React 套件之一，可以快速搭建出有模有樣的網頁，作用跟 <a href="https://getbootstrap.com/docs/5.2/getting-started/introduction/" target="_blank" rel="noopener noreferrer">Bootstrap</a> 其實差不多。只是它內置了一套設計系統 (Design System)，對於沒有引入 Design System 的專案來說，反而要為了那些缺乏一致性的客製化 style 去覆蓋掉原本的設計而花費很多心力。並且對於個人使用的小專案來說又稍嫌笨重了一點。</p>
<p>直到前一陣子注意到這個套件出了一個衍生套件 <a href="https://mui.com/joy-ui/getting-started/" target="_blank" rel="noopener noreferrer">Joy UI</a>，它的所有組件與 Material UI 幾乎是一對一對應的，只是少了 <a href="https://en.wikipedia.org/wiki/Material_Design" target="_blank" rel="noopener noreferrer">Material Design</a> 的部份。看上去也還算順眼，於是便趁著這個機會來用用看。</p>
<p>於是在完成了遊戲本體之後，便用這個套件新增了一些 UI，包含：玩家列表、記分板。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="小插曲">小插曲<a href="#小插曲" class="hash-link" aria-label="Direct link to 小插曲" title="Direct link to 小插曲">​</a></h3>
<p>因為要重構成 ECS 架構的關係，所有的實作我都必須逐行閱讀了解其意義之後才能將邏輯從 class 內抽出然後丟到特定的 System 去，也因此讓我有了意外收穫。</p>
<p>幾年前 (2020)，我曾經改寫了同一個專案，移除了玩家、讓 Bot 分成兩隊互毆，但是成效不佳，跑了 300 多代依然蠢蠢的。</p>
<p>重構的過程我發現了有這麼一段程式：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">selectParent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">queries</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> IQueries</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> total </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> bot </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> queries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">botPlayer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      total </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> bot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">statistics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fitness</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> prob </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Math</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">random</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> total</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> bot </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> queries</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">botPlayer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prob </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> bot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">statistics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fitness</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> bot</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      prob </span><span class="token operator" style="color:#393A34">-=</span><span class="token plain"> bot</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">statistics</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fitness</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>原作者想用加權抽籤的方式抽出 AI 進行繁殖，其中的 <code>fitness</code> 是分數的意思，也就是這裡的權重值。然而這個實作會造成一個 AI 只要有一回合表現不好拿了 0 分，它被刷掉機率會達到 100%。並且只要有一回合大家運氣不好都拿了 0 分，就會整代被刷掉，演算法會直接 Random 一組 0 經驗的類神經網路來繁殖。</p>
<p>因此在不考慮評分標準的數學模型到底合理不合理的前提下，AI 被重置的機率其實很高，這也解釋了為什麼我之前跑了 300 多代 Bot 依然蠢蠢的原因。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="收官-yose-ヨセ">收官 (Yose, ヨセ)<a href="#收官-yose-ヨセ" class="hash-link" aria-label="Direct link to 收官 (Yose, ヨセ)" title="Direct link to 收官 (Yose, ヨセ)">​</a></h3>
<p>重構過程其實讓我對這個專案產生了不少額外的想像，比如說：利用 ECS 的特性，我其實可以把當前遊戲幀的所有資料 dump 出來，之後重開網頁再把資料倒回去理論上可以很輕易的實現「遊戲讀擋」的功能，畢竟關於遊戲的所有狀態都塞在一個由 Entity 填充的 Array 裡面；又或是寫一個視覺化的組件呈現 AI 當前類神經網路的激發狀態；甚至是製作另一個模式實現我曾經實現過得 Zero-player game，理論上只要置換 System 就能輕易實現。</p>
<p>然而我其實對這個專案的定位有立下一個明確的目標：</p>
<blockquote>
<p>以 ECS 實現原專案的所有或大部份機能，藉此累積使用 Miniplex 的經驗</p>
</blockquote>
<p>目的已經達成，該收官了，於是我藉著這個星期六 (2023-09-23) 進行最後打磨，讓它至少看起來有模有樣，然後把原本分散在兩個 repo 的 commit 用 subtree 和 rebase 整理到 fork 的 repo 去。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="結論">結論<a href="#結論" class="hash-link" aria-label="Direct link to 結論" title="Direct link to 結論">​</a></h2>
<ul>
<li>Demo<!-- -->
<ul>
<li><a href="https://flyskypie.github.io/aimAndShoot/" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/aimAndShoot/</a></li>
</ul>
</li>
<li>Source Code<!-- -->
<ul>
<li><a href="https://github.com/FlySkyPie/aimAndShoot" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/aimAndShoot</a></li>
</ul>
</li>
</ul>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-miniplex-entity-type-b6b5a5">
<p>Does Entity need to know all possible components?. Retrieved 2023-09-24, from <a href="https://github.com/hmans/miniplex/discussions/295" target="_blank" rel="noopener noreferrer">https://github.com/hmans/miniplex/discussions/295</a> <a href="#user-content-fnref-miniplex-entity-type-b6b5a5" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/learning-note">learning note</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/ecs">ECS</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/miniplex">Miniplex</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="前情提要"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2023-08-27_opensource-robocraft">開源的 Robocraft Clone 專案 - Own War</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2023-08-27T00:00:00.000Z" itemprop="datePublished">August 27, 2023</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p><img decoding="async" loading="lazy" src="/assets/images/00_hero-b8dbf0cecc9c79291c393ed977dff702.webp" width="1406" height="900" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="#前情提要" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<p><a href="https://store.steampowered.com/app/301520/Robocraft/" target="_blank" rel="noopener noreferrer">Robocraft</a> 是一款載具建造戰鬥遊戲，屬於 (<a href="https://en.wikipedia.org/wiki/List_of_vehicular_combat_games" target="_blank" rel="noopener noreferrer">Vehicular Combat</a>) 的衍生種類，玩家可以設計自己的載具然後投入遊戲中與其他玩家進行 PvP 競技，是能帶給我樂趣的遊戲之一。</p>
<p>在某次更新之後這個遊戲的開發商大幅度削減 (Nerf) 獎勵系統，讓遊戲資源的獲取變得十分困難，使得創作方面的遊玩體驗上受到限制，使我一度退坑。</p>
<p>2022 左右再次回鍋的時候，獎勵系統與遊戲資源的限制已經被消除，雖然遊戲機制已經和以前有所不同了，但至少可以肯定開發商在遊戲平衡性上的努力，不過玩家基數下降，造成自動批配系統中的野團高機率會碰到有組團的對手，遇到這種情況通常會被慘虐。後來我注意到這遊戲在較冷門的階級 (Tier) 中為了減少玩家在自動批配系統中的等待，會加入 BOT 來促成 5v5 的遊戲，於是我就很不解開發商為什麼不願意內建 PVE (Player Versus Environment) 模式。</p>
<p>「在 Robocraft 的遊玩體驗之上引入 PVE 模式」便是我尋找替代方案的動機之一。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="替代方案的嘗試">替代方案的嘗試<a href="#替代方案的嘗試" class="hash-link" aria-label="Direct link to 替代方案的嘗試" title="Direct link to 替代方案的嘗試">​</a></h2>
<p>然而遺憾的是，幾次搜尋下來，都沒有找到這種類型的開源專案，在 <a href="https://alternativeto.net/software/robocraft/" target="_blank" rel="noopener noreferrer">AlternativeTo</a> 上沒有找到滿意的結果。評價似乎不錯的 Crossout 並不支援 Linux，而且在 Steam 上還鎖區了一陣子。在 Reddit 的<a href="https://www.reddit.com/r/Robocraft/comments/87hoff/" target="_blank" rel="noopener noreferrer">討論串</a>中提到了 Procelio ，在早期（這專案剛啟動沒多久）有試著下載下來玩玩看，不過 Linux 版跑起來十分卡頓，而且我記得是用 Unity3D 做的。</p>
<p>直到上週 (2023-08-20)，我終於找到了 <a href="https://github.com/Demindiro/OwnWar" target="_blank" rel="noopener noreferrer">OwnWar</a>，一眼就能看出它是衝著 Robocraft Clone 去的開源專案。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="dpendency-chain">Dpendency Chain<a href="#dpendency-chain" class="hash-link" aria-label="Direct link to Dpendency Chain" title="Direct link to Dpendency Chain">​</a></h2>
<p>拿到開源專案的第一件事當然就是自己 Build 看看，然而事情並沒有這麼簡單，這個專案是用 Godot 引擎撰寫的，但是是有打過 Patch 的 Godot 引擎,因此我需要自己編譯 Godot 引擎，而 Patch 本身又仰賴另外一個物理運算的函式庫 Rapier3D。那個函式庫是用 Rust 寫的，而且必須使用特定版本的編譯器才能編譯。加上我明顯感受到原作者留下的文件有缺失，並沒有完整描述 Build 的所有步驟。</p>
<p>於是我翻閱了 Godot 的文件，試著搞懂這個專案如何跟外部函式庫做 Binding ，接著我發現了了這個<a href="https://github.com/Demindiro/OwnWar/blob/a2a500991b786aed95977051fe91ac06699ff25e/gdn/ownwar/Cargo.toml#L15" target="_blank" rel="noopener noreferrer">東西</a>：</p>
<div class="language-toml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-toml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gdnative = &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lazy_static = &quot;*&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">godot_rapier3d = { path = &quot;../../../../game-assets/godot/godot_rapier3d/rapier3d&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fxhash = &quot;*&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>那個相對路徑指向一個超出專案根目錄的位置，換句話說複數個專案的仰賴關係是隨意的擺在原作者的電腦內，無法根據留下的文件直接完成開發環境的準備，「原作者並沒有花太多心思考慮到接手的人，而是匆匆上傳專案」的假設基本上得到了驗證。</p>
<p>於是我花了一點時間從配置文件內的紀錄的外部仰賴路徑，推敲出數個庫之間的仰賴關係：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_dependency-chain-dfc9647d13a61212cd2ee5eeb2c2c834.webp" width="2071" height="2195" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="成功編譯只是修改專案程式碼的第一步">成功編譯只是修改專案程式碼的第一步<a href="#成功編譯只是修改專案程式碼的第一步" class="hash-link" aria-label="Direct link to 成功編譯只是修改專案程式碼的第一步" title="Direct link to 成功編譯只是修改專案程式碼的第一步">​</a></h2>
<p>於是我 <a href="https://github.com/FlySkyPie/OwnWar" target="_blank" rel="noopener noreferrer">Fork</a> 了這個專案並把編譯仰賴的 Godot 引擎和外部函式庫等等瑣碎的操作通通丟到 Docker 裡面。最後終於把這個專案編譯出來了。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/learning-note">learning note</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/godot">Godot</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/robocraft">Robocraft</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/voxel">voxel</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="行程間通訊 (IPC, Inter Process Communication) 是兩個行程（或以上）或執行緒間傳送資料或訊號的一些技術或方法。 如果有在 Node.js 玩過 childprocess 模組的 spawn 或是使用過 Web API 的 Worker 的話，應該對如何在 Javascript 中使用複數行程 (process) 並不陌生。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2023-08-08_electron-learning-note">Electron 學習筆記 - IPC</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2023-08-08T00:00:00.000Z" itemprop="datePublished">August 8, 2023</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p>行程間通訊 (IPC, Inter Process Communication) 是兩個行程（或以上）或執行緒間傳送資料或訊號的一些技術或方法。 如果有在 Node.js 玩過 <code>child_process</code> 模組的 <a href="https://nodejs.org/api/child_process.html#child_processspawncommand-args-options" target="_blank" rel="noopener noreferrer">spawn</a> 或是使用過 Web API 的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Worker" target="_blank" rel="noopener noreferrer">Worker</a> 的話，應該對如何在 Javascript 中使用複數行程 (process) 並不陌生。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="區塊之間的通訊方式一覽">區塊之間的通訊方式一覽<a href="#區塊之間的通訊方式一覽" class="hash-link" aria-label="Direct link to 區塊之間的通訊方式一覽" title="Direct link to 區塊之間的通訊方式一覽">​</a></h2>
<p>在<a href="/blog/2023-04-01_electron_learning_note_intro">前一篇文章</a>提到，在 Electron 中 Render 和 Main 彼此之間是獨立的，必須透過 Preload 和 API 來實現兩者之間的溝通。參考了官方的範  例程式碼以及一篇文章<sup><a href="#user-content-fn-electron-ipc-bef557" id="user-content-fnref-electron-ipc-bef557" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>之後，整理成一個圖表：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_electron-ipc-api-2614c898ac2d7076cfc25d7ca88f52c4.webp" width="1377" height="1354" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="後記">後記<a href="#後記" class="hash-link" aria-label="Direct link to 後記" title="Direct link to 後記">​</a></h2>
<p>這篇文章原本在 2023-04-05 就已經寫好草稿了，沒想到完全忘記這篇還沒歸檔，然後圖表的 SVG 也已經刪掉了。</p>
<hr>
<p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_RpFt"></a><br>
<!-- -->Wei Ji 以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-electron-ipc-bef557">
<p>[ Day 9 ] - 動物聊天室(二) - IPC 與訊息交換 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天. Retrieved 2023-08-08, from <a href="https://ithelp.ithome.com.tw/articles/10235110" target="_blank" rel="noopener noreferrer">https://ithelp.ithome.com.tw/articles/10235110</a> <a href="#user-content-fnref-electron-ipc-bef557" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/learning-note">learning note</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/javascript">javascript</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/electron">Electron</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="本篇學習筆記以 Javascript 在應用上的實作為切入點，關於 WebRTC 背後的技術並不是本文的重點。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2023-08-07_webrtc-learning-note">WebRTC 學習筆記</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2023-08-07T00:00:00.000Z" itemprop="datePublished">August 7, 2023</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<div class="theme-admonition theme-admonition-note admonition_a71W alert alert--secondary"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_fKWC"><p>本篇學習筆記以 Javascript 在應用上的實作為切入點，關於 WebRTC 背後的技術並不是本文的重點。</p></div></div>
<p>看了幾篇教學仍然對 WebRTC Web API 的使用不是很理解，因為這些文章不是都著墨在 WebRTC 協定本身然後程式碼的實作就簡略帶過；就是跟使用 WebSocket 處理 SDP (Session Description Protocol) 的部份一起講，造成程式碼充滿了各種事件 callback，讓程式碼變得比較不好理解。</p>
<p>後來看到了一個<a href="https://github.com/Tinywan/WebRTC-tutorial/tree/master/docs/demo-02" target="_blank" rel="noopener noreferrer">範例程式</a>，單純針對 <code>RTCPeerConnection</code> 如何建立連線，從而省略實務上會透過其他機制完成 SDP，讓程式碼變得稍微好理解一點。</p>
<p>經過重構、Reivew 之後終於看懂使用 Javascript 建立 WebRTC 連線的流程，我把它整理成一張圖：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_create-webrtc-b478fce1aac1c446153b8f810dc9c964.webp" width="1024" height="1141" class="img_RpFt"></p>
<p>大致有三個重點：</p>
<ol>
<li>兩邊的 Connection 都分別要從自己跟對方獲得 SessionDescription。</li>
<li>成對的 ICE (Interactive Connectivity Establishment) 處理程式 (handler)。</li>
<li><code>addTrack()</code> 與 <code>.on(&quot;track&quot;)</code> 用來發送/接收串流。</li>
</ol>
<hr>
<p>另外我練習<a href="https://github.com/FlySkyPie/canvas-webrtc-sample" target="_blank" rel="noopener noreferrer">使用 WebRTC 的程式</a>試著用不同的界面分離職責：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_architecture-5e396c8f943429a3e6cc2bea1d560c1b.webp" width="886" height="958" class="img_RpFt"></p>
<ul>
<li><code>ITransmittable</code>: 發送端應用領域對傳輸領域的界面，專住於「對外串流」的職責。</li>
<li><code>IReceivable</code>: 接收端應用領域對傳輸領域的界面，，專注於「接收串流」的職責。</li>
<li><code>IRTCOfferable</code>: 發送端對連線建立領域的界面，專注於「發送方的 WebRTC 構成要件」的職責上。</li>
<li><code>IRTCAnswerable</code>: 接收端對連線建立領域的界面，專注於「接收方的 WebRTC 構成要件」的職責上。</li>
</ul>
<hr>
<p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_RpFt"></a><br>
<!-- -->Wei Ji 以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/learning-note">learning note</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/javascript">javascript</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/typescript">typescript</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/web-rtc">WebRTC</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="稍微把 Polis 挖坑至今 (2023-08-05) 累積的嘗試做個紀錄。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2023-08-05_polis-progress">Polis 專案研究進度</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2023-08-05T00:00:00.000Z" itemprop="datePublished">August 5, 2023</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p>稍微把 Polis 挖坑至今 (2023-08-05) 累積的嘗試做個紀錄。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="基本概念">基本概念<a href="#基本概念" class="hash-link" aria-label="Direct link to 基本概念" title="Direct link to 基本概念">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/01_polis-concept-8e1d6be862b17dfeebc30b8d8cdd83ac.webp" width="1080" height="993" class="img_RpFt"></p>
<p>整個開放世界會被拆分成不同的區域，每個區域由獨立的節點 (Polis Node) 負責運算，節點跟節點之間會構成 P2P 網路，形成一個可以橫向擴展的架構，而 Client 端則會在由 Polis Node 構成的 P2P 網路所運算的開放世界中進行漫遊 (Roaming)。其實這種分散式的架構在 ITUGV 的時宜就令我十分著迷，不過那就是另外一段故事了，在這裡稍微提及只是為了讓讀者理解筆者對分散式架構抱  有特別的偏好，並且這種構想早就存在於早期的其他專案之中。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="poc-proof-of-concept">POC (Proof Of Concept)<a href="#poc-proof-of-concept" class="hash-link" aria-label="Direct link to POC (Proof Of Concept)" title="Direct link to POC (Proof Of Concept)">​</a></h2>
<p>雖然 Polis 作為 Hakoniwa 的子專案，目的一樣是為了建造一個程序化生成 Voxel 開放世界，但是 Polis 將會把重點放在兩個目標上：</p>
<ul>
<li>建立 P2P 網路</li>
<li>能夠透過 Client 程式連線</li>
</ul>
<p>因此在 Polis 的第一個原型中，達到這些條件就算成功完成了概念驗證：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_POC-c0c7aaf1dd8fb44ae4dcba0c3c5f130b.webp" width="1568" height="1195" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="2023-05-13--2023-05-26">2023-05-13 ~ 2023-05-26<a href="#2023-05-13--2023-05-26" class="hash-link" aria-label="Direct link to 2023-05-13 ~ 2023-05-26" title="Direct link to 2023-05-13 ~ 2023-05-26">​</a></h2>
<p>在這個階段我想用 Deno 作為實作 Polis Node 的手段，有幾個原因：</p>
<ol>
<li>Typescript 目前是我最熟練的語言。</li>
<li>WebGPU 已經納入 Web API 中，而部份版本的 Deno 已經實作，因此我能使用 Typescript 解決 server side render 的需求，這麼部份是 Node.js 無法達成的。</li>
<li>Deno 內建跨平台編譯 (Cross Compiling)，因此寫一次程式我就能把節點佈署到除了 Linux 以外的 Windows 或是 macOS 上。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="網路連接技術">網路連接技術<a href="#網路連接技術" class="hash-link" aria-label="Direct link to 網路連接技術" title="Direct link to 網路連接技術">​</a></h3>
<p>在挖了坑並且對技術棧 (Technology Stack) 有了粗略的方向之後，首先我想先處理 Polis 中最關鍵的問題：</p>
<blockquote>
<p>如何建立 Polis 網路 （P2P 網路）？</p>
</blockquote>
<p>在 2020-03-22 的時候我就有使用 ZeroMQ 進行過傳輸相關的<a href="https://github.com/FlySkyPie/the-key-of-huanche-recipe/tree/main/src/core/gym/Test_of_Image_Transfer_with_Different_Decode" target="_blank" rel="noopener noreferrer">實驗</a>，也是我在 The Key of Huanche 中一直考慮投入使用的函式庫。直到我因為 Polis 的分散式架構回過頭去翻閱它的官方文件的時候，才發現了一件事：</p>
<blockquote>
<p>And this is the world we’re targeting with ZeroMQ. When we talk of “scale”, we don’t mean hundreds of computers, or even thousands. Think of clouds of tiny smart and perhaps self-replicating machines surrounding every person, filling every space, covering every wall, filling the cracks and eventually, becoming so much a part of us that we get them before birth and they follow us to death. <sup><a href="#user-content-fn-zeromq-8-ba688f" id="user-content-fnref-zeromq-8-ba688f" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></p>
</blockquote>
<p>ZeroMQ 在官方文件 <a href="https://zguide.zeromq.org/docs/chapter8/" target="_blank" rel="noopener noreferrer">Chapter 8 - A Framework for Distributed Computing</a> 中描述了他們那野心勃勃的願景，老實說這非常打動我。</p>
<p>然而調查下來，發現 Deno 在這方面並沒有多少函式庫可以使用、專案的活躍度也都很低：</p>
<ul>
<li><a href="https://github.com/jjeffcaii/deno-zeromq" target="_blank" rel="noopener noreferrer">https://github.com/jjeffcaii/deno-zeromq</a></li>
<li><a href="https://github.com/rracariu/deno-jszmq" target="_blank" rel="noopener noreferrer">https://github.com/rracariu/deno-jszmq</a></li>
<li>似乎只有實作 WekSocket</li>
<li><a href="https://github.com/trs/zmq" target="_blank" rel="noopener noreferrer">https://github.com/trs/zmq</a>
<ul>
<li>deno-jszmq 的 fork</li>
</ul>
</li>
<li><a href="https://github.com/lenkan/deno-amqp" target="_blank" rel="noopener noreferrer">https://github.com/lenkan/deno-amqp</a></li>
<li>兼容 RabbitMQ</li>
<li>只支援 Server-Client 模式</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="資料傳輸載體">資料傳輸載體<a href="#資料傳輸載體" class="hash-link" aria-label="Direct link to 資料傳輸載體" title="Direct link to 資料傳輸載體">​</a></h3>
<p>Protobuf (Protocol Buffers) 是另外一個我有意投入 The Key of Huanche 使用的 Technology Stack，第一次知道它的存在是工作上使用 Mapbox 的並因此接觸 <a href="https://github.com/mapbox/vector-tile-spec" target="_blank" rel="noopener noreferrer">Mapbox Vector Tile</a> 的時候發現它所使用的資料格式。簡言之就是一種預先定義資料結構後，把資料壓成密度比較高的格式進行傳輸，到達目的地之後再用預先定義的資料結構進行解碼，比起使用 JSON 傳輸可以省下很多頻寬。</p>
<p>然而在 Deno 的生態戲中依然有類似的問題，能選用的函式庫很少、而且專案活躍路很低：</p>
<ul>
<li><a href="https://github.com/soootaleb/ddapps" target="_blank" rel="noopener noreferrer">https://github.com/soootaleb/ddapps</a>
<ul>
<li>Deno distributed applications framework</li>
</ul>
</li>
<li><a href="https://deno.land/x/protobuf_ts@v1.2.2" target="_blank" rel="noopener noreferrer">https://deno.land/x/protobuf_ts@v1.2.2</a>
<ul>
<li><a href="https://github.com/dancrumb/protobuf.ts" target="_blank" rel="noopener noreferrer">https://github.com/dancrumb/protobuf.ts</a></li>
</ul>
</li>
<li><a href="https://deno.land/x/deno_google_protobuf@4.0.0-rc.2" target="_blank" rel="noopener noreferrer">https://deno.land/x/deno_google_protobuf@4.0.0-rc.2</a>
<ul>
<li><a href="https://github.com/marcushultman/deno-google-protobuf" target="_blank" rel="noopener noreferrer">https://github.com/marcushultman/deno-google-protobuf</a></li>
</ul>
</li>
<li><a href="https://pbkit.dev/" target="_blank" rel="noopener noreferrer">https://pbkit.dev/</a>
<ul>
<li><a href="https://deno.land/x/pbkit@v0.0.61" target="_blank" rel="noopener noreferrer">https://deno.land/x/pbkit@v0.0.61</a></li>
<li><a href="https://github.com/pbkit/pbkit" target="_blank" rel="noopener noreferrer">https://github.com/pbkit/pbkit</a></li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="如何分辨序列化資料-protobuf-的型別">如何分辨序列化資料 Protobuf 的型別？<a href="#如何分辨序列化資料-protobuf-的型別" class="hash-link" aria-label="Direct link to 如何分辨序列化資料 Protobuf 的型別？" title="Direct link to 如何分辨序列化資料 Protobuf 的型別？">​</a></h4>
<p>Polis Node 之間的通訊基本上是一個事件系統，而事件的種類千奇百怪，需要的資料結構當然也是五花八門，但是它們之間會使用同一個序列化的通道，接收端街收到一組序列化資料後要怎麼區分 Protobuf 的類型並使用不同的結構來解碼呢？</p>
<p>沒有辦法直接區分，但是可以透過幾個方法解決這個問題<sup><a href="#user-content-fn-protobuf-type-detect-ba688f" id="user-content-fnref-protobuf-type-detect-ba688f" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>：</p>
<ul>
<li>定義一個 Protobuf 封裝來夾帶型別資訊<!-- -->
<ul>
<li>用 oneof 封裝 (也被稱作 union)<!-- -->
<ul>
<li><a href="https://stackoverflow.com/a/40040658" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/40040658</a></li>
<li><a href="https://protobuf.dev/programming-guides/proto2/#oneof" target="_blank" rel="noopener noreferrer">https://protobuf.dev/programming-guides/proto2/#oneof</a></li>
<li><a href="https://protobuf.dev/programming-guides/proto3/#oneof" target="_blank" rel="noopener noreferrer">https://protobuf.dev/programming-guides/proto3/#oneof</a></li>
</ul>
</li>
<li>將另外一組 proto 封裝成 any 屬性<!-- -->
<ul>
<li><a href="https://protobuf.dev/programming-guides/techniques/#self-description" target="_blank" rel="noopener noreferrer">https://protobuf.dev/programming-guides/techniques/#self-description</a></li>
</ul>
</li>
</ul>
</li>
<li>在 buffer 加入幾個 bytes 的前輟作為辨識符</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="壓垮-deno-對我的專案而言的最後一根稻草">壓垮 Deno （對我的專案而言）的最後一根稻草<a href="#壓垮-deno-對我的專案而言的最後一根稻草" class="hash-link" aria-label="Direct link to 壓垮 Deno （對我的專案而言）的最後一根稻草" title="Direct link to 壓垮 Deno （對我的專案而言）的最後一根稻草">​</a></h3>
<p>我其實很難找到支援 WebGPU 或是活躍的 WebGL 的 Javascript 函式庫進行 &quot;denolize&quot;。</p>
<p>WebGPU 在那個當下只有 0.04% 的覆蓋率，就算打開先行版 Chrome 的 WebGPU flag 也是充滿破圖，因此鮮少有函式庫有支援 WebGPU。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_webgpu-usage-a72772a075cdcaf6b42490f78498faf1.webp" width="797" height="262" class="img_RpFt"></p>
<p>活躍的 Javascript 3D 繪圖函式庫，諸如：Three.js, Babylon.js，即便當下是基於 WebGL 實作，在 WebGPU 逐漸普及下應該也會逐步支援 WebGPU 才對，但是它們多是基於 Canvas 的繪圖方式，而 Deno 環境下的 WebGPU 實作並不包含 Canvas 相關方法。</p>
<p>加上 WebGPU 的 API 在 1.8 被加入 Deno 之後<sup><a href="#user-content-fn-deno-1.8-ba688f" id="user-content-fnref-deno-1.8-ba688f" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>，又在 1.32.0 中基於性能考量被移除了<sup><a href="#user-content-fn-deno-1.32.0-ba688f" id="user-content-fnref-deno-1.32.0-ba688f" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup>。</p>
<p>也就是「在 Deno 中使用 WebGPU」這件是的前景並不樂觀，我可能必須要面對「使用舊版的 Deno 和相對底層的 WebGPU 手刻整個應用」的問題。</p>
<p>Deno 的 Cross Compiling 的能力是真的很吸引我，但是在繪圖跟網路連線兩面不討好的情況下，加上 IDE 在寫 Deno 程式的時候開發體驗並不好，我決定放棄這條路。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="2023-05-27--2023-06-11">2023-05-27 ~ 2023-06-11<a href="#2023-05-27--2023-06-11" class="hash-link" aria-label="Direct link to 2023-05-27 ~ 2023-06-11" title="Direct link to 2023-05-27 ~ 2023-06-11">​</a></h2>
<p>在 2022-10-06 的時候我就已經嘗試過把網頁上渲染的 Canvas 畫面壓成 Webp 並透過 WebSocket 傳送給伺服器播放了<sup><a href="#user-content-fn-simple-stream-ba688f" id="user-content-fnref-simple-stream-ba688f" data-footnote-ref="true" aria-describedby="footnote-label">5</a></sup>，但是當時只是寫了 POC 等級的程式，並不能很好的管理每次連線的 Session，因此良好的串流機制就成了我下一個研究目標。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="串流方案">串流方案<a href="#串流方案" class="hash-link" aria-label="Direct link to 串流方案" title="Direct link to 串流方案">​</a></h3>
<p><img decoding="async" loading="lazy" alt="https://www.wowza.com/wp-content/uploads/latency-continuum-2021-with-protocols-700x300-1.png" src="/assets/images/04_stream-latency-2d1415ec6bf572221ff968e2888a9f31.webp" width="700" height="380" class="img_RpFt"></p>
<p>花了一點時間 (2023-05-27~2023-05-28) 查資料了解有哪些可能的方案能夠實現我的需求：</p>
<ul>
<li>Websocket<!-- -->
<ul>
<li>✅ Web API 十分普及</li>
<li>❌ 需額外處理影像的解碼與渲染，消費更多的運算與延遲</li>
</ul>
</li>
<li>WebRTC<!-- -->
<ul>
<li>✅ Web API 十分普及</li>
<li>✅ 原生設計支援低延遲</li>
<li>❌ 協定複雜</li>
<li>❌ P2P 架構，雖然可能可以透過在伺服器實作底層來欺騙 client 端，但是需付出額外開發成本</li>
</ul>
</li>
<li>WebTransport/QUIC<!-- -->
<ul>
<li>✅ 支援 UDP，可降低延遲</li>
<li>✅ 次世代 API</li>
<li>❌ Web API 尚未普及<!-- -->
<ul>
<li>瀏覽器支援覆蓋率低</li>
<li>Nodejs 僅實驗性支援 QUIC</li>
<li>Deno 尚不支援</li>
</ul>
</li>
</ul>
</li>
<li>HTML5 video tag<!-- -->
<ul>
<li>✅ Web API 十分普及</li>
<li>❌ 高延遲</li>
</ul>
</li>
<li>Video.js</li>
<li>MPEG-DASH<!-- -->
<ul>
<li>✅ 開放的標準</li>
<li>❌ 有點複雜</li>
</ul>
</li>
<li>FLV<!-- -->
<ul>
<li>✅ 歷史性因素，仍有許多資源</li>
<li>❌ 過時</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="node-media-server">Node-Media-Server<a href="#node-media-server" class="hash-link" aria-label="Direct link to Node-Media-Server" title="Direct link to Node-Media-Server">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/05_Node-Media-Server-f6c9a6eaf1b0d27f12dc5399fe257ff0.webp" width="1223" height="762" class="img_RpFt"></p>
<p>之後 (2023-06-04) 發現了 <a href="https://github.com/illuspas/Node-Media-Server" target="_blank" rel="noopener noreferrer">Node-Media-Server</a> 這個專案，透過 RTMP (Real-Time Messaging Protocol) 向 Node-Media-Server 串流影像，接著能夠使用 <a href="https://github.com/illuspas/Node-Media-Server-Admin" target="_blank" rel="noopener noreferrer">Node-Media-Server-Admin</a> 打開串流，而且能夠流暢的關閉與重新開啟串流，Session 的管理便是我在 POC 階段所缺失的，並且它能夠使用以 Javascript 撰寫的 code base 對外進行串流，那我只要有辦法用 Javascript 產生 RTMP 流，就能整合成符合我需求的程式。</p>
<p>於是我便試著透過用 Typescript <a href="https://github.com/FlySkyPie/Node-Media-Server-ts" target="_blank" rel="noopener noreferrer">重構專案</a>的方式理解它是如何實現串流推流的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="2023-06-11--2023-06-25">2023-06-11 ~ 2023-06-25<a href="#2023-06-11--2023-06-25" class="hash-link" aria-label="Direct link to 2023-06-11 ~ 2023-06-25" title="Direct link to 2023-06-11 ~ 2023-06-25">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="rtmp">RTMP<a href="#rtmp" class="hash-link" aria-label="Direct link to RTMP" title="Direct link to RTMP">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/06_RTMP-learning-note-db26060598ed37f00e25f95e196510ad.webp" width="5411" height="4079" class="img_RpFt"></p>
<p>接著我發現單靠程式碼無法理解它解析 RTMP 封包的邏輯，於是我便打開 <a href="https://rtmp.veriskope.com/docs/spec" target="_blank" rel="noopener noreferrer">RTMP 的規範文件</a>並搭配一些教學文章試著理解它，不過大約只讀到 Header 的部份，我就意識到就算我能製造 RTMP 堆流，還是需要把影像做編碼，然而 Javascript 的生態系在做這件事情上有點貧弱，於是我把目光轉而投向 WebRTC。</p>
<p>至於 RTMP 的學習筆記我應該會發到另外一篇獨立的文章去，雖然因為我其實沒有把 Spec 完整看完，發個不完整的筆記感覺怪彆扭的。=w=&quot;</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="2023-06-25--2023-08-05">2023-06-25 ~ 2023-08-05<a href="#2023-06-25--2023-08-05" class="hash-link" aria-label="Direct link to 2023-06-25 ~ 2023-08-05" title="Direct link to 2023-06-25 ~ 2023-08-05">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="webrtc">WebRTC<a href="#webrtc" class="hash-link" aria-label="Direct link to WebRTC" title="Direct link to WebRTC">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/07_webrtc-demo-7de5ea33f86178327ce1788fadade79a.webp" width="1308" height="382" class="img_RpFt"></p>
<p>7 月份因為工作上的壓力比較大，加上充滿了親戚過世、Steam 夏季特賣、COSUP...等等事件，所以學習 WebRTC 的進度可以說是其極緩慢，不過終於在昨天 (2023-08-05) 理解如何使用這個 Web API 並把<a href="https://github.com/FlySkyPie/canvas-webrtc-sample" target="_blank" rel="noopener noreferrer">範例</a>做出來了。</p>
<p>同樣的，關於 WebRTC 的學習筆記我會放在另外一篇  獨立的文章。</p>
<hr>
<p><a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" alt="創用 CC 授權條款" class="img_RpFt"></a><br>
<!-- -->Wei Ji 以<a href="http://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">創用CC 姓名標示-相同方式分享 4.0 國際 授權條款</a>釋出。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-zeromq-8-ba688f">
<p>Chapter 8 - A Framework for Distributed Computing. Retrieved 2023-08-05, from <a href="https://zguide.zeromq.org/docs/chapter8" target="_blank" rel="noopener noreferrer">https://zguide.zeromq.org/docs/chapter8</a> <a href="#user-content-fnref-zeromq-8-ba688f" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-protobuf-type-detect-ba688f">
<p>c# - Protocol buffers detect type from raw message - Stack Overflow. Retrieved 2023-08-06, from <a href="https://stackoverflow.com/a/9125119" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/a/9125119</a> <a href="#user-content-fnref-protobuf-type-detect-ba688f" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-deno-1.8-ba688f">
<p>Deno 1.8 Release Notes. Retrieved 2023-08-05, from <a href="https://deno.com/blog/v1.8" target="_blank" rel="noopener noreferrer">https://deno.com/blog/v1.8</a> <a href="#user-content-fnref-deno-1.8-ba688f" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-deno-1.32.0-ba688f">
<p>Release v1.32.0 · denoland/deno. Retrieved 2023-08-05, from <a href="https://github.com/denoland/deno/releases/tag/v1.32.0" target="_blank" rel="noopener noreferrer">https://github.com/denoland/deno/releases/tag/v1.32.0</a> <a href="#user-content-fnref-deno-1.32.0-ba688f" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-simple-stream-ba688f">
<p>Day 22 Streaming POC - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天. Retrieved 2023-08-05, from <a href="https://ithelp.ithome.com.tw/articles/10305097" target="_blank" rel="noopener noreferrer">https://ithelp.ithome.com.tw/articles/10305097</a> <a href="#user-content-fnref-simple-stream-ba688f" data-footnote-backref="" aria-label="Back to reference 5" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/polis">Polis</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/hakoniwa">Hakoniwa</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/the-key-of-huanche">The Key of Huanche</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/3"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 FlyPie (Wei Ji)</div></div></div></footer></div>
</body>
</html>
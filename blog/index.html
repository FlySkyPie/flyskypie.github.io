<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Blog | 工程屍 FlyPie 的異想世界</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://flyskypie.github.io/blog"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" property="og:locale" content="zh_tw"><meta data-rh="true" property="og:title" content="Blog | 工程屍 FlyPie 的異想世界"><meta data-rh="true" name="description" content="Blog"><meta data-rh="true" property="og:description" content="Blog"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><meta data-rh="true" property="og:image" content="https://raw.githubusercontent.com/FlySkyPie/flyskypie.github.io/main/blog/2024-05-26_polis-gpu-context-issue/img/01_architecture.webp"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://flyskypie.github.io/blog"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog" hreflang="en"><link data-rh="true" rel="alternate" href="https://flyskypie.github.io/blog" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="工程屍 FlyPie 的異想世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="工程屍 FlyPie 的異想世界 Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="工程屍 FlyPie 的異想世界 JSON Feed">




<link rel="alternate" type="application/rss+xml" href="/posts/rss.xml" title="工程屍 FlyPie 的異想世界 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/posts/atom.xml" title="工程屍 FlyPie 的異想世界 Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4a9022c6.css">
<script src="/assets/js/runtime~main.ac719e5e.js" defer="defer"></script>
<script src="/assets/js/main.b53d8164.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_LBgp" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_RjML themedComponent--light_RyNI"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_RjML themedComponent--dark_ntqO"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/the-key-of-huanche/">專案文件</a><a class="navbar__item navbar__link" href="/blogs">數位手記</a><a class="navbar__item navbar__link" href="/posts">廢文雜談</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_s2nU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_DonJ colorModeToggle_KBLq"><button class="clean-btn toggleButton_qwn5 toggleButtonDisabled_tRn_" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_bYdl"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_D9Q4"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Cbrq"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_GUBX"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_UgN6 thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_PkUw margin-bottom--md">Recent posts</div><ul class="sidebarItemList_HFnO clean-list"><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-10-06_a-idea-about-using-tiddlywiki-as-llmstxt">一種人類友善 llms.txt 構想</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-07-05_harbor">OCI Image 本地鏡像站遷移之旅</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-04-23_my-homelab">我的 Homelab</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2025-03-15_opensource-3d-workflow">一種開源工具鏈嘗試，以最近幫風機製作角座為例</a></li><li class="sidebarItem_NmoJ"><a class="sidebarItemLink_GF4N" href="/blog/2024-11-04_blender-anatomy">從 Blender 開始的解剖學筆記 - 骨骼篇 - 啟程</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="前情提要"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2025-10-06_a-idea-about-using-tiddlywiki-as-llmstxt">一種人類友善 llms.txt 構想</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2025-10-06T00:00:00.000Z" itemprop="datePublished">October 6, 2025</time> · <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="#前情提要" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>前情提要有點長，摘要如下：</p><ul>
<li>我的開源專案口袋名單有很多專案等著我去探索，LLM (Large language model) 是一種潛在能協助我的工具。</li>
<li>我不傾向使用 LLM 來寫程式。<sup><a href="#user-content-fn-oil-seller-2f6184" id="user-content-fnref-oil-seller-2f6184" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></li>
<li>就算使用 LLM 產生文件也應該處於某種程度的控制。<sup><a href="#user-content-fn-llm-and-robot-arm-2f6184" id="user-content-fnref-llm-and-robot-arm-2f6184" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></li>
<li>文件本身應該是 RAG 體系兼容或是 RAG 體系友善的。<sup><a href="#user-content-fn-the-cornerstone-of-llm-system-rag-2f6184" id="user-content-fnref-the-cornerstone-of-llm-system-rag-2f6184" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup></li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="閃亮事物">閃亮事物<a href="#閃亮事物" class="hash-link" aria-label="Direct link to 閃亮事物" title="Direct link to 閃亮事物">​</a></h3>
<p>作為一個重度閃亮事物症候群患者，我的口袋名單裡有一堆「我想理解、我想修改」的開源專案，諸如：</p>
<ul>
<li><a href="https://github.com/fogleman/Craft" target="_blank" rel="noopener noreferrer">https://github.com/fogleman/Craft</a>
<ul>
<li>10.8k ⭐</li>
<li>一個優雅的純 C 「Classic Minecraft」實做</li>
</ul>
</li>
<li><a href="https://github.com/swift502/Sketchbook" target="_blank" rel="noopener noreferrer">https://github.com/swift502/Sketchbook</a>
<ul>
<li>1.7k ⭐</li>
<li>一個建構於 Three.js 之上的「迷你 GTA (Grand Theft Auto)」實做</li>
</ul>
</li>
<li><a href="https://github.com/screeps/screeps" target="_blank" rel="noopener noreferrer">https://github.com/screeps/screeps</a>
<ul>
<li>3.2k ⭐</li>
<li>一個用 Javscript 實做的「零玩家 RTS (Real-time strategy)」伺服器端實做</li>
<li>客戶端是閉源的，並且在 Steam 上販售</li>
</ul>
</li>
<li><a href="https://github.com/ill-inc/biomes-game" target="_blank" rel="noopener noreferrer">https://github.com/ill-inc/biomes-game</a>
<ul>
<li>2.6k ⭐</li>
<li>一個（主要是） Typescript 實做的多人連  線 Minecraft 風格遊戲</li>
<li>該專案自從背後的開發商被 OpenAI 收購之後就被棄置了</li>
</ul>
</li>
<li><a href="https://github.com/FlySkyPie/SweetHome3DTS" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/SweetHome3DTS</a>
<ul>
<li>我從 Sweet Home 3D 專案 fork 出來的版本</li>
<li>從 「Java 佐 Javscript 實做」遷移到純 Typescript 實做</li>
<li>大約還有七萬行的程序化生成程式碼需要重構、拆解。</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>「Classic Minecraft」是指非常早期的 Minecraft 版本，不包含血量、怪物...等生存要素，事實是網路上流傳很多工程師練手的開源「Minecraft Clone」 都是 Classic 版。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="llm">LLM<a href="#llm" class="hash-link" aria-label="Direct link to LLM" title="Direct link to LLM">​</a></h3>
<p>LLM 橫空出世，衝擊了產業生態，甚至公司內也開始推廣使用 Agent Coding，具體地說是使用 Cursor 寫程式。親自使用一段時間之後，加上公司內其他人的使用情況，我認為這不是正確的 LLM 使用方式。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="用-llm-來寫文件">用 LLM 來「寫文件」<a href="#用-llm-來寫文件" class="hash-link" aria-label="Direct link to 用 LLM 來「寫文件」" title="Direct link to 用 LLM 來「寫文件」">​</a></h3>
<p>同事使用 LLM 生成的數千行的垃圾文件讓我有感而發寫了一篇「<a href="https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm" target="_blank" rel="noopener noreferrer">LLM 與機械手臂的類比</a>」，簡單來說：忽略「人類大腦處理資料的能力是有限的」而讓大量生成式資訊灌入專案反而是一種精神傷害而沒有任何幫助。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="用-llm-來寫程式">用 LLM 來「寫程式」<a href="#用-llm-來寫程式" class="hash-link" aria-label="Direct link to 用 LLM 來「寫程式」" title="Direct link to 用 LLM 來「寫程式」">​</a></h3>
<p>LLM 用來產生「零到一」的範例程式碼確實方便，不過 LLM 有「自己造輪子」的傾向，在複雜的專案中它的表現不盡理想。從職涯規劃的角度，我也有感而發寫了一篇「<a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller" target="_blank" rel="noopener noreferrer">從賣油翁談『人寫程式』與『人寫提示詞讓 LLM 寫程式』的抉擇</a>」，簡單來說：手寫磨練自己的肌肉記憶或是用提示詞來逃避程式碼，我個人傾向選擇前者。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="llmstxt-的缺點"><code>llms.txt</code> 的缺點<a href="#llmstxt-的缺點" class="hash-link" aria-label="Direct link to llmstxt-的缺點" title="Direct link to llmstxt-的缺點">​</a></h3>
<p>為了將資訊傳遞給 LLM，出現了像是 <code>repomix</code> 或 <code>gitingest</code> 這樣的工具，用來將其他型態的資料轉換成一個巨大的純文字檔案。這種檔案不只不適合人類閱讀，而且很容易超出 LLM 的上下文窗口，實際上依然需要透過切塊 (Chunk)、嵌入 (Embedding)、向量資料庫...等流程建立的 RAG 系統才能有效的使用這些資訊。</p>
<p>在嘗試使用了 AnythingLLM、Repomix 和 Gitingest 等工具之後，有感而發寫了一篇關於 <code>llms.txt</code> 的廢文「<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag" target="_blank" rel="noopener noreferrer">回到一切的原點、LLM 系統的基石 - LLMs.txt、向量資料庫與 RAG</a>」。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="tiddlywiki---人類與機器通用的可攜格式">TiddlyWiki - 人類與機器通用的可攜格式<a href="#tiddlywiki---人類與機器通用的可攜格式" class="hash-link" aria-label="Direct link to TiddlyWiki - 人類與機器通用的可攜格式" title="Direct link to TiddlyWiki - 人類與機器通用的可攜格式">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-ee6b47d84fe34487b5f7649d0fe45cb4.webp" width="1024" height="779" class="img_RpFt"></p>
<p>TiddlyWiki 的幾個特點剛好可以用來解決上述問題，TiddlyWiki 有兩種儲存資料的型態：</p>
<ul>
<li>前端的 SPA 模式：單一 html 包含了資料以及 Tiddlywiki 本身的程式。</li>
<li>後端的 server 模式：每個條目(Tiddlers)可以獨立以檔案的形式存在。</li>
</ul>
<p>在 SPA 模式下，它提供一種人類友善的可攜體驗，只要有網頁瀏覽器就能閱讀或編輯，無須安裝其他軟體。並且其「非線性閱讀」的特性可以大幅降低認知負荷，避免人類在上千行的文件穿梭。</p>
<p>在 server 模式下，條目(Tiddlers) 可以放在個別的檔案內，提供一個版本控制 (git) 友善的環境。更可以透過 HTTP API 對條目進行新增、修改、移除。</p>
<p>TiddlyWiki 的設計上，鼓勵不要在一個 Tiddler 放入過多的資訊，每個 Tiddler 都應該像便條紙一樣傳遞一個單一主題的資訊，如此設計除了有效的降低人類的認知負荷以外，更讓 Tiddler 成為 RAG 切塊絕佳的單元，大型單一文件進行切塊的風險就是可能切割在不理想的地方造成語意被破壞。</p>
<p>因此 TiddlyWiki 提供了一種可攜、適合人類而且同時適合機械的資料型態。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-oil-seller-2f6184">
<p>從賣油翁談「人寫程式」與「人寫提示詞讓 LLM 寫程式」的抉擇. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/posts/2025-10-06_oil-seller</a> <a href="#user-content-fnref-oil-seller-2f6184" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-llm-and-robot-arm-2f6184">
<p>LLM 與機械手臂的類比. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm</a> <a href="#user-content-fnref-llm-and-robot-arm-2f6184" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-the-cornerstone-of-llm-system-rag-2f6184">
<p>回到一切的原點、LLM 系統的基石 - LLMs.txt、向量資料庫與 RAG. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag</a> <a href="#user-content-fnref-the-cornerstone-of-llm-system-rag-2f6184" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/homelab">homelab</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="OCI Image 實際上不是單一檔案，  而是一層一層的 layer 構成的，但是為了簡化描述，本文使用 image 一詞時可能是在描述 layer(s)。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2025-07-05_harbor">OCI Image 本地鏡像站遷移之旅</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2025-07-05T00:00:00.000Z" itemprop="datePublished">July 5, 2025</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>OCI Image 實際上不是單一檔案，而是一層一層的 layer 構成的，但是為了簡化描述，本文使用 image 一詞時可能是在描述 layer(s)。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="背景">背景<a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2>
<p>我在 Homelab 中架設了簡易的 <a href="https://github.com/distribution/distribution" target="_blank" rel="noopener noreferrer">Docker Registry</a> 作為鏡像/代理，來節省我工作筆電的硬碟空間和下載時間，更具體的細節請見另外一篇文章：<a href="https://flyskypie.github.io/blog/2025-04-23_my-homelab/#oci-registry" target="_blank" rel="noopener noreferrer">我的 Homelab</a>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="起因">起因<a href="#起因" class="hash-link" aria-label="Direct link to 起因" title="Direct link to 起因">​</a></h2>
<p>一切都源自於上班的時候需要用到這個 image: <code>quay.io/keycloak/keycloak</code>，拉了幾次卻發現我的鏡像站沒有快取這個 image。</p>
<p>下班之後在 homelab 開了另外一個 service：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">registry-server-2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">2.8.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> REGISTRY_PROXY_REMOTEURL=&quot;https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//quay.io/v2&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> quay</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/lib/registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.enable=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.docker.network=traefik</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.registry</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quay</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mirror.entrypoints=web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.registry</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">quay</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mirror.rule=Host(`mirror.quay.oci</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">image.arachne`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;traefik.http.services.registry-quay-mirror.loadbalancer.server.port=5000&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>發現依然不會快取。</p>
<blockquote>
<p>No, this is a limitation of the docker engine, <code>registry-mirrors</code> is only for Docker Hub. You can follow <a href="https://github.com/moby/moby/issues/18818" target="_blank" rel="noopener noreferrer">issue 18818</a> for more details.<sup><a href="#user-content-fn-docker-limit-1-c1c2c9" id="user-content-fnref-docker-limit-1-c1c2c9" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></p>
</blockquote>
<blockquote>
<p>Unfortunately and infuriatingly, it is not possible.
This is a most desired feature, by me, and by many others.
However, Docker, on purpose, does not implement this feature.<sup><a href="#user-content-fn-docker-limit-2-c1c2c9" id="user-content-fnref-docker-limit-2-c1c2c9" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
</blockquote>
<p>這似乎是 Docker 本身的設計所致，不過在我發現這個限制以前，以為是 <code>distribution/distribution</code> 的限制因此做了一些嘗試。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="sonatype-nexus-repository">Sonatype Nexus Repository<a href="#sonatype-nexus-repository" class="hash-link" aria-label="Direct link to Sonatype Nexus Repository" title="Direct link to Sonatype Nexus Repository">​</a></h2>
<p>我先是嘗試 <code>sonatype/nexus3</code>，然後看到了這個：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_sonatype-e8317344f0c91366ef6aea0b2e1e40c0.webp" width="1440" height="828" class="img_RpFt"></p>
<p>蛤？為什麼我用自架的開源軟體還要有額度限制？下一個。下一個。</p>
<p>接著試了 <code>sonatype/nexus:oss</code>：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_sonatype-3de0dfbf9e6f77af18896ecb6e9f5a7c.webp" width="1440" height="834" class="img_RpFt"></p>
<p>不支援 Docker？好吧。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="harbor">Harbor<a href="#harbor" class="hash-link" aria-label="Direct link to Harbor" title="Direct link to Harbor">​</a></h2>
<p>當我在考慮自架 OCI Registry 時，Harbor 不在考慮範圍的原因是我在官方網站只找得到兩種安裝方式：</p>
<ul>
<li><a href="https://github.com/goharbor/harbor-helm" target="_blank" rel="noopener noreferrer">Helm Chart</a></li>
<li><a href="https://goharbor.io/docs/2.13.0/install-config/download-installer/" target="_blank" rel="noopener noreferrer">安裝精靈</a></li>
</ul>
<p>我目前不是使用 K8s，Helm Chart 自然是不考慮。安裝精靈又可能導向裸機 (baremetal) 安裝，讓我沒辦法用 Docker 管理叢集。</p>
<p>後來經過調查才發現安裝精靈最後是產生 Docker Compose 的組態來執行的，可以在原始碼中發現 Docker Compose YAML 的樣板：<code>harbor/make/photon/prepare/templates/docker_compose/docker-compose.yml.jinja</code>。</p>
<p>不過很遺憾，我使用 Docker Swarm 來編排 homelab 的服務，Compose 的 YAML 沒辦法直接拿來使用。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="分而治之">分而治之<a href="#分而治之" class="hash-link" aria-label="Direct link to 分而治之" title="Direct link to 分而治之">​</a></h3>
<p>Harbor 由八個微服務構成：</p>
<ul>
<li>proxy (<code>goharbor/nginx-photon:v2.13.1</code>)</li>
<li>core (<code>goharbor/harbor-core:v2.13.1</code>)</li>
<li>registry (<code>goharbor/registry-photon:v2.13.1</code>)</li>
<li>redis (<code>goharbor/redis-photon:v2.13.1</code>)</li>
<li>postgresql (<code>goharbor/harbor-db:v2.13.1</code>)</li>
<li>portal (<code>goharbor/harbor-portal:v2.13.1</code>)</li>
<li>jobservice (<code>goharbor/harbor-jobservice:v2.13.1</code>)</li>
<li>registryctl (<code>goharbor/harbor-registryctl:v2.13.1</code>)</li>
</ul>
<p>我試著以最小仰賴的方式，一個一個服務跑起來試試看，然後用自己寫的腳本完成必要的配置，而不是使用 Harbor 安裝精靈。細節就不在本文贅述，最後建起來 Docker Compose YAML 在這裡：</p>
<p><a href="https://github.com/FlySkyPie/harbor-docker-compose" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/harbor-docker-compose</a></p>
<p>在 Harbor 官方的版本中，所有組態都是仰賴 <code>volumes</code> 或是 <code>env_file</code> 完成的，這在 Swarm 模式是行不通得。在 Compose 模式下可以用本地的相對路徑來組織檔案或是資料夾，而 Swarm 模式必須抱持著「一切都發生在遠端」的思路：機敏資訊由 <code>secrets</code> 實例儲存、設定檔以 <code>configs</code> 實例儲存...。完成 Compose 版本後再轉成 Swarm 的版本：</p>
<p><a href="https://github.com/FlySkyPie/harbor-docker-swarm" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/harbor-docker-swarm</a></p>
<p>最後有些密碼還是用 <code>environment</code> 傳遞，因為服務本身可能沒有設計支援 Secret File，我也不想花太多時間在這件事上折騰，就先這樣將就著用吧。</p>
<p>另外，安裝精靈建立的當中其實還有一個 log 容器用來從其他微服務蒐集 log，我的版本並沒有包含它，一來是它不是執行服務必要的功能，二來是如果我有蒐集 log 的需求會再搭配 Promtail 和 Grafana Loki 之類專門用來做這檔事的工具。</p>
<p>附上成果圖：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-c3a1686c2af8d1d987d2e7a9d6dd629c.webp" width="1440" height="877" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="資料轉移">資料轉移<a href="#資料轉移" class="hash-link" aria-label="Direct link to 資料轉移" title="Direct link to 資料轉移">​</a></h2>
<p>為了把舊的鏡像資料遷移到 Harbor，我做了一些措施，雖然整體而言稱不上完美。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="建立-image-清單">建立 image 清單<a href="#建立-image-清單" class="hash-link" aria-label="Direct link to 建立 image 清單" title="Direct link to 建立 image 清單">​</a></h3>
<p>首先要建立鏡像站快取過得清單：</p>
<ol>
<li><code>GET /v2/_catalog</code> 取得 N 個 repositories 的資料。</li>
<li><code>GET/v2/${repository}/tags/list</code> 取得每一個 repository 的 tag 資料，要注意的是 <code>distribution/distribution</code> 鏡像站可能快取了 tag 但是還沒有快取映像檔本身。</li>
<li><code>GET /v2/${repo}/manifests/${tag}</code> 取得 manifest 資訊</li>
<li><code>HEAD /v2/${repository}/blobs/${digest}</code> 根據 manifest 判斷 layers 有沒有被快取。<!-- -->
<ul>
<li>這裡要注意，必須暫時關閉 <code>REGISTRY_PROXY_REMOTEURL</code> 的設定，不然會直接觸發代理鏡像機制，關閉代理之後，沒有被快取過得檔案會直接 404 作為判斷有沒有被快取過得機制。</li>
</ul>
</li>
</ol>
<p>關於更多 API 操作的細節可以閱讀官方的文件<sup><a href="#user-content-fn-distribution-api-c1c2c9" id="user-content-fnref-distribution-api-c1c2c9" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>。</p>
<p>整個過程完成會得到類似這樣的清單：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">goharbor/nginx-photon:v2.13.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">goharbor/redis-photon:v2.11.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">goharbor/registry-photon:v2.13.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grafana/loki:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">grafana/loki:2.7.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="設定-harbor">設定 Harbor<a href="#設定-harbor" class="hash-link" aria-label="Direct link to 設定 Harbor" title="Direct link to 設定 Harbor">​</a></h3>
<p>接著在 Harbor 設定 <code>registries</code> 和 <code>projects</code> 指向舊的鏡像站。</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="583" height="543" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/04_harbor-5806fc52a18aaf60e00f3dc3ccef0d48.webp" width="1195" height="773" class="img_RpFt"></p>
<p>要注意的是，設定 Proxy Cache 之後既不能關閉也不能修改。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="從-harbor-鏡像本地鏡像站">從 Harbor 鏡像本地鏡像站<a href="#從-harbor-鏡像本地鏡像站" class="hash-link" aria-label="Direct link to 從 Harbor 鏡像本地鏡像站" title="Direct link to 從 Harbor 鏡像本地鏡像站">​</a></h3>
<p>接著使用腳本從 Harbor 新設定的 Project 依照清單拉取 image</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull harbor.arachne/docker-hub-proxy/getpinry/pinry:latest</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這樣就可以把一部分 image 從舊的鏡像站轉移到 Harbor 去了，雖然在其他 Project 不會顯示 image 的存在，但是 image 的檔案在 Harbor 是跨 Project 儲存的，之後如果從其他 Project 拉取 image 時有已經快取過的檔案，Harbor 會直接使用已經存在的檔案。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="限制">限制<a href="#限制" class="hash-link" aria-label="Direct link to 限制" title="Direct link to 限制">​</a></h3>
<p>我這個作法是 「不完美」而且只能遷移「一部分」的原因在於，像 <code>docker.io/library/mysql</code> 這種 image，因為安全性的問題，同一個 tag 其實會一直更新，因此有些 image 在我的鏡像站上是過期的，所以當腳本拿著最新的 <code>manifest</code> 去檢查快取的時候，是有可能全部 404 的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="podman">Podman<a href="#podman" class="hash-link" aria-label="Direct link to Podman" title="Direct link to Podman">​</a></h2>
<p>還記得我前面提到的「Docker 本身的設計就不允許設定 <code>docker.io</code> 以外的鏡像站」嗎？於是我試著使用 Podman，發現很輕易的就設定好本地鏡像站了（<code>/etc/containers/registries.conf</code>）：</p>
<div class="language-toml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-toml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">[[registry]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;quay.io&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[registry.mirror]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;harbor.arachne/quay-proxy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insecure = false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[registry]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;docker.io&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[registry.mirror]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location = &quot;harbor.arachne/docker-hub-proxy&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insecure = false</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>當然，「使用 Podman 解決非 <code>docker.io</code> 本地鏡像站問題」與「使用 Harbor 取代 <code>distribution/distribution</code>」變成兩個獨立事件了，不過既然我都已經折騰完 Harbor 了，那就乾脆直接當作非預期的升級計畫換過去吧。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-docker-limit-1-c1c2c9">
<p>mirroring - docker registry-mirrors is not used for fqdn images - Server Fault. Retrieved 2025-07-05 from <a href="https://serverfault.com/a/1125577" target="_blank" rel="noopener noreferrer">https://serverfault.com/a/1125577</a> <a href="#user-content-fnref-docker-limit-1-c1c2c9" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-docker-limit-2-c1c2c9">
<p>Configure dockerd to use a regsitry mirror for a private registry - General - Docker Community Forums. Retrieved 2025-07-05 from <a href="https://forums.docker.com/t/configure-dockerd-to-use-a-regsitry-mirror-for-a-private-registry/135180/2" target="_blank" rel="noopener noreferrer">https://forums.docker.com/t/configure-dockerd-to-use-a-regsitry-mirror-for-a-private-registry/135180/2</a> <a href="#user-content-fnref-docker-limit-2-c1c2c9" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-distribution-api-c1c2c9">
<p>HTTP API V2 | CNCF Distribution. Retrieved 2025-07-05 from <a href="https://distribution.github.io/distribution/spec/api/" target="_blank" rel="noopener noreferrer">https://distribution.github.io/distribution/spec/api/</a> <a href="#user-content-fnref-distribution-api-c1c2c9" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/homelab">homelab</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="從我開始計畫建一個 Homelab 至今已經超過半年了，如今它的規模也算是有點東西可以拿出來講了。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2025-04-23_my-homelab">我的 Homelab</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2025-04-23T00:00:00.000Z" itemprop="datePublished">April 23, 2025</time> · <!-- -->15 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-b6e2ba28d48ffce91f8068a7c6aa8cd5.webp" width="1440" height="835" class="img_RpFt"></p>
<p>從我開始計畫建一個 Homelab 至今已經超過半年了，如今它的規模也算是有點東西可以拿出來講了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="什麼是-homelab">什麼是 Homelab？<a href="#什麼是-homelab" class="hash-link" aria-label="Direct link to 什麼是 Homelab？" title="Direct link to 什麼是 Homelab？">​</a></h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/-b3t37SIyBs?si=CR6mSxdgHd1Dtv7i" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>Homelab 就是資訊工程師平常在公司管伺服器管得不夠爽，所以在自己家裡蓋一個資料中心繼續玩。</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="480" height="360" class="img_RpFt"></p>
<p>好吧，對某些人來說或許是這樣，不過要稱得上是 Homelab 的門檻其實很低：只要在家中放一台伺服器，它可以是一般的桌機、NAS、筆電或是樹莓派。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="硬體架構">硬體架構<a href="#硬體架構" class="hash-link" aria-label="Direct link to 硬體架構" title="Direct link to 硬體架構">​</a></h2>
<p>黑線是乙太網路、藍線是其他（主要是 USB）：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_architecture-20daf3ca336388a7c266f48f7b1d0286.webp" width="2560" height="1813" class="img_RpFt"></p>
<p>目前我的 Homelab 硬體配置大概如下：</p>
<ul>
<li>4G 路由器<!-- -->
<ul>
<li>TOTOLINK LR350 4G LTE</li>
</ul>
</li>
<li>交換器<!-- -->
<ul>
<li>Zyxel GS-108B v3</li>
</ul>
</li>
<li>樹莓派<!-- -->
<ul>
<li>Raspberry Pi 3B</li>
</ul>
</li>
<li>筆電（伺服器）<!-- -->
<ul>
<li>Lenovo Yoga Slim 7 Carbon 13ITL5</li>
</ul>
</li>
<li>DAS (Direct-Attached Storage)<!-- -->
<ul>
<li>QNAP TR-004U 4-bay</li>
</ul>
</li>
<li>USB Dock<!-- -->
<ul>
<li>j5create JCD533</li>
</ul>
</li>
<li>USB 網路卡<!-- -->
<ul>
<li>j5create JCE145</li>
</ul>
</li>
<li>筆電<!-- -->
<ul>
<li>Framework Laptop 13 (13th Intel i7-1360P)</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="入口網站">入口網站<a href="#入口網站" class="hash-link" aria-label="Direct link to 入口網站" title="Direct link to 入口網站">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/00_cover-b6e2ba28d48ffce91f8068a7c6aa8cd5.webp" width="1440" height="835" class="img_RpFt"></p>
<p>當自架的服務越來越多，一個簡單的入口網站來尋找需要的服務是十分必要的。目前我是使用 <a href="https://github.com/Lissy93/dashy" target="_blank" rel="noopener noreferrer">Dashy</a>，關於其他最後沒使用的候選方案我補充在<a href="https://flyskypie.github.io/posts/2025-04-26_homelab-homepage" target="_blank" rel="noopener noreferrer">另外一篇貼文</a>。</p>
<p>目前我把所有服務大致分成四類：</p>
<ul>
<li>數位基礎設施<!-- -->
<ul>
<li>一些情況不會直接面對終端使用者 (End User)，而是在背景默默工作的東西會放在這裡。</li>
</ul>
</li>
<li>專案 (Side Project) 基礎設施<!-- -->
<ul>
<li>「管理」相關的東西會放在這裡。</li>
</ul>
</li>
<li>生活<!-- -->
<ul>
<li>比較屬於個人會使用到的服務會放在這裡。</li>
</ul>
</li>
<li>開發工具<!-- -->
<ul>
<li>「研發工具」之類的東西會放在這裡。</li>
</ul>
</li>
</ul>
<p>經濟學裡裡的生產要素被分成四類：自然資源、人力資源、資本、企業才能。如果用經濟學裡生產要素的概念來比喻，「數位基礎設施」就像是自然資源的陽光、空氣、水；「專案基礎設施」則是資本裡的機器、設備、廠房。</p>
<p>「生活」是不直接涉及生產東西，比較像是個人消耗品。「開發工具」則是尺度比較小的工具，像是電鑽、板手...之類的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="數位基礎設施">數位基礎設施<a href="#數位基礎設施" class="hash-link" aria-label="Direct link to 數位基礎設施" title="Direct link to 數位基礎設施">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="pi-hole-與-dns">Pi Hole 與 DNS<a href="#pi-hole-與-dns" class="hash-link" aria-label="Direct link to Pi Hole 與 DNS" title="Direct link to Pi Hole 與 DNS">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjQwIiBoZWlnaHQ9IjE2MCIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgMjQwIDE2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiA8ZGVmcz4KICA8bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIyLjc0NTIiIHgyPSI0NC4yMyIgeTE9Ii4yNzgwMyIgeTI9Ii4yNzgwMyIgZ3JhZGllbnRUcmFuc2Zvcm09InNjYWxlKDEuMjkzMiAuNzczMjkpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgIDxzdG9wIHN0b3AtY29sb3I9IiMyMmIyMjUiIG9mZnNldD0iMCIvPgogICA8c3RvcCBzdG9wLWNvbG9yPSIjMjlmYzJlIiBvZmZzZXQ9IjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxzdHlsZT5AbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOmRhcmspeyN0e2ZpbGw6I2ZmZn19PC9zdHlsZT4KICA8cGF0aCBpZD0iYiIgZD0ibTEgODUuNDU5YzAtMS43MTcgMS43MDctMTYuOTkzIDE2LjkwNy0xNi45OTMgOS45OTgtMC43MTcgMTcuNzY2IDcuMTY5IDI3LjQ2NCA3LjE2OSAyNC4yMDgtMS44MTQgMjAuOTUyLTM0LjI5My0wLjI1Mi0zNC4yOTMtNS4zLTAuMDE0LTEwLjE3OSAyLjIyLTEzLjkyOSA1Ljk1NGwtMjQuNDUyIDI0LjQ1MWMtNC4wNTggNC4wNDUtNS43MzggOS4yMjUtNS43MzggMTMuNzEyIi8+CiA8L2RlZnM+CiA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NSkiPgogIDxwYXRoIGQ9Im0zNy40IDQwLjE0NWMtMTYuMjItMS43My0zMi41Ni0xMy45OS0zMy44NS0zOS45MyAyNS4xNyAwIDM4LjYzIDE0LjkgMzkuOTMgMzguNTEgNC43Ni0yOC4zMiAyNy4wNy0yNSAyNy4wNy0yNSAxLjA2IDE2LjA1LTEyLjEyIDI1Ljc4LTI3LjA3IDI2LjU5LTQuMi04Ljg1LTI5LjM2LTMwLjU2LTI5LjM2LTMwLjU2YTAuMDcgMC4wNyAwIDAgMC0wLjExIDAuMDhzMjQuMjggMjEuMTUgMjMuMzkgMzAuMzEiIGZpbGw9InVybCgjYSkiLz4KICA8dXNlIHRyYW5zZm9ybT0icm90YXRlKDE4MCw0NSw4NS4zKSIgZmlsbD0iI2Y2MGQxYSIgeGxpbms6aHJlZj0iI2IiLz4KICA8dXNlIHRyYW5zZm9ybT0icm90YXRlKDkwLDQ1LDg1LjMpIiBmaWxsPSIjOTYwNjBjIiB4bGluazpocmVmPSIjYiIvPgogIDx1c2UgdHJhbnNmb3JtPSJyb3RhdGUoLTkwLDQ1LDg1LjMpIiBmaWxsPSIjOTYwNjBjIiB4bGluazpocmVmPSIjYiIvPgogIDx1c2UgZmlsbD0iI2Y2MGQxYSIgeGxpbms6aHJlZj0iI2IiLz4KICA8cGF0aCBpZD0idCIgZD0ibTcuMjkgMTM5LjI1YTguMTcgOC4xNyAwIDAgMSA1IDEuMjkgNC4zOCA0LjM4IDAgMCAxIDEuNzEgMy42NiA1LjEgNS4xIDAgMCAxLTAuNDggMi4zMSAzLjg3IDMuODcgMCAwIDEtMS4zOCAxLjU0IDYuMiA2LjIgMCAwIDEtMi4yIDAuODUgMTQuNCAxNC40IDAgMCAxLTIuOTMgMC4yN2gtMi4xOHY2LjE2aC0xLjU3di0xNS42NGExMiAxMiAwIDAgMSAyLTAuMzNjMC43NC0wLjA3IDEuMzktMC4xMSAyLjAzLTAuMTFtMC4wNyAxLjM2Yy0wLjU5IDAtMS4wOCAwLTEuNDkgMC4wNmwtMSAwLjF2N2gyYTE2IDE2IDAgMCAwIDIuMjgtMC4xNSA1IDUgMCAwIDAgMS43NS0wLjU1IDIuNzUgMi43NSAwIDAgMCAxLjEtMS4wNyAzLjcgMy43IDAgMCAwIDAuMzktMS44MSAzLjIgMy4yIDAgMCAwLTAuNDMtMS43NSAzLjEgMy4xIDAgMCAwLTEuMTItMS4wOSA1IDUgMCAwIDAtMS42LTAuNTcgMTEgMTEgMCAwIDAtMS44OC0wLjE3bTEyLjM1LTAuNzZhMS4xMiAxLjEyIDAgMCAxLTAuMzIgMC44NCAxLjE1IDEuMTUgMCAwIDEtMS41NyAwIDEuMTIgMS4xMiAwIDAgMS0wLjMyLTAuODQgMS4xMSAxLjExIDAgMSAxIDIuMjEgMG0tMC4zNSAxNS40OGgtMS40OXYtMTEuODloMS40OXptMy43MS03LjMzaDUuMTl2MS40NWgtNS4xOXptOC42NSA3LjMzdi0xNy4zM2wzLjQzLTAuNTZ2NS44YTcgNyAwIDAgMSAwLjg4LTAuMjIgNS41IDUuNSAwIDAgMSAxLTAuMSA2LjQgNi40IDAgMCAxIDIuNDUgMC40IDMuOCAzLjggMCAwIDEgMS41NiAxLjE0IDQuNCA0LjQgMCAwIDEgMC44MyAxLjc1IDkuNyA5LjcgMCAwIDEgMC4yNCAyLjI1djYuODNoLTMuMzd2LTYuNDJhNC43NCA0Ljc0IDAgMCAwLTAuNDMtMi4zNCAxLjcgMS43IDAgMCAwLTEuNTgtMC42OSA0LjcgNC43IDAgMCAwLTAuODYgMC4wOGMtMC4yNyAwLTAuNTEgMC4xMS0wLjcyIDAuMTd2OS4yem0yNS45NC02LjA3YTcuOCA3LjggMCAwIDEtMC40MSAyLjYxIDUuNiA1LjYgMCAwIDEtMS4yIDIgNS4yNSA1LjI1IDAgMCAxLTEuODcgMS4zIDYuMiA2LjIgMCAwIDEtMi40NSAwLjQ2IDYuMiA2LjIgMCAwIDEtMi40My0wLjQ2IDUuMyA1LjMgMCAwIDEtMS44Ny0xLjMgNS45IDUuOSAwIDAgMS0xLjIyLTIgNy41IDcuNSAwIDAgMS0wLjQ0LTIuNjEgNy4yIDcuMiAwIDAgMSAwLjQ1LTIuNiA1LjkgNS45IDAgMCAxIDEuMjQtMiA1LjcgNS43IDAgMCAxIDEuODktMS4yOSA2LjQ0IDYuNDQgMCAwIDEgNC43OCAwIDUuNSA1LjUgMCAwIDEgMS44NyAxLjI5IDUuOCA1LjggMCAwIDEgMS4yMiAyIDcuNCA3LjQgMCAwIDEgMC40NCAyLjZtLTMuNDkgMGE0LjM0IDQuMzQgMCAwIDAtMC42My0yLjUgMi4yOCAyLjI4IDAgMCAwLTMuNjMgMCA0LjI3IDQuMjcgMCAwIDAtMC42NCAyLjUgNC4zNSA0LjM1IDAgMCAwIDAuNjQgMi41MiAyLjI0IDIuMjQgMCAwIDAgMy42MyAwIDQuNDMgNC40MyAwIDAgMCAwLjYzLTIuNTJtMTIuMDUgNi4zYTguNCA4LjQgMCAwIDEtMi40My0wLjMyIDMuNiAzLjYgMCAwIDEtMS40Ny0wLjg0IDIuOCAyLjggMCAwIDEtMC43My0xLjMxIDcgNyAwIDAgMS0wLjItMS43NHYtMTMuMzVsMy40My0wLjU2djEzLjE4YTQgNCAwIDAgMCAwLjA3IDAuODMgMS4zNCAxLjM0IDAgMCAwIDAuMjYgMC42MiAxLjQ1IDEuNDUgMCAwIDAgMC41NiAwLjQyIDMuNCAzLjQgMCAwIDAgMSAwLjJ6bTIuOTQtNi4xOWE3LjMgNy4zIDAgMCAxIDAuNS0yLjgxIDYgNiAwIDAgMSAxLjMtMiA1LjMgNS4zIDAgMCAxIDEuODUtMS4yMSA1LjcgNS43IDAgMCAxIDIuMTUtMC40MiA1LjM1IDUuMzUgMCAwIDEgNC4wNCAxLjU2IDYuNDYgNi40NiAwIDAgMSAxLjUgNC42M3YxLjI5aC03LjgyYTIuMzIgMi4zMiAwIDAgMCAxIDEuNjggNCA0IDAgMCAwIDIuMzUgMC42MiAxMC40IDEwLjQgMCAwIDAgMS44NS0wLjE3IDcuMiA3LjIgMCAwIDAgMS40OC0wLjQzbDAuNDYgMi43OGE0IDQgMCAwIDEtMC43MyAwLjI4IDExIDExIDAgMCAxLTEgMC4yNGMtMC4zNyAwLjA3LTAuNzcgMC4xMy0xLjIgMC4xN2ExMSAxMSAwIDAgMS0xLjI5IDAuMDcgNy42IDcuNiAwIDAgMS0yLjg0LTAuNDggNS41IDUuNSAwIDAgMS0yLTEuMzIgNS4zIDUuMyAwIDAgMS0xLjE4LTIgOCA4IDAgMCAxLTAuNDItMi40OG04LTEuMzFhMy4xIDMuMSAwIDAgMC0wLjE1LTAuODUgMiAyIDAgMCAwLTAuMzktMC43MyAyIDIgMCAwIDAtMC42Mi0wLjQ4IDIuMiAyLjIgMCAwIDAtMS0wLjIxIDIuMyAyLjMgMCAwIDAtMSAwLjIgMiAyIDAgMCAwLTAuNjkgMC41MSAyLjMgMi4zIDAgMCAwLTAuNDMgMC43NSA1IDUgMCAwIDAtMC4yMiAwLjg2em0xMC43MS01Ljg3YTMuOSAzLjkgMCAwIDEtMC4yNyAxLjUgMy41IDMuNSAwIDAgMS0wLjc0IDEuMTIgMy4yIDMuMiAwIDAgMS0xLjA3IDAuNjkgMy40IDMuNCAwIDAgMS0xLjI3IDAuMjQgMy41IDMuNSAwIDAgMS0xLjI4LTAuMjQgMy4zIDMuMyAwIDAgMS0xLjA3LTAuNjkgMy41IDMuNSAwIDAgMS0wLjczLTEuMTIgNC4xMyA0LjEzIDAgMCAxIDAtMyAzLjQgMy40IDAgMCAxIDAuNzMtMS4xMiAzLjMgMy4zIDAgMCAxIDEuMDctMC43IDMuNSAzLjUgMCAwIDEgMS4yOC0wLjI0IDMuNCAzLjQgMCAwIDEgMS4yNyAwLjI0IDMuMiAzLjIgMCAwIDEgMS4wNyAwLjcgMy40IDMuNCAwIDAgMSAwLjc0IDEuMTIgMy45IDMuOSAwIDAgMSAwLjI3IDEuNW0tMC43MSAwYTMuNCAzLjQgMCAwIDAtMC4xNi0xLjE5IDIuOSAyLjkgMCAwIDAtMC41NC0wLjkyIDIuMzUgMi4zNSAwIDAgMC0wLjg0LTAuNTggMi42IDIuNiAwIDAgMC0xLjA2LTAuMjEgMi43IDIuNyAwIDAgMC0xLjA3IDAuMjEgMi4zIDIuMyAwIDAgMC0wLjgzIDAuNTggMi45IDIuOSAwIDAgMC0wLjU0IDAuOTIgMy40IDMuNCAwIDAgMC0wLjIgMS4xOCAzLjQgMy40IDAgMCAwIDAuMiAxLjE4IDIuNyAyLjcgMCAwIDAgMC41NCAwLjkyIDIuMyAyLjMgMCAwIDAgMC44MyAwLjU5IDIuNyAyLjcgMCAwIDAgMS4wNyAwLjIxIDIuNiAyLjYgMCAwIDAgMS4wNi0wLjIxIDIuNCAyLjQgMCAwIDAgMC44NC0wLjU5IDIuNyAyLjcgMCAwIDAgMC41NC0wLjkyIDMuNCAzLjQgMCAwIDAgMC4xNi0xLjE3bS0xLjY3IDEuOTVhNi40IDYuNCAwIDAgMC0wLjUxLTAuODMgNiA2IDAgMCAwLTAuNDgtMC42NGgtMC42NnYxLjQ3aC0wLjY5di0zLjhhNSA1IDAgMCAxIDAuNTUtMC4wOWgwLjU0YTIuMiAyLjIgMCAwIDEgMS4yOSAwLjMyIDEuMDggMS4wOCAwIDAgMSAwLjQ0IDEgMSAxIDAgMCAxLTAuMTkgMC42MyAxLjI1IDEuMjUgMCAwIDEtMC41NSAwLjQybDAuMjMgMC4yOSAwLjI2IDAuMzljMC4xIDAuMTUgMC4xOSAwLjMgMC4yOCAwLjQ1czAuMTcgMC4zMiAwLjI0IDAuNDd6bS0xLjY1LTJoMC4zN2EyIDIgMCAwIDAgMC43OS0wLjE0IDAuNDggMC40OCAwIDAgMCAwLjI5LTAuNSAwLjUzIDAuNTMgMCAwIDAtMC4yOS0wLjUgMS41IDEuNSAwIDAgMC0wLjY3LTAuMTRoLTAuNDV6Ii8+CiA8L2c+Cjwvc3ZnPgo=" width="240" height="160" class="img_RpFt"></p>
<p>架設的服務一多，單靠埠號去分辨服務其實不理想，而為了實現這個需求就需要 DNS 和反向代理 (Reverse Proxy)，反向代理的部份稍後再回來談，我使用 <a href="https://github.com/pi-hole/pi-hole" target="_blank" rel="noopener noreferrer">Pi-hole</a> 來擔任我的 DNS 伺服器。</p>
<p>Pi-hole 除了 DNS 另外一個功能是封鎖黑名單內的域名，如此一來就可以在 DNS 層級封鎖掉一些廣告。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="dhcp">DHCP<a href="#dhcp" class="hash-link" aria-label="Direct link to DHCP" title="Direct link to DHCP">​</a></h3>
<p>因為我會帶著主力筆電出門，如果每次都還要重新設定 DNS 同樣不夠理想，因此 DNS 能夠直接由 DHCP 發送完成設定是十分必要的，最後是成功完成了，然而過程中有遇到一些小阻礙，在此紀錄一下。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="容器內的-pi-hole-dhcp">容器內的 Pi-hole DHCP<a href="#容器內的-pi-hole-dhcp" class="hash-link" aria-label="Direct link to 容器內的 Pi-hole DHCP" title="Direct link to 容器內的 Pi-hole DHCP">​</a></h4>
<p>Pi-hole 本身就支援 DHCP，但是我是把它跑在 Docker 容器內，因此需要一些額外的處理<sup><a href="#user-content-fn-pi-hole-dhcp-24e6e4" id="user-content-fnref-pi-hole-dhcp-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>，然而在這方面我沒有成功讓容器內的 Pi-hole DHCP 正常運作。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="host-上的-isc-dhcp-server">Host 上的 <code>isc-dhcp-server</code><a href="#host-上的-isc-dhcp-server" class="hash-link" aria-label="Direct link to host-上的-isc-dhcp-server" title="Direct link to host-上的-isc-dhcp-server">​</a></h4>
<p>無奈之下我只好在主機 (Host) 上直接安裝 DHCP 伺服器，然而這讓我碰到另外一個問題：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">receive_packet failed on enx00051b52140f: Network is down</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>要排除問題必須先切到固定 IP 配置遠端進 homelab （或是直接物理訪問伺服器），把 DHCP 的 Daemon 重新啟動：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">sudo service isc-dhcp-server restart</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>問題發生的時候 Daemon 本身顯示正常，所以我也找不到其他方法偵測問題來自動重起 Daemon。</p>
<p>最後懷疑是 USB 網路卡 j5create JCE145 不夠可靠、掉封包造成 DHCP 故障。</p>
<p>至於為什麼需要掛一個 USB 網路卡是因為擔任伺服器的筆電是薄型筆電，只有三個 USB Type-C。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="樹莓派上的-isc-dhcp-server">樹莓派上的 <code>isc-dhcp-server</code><a href="#樹莓派上的-isc-dhcp-server" class="hash-link" aria-label="Direct link to 樹莓派上的-isc-dhcp-server" title="Direct link to 樹莓派上的-isc-dhcp-server">​</a></h4>
<p>剛好之前借給親戚當文書電腦的樹莓派被反還了，索性試著把 DHCP 伺服器轉移到樹莓派上，然後那個討厭的問題就再也沒有出現過了。</p>
<p>DHCP 伺服器，結案。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="traefik-與反向代理">Traefik 與反向代理<a href="#traefik-與反向代理" class="hash-link" aria-label="Direct link to Traefik 與反向代理" title="Direct link to Traefik 與反向代理">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/04_traefik-c0e3b030d71e6e9c53908519a78e5db0.webp" width="2875" height="1501" class="img_RpFt"></p>
<p>用 <a href="https://en.wikipedia.org/wiki/Apache_HTTP_Server" target="_blank" rel="noopener noreferrer">Apache</a> 或 <a href="https://nginx.org/" target="_blank" rel="noopener noreferrer">Nginx</a> 做反向代理的組態檔我都寫過，因此當我第一次<a href="https://flyskypie.github.io/posts/2024-07-27_traefik" target="_blank" rel="noopener noreferrer">接觸到 Traefik</a> 的時候是十分的驚豔，確實感受到來自開發團隊所謂的：</p>
<blockquote>
<p>We forgot what was impossible so we could build it!<sup><a href="#user-content-fn-traefik-24e6e4" id="user-content-fnref-traefik-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
</blockquote>
<p>整個流程大概是這樣的，在 Docker 新增一個網路：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">docker network create --driver=overlay --attachable traefik-public</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>開一個容器跑 Traefik 的服務然後接到剛剛開網路：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">proxy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> traefik</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">api.insecure=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">providers.docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">entrypoints.ep1.address=</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">entrypoints.ep2.address=</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">9090</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;80:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;127.0.0.1:8080:8080&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;9090:9090&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">volumes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> /var/run/docker.sock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">/var/run/docker.sock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">networks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">traefik-public</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">external</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>對於想要反向代理的服務則是在它的組態上加上反向代理的資訊像這樣：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">app1</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker.io/alpinelinux/darkhttpd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.app1.entrypoints=ep1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> traefik.http.routers.app1.rule=Host(`example.com`)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如此一來就不用每次更改規則的時候都要去修改或重新啟動反向代理的配置與伺服器，又或是目標服務因為某些原因掉線時候讓反向代理伺服器找不目標而出錯，使用上十分方便。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="oci-registry">OCI Registry<a href="#oci-registry" class="hash-link" aria-label="Direct link to OCI Registry" title="Direct link to OCI Registry">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Qm94PSIwIDAgMTI4IDEyOCI+PHBhdGggZmlsbD0iIzNhNGQ1NCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjAgOTYuOXYtOC4xYzAtMS4xLjctMS45IDEuOC0xLjloLjNjMS4xIDAgMS44LjkgMS44IDEuOXYxN2MwIDQuMS0yIDcuNC01LjYgOS41cS0yLjU1IDEuNS01LjQgMS41aC0uOGMtNC4xIDAtNy40LTItOS41LTUuNnEtMS41LTIuNTUtMS41LTUuNHYtLjhjMC00LjEgMi03LjQgNS42LTkuNVE5LjI1IDk0IDEyLjEgOTRoLjhjMi43LjEgNS4xIDEuMSA3LjEgMi45bS0xNS4xIDguNWMwIDMgMS41IDUuMiA0LjEgNi43YzEuMS42IDIuMi45IDMuNC45YzIuOSAwIDUuMS0xLjQgNi42LTMuOWMuNy0xLjIgMS0yLjQgMS0zLjhjMC0yLjYtMS4yLTQuNi0zLjMtNi4xYy0xLjMtLjktMi43LTEuNC00LjItMS40Yy0zLjIgMC01LjUgMS42LTYuOSA0LjVjLS41IDEtLjcgMi4xLS43IDMuMW0zMi4yLTExLjNoLjVjNC40IDAgNy44IDIuMSA5LjkgNmMuOSAxLjUgMS4zIDMuMiAxLjMgNXYuOGMwIDQuMS0yIDcuNC01LjYgOS41cS0yLjU1IDEuNS01LjQgMS41SDM3Yy00LjEgMC03LjQtMi05LjUtNS42cS0xLjUtMi41NS0xLjUtNS40di0uOGMwLTQuMSAyLjEtNy40IDUuNi05LjVjMS43LTEuMSAzLjYtMS41IDUuNS0xLjVtLTcuMiAxMS4zYzAgMi45IDEuNCA1IDMuOSA2LjVjMS4yLjcgMi40IDEgMy44IDFjMi45IDAgNS0xLjUgNi41LTMuOWMuNy0xLjIgMS0yLjQgMS0zLjhjMC0yLjctMS4zLTQuOC0zLjUtNi4zYy0xLjItLjgtMi42LTEuMi00LTEuMmMtMy4yIDAtNS41IDEuNi02LjkgNC41Yy0uNiAxLjEtLjggMi4yLS44IDMuMm0zNC44LTcuMmMtLjYtLjMtMS43LS40LTIuMy0uNGMtMy4yLS4xLTUuNSAxLjctNi45IDQuNWMtLjUgMS0uNyAyLS43IDMuMWMwIDMuMyAxLjcgNS42IDQuNiA3YzEuMS41IDIuNC42IDMuNi42YzEgMCAyLjUtLjYgMy40LTEuMWwuMi0uMWguOGMuOS4yIDEuNS43IDEuNSAxLjd2LjRjMCAyLjMtNC4zIDIuOS01LjkgM2MtNS43LjQtMTAtMi43LTExLjYtOC4yYy0uMy0uOS0uNC0xLjktLjQtMi45di0uOGMwLTQuMSAyLjEtNy40IDUuNi05LjVRNTkuMTUgOTQgNjIgOTRoLjhjMiAwIDMuOS42IDUuNiAxLjdsLjEuMWwuMS4xYy4yLjMuMy42LjMgMXYuNGMwIDEtLjcgMS41LTEuNiAxLjdINjdjLS41IDAtMS44LS42LTIuMy0uOG0xMi40IDIuNmMxLjUtMS41IDMtMyA0LjUtNC40Yy40LS40IDItMi4xIDIuNi0yLjFoLjhjLjkuMiAxLjUuNyAxLjUgMS43di40YzAgLjYtLjcgMS40LTEuMiAxLjhsLTIuNyAyLjdsLTQuNiA0LjdjMiAyIDQgNCA1LjkgNmwxLjYgMS43Yy4yLjIuNS40LjYuN3EuMy40NS4zLjl2LjVjLS4yLjktLjggMS42LTEuNyAxLjZoLS4zYy0uNiAwLTEuMy0uNy0xLjgtMS4xYy0uOS0uOC0xLjgtMS43LTIuNi0yLjZsLTIuOS0yLjl2NC42YzAgMS4xLS43IDEuOS0xLjggMS45SDc1Yy0xLjEgMC0xLjgtLjktMS44LTEuOVY4OC45YzAtMS4xLjctMS45IDEuOC0xLjloLjNjMS4xIDAgMS44LjggMS44IDEuOXptNDcuNi02LjZoLjRjMS4xIDAgMS45LjggMS45IDEuOWMwIDEuNi0xLjUgMi0yLjggMmMtMS43IDAtMy40IDEtNC41IDIuMmMtMS41IDEuNS0yLjEgMy4zLTIuMSA1LjR2OS4yYzAgMS4xLS43IDEuOS0xLjggMS45aC0uM2MtMS4xIDAtMS44LS45LTEuOC0xLjl2LTkuOGMwLTMuOCAxLjgtNi44IDQuOS05YzEuOC0xLjIgMy45LTEuOSA2LjEtMS45bS0yNy4xIDE4LjNjMS40LjUgMyAuNCA0LjQuMmMuNy0uMyAyLjYtMS4xIDMuMy0xaC4yYy40LjIuOC41IDEgLjljLjUgMSAuMyAyLS43IDIuNmwtLjMuMmMtMy42IDIuMS03LjUgMS44LTExLjEtLjJjLTEuNy0uOS0zLTIuMy00LTRsLS4yLS40Yy0yLjMtNC0yLTguMy42LTEyLjFjLjktMS4zIDIuMS0yLjMgMy41LTMuMWwuNS0uM2MzLjQtMiA3LjEtMS44IDEwLjYtLjFjMS45LjkgMy40IDIuMyA0LjUgNC4xbC4yLjNjLjggMS4zLS4yIDIuNS0xLjIgMy4zYy0xLjIuOS0yLjQgMi0zLjUgM3EtNC4wNSAzLjMtNy44IDYuNm0tMy4zLTIuM2w4LjUtNy4zYzEtLjggMi0xLjcgMy0yLjZjLS44LTEtMi4xLTEuNy0zLjEtMi4xYy0yLjItLjgtNC40LS42LTYuNC42Yy0yLjYgMS41LTMuOCA0LTMuNyA3YzAgMS4yLjQgMi4zIDEgMy40Yy4yLjQuNC43LjcgMU03My43IDMzLjdIODV2MTEuNWg1LjdjMi42IDAgNS4zLS41IDcuOC0xLjNjMS4yLS40IDIuNi0xIDMuOC0xLjdjLTEuNi0yLjEtMi40LTQuNy0yLjYtNy4zYy0uMy0zLjUuNC04LjEgMi44LTEwLjhsMS4yLTEuNGwxLjQgMS4xYzMuNiAyLjkgNi41IDYuOCA3LjEgMTEuNGM0LjMtMS4zIDkuMy0xIDEzLjEgMS4ybDEuNS45bC0uOCAxLjZjLTMuMiA2LjItOS45IDguMi0xNi40IDcuOGMtOS44IDI0LjMtMzEgMzUuOC01Ni44IDM1LjhjLTEzLjMgMC0yNS41LTUtMzIuNS0xNi44bC0uMS0uMmwtMS0yLjFjLTIuNC01LjItMy4xLTEwLjktMi42LTE2LjZsLjItMS43aDkuNlYzMy43aDExLjNWMjIuNGgyMi41VjExLjFoMTMuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMGFhZGEiIGQ9Ik0xMTAuMiAzNy45Yy44LTUuOS0zLjYtMTAuNS02LjQtMTIuN2MtMy4xIDMuNi0zLjYgMTMuMiAxLjMgMTcuMmMtMi44IDIuNC04LjUgNC43LTE0LjUgNC43SDE4LjRjLS42IDYuMi41IDExLjkgMyAxNi44bC44IDEuNWMuNS45IDEuMSAxLjcgMS43IDIuNmMzIC4yIDUuNy4zIDguMi4yYzQuOS0uMSA4LjktLjcgMTItMS43Yy41LS4yLjkuMSAxLjEuNWMuMi41LS4xLjktLjUgMS4xYy0uNC4xLS44LjMtMS4zLjRjLTIuNC43LTUgMS4xLTguMyAxLjNoLS42Yy0xLjMuMS0yLjcuMS00LjIuMWMtMS42IDAtMy4xIDAtNC45LS4xYzYgNi44IDE1LjQgMTAuOCAyNy4yIDEwLjhjMjUgMCA0Ni4yLTExLjEgNTUuNS0zNS45YzYuNy43IDEzLjEtMSAxNi02LjdjLTQuNS0yLjYtMTAuNS0xLjgtMTMuOS0uMSIvPjxwYXRoIGZpbGw9IiMyOGI4ZWIiIGQ9Ik0xMTAuMiAzNy45Yy44LTUuOS0zLjYtMTAuNS02LjQtMTIuN2MtMy4xIDMuNi0zLjYgMTMuMiAxLjMgMTcuMmMtMi44IDIuNC04LjUgNC43LTE0LjUgNC43aC02OGMtLjMgOS41IDMuMiAxNi43IDkuNSAyMWM0LjktLjEgOC45LS43IDEyLTEuN2MuNS0uMi45LjEgMS4xLjVjLjIuNS0uMS45LS41IDEuMWMtLjQuMS0uOC4zLTEuMy40Yy0yLjQuNy01LjIgMS4yLTguNSAxLjRsLS4xLS4xYzguNSA0LjQgMjAuOCA0LjMgMzUtMS4xYzE1LjgtNi4xIDMwLjYtMTcuNyA0MC45LTMwLjljLS4yLjEtLjMuMi0uNS4yIi8+PHBhdGggZmlsbD0iIzAyOGJiOCIgZD0iTTE4LjUgNTQuNmMuNCAzLjMgMS40IDYuNCAyLjkgOS4zbC44IDEuNWMuNS45IDEuMSAxLjcgMS43IDIuNmMzIC4yIDUuNy4zIDguMi4yYzQuOS0uMSA4LjktLjcgMTItMS43Yy41LS4yLjkuMSAxLjEuNWMuMi41LS4xLjktLjUgMS4xYy0uNC4xLS44LjMtMS4zLjRjLTIuNC43LTUuMiAxLjItOC41IDEuNGgtLjRjLTEuMy4xLTIuNy4xLTQuMS4xYy0xLjYgMC0zLjIgMC00LjktLjFjNiA2LjggMTUuNSAxMC44IDI3LjMgMTAuOGMyMS40IDAgNDAtOC4xIDUwLjgtMjZIMTguNXoiLz48cGF0aCBmaWxsPSIjMDE5YmM2IiBkPSJNMjMuMyA1NC42YzEuMyA1LjggNC4zIDEwLjQgOC44IDEzLjVjNC45LS4xIDguOS0uNyAxMi0xLjdjLjUtLjIuOS4xIDEuMS41Yy4yLjUtLjEuOS0uNSAxLjFjLS40LjEtLjguMy0xLjMuNGMtMi40LjctNS4yIDEuMi04LjYgMS40YzguNSA0LjQgMjAuOCA0LjMgMzQuOS0xLjFjOC41LTMuMyAxNi44LTguMiAyNC4yLTE0LjF6Ii8+PHBhdGggZmlsbD0iIzAwYWNkMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjguMiAzNS41SDM4djkuOGgtOS44em0uOC45aC44djguMUgyOXptMS41IDBoLjh2OC4xaC0uOHptMS41IDBoLjh2OC4xSDMyem0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0zLjEtMTIuMWg5LjhWMzRoLTkuOHptLjguOGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzIzYzJlZSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMzkuNSAzNS41aDkuOHY5LjhoLTkuOHptLjguOWguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwYWNkMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNTAuOCAzNS41aDkuOHY5LjhoLTkuOHptLjguOWguOHY4LjFoLS44em0xLjQgMGguOHY4LjFINTN6bTEuNSAwaC44djguMWgtLjh6bTEuNSAwaC44djguMUg1NnptMS41IDBoLjh2OC4xaC0uOHptMS40IDBoLjh2OC4xaC0uOHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMyM2MyZWUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUwLjggMjQuM2g5LjhWMzRoLTkuOHptLjguOGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFINTN6bTEuNSAwaC44djguMWgtLjh6bTEuNSAwaC44djguMUg1NnptMS41IDBoLjh2OC4xaC0uOHptMS40IDBoLjh2OC4xaC0uOHpNNjIgMzUuNWg5Ljh2OS44SDYyem0uOS45aC44djguMWgtLjh6bTEuNCAwaC44djguMWgtLjh6bTEuNSAwaC44djguMWgtLjh6bTEuNSAwaC44djguMWgtLjh6bTEuNCAwaC44djguMWgtLjh6bTEuNSAwaC44djguMWgtLjh6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjMDBhY2QzIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02MiAyNC4zaDkuOFYzNEg2MnptLjkuOGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzIzYzJlZSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNjIgMTNoOS44djkuOEg2MnptLjkuOGguOFYyMmgtLjh6bTEuNCAwaC44VjIyaC0uOHptMS41IDBoLjhWMjJoLS44em0xLjUgMGguOFYyMmgtLjh6bTEuNCAwaC44VjIyaC0uOHptMS41IDBoLjhWMjJoLS44eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwYWNkMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNzMuMyAzNS41aDkuOHY5LjhoLTkuOHptLjguOWguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFoLS44em0xLjQgMGguOHY4LjFoLS44em0xLjUgMGguOHY4LjFIODB6bTEuNSAwaC44djguMWgtLjh6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZDRlZWYxIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC42IDYxLjJjMS41IDAgMi43IDEuMiAyLjcgMi43cy0xLjIgMi43LTIuNyAyLjdzLTIuNy0xLjItMi43LTIuN2MuMS0xLjUgMS4zLTIuNyAyLjctMi43IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjM2E0ZDU0IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00OC42IDYxLjljLjIgMCAuNSAwIC43LjFjLS4yLjEtLjQuNC0uNC43YzAgLjQuNC44LjguOGMuMyAwIC42LS4yLjctLjRjLjEuMi4xLjUuMS43YzAgMS4xLS45IDEuOS0xLjkgMS45Yy0xLjEgMC0xLjktLjktMS45LTEuOXMuOS0xLjkgMS45LTEuOU0xIDU1LjZoMTI1LjNjLTIuNy0uNy04LjYtMS42LTcuNy01LjJjLTUgNS43LTE2LjkgNC0yMCAxLjJjLTMuNCA0LjktMjMgMy0yNC4zLS44Yy00LjIgNS0xNy4zIDUtMjEuNSAwYy0xLjQgMy44LTIxIDUuNy0yNC4zLjhjLTMgMi44LTE1IDQuNS0yMC0xLjJjMS4xIDMuNS00LjggNC41LTcuNSA1LjIiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiNiZmRiZTAiIGQ9Ik01NS44IDgwLjZjLTYuNy0zLjItMTAuMy03LjUtMTIuNC0xMi4yYy0yLjUuNy01LjUgMS4yLTguOSAxLjRjLTEuMy4xLTIuNy4xLTQuMS4xYy0xLjcgMC0zLjQgMC01LjItLjFjNi4xIDYuMSAxMy43IDEwLjggMjcuNiAxMC45YzEtLjEgMi0uMSAzLS4xIi8+PHBhdGggZmlsbD0iI2Q0ZWVmMSIgZD0iTTQ1LjkgNzIuN2MtLjktMS4zLTEuOC0yLjgtMi41LTQuM2MtMi41LjctNS41IDEuMi04LjkgMS40YzIuNCAxLjMgNS44IDIuNSAxMS40IDIuOSIvPjwvc3ZnPg==" width="128" height="128" class="img_RpFt"></p>
<p>OCI (Open Container Initiative) Registry，或是通俗的講 Docker 庫，用來存放 Docker 映像檔 (Image) 的地方。</p>
<p>我使用一個庫搭配遺一個 Web UI 的方案：</p>
<ul>
<li><a href="https://github.com/distribution/distribution" target="_blank" rel="noopener noreferrer">https://github.com/distribution/distribution</a>
<ul>
<li>9.5k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/Joxit/docker-registry-ui" target="_blank" rel="noopener noreferrer">https://github.com/Joxit/docker-registry-ui</a>
<ul>
<li>2.9k ⭐</li>
</ul>
</li>
</ul>
<p><a href="https://github.com/distribution/distribution" target="_blank" rel="noopener noreferrer">https://github.com/distribution/distribution</a></p>
<p>即使短期內沒有自己的映像檔要佈署，當成鏡像站也很好用，在 client 端的 <code>/etc/docker/daemon.json</code> 加入<sup><a href="#user-content-fn-docker-mirror-24e6e4" id="user-content-fnref-docker-mirror-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>：</p>
<div class="language-json codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-json codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;registry-mirrors&quot;: [&quot;https://&lt;my-docker-mirror-host&gt;&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這樣 pull 的時候就會留一份副本在鏡像站，下次拉取一樣的東西就可以直接從 homelab 下載。</p>
<p>這對我而言有用是因為一些條件：</p>
<ol>
<li>我對外網路是無線網路，速度本來就十分有限，能夠快取映像檔，之後重複拉取可以節省我的時間。</li>
<li>我偶爾還會處理像 GitLab 或是 SideFX Houdini 那種一個 1 GB 起跳的映像檔。</li>
<li>我使用 Docker 的時候經常會接觸不同的映像檔，會不定期清理筆電上的映像檔，不然硬碟空間會被吃光。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="npm-registry">NPM Registry<a href="#npm-registry" class="hash-link" aria-label="Direct link to NPM Registry" title="Direct link to NPM Registry">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Qm94PSIwIDAgMTI4IDEyOCI+PHBhdGggZmlsbD0idXJsKCNkZXZpY29uTm9kZWpzMCkiIGQ9Ik02Ni45NTguODI1YTYuMDcgNi4wNyAwIDAgMC02LjAzNSAwTDExLjEwMyAyOS43NmMtMS44OTUgMS4wNzItMi45NiAzLjA5NS0yLjk2IDUuMjR2NTcuOTg4YzAgMi4xNDMgMS4xODMgNC4xNjcgMi45NTggNS4yNGw0OS44MiAyOC45MzRhNi4wNyA2LjA3IDAgMCAwIDYuMDM2IDBsNDkuODItMjguOTM1YzEuODk0LTEuMDcyIDIuOTU4LTMuMDk2IDIuOTU4LTUuMjRWMzVjMC0yLjE0NC0xLjE4My00LjE2Ny0yLjk1OC01LjI0eiIvPjxwYXRoIGZpbGw9InVybCgjZGV2aWNvbk5vZGVqczEpIiBkPSJNMTE2Ljg5NyAyOS43Nkw2Ni44NDEuODI1QTggOCAwIDAgMCA2NS4zMDIuMjNMOS4yMSA5Ni43OThhNi4zIDYuMyAwIDAgMCAxLjY1NyAxLjQzbDUwLjA1NyAyOC45MzRjMS40Mi44MzMgMy4wNzYgMS4wNzIgNC42MTUuNTk1bDUyLjY2LTk2LjkyNWEzLjcgMy43IDAgMCAwLTEuMzAyLTEuMDcyIi8+PHBhdGggZmlsbD0idXJsKCNkZXZpY29uTm9kZWpzMikiIGQ9Ik0xMTYuODk4IDk4LjIyNWMxLjQyLS44MzMgMi40ODUtMi4yNjIgMi45NTgtMy44MUw2NS4wNjYuMTA4Yy0xLjQyLS4yMzgtMi45NTktLjExOS00LjI2LjcxNUwxMS4xMDQgMjkuNjM5bDUzLjYwNiA5OC4zNTVjLjcxLS4xMiAxLjU0LS4zNTggMi4yNS0uNzE1eiIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iZGV2aWNvbk5vZGVqczAiIHgxPSIzNC41MTMiIHgyPSIyNy4xNTciIHkxPSIxNS41MzUiIHkyPSIzMC40NDgiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyOS4yNDIgLTczLjcxNSlzY2FsZSg2LjE4NTIzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiMzZjg3M2YiLz48c3RvcCBvZmZzZXQ9Ii4zMyIgc3RvcC1jb2xvcj0iIzNmOGIzZCIvPjxzdG9wIG9mZnNldD0iLjYzNyIgc3RvcC1jb2xvcj0iIzNlOTYzOCIvPjxzdG9wIG9mZnNldD0iLjkzNCIgc3RvcC1jb2xvcj0iIzNkYTkyZSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzNkYWUyYiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJkZXZpY29uTm9kZWpzMSIgeDE9IjMwLjAwOSIgeDI9IjUwLjUzMyIgeTE9IjIzLjM1OSIgeTI9IjguMjg4IiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMjkuMjQyIC03My43MTUpc2NhbGUoNi4xODUyMykiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9Ii4xMzgiIHN0b3AtY29sb3I9IiMzZjg3M2YiLz48c3RvcCBvZmZzZXQ9Ii40MDIiIHN0b3AtY29sb3I9IiM1MmEwNDQiLz48c3RvcCBvZmZzZXQ9Ii43MTMiIHN0b3AtY29sb3I9IiM2NGI3NDkiLz48c3RvcCBvZmZzZXQ9Ii45MDgiIHN0b3AtY29sb3I9IiM2YWJmNGIiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZGV2aWNvbk5vZGVqczIiIHgxPSIyMS45MTciIHgyPSI0MC41NTUiIHkxPSIyMi4yNjEiIHkyPSIyMi4yNjEiIGdyYWRpZW50VHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyOS4yNDIgLTczLjcxNSlzY2FsZSg2LjE4NTIzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjA5MiIgc3RvcC1jb2xvcj0iIzZhYmY0YiIvPjxzdG9wIG9mZnNldD0iLjI4NyIgc3RvcC1jb2xvcj0iIzY0Yjc0OSIvPjxzdG9wIG9mZnNldD0iLjU5OCIgc3RvcC1jb2xvcj0iIzUyYTA0NCIvPjxzdG9wIG9mZnNldD0iLjg2MiIgc3RvcC1jb2xvcj0iIzNmODczZiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjwvc3ZnPg==" width="128" height="128" class="img_RpFt"></p>
<p>作為一個 (Web) 前端仔，自架一個私有 NPM 庫是再合理不過的事，跟 Docker 的情況相同，就算沒有要佈署東西，作為鏡像站依然有它的作用，並且同樣使用一個庫一個 Web UI 的搭配：</p>
<ul>
<li><a href="https://github.com/verdaccio/verdaccio" target="_blank" rel="noopener noreferrer">https://github.com/verdaccio/verdaccio</a>
<ul>
<li>16.8k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noopener noreferrer">https://github.com/filebrowser/filebrowser</a>
<ul>
<li>28.8k ⭐</li>
</ul>
</li>
</ul>
<p>Verdaccio 雖然有 Web UI 能夠管理私人 (private) 套件，卻不會顯示快取的套件。filebrowser 是一個簡單的服務，只要把 Volume 掛給它就能透過瀏覽器查看檔案系統的檔案以及簡單的管理，包含上傳、下載、新增資料夾、刪除、重新命名...等。</p>
<p>在網路不穩定的情況 Verdaccio 有機會快取失敗留下損壞的組態檔，這時就能從瀏覽器刪除損壞的組態讓它重新下載。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="s3-simple-storage-service-物件儲存">S3 (Simple Storage Service) 物件儲存<a href="#s3-simple-storage-service-物件儲存" class="hash-link" aria-label="Direct link to S3 (Simple Storage Service) 物件儲存" title="Direct link to S3 (Simple Storage Service) 物件儲存">​</a></h3>
<p><img decoding="async" loading="lazy" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMjU2IiB2aWV3Qm94PSIwIDAgMjU2IDI1NiI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJsb2dvc0F3c1MzMCIgeDE9IjAlIiB4Mj0iMTAwJSIgeTE9IjEwMCUiIHkyPSIwJSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFiNjYwZiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzZjYWUzZSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxwYXRoIGZpbGw9InVybCgjbG9nb3NBd3NTMzApIiBkPSJNMCAwaDI1NnYyNTZIMHoiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMTk0LjY3NSAxMzcuMjU2bDEuMjI5LTguNjUyYzExLjMzIDYuNzg3IDExLjQ3OCA5LjU5IDExLjQ3NSA5LjY2N2MtLjAyLjAxNi0xLjk1MiAxLjYyOS0xMi43MDQtMS4wMTVtLTYuMjE4LTEuNzI4Yy0xOS41ODQtNS45MjYtNDYuODU3LTE4LjQzOC01Ny44OTQtMjMuNjU0YzAtLjA0NS4wMTMtLjA4Ni4wMTMtLjEzMWMwLTQuMjQtMy40NS03LjY5LTcuNjkzLTcuNjljLTQuMjM3IDAtNy42ODcgMy40NS03LjY4NyA3LjY5czMuNDUgNy42OSA3LjY4NyA3LjY5YzEuODYyIDAgMy41NTItLjY5NSA0Ljg4Ni0xLjhjMTIuOTg2IDYuMTQ4IDQwLjA0OCAxOC40NzggNTkuNzc2IDI0LjMwMmwtNy44MDEgNTUuMDU5cS0uMDMzLjIyNS0uMDMyLjQ1MWMwIDQuODQ4LTIxLjQ2MyAxMy43NTQtNTYuNTMyIDEzLjc1NGMtMzUuNDQgMC01Ny4xMy04LjkwNi01Ny4xMy0xMy43NTRxMC0uMjItLjAyOC0uNDM1bC0xNi4zLTExOS4wNjJjMTQuMTA4IDkuNzEyIDQ0LjQ1NCAxNC44NSA3My40NzggMTQuODVjMjguOTc5IDAgNTkuMjczLTUuMTIgNzMuNDEtMTQuODAyek00OCA2NS41MjhjLjIzLTQuMjEgMjQuNDI4LTIwLjczIDc1LjItMjAuNzNjNTAuNzY0IDAgNzQuOTY2IDE2LjUxNiA3NS4yIDIwLjczdjEuNDM3Yy0yLjc4NCA5LjQ0My0zNC4xNDQgMTkuNDM0LTc1LjIgMTkuNDM0Yy00MS4xMjcgMC03Mi41MDMtMTAuMDIzLTc1LjItMTkuNDc5em0xNTYuOC4wN2MwLTExLjA4Ny0zMS43OS0yNy4yLTgxLjYtMjcuMmMtNDkuODEyIDAtODEuNiAxNi4xMTMtODEuNiAyNy4ybC4zIDIuNDE0bDE3Ljc1NCAxMjkuNjc2Yy40MjYgMTQuNTAzIDM5LjEgMTkuOTEgNjMuNTI2IDE5LjkxYzMwLjMxIDAgNjIuNTEyLTYuOTY5IDYyLjkyOC0xOS45bDcuNjY4LTU0LjA3YzQuMjY1IDEuMDIgNy43NzYgMS41NDIgMTAuNTk1IDEuNTQyYzMuNzg1IDAgNi4zNDUtLjkyNSA3Ljg5Ny0yLjc3NGMxLjI3NC0xLjUxNyAxLjc2LTMuMzU0IDEuMzk2LTUuMzFjLS44My00LjQyOC02LjA4Ny05LjIwMi0xNi43OTQtMTUuMzExbDcuNjAzLTUzLjYzOXoiLz48L3N2Zz4=" width="256" height="256" class="img_RpFt"></p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>S3 原本是 AWS 的雲端服務，更準確的用詞應該是 S3 兼容 (S3 compatible) 服務，只是因為它在雲端世界已經實質上是一種通用標準了，以下我直接簡稱 S3。</p></div></div>
<p>對我而言輕量級的東西總是有特別的吸引力，因此一開始我試著使用 <a href="https://git.deuxfleurs.fr/Deuxfleurs/garage" target="_blank" rel="noopener noreferrer">Garage</a>，但是也因為它的精簡，因此並沒有內建 Web UI，加上我對 S3 的使用也稱不上熟悉，相對複雜的安裝文件最後讓我卻步而改用比較普通的 MinIO:</p>
<ul>
<li><a href="https://github.com/minio/minio" target="_blank" rel="noopener noreferrer">https://github.com/minio/minio</a>
<ul>
<li>52k ⭐</li>
</ul>
</li>
</ul>
<p>正如我說的，我對 S3 的使用仍然缺乏經驗，自架一個 S3 實例就是為了長經驗，另一方面是目前不少網路服務會把儲存資料或檔案的部份抽象化並且把職責交給外部的 S3 服務，例如 <a href="https://github.com/iterative/dvc" target="_blank" rel="noopener noreferrer">DVC</a> 是我預計想玩的東西；前端使用 Git 風格的 CLI、後端則是把版控的大型檔案儲存在 S3 （或其他支援的儲存形式）。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="專案基礎設施">專案基礎設施<a href="#專案基礎設施" class="hash-link" aria-label="Direct link to 專案基礎設施" title="Direct link to 專案基礎設施">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="專案管理">專案管理<a href="#專案管理" class="hash-link" aria-label="Direct link to 專案管理" title="Direct link to 專案管理">​</a></h3>
<p>專案管理的部份在<a href="/blog/2025-03-15_opensource-3d-workflow">前一篇</a>文章有稍微提過，那個時候使用 WeKan。</p>
<p>目前我選擇使用 <a href="https://github.com/go-vikunja/vikunja" target="_blank" rel="noopener noreferrer">Vikunja</a>，雖然跟其他<a href="https://flyskypie.github.io/posts/2025-04-26_homelab-project-manage" target="_blank" rel="noopener noreferrer">候選</a>相比星星少而且發展時間也比較短，但是算是一個後起之秀，兩個我很看中的功能都有支援，連續流水號：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/09_vikunja-4579bc2cfe3159985360ef2a60af6907.webp" width="1440" height="832" class="img_RpFt"></p>
<p>卡片之間的關聯：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/10_vikunja-4926ede38bdf0d10b1f7a866b63f1337.webp" width="1440" height="832" class="img_RpFt"></p>
<p>並且整體的 UI/UX 也更貼近現代的風格，更具體地說，跟我平時工作使用的 Jira 有一定程度的相似度：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/08_vikunja-79f1fba937e09e3ee68a60212d9791a9.webp" width="1440" height="831" class="img_RpFt"></p>
<p>曬一下目前在 Homelab 裡紀錄的 side project:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/11_vikunja-ee34c95a86c7b284baad73d77b19c1ad.webp" width="1177" height="830" class="img_RpFt"></p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="版本控制">版本控制<a href="#版本控制" class="hash-link" aria-label="Direct link to 版本控制" title="Direct link to 版本控制">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/12_gitea-cc8b0796e1e4e5b2b2d91f39e3d39e23.webp" width="1440" height="833" class="img_RpFt"></p>
<p>我使用 <a href="https://github.com/go-gitea/gitea" target="_blank" rel="noopener noreferrer">Gitea</a>，因為它比較簡單。另外一個常見的自架選擇是 GitLab，也是俗稱的全家桶，不過對我而言過於笨重了，我有接觸過它的 Docker Image 不論是<a href="https://hub.docker.com/r/gitlab/gitlab-ce" target="_blank" rel="noopener noreferrer">官方</a>的還是<a href="https://github.com/sameersbn/docker-gitlab" target="_blank" rel="noopener noreferrer">第三方</a>的，總而言之就是笨重。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="物料管理">物料管理<a href="#物料管理" class="hash-link" aria-label="Direct link to 物料管理" title="Direct link to 物料管理">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/13_partdb-7d972bf3be553b5a897407ba51b85a3b.webp" width="1440" height="834" class="img_RpFt"></p>
<p>我使用 <a href="https://github.com/Part-DB/Part-DB-server" target="_blank" rel="noopener noreferrer">Part-DB</a> 來管理我的零件與物品，在<a href="/blog/2025-03-15_opensource-3d-workflow">前一篇</a>文章也有稍微提過。</p>
<p>實際上運作起來的樣子我在 <a href="https://www.facebook.com/wei.ji.355/posts/pfbid0k6HBivjCg3AuTgmWdKr7T2GhEPQmxuWjCAWynBhM87VKmotJSFvcUowe2F8MU1nNl" target="_blank" rel="noopener noreferrer">FB</a> 和 <a href="https://x.com/FlySkyPie/status/1890755061648630093" target="_blank" rel="noopener noreferrer">Twitter</a> 都有貼文分享過。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="pinry">Pinry<a href="#pinry" class="hash-link" aria-label="Direct link to Pinry" title="Direct link to Pinry">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/14_pinry-c45ba6ecf0cfe60a45f1640e48b81ece.webp" width="1440" height="831" class="img_RpFt"></p>
<p><a href="https://github.com/pinry/pinry" target="_blank" rel="noopener noreferrer">Pinry</a> 基本上是開源自架版本的 Pinterest。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="生活">生活<a href="#生活" class="hash-link" aria-label="Direct link to 生活" title="Direct link to 生活">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="個人影音">個人影音<a href="#個人影音" class="hash-link" aria-label="Direct link to 個人影音" title="Direct link to 個人影音">​</a></h3>
<p>我使用 Jellyfin 搭配 Filebrowser 的方式：</p>
<ul>
<li><a href="https://github.com/jellyfin/jellyfin" target="_blank" rel="noopener noreferrer">https://github.com/jellyfin/jellyfin</a>
<ul>
<li>39.1k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noopener noreferrer">https://github.com/filebrowser/filebrowser</a>
<ul>
<li>28.8k ⭐</li>
</ul>
</li>
</ul>
<p><img decoding="async" loading="lazy" src="/assets/images/15_jellyfin-8ceb33ea484c97268140643a1828908f.webp" width="1440" height="826" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/16_web-fs-9284ea0fd0bc5a168bb0bb41e4f4ac7f.webp" width="1440" height="833" class="img_RpFt"></p>
<p>其實這是我第一個使用 filebrowser 的組合，之後才套用到其他服務去的，這方法也不是我原創的，是在網路上找到的<sup><a href="#user-content-fn-jellyfin-filebrowser-24e6e4" id="user-content-fnref-jellyfin-filebrowser-24e6e4" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="資訊訂閱器">資訊訂閱器<a href="#資訊訂閱器" class="hash-link" aria-label="Direct link to 資訊訂閱器" title="Direct link to 資訊訂閱器">​</a></h3>
<p><img decoding="async" loading="lazy" src="/assets/images/17_rss-0e70a861464b71e7df6413125a46802a.webp" width="1440" height="830" class="img_RpFt"></p>
<p>RSS (Really Simple Syndication) 是一種把網站內容建立摘要的協定，像<a href="https://flyskypie.github.io/blog/rss.xml" target="_blank" rel="noopener noreferrer">這樣</a>，接著其他人就可以定期的去撈 (Creep) 這個文件，有更新的話就會知道，達到類似訂閱的效果，不過定期撈資料這個動作一般交由特定的軟體完成。</p>
<p>我目前是使用 <a href="https://tt-rss.org/" target="_blank" rel="noopener noreferrer">Tiny Tiny RSS</a>，關於其他沒使用到的候選我放在另外一個<a href="https://flyskypie.github.io/posts/2025-04-27_homelab-rss" target="_blank" rel="noopener noreferrer">貼文</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="網頁備份器">網頁備份器<a href="#網頁備份器" class="hash-link" aria-label="Direct link to 網頁備份器" title="Direct link to 網頁備份器">​</a></h3>
<p>不知道你有沒有使用過 <a href="https://web.archive.org/" target="_blank" rel="noopener noreferrer">Wayback Machine</a> 呢？這是一個快取網站，讓人可以調閱那些已經不存在的網頁的網站。<a href="https://github.com/ArchiveBox/ArchiveBox" target="_blank" rel="noopener noreferrer">ArchiveBox</a> 就是它的自架版本。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="電子書">電子書<a href="#電子書" class="hash-link" aria-label="Direct link to 電子書" title="Direct link to 電子書">​</a></h3>
<p>其實我沒有看電子書的習慣，出於方便歸檔跟調閱的目的架架看的，目前使用 <a href="https://github.com/Kareadita/Kavita" target="_blank" rel="noopener noreferrer">Kavita</a>。跟 Jellyfin 一樣我搭配了一個 <a href="https://github.com/filebrowser/filebrowser" target="_blank" rel="noopener noreferrer">Filebrowser</a> 使用。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="開發工具">開發工具<a href="#開發工具" class="hash-link" aria-label="Direct link to 開發工具" title="Direct link to 開發工具">​</a></h2>
<p>目前就是放一些上網也能用的平台，但是還是自己架一個以防萬一。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="虛擬白板">虛擬白板<a href="#虛擬白板" class="hash-link" aria-label="Direct link to 虛擬白板" title="Direct link to 虛擬白板">​</a></h3>
<p><a href="https://github.com/excalidraw/excalidraw" target="_blank" rel="noopener noreferrer">Excalidraw</a>是一個開源的協作虛擬白板，包含讓遠端工作者進行線上腦力激盪 (Brainstorming) 之類的用例。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="open-apiasynapi-編輯器">Open API/AsynAPI 編輯器<a href="#open-apiasynapi-編輯器" class="hash-link" aria-label="Direct link to Open API/AsynAPI 編輯器" title="Direct link to Open API/AsynAPI 編輯器">​</a></h3>
<p><a href="https://github.com/swagger-api/swagger-editor" target="_blank" rel="noopener noreferrer">Swagger Editor</a></p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-pi-hole-dhcp-24e6e4">
<p>Docker DHCP and Network Modes - Pi-hole documentation. Retrieved 2025-04-26 from <a href="https://docs.pi-hole.net/docker/dhcp/" target="_blank" rel="noopener noreferrer">https://docs.pi-hole.net/docker/dhcp/</a> <a href="#user-content-fnref-pi-hole-dhcp-24e6e4" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-traefik-24e6e4">
<p>Traefik 2.0 - The Wait is Over! Retrieved 2025-04-26 from <a href="https://traefik.io/blog/traefik-2-0-6531ec5196c2/" target="_blank" rel="noopener noreferrer">https://traefik.io/blog/traefik-2-0-6531ec5196c2/</a> <a href="#user-content-fnref-traefik-24e6e4" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-docker-mirror-24e6e4">
<p>Mirror | Docker Docs. Retrieved 2025-04-26 from <a href="https://docs.docker.com/docker-hub/image-library/mirror/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/docker-hub/image-library/mirror/</a> <a href="#user-content-fnref-docker-mirror-24e6e4" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-jellyfin-filebrowser-24e6e4">
<p>Upload file from the app or site · Jellyfin Feature Requests. Retrieved 2025-04-27 from <a href="https://features.jellyfin.org/posts/543/upload-file-from-the-app-or-site#comment-5160" target="_blank" rel="noopener noreferrer">https://features.jellyfin.org/posts/543/upload-file-from-the-app-or-site#comment-5160</a> <a href="#user-content-fnref-jellyfin-filebrowser-24e6e4" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/homelab">homelab</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="先講結論，整個工作流程大致如下："><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2025-03-15_opensource-3d-workflow">一種開源工具鏈嘗試，以最近幫風機製作角座為例</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2025-03-15T00:00:00.000Z" itemprop="datePublished">March 15, 2025</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p>先講結論，整個工作流程大致如下：</p>
<ol>
<li>待辦事項與專案管理<!-- -->
<ul>
<li>在 <a href="https://github.com/wekan/wekan" target="_blank" rel="noopener noreferrer">WeKan</a> 新增卡片（待辦事項）</li>
</ul>
</li>
<li>測量<!-- -->
<ul>
<li>在 <a href="https://gitlab.com/inkscape/inkscape" target="_blank" rel="noopener noreferrer">Inkscape</a> 簡單繪製風機尺寸、鎖點跟鋁擠鎖點的相對位置。</li>
</ul>
</li>
<li>建模/製圖<!-- -->
<ul>
<li>用 <a href="https://github.com/FreeCAD/FreeCAD" target="_blank" rel="noopener noreferrer">FreeCAD</a> 建模，輸出 STEP 檔。</li>
</ul>
</li>
<li>切片<!-- -->
<ul>
<li>用 <a href="https://github.com/prusa3d/PrusaSlicer" target="_blank" rel="noopener noreferrer">PrusaSlicer</a> 匯入 STEP 切片後輸出 G-code 再拿給 3D 列印機列印。</li>
</ul>
</li>
<li>物料管理<!-- -->
<ul>
<li>在 <a href="https://github.com/Part-DB/Part-DB-server" target="_blank" rel="noopener noreferrer">Part-DB</a> 對該物件建檔，上傳實物縮圖以及 FreeCAD 原始檔（<code>FCStd</code>）。</li>
</ul>
</li>
</ol>
<p>接著再來談整件事情的來龍去脈。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="背景-context">背景 (Context)<a href="#背景-context" class="hash-link" aria-label="Direct link to 背景 (Context)" title="Direct link to 背景 (Context)">​</a></h2>
<p>我的置物架基礎結構是由鋁擠型、鎖管與洞洞板構成的，因此我可以很輕易的外掛東西上去。去年末入手了一台 3D 列印機（熔融沉積），為了避免列印的時候吸毒氣就放了一台（浴室用）抽風機，臨時草草安裝上去就變成這樣：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_fan-94b7db0c0bd69331512e4bdf19fb3aa5.webp" width="1024" height="678" class="img_RpFt"></p>
<p>至於抽風機外面的防塵網我是怎麼做的，那又是另外一個故事了。</p>
<p>最近 (2025-03-09) 心血來潮想說把它整頓一下。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="待辦事項與專案管理">待辦事項與專案管理<a href="#待辦事項與專案管理" class="hash-link" aria-label="Direct link to 待辦事項與專案管理" title="Direct link to 待辦事項與專案管理">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/02_wekan-9fcc2d312ff9b3b08d4c380bfec88894.webp" width="1440" height="833" class="img_RpFt"></p>
<p>其實開 card 這件事在整個流程裡面根本算不上什麼值得一提的事情，只是因為最近開始搞所謂的 homelab，並且在上面跑了一堆服務，WeKan 也是其中之一。主要目的是為了更有組織的管理我那為數眾多的 Side Project 、待辦事項與因為閃亮事物症候群許的新願望。</p>
<p><a href="https://en.wikipedia.org/wiki/Kanban_(development)" target="_blank" rel="noopener noreferrer">Kanban</a> 類型的軟體在軟體開發上是一種十分常見的工具，是工作流程中十分重要的一環，因此我覺得值得稍微提一下。</p>
<p>WeKan 對我而言也只是嘗試的階段，在這之前在工作上使用過 Jira, OpenProject 和 GitLab Board；個人則是嘗試過 Trello 和 Planka，並沒有特別推薦哪一款的意思。</p>
<p>不過讓我願意嘗試 WeKan 而不是使用之前有過用過得 Planka 主要原因是讓<a href="https://github.com/wekan/wekan/pull/3935" target="_blank" rel="noopener noreferrer">卡片顯示人類可讀的連續編號</a>，Trello 和 Planka 的定位比較接近「電子化的 KanBan （便條紙）」，個人使用或是對於比較不是嚴謹的用例已經十分足夠，但是對於工程管理或商業使用就有管理工單（訂單、Ticket, Issue）的需求，因此每一個卡片必須要有方便人類辨識的 ID。</p>
<p>Jira, OpenProject 和 GitLab Board 的卡片都有 數字編號，仔細觀察 Trello 和 Planka 的話會則發現它們則都是使用類似雪花 ID 的方式來區分卡片，細節就不在此多提，因為那又是另外一個故事了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="測量">測量<a href="#測量" class="hash-link" aria-label="Direct link to 測量" title="Direct link to 測量">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/03_inkscape-f6d73dbdf3d32a35e216b7f4005d5a9d.webp" width="1440" height="923" class="img_RpFt"></p>
<p>其實就只是拿尺量東西然後寫下來而已，只是這幾年有在訓練自己盡量把書寫的動作電子化降低對傳統紙筆的依賴，來讓自己的工作流程更一致。Inkscape 雖然作為向量繪圖軟體，不過這幾年我更常把它當成整理思緒的電子白板/紙使用。</p>
<p>將工作流程的要素統一成電子媒介，最具體的例子如下圖所示：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/04_inkscape-7c16e1d733fe5b9b8cb11d38fe814f5a.webp" width="1440" height="919" class="img_RpFt"></p>
<p>迭代過程在 FreeCAD 畫的內容可以截圖後放進原本的「筆記」內，如此一來把複數來源的資訊展開在同一個視覺空間內。我在工作上經歷的 UI 開發也一樣，從一開始溝通用的線稿、第一個實做的版本到後續修改的規格與需求都可以用類似的方法在 Inkscape 內的視覺空間中展開來幫助思考或與其他人溝通。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="建模製圖">建模/製圖<a href="#建模製圖" class="hash-link" aria-label="Direct link to 建模/製圖" title="Direct link to 建模/製圖">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/05_freecad-ab50d7f95979741e4a1f59ea3dc5414d.webp" width="1440" height="916" class="img_RpFt"></p>
<p>FreeCAD 也算是我的老朋友了，作為工程繪圖/參數化建模軟體，大學時使用 Solidworks 的一部分經驗可以轉移過來，使用的細 節就不在此多提了。</p>
<p>話說回來，<a href="https://en.wikipedia.org/wiki/ISO_10303-21" target="_blank" rel="noopener noreferrer">STEP</a> 格式反而是我畢業之後才接觸的，有別於 STL 儲存三角面資訊，STEP 檔案能夠儲存參數資訊。用平面圖檔比喻的話，STEP 和 STL 的差異就像是 SVG 和 PNG 的差異。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="切片">切片<a href="#切片" class="hash-link" aria-label="Direct link to 切片" title="Direct link to 切片">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/06_prusaslicer-89f935ecf912e666d2b42966eb74a991.webp" width="1440" height="922" class="img_RpFt"></p>
<p>切片軟體顧名思義就是把 3D 模型切成一層層的指令交給 3D 列印機作業。大學的時候比較常使用 Cura，但是畢業之後就沒有在使用 3D 列印了，直到最近重返 3D 列印使用者的身份便花點時間做功課，最後選擇 GitHub 星星數最高的 PrusaSlicer，這裡放個當時做的筆記供參考：</p>
<ul>
<li><a href="https://github.com/prusa3d/PrusaSlicer" target="_blank" rel="noopener noreferrer">https://github.com/prusa3d/PrusaSlicer</a>
<ul>
<li>7.7k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/SoftFever/OrcaSlicer" target="_blank" rel="noopener noreferrer">https://github.com/SoftFever/OrcaSlicer</a>
<ul>
<li>7.1k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/Ultimaker/Cura/" target="_blank" rel="noopener noreferrer">https://github.com/Ultimaker/Cura/</a>
<ul>
<li>6.1k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/supermerill/SuperSlicer" target="_blank" rel="noopener noreferrer">https://github.com/supermerill/SuperSlicer</a>
<ul>
<li>4.1k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/slic3r/Slic3r" target="_blank" rel="noopener noreferrer">https://github.com/slic3r/Slic3r</a>
<ul>
<li>3.3k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/bambulab/BambuStudio" target="_blank" rel="noopener noreferrer">https://github.com/bambulab/BambuStudio</a>
<ul>
<li>2.1k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/MatterHackers/MatterControl" target="_blank" rel="noopener noreferrer">https://github.com/MatterHackers/MatterControl</a>
<ul>
<li>458 ⭐</li>
</ul>
</li>
</ul>
<p>請留意星星數與現在實際值可能有落差。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="迭代">迭代<a href="#迭代" class="hash-link" aria-label="Direct link to 迭代" title="Direct link to 迭代">​</a></h2>
<blockquote>
<p>工程第一守則，不要第一次就用真才實料，永遠先做小規模測試或模擬。</p>
<p>Fredi Cameron from 拼湊夢想 (Spare Parts)</p>
</blockquote>
<p>畢竟我不清楚整個過程的測量誤差與製造誤差為何，因此我並沒有一次就把整個模型畫出來，而是先印一些確定相對位置與尺寸的樣品出來。並且不出意外得出意外了，樣品的孔位有一點點落差，只好把整顆風機從架子上拆下來仔細量一次。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/07_sample-ddb0d218fd8913bcfcd4f20d49b5fcd4.webp" width="1024" height="768" class="img_RpFt"></p>
<p>透過把鎖點放在厚紙板上再用筆作記號的方式，把孔位複製到紙上再測量方式取得中心孔與邊界間距。過去 DIY 的經驗告訴我永遠不要吝嗇製作治具，剛好我手邊有很多卡片大小的厚紙板沒什麼好吝嗇的。至於那一疊厚紙板是哪裡來的則又是另外一段故事了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="物料管理">物料管理<a href="#物料管理" class="hash-link" aria-label="Direct link to 物料管理" title="Direct link to 物料管理">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/08_partdb-8a573c838e42d3104b1758106695cacf.webp" width="1440" height="830" class="img_RpFt"></p>
<p>PartDB 不只允許對物品建檔並以及紀錄位置與數量等資訊，還有附件功能上傳規格書、使用者手冊...等檔案，同時也是個適合放置 CAD 檔案與藍圖的地方。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="產出">產出<a href="#產出" class="hash-link" aria-label="Direct link to 產出" title="Direct link to 產出">​</a></h2>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="1024" height="746" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/10_result-27fde28348fefff53eddcd9686e1a060.webp" width="1024" height="606" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/11_result-91ac50e61986254e30fe8bbed005abf7.webp" width="1024" height="638" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/12_result-42898ddf0efd006dc1940daae25a84f2.webp" width="1024" height="647" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="結論">結論<a href="#結論" class="hash-link" aria-label="Direct link to 結論" title="Direct link to 結論">​</a></h2>
<p>正如標題所說的，以上只是一個基於個人使用情境的「嘗試」，不能說是什麼經過審慎考慮或是實務考驗的流程。加上工具的選擇除了一點隨便之外還帶有個人偏好的成份，比如說有些人就是喜歡 Jira 那種整套還跟一堆東西整合的平台，但是我個人就是喜歡能夠自己架設而且不會太吃重的軟體。</p>
<p>另外一方面算是當作開源軟體的火力展示，大部分軟體其實都能在開源領域找到對標的替代方案，只是商業軟體通常會提供一些高度整合的使用體驗來讓消費者使用起來比較流暢，再加上增加對競品摩擦力的一些巧思來把消費者圈養在自家產品生態系的舒適圈內...喔，離題了。</p>
<p>總之我最近的策略就是，比起單純用檔案系統管理檔案與資料，不如用各種自架服務，把檔案或資料放在最適合的服務上，專案管理視角的就丟 <a href="https://github.com/topics/kanban" target="_blank" rel="noopener noreferrer">Kanban</a>、物料管理就找 <a href="https://github.com/topics/inventory-management-system" target="_blank" rel="noopener noreferrer">WMS (Warehouse Management System)</a> 相關的...</p>
<p><img decoding="async" loading="lazy" src="/assets/images/13_homelab-1bca8ccd4b22a8c73df72580fc5085e7.webp" width="1440" height="829" class="img_RpFt"></p>
<p>喔，關於我最近在玩的 Homelab，那又是另外一個故事了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="到底有多少故事"><del>到底有多少故事</del><a href="#到底有多少故事" class="hash-link" aria-label="Direct link to 到底有多少故事" title="Direct link to 到底有多少故事">​</a></h2>
<p>其實過去幾個月也有斷斷續續花時間在幾個主題上，不過都還不到足夠完整寫文章的程度，不然就是這篇文章寫到一半才發現有些事情我之前沒有在 Blog 上提過，就變成這樣了。ლ(́´・ω・`ლ)</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/freecad">freecad</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/model">model</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/opensource">opensource</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="背景"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-11-04_blender-anatomy">從 Blender 開始的解剖學筆記 - 骨骼篇 - 啟程</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-11-04T00:00:00.000Z" itemprop="datePublished">November 4, 2024</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_mpuI" id="背景">背景<a href="#背景" class="hash-link" aria-label="Direct link to 背景" title="Direct link to 背景">​</a></h2>
<p>說來話長，總之我突然想印一個人體骨骼模型，然後就在 Thingiverse 找到了這個：</p>
<p><a href="https://www.thingiverse.com/thing:6326069" target="_blank" rel="noopener noreferrer">Anatomically Correct Human Skeleton</a></p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_thingiverse-41f9dc953a09f9031c0262c885018c66.webp" width="1440" height="828" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="準備">準備<a href="#準備" class="hash-link" aria-label="Direct link to 準備" title="Direct link to 準備">​</a></h2>
<p>下載之後解壓縮把 <code>files/</code> 資料夾下的 <code>.stl</code> 全部拉進去 Blender，接著把尺寸改成 <code>0.1</code>：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_blender-import-7eb7d3ad6b087c953b83df905eb08aae.webp" width="1440" height="919" class="img_RpFt"></p>
<p>噹啷～這樣我們就有一個接近真實解剖學條件的人體骨骼在 Blender 內了：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_blender-import-d0619b85e73ac43e567b2e1f42241f37.webp" width="1440" height="923" class="img_RpFt"></p>
<p>除了幾個 (如： <code>Mandible</code>, <code>Skeleton</code>) 模型狀況不是很好或是覆蓋全身，其他骨頭幾乎都可以選擇之後在列表中看到它的名稱：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/04_Skeleton-a457078f4dc96f39f1469699c4bc9dc1.webp" width="1440" height="921" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/05_Mandible-24713e5d587142caa82bed343e8de04a.webp" width="1440" height="922" class="img_RpFt"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/blender">blender</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="前情提要"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-08-31_polis-dev-log">Polis 專案研究進度</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-08-31T00:00:00.000Z" itemprop="datePublished">August 31, 2024</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="#前情提要" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<ul>
<li>TKOH (The Key Of Huanche) 是我的一個 side project<!-- -->
<ul>
<li>目前最大的 side project</li>
<li>更多細節請見：<a href="/docs/the-key-of-huanche/">文件</a>或是 <a href="https://flyskypie.github.io/sideprojects-wiki/#Project%3A%E7%92%B0%E9%A9%85%E4%B9%8B%E9%91%B0" target="_blank" rel="noopener noreferrer">Wiki</a></li>
</ul>
</li>
<li>Hakoniwa  是我的一個 side project<!-- -->
<ul>
<li>TKOH 的子專案</li>
<li>更多細節請見：<a href="/docs/the-key-of-huanche/hakoniwa/">文件</a>或是 <a href="https://flyskypie.github.io/sideprojects-wiki/#Project%3AHakoniwa" target="_blank" rel="noopener noreferrer">Wiki</a></li>
</ul>
</li>
<li>Polis 是我的一個 side project<!-- -->
<ul>
<li>Hakoniwa 的子專案</li>
<li>更多細節請見<a href="/blog/2023-05-14_project-polis">之前發過的文章</a></li>
<li><a href="/blog/2023-08-05_polis-progress">上次的開發日誌（進度與回顧）</a></li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="進度">進度<a href="#進度" class="hash-link" aria-label="Direct link to 進度" title="Direct link to 進度">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/01_demo-c62e96bf264bfa8cd7e00dfe103350be.webp" width="720" height="419" class="img_RpFt"></p>
<p>先講結論，今天 (2024-08-31) 我終於把這幾個要素組裝在一起了：</p>
<ul>
<li>Three.js</li>
<li>後端渲染/無頭 (Headless) 渲染</li>
<li>ECS (Entity Component System)</li>
<li>開發用瀏覽窗口</li>
</ul>
<p>實作：<a href="https://github.com/FlySkyPie/polis-node/commit/aca8f24012848de30bef2b17cd07c1f2b32fc53b" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/polis-node/commit/aca8f24012848de30bef2b17cd07c1f2b32fc53b</a></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="技術選擇與技術堆疊的困難">技術選擇與技術堆疊的困難<a href="#技術選擇與技術堆疊的困難" class="hash-link" aria-label="Direct link to 技術選擇與技術堆疊的困難" title="Direct link to 技術選擇與技術堆疊的困難">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="3d-x-javascript">3D x Javascript<a href="#3d-x-javascript" class="hash-link" aria-label="Direct link to 3D x Javascript" title="Direct link to 3D x Javascript">​</a></h3>
<p>不論是在工作上還是 side project，我其實經歷不少機會去使用不熟悉的語言，因此我意識到在原型開發 (Prototyping) 這一目標上，熟悉語言的經驗有時候能夠彌補語言特性帶來的缺陷，舉例來說：使用熟悉的語言因此知道某些需求需要使用特定的實作或是對於某些需求基於語言限制必須要使用某種 by pass；比起使用不熟悉的語言而在未知中摸索甚至踩到語言特性的坑。時間並沒有使用在開發上反而花在學習與試錯。</p>
<p>用 Javascript 來寫 3D 的東西聽起來很反直覺，但是我手上有的卡牌就是：</p>
<ul>
<li>接近 4 年的前端 (Javascript/Typescript) 開發經驗</li>
<li>工作或業餘經手過超過 5 個以上的 Three.js 專案</li>
</ul>
<p>比起重新學習另外一種技術棧 (Tech Stack)，使用熟悉的工具不只可以加速開發，更可以在過程中累積的經驗值回過來貢獻在工作上使用的技能。</p>
<p>不過這是基於我的手牌採取的遊戲策略，並不見得適合其他人。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="後端-x-3d-threejs">後端 X 3D (Three.js)<a href="#後端-x-3d-threejs" class="hash-link" aria-label="Direct link to 後端 X 3D (Three.js)" title="Direct link to 後端 X 3D (Three.js)">​</a></h3>
<p>很明顯的，WebGL 是為了網頁瀏覽器而生的東西，而 Three.js 更是建立在此之上的抽象層，本身並不支援在 Node.js 這樣的後端環境執行。舉例來說，在 Web API 的設計之中 <code>WebGLRenderingContext</code> 是和 <code>&lt;canvas&gt;</code> 元素榜定的，但是後端的環境中根本沒有 DOM 實做 <code>&lt;canvas&gt;</code>。</p>
<p>另外一個問題是後端環境是無頭 (headless) 的，在缺乏視覺反饋的情況下，很難對程式進行 debug，因此一個可以「窺見」程式內 3D 渲染結果的手段是十分必要的。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="開發用瀏覽窗口">開發用瀏覽窗口<a href="#開發用瀏覽窗口" class="hash-link" aria-label="Direct link to 開發用瀏覽窗口" title="Direct link to 開發用瀏覽窗口">​</a></h3>
<p>「如何窺見 3D 的後端程式」這件事情產生另外一個問題，就是如何實現快速（低延遲）的向外串流？</p>
<p>為了避免開發與維護另外一個讀取並顯示串流的 Client 端，基於 Web 的方案對我而言是相對合理的。於是就得出了「使用 WebRTC 來串流用於 debug 的畫面」這個結論。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="ecs-x-threejs">ECS x Three.js<a href="#ecs-x-threejs" class="hash-link" aria-label="Direct link to ECS x Three.js" title="Direct link to ECS x Three.js">​</a></h3>
<p>ECS 是我計畫用來管理複雜遊戲環境的架構，不過當它需要跟其他函式庫組合使用就會產生一些問提，諸如：</p>
<ul>
<li>Three.js</li>
<li>Rapier.js</li>
</ul>
<p>原因在於大部分的 Javascript ECS 實現把重心放在「密集的資料」這個 ECS 特性，因此這些函式庫只能用來儲存諸如浮點數、整數之類的基本資料型別，並不能方便的和其他基於 OOP 邏輯的函式庫組合使用，使用那些 ECS 函式庫的邏輯再現其他函式庫的功能顯得不合乎成本。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="回顧">回顧<a href="#回顧" class="hash-link" aria-label="Direct link to 回顧" title="Direct link to 回顧">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="串流">串流<a href="#串流" class="hash-link" aria-label="Direct link to 串流" title="Direct link to 串流">​</a></h3>
<p>串流算是第一個急著解決的問題，畢竟就算我能在後端渲染的東西，只要不能把畫面丟出來我就不能 debug。</p>
<p>在考慮了 FLV (Flash Video), RTMP (Real-Time Messaging Protocol), HLS (HTTP Live Streaming) 和 MPEG-DASH (Dynamic Adaptive Streaming over HTTP) 等方案之後，我選擇使用 WebRTC。</p>
<p>考慮延遲以及瀏覽器支援兩個要素下，WebRTC 都是一個比較合理的方案。</p>
<p><img decoding="async" loading="lazy" alt="https://www.wowza.com/wp-content/uploads/latency-continuum-2021-with-protocols-700x300-1.png" src="/assets/images/02_latency-3fbcd9361c5da837d56376698fa66149.webp" width="700" height="380" class="img_RpFt"></p>
<p>瀏覽器上的 Javascript 並沒有能力建立 TCP Socket，大部分網路連線需求都是由 HTTP 完成，即便是 WebSocket 實際上也是建立在 HTTP 連線之上。而 WebRTC 則是會由瀏覽器實做，實際上會依情況使用 TCP 或 UDP 連線。在這先天特性之下，WebRTC 能夠比其他基於 HTTP 的手段來得低延遲。</p>
<p>去年 (2023) 在我短暫的學習串流相關技術之後，</p>
<ul>
<li><a href="https://github.com/FlySkyPie/Node-Media-Server-ts" target="_blank" rel="noopener noreferrer">Node-Media-Server-ts</a>
<ul>
<li>學習 RTMP 的中間產物。</li>
</ul>
</li>
</ul>
<p>我使用 WebRTC 寫了一個小範例。</p>
<ul>
<li><a href="/blog/2023-08-07_webrtc-learning-note">WebRTC 學習筆記</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="後端渲染">後端渲染<a href="#後端渲染" class="hash-link" aria-label="Direct link to 後端渲染" title="Direct link to 後端渲染">​</a></h3>
<p>網路上關於如何在後端 (Node.js) 渲染 Three.js 的方案並沒有很多，其中還不乏用重新實做 WebGL 兼容界面然後用 CPU 算圖的方法。甚至一度考慮使用 Deno，不過最後也做罷了，這些細節在我<a href="/blog/2023-08-05_polis-progress">前一篇文章</a>都有紀錄。</p>
<p>在 2023-08-16 的時候我試著用 Electron <a href="https://github.com/FlySkyPie/polis-node/tree/755be48e5180a6e56fd42969b06977a8f51c0678" target="_blank" rel="noopener noreferrer">實做伺服器</a>，</p>
<ul>
<li><a href="/blog/2023-08-08_electron-learning-note">Electron 學習 筆記 - IPC</a></li>
</ul>
<p>不過把資訊從 Browser 在 Node.js 之間轉發是一件很麻煩的事情，大大的提高了程式的複雜度。引此在完成測試之後就沒有什麼進展了。</p>
<p>之後 (~2024-08) 有試著嘗試了這裡提供的範例：</p>
<p><a href="https://sbcode.net/threejs/ssr-branch/" target="_blank" rel="noopener noreferrer">SSR - Three.js Tutorials</a></p>
<p>它使用 <a href="https://github.com/stackgl/headless-gl" target="_blank" rel="noopener noreferrer">headless-gl</a> 實現後端渲染，不過它的前置作業相對複雜，除了要用 <a href="https://github.com/jsdom/jsdom" target="_blank" rel="noopener noreferrer">jsdom</a> 補足 DOM 的實作之外，光是安裝套件就要處理 <code>node-gyp</code> 帶來的一些問題，因此沒有完全說服我使用它。</p>
<p>我在網路上瞎逛的時候發現了 <a href="https://github.com/node-3d/3d-core-raub" target="_blank" rel="noopener noreferrer">node-3d/3d-core-raub</a>，它提供另外一種簡單粗暴的解法：把 GLFW binding 到 Node.js 上去再加上 Three.js 的兼容實作。能夠在 Linux 開啟一個視窗顯示渲染結果更是大大的減少專案初期的阻礙。</p>
<p>跟線有的 WebRTC 實作整合之後，確發現畫面不太正常，起初我以為是延遲的問題，於是想在裡面 Three.js 裡面放個時鐘，沒想到卻是另外一個坑。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="threejs-x-text">Three.js x Text<a href="#threejs-x-text" class="hash-link" aria-label="Direct link to Three.js x Text" title="Direct link to Three.js x Text">​</a></h3>
<p>在 Three.js 裡面渲染文字並不是一個被非常重視的功能，因為瀏覽器上已經有 HTML + CSS 這樣一個方便顯示文字的方法了。</p>
<p>在經過一番折騰之後，我得到了一個像這樣的問題清單：</p>
<ul>
<li><a href="https://github.com/Experience-Monks/three-bmfont-text" target="_blank" rel="noopener noreferrer">three-bmfont-text</a>
<ul>
<li>沒有型別 定義</li>
<li><code>THREE is not defined</code></li>
</ul>
</li>
<li><a href="https://github.com/protectwise/troika" target="_blank" rel="noopener noreferrer">troika-three-text</a>
<ul>
<li>仰賴 <code>XMLHttpRequest</code> 和 <code>window.document</code></li>
</ul>
</li>
<li><a href="https://threejs.org/docs/#examples/en/geometries/TextGeometry" target="_blank" rel="noopener noreferrer">TextGeometry</a>
<ul>
<li>花費 60ms 建立新的 Geometry</li>
</ul>
</li>
<li><a href="https://github.com/vasturiano/three-spritetext" target="_blank" rel="noopener noreferrer">three-spritetext</a>
<ul>
<li>仰賴 <code>ctx.measureText</code></li>
<li><code>TypeError: ctx.measureText is not a function</code></li>
</ul>
</li>
<li><a href="https://github.com/gamestdio/three-text2d" target="_blank" rel="noopener noreferrer">three-text2d</a>
<ul>
<li><code>TypeError: Class constructor Object3D cannot be invoked without &#x27;new&#x27;</code></li>
<li>build target 的語法過於老舊造成</li>
<li>仰賴 <code>document</code></li>
</ul>
</li>
<li><a href="https://github.com/felixmariotto/three-mesh-ui" target="_blank" rel="noopener noreferrer">three-mesh-ui</a>
<ul>
<li><code>ctx.canvas.width = 1;</code></li>
<li><code>TypeError: Cannot set properties of undefined (setting &#x27;width&#x27;)</code></li>
</ul>
</li>
</ul>
<p>在電腦圖學中（特別是 3D 遊戲領域），有一門叫做 Texture Atlas 的技術，就是把文字先烘培成貼圖與幾何資訊，在程式中再把這兩者組合起來在顯示卡的 context 中顯示文字。</p>
<p>這個過程需要仰賴額外的工具（例如：<a href="https://www.angelcode.com/products/bmfont/" target="_blank" rel="noopener noreferrer">Angelcode’s bmfont</a>），或是由遊戲引擎內建的工具承擔（例如：Unity3D, Godot），因此在 Three.js 開發圈更常用的手段是在 runtime 時產生這些貼圖，而過程仰賴瀏覽器的渲染引擎對文字進行運算及排版，而使用這種手段的函式庫會無法在後端 (Node.js) 環境中  使用。</p>
<p>這麼一看 <code>three-bmfont-text</code> 似乎是最有潛力的選擇，最後我透過：</p>
<ul>
<li>使用 Typescript 重構<!-- -->
<ul>
<li><a href="https://github.com/FlySkyPie/three-bmfont-text" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/three-bmfont-text</a></li>
</ul>
</li>
<li>使用 <a href="https://github.com/SilenceLeo/snowb-bmf" target="_blank" rel="noopener noreferrer">SilenceLeo/snowb-bmf</a> 製作與輸出該 <code>three-bmfont-text</code> 要求的檔案格式（貼圖與幾何資訊）。</li>
</ul>
<p>解決了問題並且完成一個數位時鐘的實作：</p>
<ul>
<li><a href="https://github.com/FlySkyPie/three-digital-clock" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/three-digital-clock</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="ecs">ECS<a href="#ecs" class="hash-link" aria-label="Direct link to ECS" title="Direct link to ECS">​</a></h3>
<p>在正式開始之前，我選擇了一個小題目來練手：</p>
<ul>
<li><a href="/blog/2023-09-24_a-journey-about-learning-ecs">ECS 學習與 aimAndShoot 重構之旅</a></li>
</ul>
<p>其實原本想再練一個題目的，</p>
<ul>
<li><a href="https://github.com/FlySkyPie/three-fps-ts" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/three-fps-ts</a></li>
</ul>
<p>只是從 <a href="https://github.com/mohsenheydari/three-fps" target="_blank" rel="noopener noreferrer">mohsenheydari/three-fps</a> fork 之後用 Typescript 重構、更新 Ammo.js 之後，發現它的實作邏輯有點複雜（物件互相呼叫的時序），就暫時放棄嘗試把它轉成 ECS 了。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="monorepo">Monorepo<a href="#monorepo" class="hash-link" aria-label="Direct link to Monorepo" title="Direct link to Monorepo">​</a></h3>
<p>試著使用 pnpm 提供的 monorepo 功能來整合前後端的專案，大大的提高了開發體驗。沒有使用 nx 的原因是它看起來配置較為複雜，學習成本是一個阻礙。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="下一步">下一步<a href="#下一步" class="hash-link" aria-label="Direct link to 下一步" title="Direct link to 下一步">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="logger-系統的改善">Logger 系統的改善<a href="#logger-系統的改善" class="hash-link" aria-label="Direct link to Logger 系統的改善" title="Direct link to Logger 系統的改善">​</a></h3>
<p>在目前的程式碼之中有一些我為了 debug WebRTC 保留下來的 log 點，我想把它們移到 <a href="https://github.com/winstonjs/winston" target="_blank" rel="noopener noreferrer">winston</a> 或 <a href="https://github.com/pinojs/pino" target="_blank" rel="noopener noreferrer">pino</a> 之類的專門函式庫去。</p>
<p>畢竟在後端環境中，未來還要面對更複雜的遊戲實作，這樣的機制來紀錄並整理 log 是非常必要的。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="自由的觀戰者">自由的觀戰者<a href="#自由的觀戰者" class="hash-link" aria-label="Direct link to 自由的觀戰者" title="Direct link to 自由的觀戰者">​</a></h3>
<p>目前觀戰者並沒有移動能力，需要透過 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/requestPointerLock" target="_blank" rel="noopener noreferrer">requestPointerLock</a> 之類的手段錨定滑鼠來提供 FPV (First Person View) 的瀏覽體驗。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="整合-voxel-實作">整合 Voxel 實作<a href="#整合-voxel-實作" class="hash-link" aria-label="Direct link to 整合 Voxel 實作" title="Direct link to 整合 Voxel 實作">​</a></h3>
<p>既然前置作業已經完成，我就可以把我之前 Fork 的 Voxel 實作整合過來了：</p>
<ul>
<li><a href="https://github.com/FlySkyPie/MC.js-Alpha" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/MC.js-Alpha</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/polis">Polis</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/hakoniwa">Hakoniwa</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/the-key-of-huanche">The Key of Huanche</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="先講結論，Pocket AI 在以下條件正常運作："><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-06-15_pocket-ai">Pocket AI 開箱</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-06-15T00:00:00.000Z" itemprop="datePublished">June 15, 2024</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>先講結論，Pocket AI 在以下條件正常運作：</p><ul>
<li>Hardware: Framework 13 (13th Gen i7-1360P)</li>
<li>OS: Ubuntu 23.04 (Kernal 6.2.0-39-generic)</li>
<li>Driver: <code>nvidia-driver-525</code></li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="緣由">緣由<a href="#緣由" class="hash-link" aria-label="Direct link to 緣由" title="Direct link to 緣由">​</a></h2>
<p>老闆想要搞 AI，然後研究的過程中我試著在筆電上跑一個名為 <a href="https://github.com/SUDO-AI-3D/zero123plus" target="_blank" rel="noopener noreferrer">zero123plus</a> 的模型，結果使用 CPU 運算完成一張圖片需要 28 分鐘，於是我想我應該要搞個（有 CUDA 的） GPU 來用。</p>
<div class="theme-admonition theme-admonition-warning admonition_a71W alert alert--warning"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_fKWC"><p>後來我發現 zero123plus 需要 5 G 的 VRAM，所以只有 4G 的 Pocket AI 並沒有直接解決這個問題。</p></div></div>
<p>我大致上有這幾個選擇：</p>
<ul>
<li>eGPU</li>
<li>雲端</li>
<li>NVIDIA Jetson</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="其他方案">其他方案<a href="#其他方案" class="hash-link" aria-label="Direct link to 其他方案" title="Direct link to 其他方案">​</a></h2>
<p>稍微談一下我沒有選擇其他方案的理由。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="雲端">雲端<a href="#雲端" class="hash-link" aria-label="Direct link to 雲端" title="Direct link to 雲端">​</a></h3>
<p>是的，雲端方案是最便宜取得 CUDA 的手段<sup><a href="#user-content-fn-cheap-cuda-b64342" id="user-content-fnref-cheap-cuda-b64342" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>，不過個人認為在開始使用雲端的方案之前還是先累計一些地端的經驗比較好，所以雲端方案不在本次的考量之中。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="nvidia-jetson">NVIDIA Jetson<a href="#nvidia-jetson" class="hash-link" aria-label="Direct link to NVIDIA Jetson" title="Direct link to NVIDIA Jetson">​</a></h3>
<p>Jetson Nano 是老闆說要開始搞 AI 之後我腦袋裡第一個浮現的想法，我印象中幾千塊就能買到了。不過畢竟一分錢一分貨，雖然拿的到程式碼吵著要的 CUDA，但是規格算是少得可憐。</p>
<p>另外一個令我擔心的是開發板是使用 ARM 的 CPU，也就是在它上面作業伴隨著額外跨平台成本的風險，如此考量之下我更傾向走 eGPU 的方案。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="oculink">OCuLink<a href="#oculink" class="hash-link" aria-label="Direct link to OCuLink" title="Direct link to OCuLink">​</a></h3>
<p>看起來是中國玩家比較常見的東西，普通筆電要玩的話需要土炮 DIY 把裡面的 PCIe 拉出來。跳過。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="顯卡塢-diy-套件">顯卡塢 DIY 套件<a href="#顯卡塢-diy-套件" class="hash-link" aria-label="Direct link to 顯卡塢 DIY 套件" title="Direct link to 顯卡塢 DIY 套件">​</a></h3>
<p>露天有一些 6k~7k 左右的外接盒套件，不過很明顯是淘寶進來的，顯卡又要另外買，在這個需求 (CUDA) 上目前不是很想承擔太多的 DIY 成本與風險。跳過。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="akitio-外接盒">AKiTiO 外接盒<a href="#akitio-外接盒" class="hash-link" aria-label="Direct link to AKiTiO 外接盒" title="Direct link to AKiTiO 外接 盒">​</a></h3>
<p>目前網路商店找得到的空箱子都需要 10k 以上，體積又大。不過真正讓我卻步的原因是它官方網站上的韌體安裝指南是：「請你去 Ubuntu 的 App Stores 找到我們的驅動按下安裝」，相較之下 Pocket AI 的手冊清楚多了，所以跳過。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="開箱">開箱<a href="#開箱" class="hash-link" aria-label="Direct link to 開箱" title="Direct link to 開箱">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/01_pocket-ai-904d5c87d66864160f2732e15a1a1f5a.webp" width="1280" height="960" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_pocket-ai-c01d36ed21495a42c60d85178df38e29.webp" width="1280" height="960" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_pocket-ai-a95b7cd51d4a4666957e2932b59e6d76.webp" width="1280" height="960" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/04_pocket-ai-e35b218026368cb47add74d2939d4569.webp" width="1280" height="960" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/05_pocket-ai-6493424e3b6e59524b29e5fa2b0f8f27.webp" width="1280" height="960" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/06_pocket-ai-03625770865a457e9fbbefefc934dc51.webp" width="1280" height="960" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/07_pocket-ai-f747218e78bb5551881827338aaf649b.webp" width="1280" height="960" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" src="/assets/images/08_pocket-ai-da28a08b8a30792bca526d05d8890365.webp" width="1280" height="960" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="安裝驅動">安裝驅動<a href="#安裝驅動" class="hash-link" aria-label="Direct link to 安裝驅動" title="Direct link to 安裝驅動">​</a></h2>
<p>我只是照著<a href="https://www.adlinktech.com/Products/Download.ashx?type=MDownload&amp;isManual=yes&amp;file=2079%5CPocket_AI_-_User_Manual_202307.pdf" target="_blank" rel="noopener noreferrer">官方手冊</a>的指示操作。（<a href="/assets/files/Pocket_AI_-_User_Manual_202307-3b1bcb45bb2dee1c2b40aaf955e07b74.pdf" target="_blank">手冊的備份</a>）</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="設定-kernel-參數">設定 Kernel 參數<a href="#設定-kernel-參數" class="hash-link" aria-label="Direct link to 設定 Kernel 參數" title="Direct link to 設定 Kernel 參數">​</a></h3>
<blockquote>
<p>GRUB_CMDLINE_LINUX
此行中的項目將新增到正常和復原模式之開機項目的末尾。使用它可以將核心參數新增至開機項目。 <sup><a href="#user-content-fn-grub_cmdline_linux-b64342" id="user-content-fnref-grub_cmdline_linux-b64342" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
</blockquote>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain"># /etc/default/grub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GRUB_CMDLINE_LINUX=&quot;pci=realloc=off&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>關於以上參數的具體功能可以在 Linux Kernel 的官方文件找到<sup><a href="#user-content-fn-kernel-parameters-documentation-b64342" id="user-content-fnref-kernel-parameters-documentation-b64342" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>：</p>
<blockquote>
<p>realloc=Enable/disable reallocating PCI bridge resources if allocations done by BIOS are too small to accommodate resources required by all child devices.</p>
<ul>
<li>off: Turn realloc off</li>
<li>on: Turn realloc on</li>
</ul>
</blockquote>
<p>雖然我也不是很清楚，不過應該是為了避免 Linux 跟外顯斷開連接。</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">sudo update-grub2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo reboot</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="安裝顯示卡驅動">安裝顯示卡驅動<a href="#安裝顯示卡驅動" class="hash-link" aria-label="Direct link to 安裝顯示卡驅 動" title="Direct link to 安裝顯示卡驅動">​</a></h3>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">sudo add-apt-repository ppa:graphics-drivers/ppa -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install nvidia-driver-525 -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install bolt</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain"># Check Thunderbolt device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">boltctl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check Graphic card</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvidia-smi</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="/assets/images/09_nvidia-smi-db56d7cb1965d6fe72e3aa116dea394d.webp" width="646" height="355" class="img_RpFt"></p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-cheap-cuda-b64342">
<p>Cheap way to get a CUDA capable computer?.  Retrieved 2024-06-16, from <a href="https://www.reddit.com/r/photogrammetry/comments/med5bm/" target="_blank" rel="noopener noreferrer">https://www.reddit.com/r/photogrammetry/comments/med5bm/</a> <a href="#user-content-fnref-cheap-cuda-b64342" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-grub_cmdline_linux-b64342">
<p>SLES 12 SP5 | 管理指南 | 開機載入程式 GRUB 2. Retrieved 2024-06-16, from <a href="https://documentation.suse.com/zh-tw/sles/12-SP5/html/SLES-all/cha-grub2.html" target="_blank" rel="noopener noreferrer">https://documentation.suse.com/zh-tw/sles/12-SP5/html/SLES-all/cha-grub2.html</a> <a href="#user-content-fnref-grub_cmdline_linux-b64342" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-kernel-parameters-documentation-b64342">
<p>The kernel’s command-line parameters — The Linux Kernel documentation. Retrieved 2024-06-16, from <a href="https://www.kernel.org/doc/html/v4.14/admin-guide/kernel-parameters.html" target="_blank" rel="noopener noreferrer">https://www.kernel.org/doc/html/v4.14/admin-guide/kernel-parameters.html</a> <a href="#user-content-fnref-kernel-parameters-documentation-b64342" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/gpu">gpu</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="範式沒有不見，範式只是變成其他形狀了。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-06-09_from-javascript-to-python-paradigm-migration">從 Javascript 到 Python 的範式遷移 (Paradigm Migration)</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-06-09T00:00:00.000Z" itemprop="datePublished">June 9, 2024</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>範式沒有不見，範式只是變成其他形狀了。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="緣由">緣由<a href="#緣由" class="hash-link" aria-label="Direct link to 緣由" title="Direct link to 緣由">​</a></h2>
<p>最近因為工作的關係需要學習使用 Python，不過作為一個有三年前端開發經驗的工程師，加上沒吃過 Python 也看過 Python 走路（？），因此學習的角度難免脫離一般沒有背景的人入門 Python 的方式，與其說是從頭學習一門程式語言，不如說是遷移我在 Javascript 上累積的經驗。</p>
<p><a href="https://www.w3schools.com/python/" target="_blank" rel="noopener noreferrer">W3School</a> 的教學安排我覺得就已經很清楚了：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_w3school-0f2668437fcd7862b39b250e9e74be27.webp" width="1255" height="818" class="img_RpFt"></p>
<p>不過對於我這樣一個有開發經驗的人而言，語法反而不是最重要的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="執行環境">執  行環境<a href="#執行環境" class="hash-link" aria-label="Direct link to 執行環境" title="Direct link to 執行環境">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript::NVM → Python::pyenv</p><p>Javascript::NPM → Python::pip</p><p>Javascript::Yarn → Python::Poetry</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="javascript">Javascript<a href="#javascript" class="hash-link" aria-label="Direct link to Javascript" title="Direct link to Javascript">​</a></h3>
<p>相較於其他程式語言，Javascript 的生態系除了它那容易令人誤解的名稱之外，還有規範 (Specification) 與實做 (Implementation) 分離的奇怪現象。</p>
<p>Javascript 本身是一團抽象規範，真正能夠執行的是實做，而開發者主要需要區分的實做分別是網頁瀏覽器 (Web Browser) 與 Node.js。</p>
<p>其中 Node.js 有著非常多的版本<sup><a href="#user-content-fn-node-releases-cfcec1" id="user-content-fnref-node-releases-cfcec1" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>，而這個版本也是開發者需要留意的對象，當程式碼與直譯器版本不批配時就會出現問題。</p>
<p>因此 Javascript 開發者通常不會直接安裝 Node.js，而是透過 <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">NVM</a> (Node Version Manager) 去決定與切換當前的 Node.js 版本。</p>
<p>接著是 Javascript 作為現代語言如何處理模組 (Module)，每個專案資料夾都有各自儲存模組的路徑，並且為了減少複數個專案之間下載相同模組的時間，會在使用者的 home 留下快取。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_node-modules-117f76f4ff0004639be3e2636505a9a5.webp" width="911" height="487" class="img_RpFt"></p>
<p>主流的工具有 <a href="https://www.npmjs.com/" target="_blank" rel="noopener noreferrer">npm</a>、 <a href="https://yarnpkg.com/" target="_blank" rel="noopener noreferrer">Yarn</a>、 <a href="https://pnpm.io/" target="_blank" rel="noopener noreferrer">pnpm</a>...，技術層面各有差異，不過在 Javascript 專案中擔任的角色是相同的。</p>
<p>值得一提的是，在 Javascript 的生態系中，「套件管理器」就不只一種，因此 Node.js 考慮引入 「套件管理器管理器」：<a href="https://nodejs.org/api/corepack.html" target="_blank" rel="noopener noreferrer">Corepack</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="python">Python<a href="#python" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">​</a></h3>
<p>如同 Node.js 使用 NVM 解決 Node.js 版本眾多的問題，Python 使用 <a href="https://github.com/pyenv/pyenv" target="_blank" rel="noopener noreferrer">pyenv</a> 解決：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain"># 安裝 pyenv</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl https://pyenv.run | bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 把 PATH 加入 `~/.bashrc`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27; &gt;&gt; ~/.bashrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27; &gt;&gt; ~/.bashrc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &#x27;eval &quot;$(pyenv init -)&quot;&#x27; &gt;&gt; ~/.bashrc</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>除此之外 Python 有其他問題需要煩惱：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/03_python-meme-0ea41fdc94282e4a469c132c026137dd.webp" width="492" height="487" class="img_RpFt"></p>
<p>除了 Python 直譯器的安裝路徑外，套件的管理是另外一個問題：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/04_python-modules-1f80770c3baf032cd306620fcdaea6bb.webp" width="981" height="617" class="img_RpFt"></p>
<p>因為專案之間直接使用相同的套件來源，當仰賴的套件版本衝突時就會發生<a href="https://zh.wikipedia.org/zh-tw/%E7%9B%B8%E4%BE%9D%E6%80%A7%E5%9C%B0%E7%8D%84" target="_blank" rel="noopener noreferrer">相依性地獄</a>，於是有一系列的工具為了解決這個問題而生：</p>
<ul>
<li><code>venv</code></li>
<li><code>pipenv</code>
<ul>
<li><a href="https://github.com/pypa/pipenv" target="_blank" rel="noopener noreferrer">https://github.com/pypa/pipenv</a></li>
<li>24.7k ⭐</li>
</ul>
</li>
<li><code>virtualenv</code>
<ul>
<li><a href="https://github.com/pypa/virtualenv" target="_blank" rel="noopener noreferrer">https://github.com/pypa/virtualenv</a></li>
<li>4.7k ⭐</li>
</ul>
</li>
<li><code>pyenv-virtualenv</code>
<ul>
<li><a href="https://github.com/pyenv/pyenv-virtualenv" target="_blank" rel="noopener noreferrer">https://github.com/pyenv/pyenv-virtualenv</a></li>
<li>6.1k ⭐</li>
</ul>
</li>
<li><code>conda</code>
<ul>
<li><a href="https://github.com/conda/conda" target="_blank" rel="noopener noreferrer">https://github.com/conda/conda</a></li>
<li>6.2k ⭐</li>
</ul>
</li>
<li><code>poetry</code>
<ul>
<li><a href="https://github.com/python-poetry/poetry" target="_blank" rel="noopener noreferrer">https://github.com/python-poetry/poetry</a></li>
<li>29.9k ⭐</li>
</ul>
</li>
</ul>
<p>目前 Poetry 看起來是最好方案，安裝 Poetry：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">curl -sSL https://install.python-poetry.org | python3 -</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>於是建立 一個 Python 專案就變成像這樣了：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">poetry new poetry-demo  # 新增專案</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd peotry-demo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">poetry env use python3 # 新增虛擬環境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">poetry shell  # 進入虛擬環境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl https://raw.githubusercontent.com/github/gitignore/main/Python.gitignore &gt; .gitignore</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>關於 Poetry 的介紹與使用這裡有一篇文章講的蠻完整的：</p>
<p><a href="https://blog.kyomind.tw/python-poetry/" target="_blank" rel="noopener noreferrer">Python 套件管理器——Poetry 完全入門指南 </a></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="型別檢查">型別檢查<a href="#型別檢查" class="hash-link" aria-label="Direct link to 型別檢查" title="Direct link to 型別檢查">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript::Typescript → Python::Mypy</p><p>Javascript::tsconfig.json → Python::mypy.ini</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="javascript-1">Javascript<a href="#javascript-1" class="hash-link" aria-label="Direct link to Javascript" title="Direct link to Javascript">​</a></h3>
<p>JavaScript 本身是一種動態型別/弱型別語言，這種特性給予了開發者極高的彈性，但容易造成很多基本的錯誤需要在執行期間 (runtime) 才能被發現。</p>
<p><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">Typescript</a> 就是為了解決這個問題而誕生的。Typescript 的另外一個特性是「Javascript 的超集 (superset)」，不過在 ES6 已經普及的今天 (2024 年)，這個特性已經不是最有價值的部份了。</p>
<p>透過 Typescript 定義的型別語法，加上 Linter （語法檢查器）與 IDE Hint （編輯器提示）等機制，可以在開發階段就避免或挑出低級錯誤而減少在執行期間除錯 (Debug) 的成本。</p>
<p>型別檢查的規則可以透過 <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" target="_blank" rel="noopener noreferrer">tsconfig.json</a> 來調整。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="python-1">Python<a href="#python-1" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">​</a></h3>
<p>Python 的動態型別特性是筆者一直以來對 Python 保有排斥心裡的原因之一，因此解決型別問題是筆者重返 Python 最高優先解決的問題。</p>
<p>值得慶幸的是 Python 確實陸續將型別標記之類的功能引入自己的標準之中，諸如：PEP3107、PEP484、PEP526、PEP561...。<sup><a href="#user-content-fn-python-type-pep-cfcec1" id="user-content-fnref-python-type-pep-cfcec1" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
<blockquote>
<p>型別註釋能夠提供團隊成員對於變數型別的了解，不過仍不能真正解決型別誤用的情況，畢竟 Python 的型別註釋也只是註釋，並無法偵測誤用/錯用型別的情況。<sup><a href="#user-content-fn-python-typing-cfcec1" id="user-content-fnref-python-typing-cfcec1" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>:</p>
</blockquote>
<p>雖然 Python 支援型別標記，卻仍然缺少型別檢查的實做，為了解決這個問題確實有不少型別檢查的工具：</p>
<ul>
<li><code>mypy</code>
<ul>
<li><a href="https://github.com/python/mypy" target="_blank" rel="noopener noreferrer">https://github.com/python/mypy</a></li>
<li>17k ⭐</li>
</ul>
</li>
<li><code>pytype</code>
<ul>
<li><a href="https://github.com/google/pytype" target="_blank" rel="noopener noreferrer">https://github.com/google/pytype</a></li>
<li>4.6k ⭐</li>
</ul>
</li>
<li><code>pyre</code>
<ul>
<li><a href="https://github.com/facebook/pyre-check" target="_blank" rel="noopener noreferrer">https://github.com/facebook/pyre-check</a></li>
<li>6.7k ⭐</li>
</ul>
</li>
<li><code>pyright</code>
<ul>
<li><a href="https://github.com/microsoft/pyright" target="_blank" rel="noopener noreferrer">https://github.com/microsoft/pyright</a></li>
<li>12.3k ⭐</li>
</ul>
</li>
</ul>
<p>Mypy，就決定是你了！</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain"># Install type check tool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">poetry add mypy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run type check</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mypy .</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>如同 Typescript 的 tsconfig.json 一般，Mypy 可以透過 <a href="https://mypy.readthedocs.io/en/stable/config_file.html" target="_blank" rel="noopener noreferrer">mypy.ini</a> 來設定型別檢查的強度與規則。</p>
<p>更多關於型別的寫法見<a href="https://docs.python.org/3/library/typing.html" target="_blank" rel="noopener noreferrer">官方文件</a>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="vscode-visual-studio-code">VSCode (Visual Studio Code)<a href="#vscode-visual-studio-code" class="hash-link" aria-label="Direct link to VSCode (Visual Studio Code)" title="Direct link to VSCode (Visual Studio Code)">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="javascript-2">Javascript<a href="#javascript-2" class="hash-link" aria-label="Direct link to Javascript" title="Direct link to Javascript">​</a></h3>
<p>VSCode 因為自己本身就是 Typescript 寫的，所以對 Javascript/Typescript 可以說是原生支援，不需要額外掛擴充插件就能有不錯的開發體驗，不過可能需要調整一些設定之類的，例如：<a href="https://stackoverflow.com/questions/45490475/how-do-i-show-reference-count-in-visual-studio-code" target="_blank" rel="noopener noreferrer">顯示參照</a>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="python-2">Python<a href="#python-2" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">​</a></h3>
<ul>
<li>讓 VSCode 認得 <code>pyproject.toml</code>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml" target="_blank" rel="noopener noreferrer">https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml</a></li>
</ul>
</li>
<li>讓 VSCode 認得 Python<!-- -->
<ul>
<li><a href="https://open-vsx.org/extension/ms-python/python" target="_blank" rel="noopener noreferrer">https://open-vsx.org/extension/ms-python/python</a>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python" target="_blank" rel="noopener noreferrer">https://marketplace.visualstudio.com/items?itemName=ms-python.python</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="基本語法">基本語法<a href="#基本語法" class="hash-link" aria-label="Direct link to 基本語法" title="Direct link to 基本語法">​</a></h2>
<p>基本語法照著 w3school 的清單一個一個看過去大概清楚 Python 的基本語法了，我只會挑一些語法或名稱差異比較大的出來。</p>
<ul>
<li>註解 (Comment)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_comments.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_comments.asp</a></li>
</ul>
</li>
<li>變數 (Variables)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_variables.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_variables.asp</a></li>
<li>變數命名<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_variables_names.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_variables_names.asp</a></li>
</ul>
</li>
<li>多變數賦值<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_variables_multiple.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_variables_multiple.asp</a></li>
</ul>
</li>
</ul>
</li>
<li>變數類型 (Data Types)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_datatypes.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_datatypes.asp</a></li>
<li>Text Type: <code>str</code></li>
<li>Numeric Types: <code>int</code>, <code>float</code>, <code>complex</code></li>
<li>Sequence Types: <code>list</code>, <code>tuple</code>, <code>range</code></li>
<li>Mapping Type: <code>dict</code></li>
<li>Set Types: <code>set</code>, <code>frozenset</code></li>
<li>Boolean Type: <code>bool</code></li>
<li>Binary Types: <code>bytes</code>, <code>bytearray</code>, <code>memoryview</code></li>
<li>None Type: <code>NoneType</code></li>
</ul>
</li>
<li>字串 (String)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_strings.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_strings.asp</a></li>
</ul>
</li>
<li>布林值 (Boolean)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_booleans.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_booleans.asp</a></li>
</ul>
</li>
<li>運算子 (Operators)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_operators.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_operators.asp</a></li>
</ul>
</li>
<li>判斷式 (If ... Else)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_conditions.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_conditions.asp</a></li>
</ul>
</li>
<li>迴圈 (While/For Loop)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_while_loops.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_while_loops.asp</a></li>
<li><a href="https://www.w3schools.com/python/python_for_loops.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_for_loops.asp</a></li>
</ul>
</li>
<li>函式 (Function)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_functions.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_functions.asp</a></li>
</ul>
</li>
<li>作用域 (Scope)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_scope.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_scope.asp</a></li>
</ul>
</li>
<li>資料容器<!-- -->
<ul>
<li>Tuples<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_tuples.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_tuples.asp</a></li>
</ul>
</li>
<li>集合 (Set)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_sets.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_sets.asp</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="模板文字">模板文字<a href="#模板文字" class="hash-link" aria-label="Direct link to 模板文字" title="Direct link to 模板文字">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript</p><div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">`My name is John, I am ${age}`</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>→ Python</p><div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">f&quot;My name is John, I am {age}&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>在 Javascript 被稱作 Template literals 的東西，在 Python 則是透過 f-strings 達到類似的效果。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="匿名函式">匿名函式<a href="#匿名函式" class="hash-link" aria-label="Direct link to 匿名函式" title="Direct link to 匿名函式">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript::Arrow Function → Python::Lambda Function</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="解構賦值">解構賦值<a href="#解構賦值" class="hash-link" aria-label="Direct link to 解構賦值" title="Direct link to 解構賦值">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript::Destructuring Assignment → Python<!-- -->:Unpack<!-- -->
Javascript::Rest Parameters → Python::Arbitrary Arguments</p></div></div>
<p>W3 是把這個概念放在 Tuples 下講，但是我覺得既然是 List 和 Tuples 共用的特性應該分出來講，畢竟在 Javascript 這是一種叫做解構賦值 (Destructuring assignment) 的語法。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="javascript-3">Javascript<a href="#javascript-3" class="hash-link" aria-label="Direct link to Javascript" title="Direct link to Javascript">​</a></h4>
<div class="language-javascript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">c</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">func</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter spread operator" style="color:#393A34">...</span><span class="token parameter">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="python-3">Python<a href="#python-3" class="hash-link" aria-label="Direct link to Python" title="Direct link to Python">​</a></h4>
<div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">my_function</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這裡有一篇文章舉了更多 unpack 的例子<sup><a href="#user-content-fn-python-tuple-list-unpack-cfcec1" id="user-content-fnref-python-tuple-list-unpack-cfcec1" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup>。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="字典">字典<a href="#字典" class="hash-link" aria-label="Direct link to 字典" title="Direct link to 字典">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript::Map → Python::Dictionary</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="陣列">陣列<a href="#陣列" class="hash-link" aria-label="Direct link to 陣列" title="Direct link to 陣列">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript::Array → Python::List
Javascript::TypedArray → Python::Array (NumPy)</p></div></div>
<p>和 Javascript 一樣，Python 的陣列不是「真的陣列」，而是一個可以變大變小的資料容器，並且這樣的容器在 Python 中被稱作 List。</p>
<p>在 Javascript 中可以透過 TypedArray 來創造真正意義上資料密集的陣列，但是在 Python 中這件事並不是內建在語言中的：</p>
<blockquote>
<p>Python does not have built-in support for Arrays, but Python Lists can be used instead. To work with arrays in Python you will have to import a library, like the NumPy library.<sup><a href="#user-content-fn-python-array-cfcec1" id="user-content-fnref-python-array-cfcec1" data-footnote-ref="true" aria-describedby="footnote-label">5</a></sup></p>
</blockquote>
<p>而是需要透過諸如 NumPy 之類的函式庫來達成。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="進階語法">進階語法<a href="#進階語法" class="hash-link" aria-label="Direct link to 進階語法" title="Direct link to 進階語法">​</a></h2>
<ul>
<li>類別 (Class)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_classes.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_classes.asp</a></li>
</ul>
</li>
<li>繼承 (Inheritance)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_inheritance.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_inheritance.asp</a></li>
</ul>
</li>
<li>迭代器 (Iterators)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_iterators.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_iterators.asp</a></li>
</ul>
</li>
<li>Try Except<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_try_except.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_try_except.asp</a></li>
</ul>
</li>
<li>User Input<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_user_input.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_user_input.asp</a></li>
</ul>
</li>
<li>檔案讀寫<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_file_handling.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_file_handling.asp</a></li>
<li><a href="https://www.w3schools.com/python/python_file_open.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_file_open.asp</a></li>
<li><a href="https://www.w3schools.com/python/python_file_write.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_file_write.asp</a></li>
<li><a href="https://www.w3schools.com/python/python_file_remove.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_file_remove.asp</a></li>
</ul>
</li>
<li>Generator Expressions as list comprehensions<!-- -->
<ul>
<li><a href="https://www.pythontutorial.net/advanced-python/python-generator-expressions/" target="_blank" rel="noopener noreferrer">https://www.pythontutorial.net/advanced-python/python-generator-expressions/</a></li>
<li><a href="https://www.w3schools.com/python/python_lists_comprehension.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_lists_comprehension.asp</a></li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="模組-modules">模組 (Modules)<a href="#模組-modules" class="hash-link" aria-label="Direct link to 模組 (Modules)" title="Direct link to 模組 (Modules)">​</a></h3>
<p>從模組引入特定的函式或物件：</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript</p><div class="language-javascript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> name1</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> name2 </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;module&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>→ Python</p><div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> module </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> name1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> name2</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>引入整個模組：</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript</p><div class="language-javascript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#00009f">as</span><span class="token imports"> new_name</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;module&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>→ Python</p><div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> module </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> new_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> module</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>在 Node.js 中可以在資料夾加入進入點來表達「這個資料夾是模組」，Python 也有類似的機制：</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Node.js::<code>index.js</code> → Python::<code>__init__.py</code></p></div></div>
<p>Node.js 之父後悔 <code>index.js</code> 這個設計又是另外一個故事了<sup><a href="#user-content-fn-10-things-i-regret-about-nodejs-cfcec1" id="user-content-fnref-10-things-i-regret-about-nodejs-cfcec1" data-footnote-ref="true" aria-describedby="footnote-label">6</a></sup>。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="全域匯入">全域匯入<a href="#全域匯入" class="hash-link" aria-label="Direct link to 全域匯入" title="Direct link to 全域匯入">​</a></h4>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Javascript</p><div class="language-javascript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;module&quot;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>→ Python</p><div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> module </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>Javascript 在模組機制還不發達的時期，引入函式庫的方式往往就是一團丟到全域變數去的東西，而這種方式很容易造成函式庫之間的命名衝突，對於這段歷史有興趣的同學可以了解一下一個名為 UMD (Universal Module Definition) 的工具，它身上有著 Javascript 模組大亂鬥的歷史。</p>
<p>在 Python 中有著類似匯入方式：</p>
<div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> random </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">randint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># It&#x27;s random.randint</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>不過正如早期的 Javacsript 全域模組的問題一樣，這種語法在有成熟模組匯入機制的現在應該避免使用。</p>
<p>這裡有一篇講解更多關於 Python 匯入模組的文章：</p>
<p><a href="https://medium.com/pyladies-taiwan/3538e74f57e3" target="_blank" rel="noopener noreferrer">Python 的 Import 陷阱</a></p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="內建模組">內建模組<a href="#內建模組" class="hash-link" aria-label="Direct link to 內建模組" title="Direct link to 內建模組">​</a></h3>
<p>在 Node.js 中，「內建模組」的概念並不陌生，<code>fs</code>, <code>path</code>, <code>os</code> 都是 Node.js 的內建模組，這樣的設計可以避免過度膨脹原生的語法，而讓一些實做以模組的形式存在。</p>
<ul>
<li>Datetime<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_datetime.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_datetime.asp</a></li>
</ul>
</li>
<li>Math<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_math.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_math.asp</a></li>
</ul>
</li>
<li>JSON<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_json.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_json.asp</a></li>
</ul>
</li>
<li>正規表達式 (RegEx)<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/python_regex.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_regex.asp</a></li>
</ul>
</li>
<li>Random<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/module_random.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/module_random.asp</a></li>
</ul>
</li>
<li>asyncio<!-- -->
<ul>
<li><a href="https://docs.python.org/3/library/asyncio.html" target="_blank" rel="noopener noreferrer">https://docs.python.org/3/library/asyncio.html</a></li>
</ul>
</li>
<li>Statistics<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/module_statistics.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/module_statistics.asp</a></li>
</ul>
</li>
<li>cmath<!-- -->
<ul>
<li><a href="https://www.w3schools.com/python/module_cmath.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/module_cmath.asp</a></li>
</ul>
</li>
</ul>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-node-releases-cfcec1">
<p>Node.js — Node.js Releases. Retrieved 2024-06-09, from <a href="https://nodejs.org/en/about/previous-releases" target="_blank" rel="noopener noreferrer">https://nodejs.org/en/about/previous-releases</a> <a href="#user-content-fnref-node-releases-cfcec1" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-python-type-pep-cfcec1">
<p>新的型態提示PEP. (林信良). Retrieved 2024-06-09, from <a href="https://www.ithome.com.tw/voice/140338" target="_blank" rel="noopener noreferrer">https://www.ithome.com.tw/voice/140338</a> <a href="#user-content-fnref-python-type-pep-cfcec1" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-python-typing-cfcec1">
<p>使用 Python typing 模組對你的同事好一點. (Amo Chen). Retrieved 2024-06-09, from <a href="https://myapollo.com.tw/blog/python-typing-module/" target="_blank" rel="noopener noreferrer">https://myapollo.com.tw/blog/python-typing-module/</a> <a href="#user-content-fnref-python-typing-cfcec1" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-python-tuple-list-unpack-cfcec1">
<p>Unpack a tuple and list in Python. (nkmk). Retrieved 2024-06-09, from <a href="https://note.nkmk.me/en/python-tuple-list-unpack/" target="_blank" rel="noopener noreferrer">https://note.nkmk.me/en/python-tuple-list-unpack/</a> <a href="#user-content-fnref-python-tuple-list-unpack-cfcec1" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-python-array-cfcec1">
<p>Python Arrays. (w3school). Retrieved 2024-06-09, from <a href="https://www.w3schools.com/python/python_arrays.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/python_arrays.asp</a> <a href="#user-content-fnref-python-array-cfcec1" data-footnote-backref="" aria-label="Back to reference 5" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-10-things-i-regret-about-nodejs-cfcec1">
<p>Node.js 開發之父：「十個Node.js 的設計錯誤」－ 以及其終極解決辦法. (David Ng). Retrieved 2024-06-09, from <a href="https://m.oursky.com/f0db0afb496e" target="_blank" rel="noopener noreferrer">https://m.oursky.com/f0db0afb496e</a> <a href="#user-content-fnref-10-things-i-regret-about-nodejs-cfcec1" data-footnote-backref="" aria-label="Back to reference 6" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/javascript">javascript</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/python">python</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="稍微盤點一下我所知道的 Minecraft"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-05-29_I-like-minecraft-but-its-might-no-the-way-you-think">我喜歡 Minecraft，不過可能不是一般人認知的那種</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-05-29T00:00:00.000Z" itemprop="datePublished">May 29, 2024</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>稍微盤點一下我所知道的 Minecraft</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="the-minecraft-時期-2012">The Minecraft 時期 (2012)<a href="#the-minecraft-時期-2012" class="hash-link" aria-label="Direct link to The Minecraft 時期 (2012)" title="Direct link to The Minecraft 時期 (2012)">​</a></h2>
<p>Minecraft 這款遊戲本身我已經很久沒有點開遊玩它了。實際上呢，我最熟悉的版本是 Beta 1.8，釀造系統（包含）以後的所有更新我其實都不是那麼的熟悉。比較熱衷玩 Minecraft 的日子大概是這樣的：</p>
<ul>
<li>在 <a href="https://home.gamer.com.tw/homeindex.php?owner=mac00178" target="_blank" rel="noopener noreferrer">Yami Odymel</a> 開的伺服器活動</li>
<li>因為耍白痴被 BAN 了</li>
<li>自己試著開了跑酷伺服器</li>
<li>自己試著開了 <a href="https://dev.bukkit.org/projects/splated-solar-apocalypse" target="_blank" rel="noopener noreferrer">Solar Apocalypse</a> 伺服器</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="一種人類玩家與-ai-對抗的構想-2013">一種人類玩家與 AI 對抗的構想 (2013)<a href="#一種人類玩家與-ai-對抗的構想-2013" class="hash-link" aria-label="Direct link to 一種人類玩家與 AI 對抗的構想 (2013)" title="Direct link to 一種人類玩家與 AI 對抗的構想 (2013)">​</a></h3>
<p>當時 Minecraft 伺服器的架設者為了提高遊戲的趣味程度，通常透過插件加入一些常見的功能：</p>
<ul>
<li>經濟系統：允許玩家持有遊戲內的虛擬貨幣。</li>
<li>RPG： 賦予玩家等級制的成長系統。</li>
<li>更強的怪物： 提高怪物的血量、速度、集體行動；甚至賦予特殊技能，創  造類似小 BOSS 一般的存在。</li>
</ul>
<p>但是怪物不論在數值上有多強，只要有固定的行動模式就能被玩家破解。Minecraft 內最令人敬畏的敵人是誰？人類玩家。</p>
<blockquote>
<p>透過創造與人類玩家別無二致的 NPC 敵人</p>
</blockquote>
<p>這樣的想法在我腦海油然而生。</p>
<p>我試著學習撰寫插件來生成結構化的建築物，2013-04-06 的截圖，我與插件的生成物（背景）：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_avatar-7f8ef8e9ba7bd7f2386fd33f278d43ec.webp" width="400" height="400" class="img_RpFt"></p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>具體的實做方式就是透過插件的 hook 取得指令事件、讀取玩家座標、使用預先儲存的三維矩陣把周遭的方塊填入遊戲世界中。</p></div></div>
<p>在我的構想中，人類玩家是破壞者，這些「敵對 NPC」是創造者，它們以蟲群意識行動，並不斷的建造巨構建築吞噬地圖，就像 <a href="https://en.wikipedia.org/wiki/Blame!" target="_blank" rel="noopener noreferrer">BLAME!</a> 中的<a href="https://blame.fandom.com/wiki/Builders" target="_blank" rel="noopener noreferrer">建造者</a>一樣。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="syntheticempire-2018">SyntheticEmpire (2018)<a href="#syntheticempire-2018" class="hash-link" aria-label="Direct link to SyntheticEmpire (2018)" title="Direct link to SyntheticEmpire (2018)">​</a></h2>
<p>五年後我重拾這個被我放置的概念，這次我從「實做 NPC」開始。經過對函式庫的調查，  我理解到 Minecraft 處理「玩家實體」的方式是放置一個虛假的幻影，然後透過一些方式來操作這些幻影，使得「玩家實體」與其他遊戲中的「生物實體」截然不同。</p>
<p>於是當時我選中了殭屍作為 NPC 的基礎類別，因為它是少數人形的怪物，而且服裝最接近 Steve。</p>
<p><img decoding="async" loading="lazy" src="/assets/images/02_minecraft-oop-adeb77b40d547b88844b8f8e9d564d9d.webp" width="873" height="496" class="img_RpFt"></p>
<p>關於實體的操作這種類型的函式庫屬於 NMS (net.minecraft.serve) 的部份，並不是插件的函式庫特別關照的區塊，因此仍然殘留大量反編譯留下的非語意化變數名稱，當時花了好一番功夫去讀懂這些函數與變數的功能。最後<a href="https://www.youtube.com/watch?v=vH0KOeijNeQ" target="_blank" rel="noopener noreferrer">成功</a>附加一些玩家的特性到特製的殭屍實體去了。</p>
<p>遺憾的是當時撰寫的專案並沒有保留程式碼，只有一個輸出的 <code>.jar</code> <a href="https://github.com/FlySkyPie/SyntheticEmpire" target="_blank" rel="noopener noreferrer">檔案</a>。</p>
<p><a href="https://youtu.be/vH0KOeijNeQ" target="_blank" rel="noopener noreferrer" title="Minecraft Zombi Human Project - Item drop test"><img decoding="async" loading="lazy" src="http://img.youtube.com/vi/vH0KOeijNeQ/0.jpg" alt="" class="img_RpFt"></a></p>
<p>（點圖開啟影片）</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="那些跟-minecraft-有關的-youtuber">那些跟 Minecraft 有關的 YouTuber<a href="#那些跟-minecraft-有關的-youtuber" class="hash-link" aria-label="Direct link to 那些跟 Minecraft 有關的 YouTuber" title="Direct link to 那些跟 Minecraft 有關的 YouTuber">​</a></h2>
<ul>
<li><a href="https://www.youtube.com/@FitMC" target="_blank" rel="noopener noreferrer">FitMC</a>
<ul>
<li>主要在講 2b2t 伺服器故事的人。</li>
<li><a href="https://www.youtube.com/watch?v=elqAh3GWRpA" target="_blank" rel="noopener noreferrer">The Fall of Minecraft&#x27;s 2b2t</a>
<ul>
<li>一個「資訊時代誰掌握了資料 (Data)，誰就掌握了力量」的故事</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://www.youtube.com/@AntVenom" target="_blank" rel="noopener noreferrer">AntVenom</a>
<ul>
<li>一個對 Far Lands 莫名著迷的人。</li>
<li>挖掘各種把 Minecraft 搞壞的方法。</li>
</ul>
</li>
<li><a href="https://www.youtube.com/@SalC1/" target="_blank" rel="noopener noreferrer">SalC1</a>
<ul>
<li>專題式介紹（歷史、涉及軟體工程的重大事件等等） Minecraft 的人。</li>
<li><a href="https://www.youtube.com/watch?v=EyRPUT4fXh4" target="_blank" rel="noopener noreferrer">Playing Minecraft 1.16 on Windows 98</a>
<ul>
<li>在 Windows 98 上執行現代版本 (1.16) 的 Minecraft</li>
</ul>
</li>
<li><a href="https://www.youtube.com/watch?v=rUFDRAEducI" target="_blank" rel="noopener noreferrer">I DIDN’T Migrate my Minecraft Account - Here’s What Happened</a>
<ul>
<li>如果不遷移原始帳號到微軟帳號去會發生什麼事？</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://www.youtube.com/@TheMisterEpic" target="_blank" rel="noopener noreferrer">TheMisterEpic</a>
<ul>
<li>同樣是專題式介紹 Minecraft 的人。</li>
<li><a href="https://www.youtube.com/watch?v=17vabTy82Iw" target="_blank" rel="noopener noreferrer">Minecrafts Oldest BUGS That Mojang CAN&#x27;T Fix…</a>
<ul>
<li>盤點那些古老的而且存在至今的 Minecraft bug</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>2b2t: 一個無政府主義 (Anarchism) 伺服器。有別於一般的 Minecraft 伺服器會透過規則、區分世界、權限插件等機制約束玩家並限制玩家破壞，Anarchy  伺服器沒有規則：開外掛是基本配件、終界水晶互炸很常見、把 bug 武器化（舉例來說在地圖物件上堆疊大量的箭頭來耗盡玩家的顯示卡資源）來攻擊敵對陣營也是再正常不過的事情。</p></div></div>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>Far Lands: Minecraft 地形生產演算法在座標的浮點數逼近特定數值時的浮點數誤差會使算法受到破壞性的影響而不再能生成正常的地形。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="那些跟-minecraft-有關的-ai-專案">那些跟 Minecraft 有關的 AI 專案<a href="#那些跟-minecraft-有關的-ai-專案" class="hash-link" aria-label="Direct link to 那些跟 Minecraft 有關的 AI 專案" title="Direct link to 那些跟 Minecraft 有關的 AI 專案">​</a></h2>
<ul>
<li><a href="https://github.com/cabaletta/baritone" target="_blank" rel="noopener noreferrer">Baritone</a>
<ul>
<li>Minecraft 的機器人外掛</li>
</ul>
</li>
<li><a href="https://github.com/MineDojo/Voyager" target="_blank" rel="noopener noreferrer">MineDojo/Voyager</a>
<ul>
<li>一個訓練 GPT (OpenAI) 玩 Minecraft 的專案</li>
</ul>
</li>
<li><a href="https://github.com/PrismarineJS/mineflayer" target="_blank" rel="noopener noreferrer">Mineflayer</a>
<ul>
<li>跟 AI 沒有直接關係，它是 Voyager 專案中 AI 操作 Minecraft 的界面</li>
<li>它是以 Javascript 實做的無頭 (headless) Minecraft 客戶端，換句話說你可以透過撰寫程式碼來連線到 Minecraft 伺服器「遊玩」，而伺服器會以為你是用 Minecraft 連線過來的。</li>
</ul>
</li>
<li><a href="https://github.com/minerllabs/minerl" target="_blank" rel="noopener noreferrer">minerkasbs/minerl</a>
<ul>
<li>Minecraft 鑽石挑戰 (MineRL Competition) 的套件包</li>
<li>關於鑽石挑戰我翻譯過兩篇 2021 年度的比賽規則：<!-- -->
<ul>
<li><a href="https://flyskypie.github.io/blog/2021-06-11_minerl-competition-structure/" target="_blank" rel="noopener noreferrer">競賽流程</a></li>
<li><a href="https://flyskypie.github.io/blog/2021-06-10_minerl-challenge_rules/" target="_blank" rel="noopener noreferrer">比賽規則</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="https://github.com/microsoft/malmo" target="_blank" rel="noopener noreferrer">Malmo</a>
<ul>
<li>MineRL 的前身，由微軟釋出並主辦了幾場沒有創意的比賽，然後就沒有然後了。</li>
<li>我有寫一篇介紹 <a href="https://flyskypie.github.io/blog/2021-07-18-Project_Malmo_Intro/" target="_blank" rel="noopener noreferrer">Project Malmo</a> 的文章。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="the-master-pieces">The Master Pieces<a href="#the-master-pieces" class="hash-link" aria-label="Direct link to The Master Pieces" title="Direct link to The Master Pieces">​</a></h2>
<p>以遊戲軟體工程的角度來說 Minecraft 是個巨作，它身上有很多值得學習的東西，這裡有個影片點出其中幾個比較知名的要點（點圖開啟影片）：</p>
<p><a href="https://youtu.be/fjZAgoxFKiQ" target="_blank" rel="noopener noreferrer" title="Minecraft Zombi Human Project - Item drop test"><img decoding="async" loading="lazy" src="http://img.youtube.com/vi/fjZAgoxFKiQ/0.jpg" alt="" class="img_RpFt"></a></p>
<ul>
<li>用 Greedy Meshing 減少三角面</li>
<li>用 Perlin Noise 實現程序化生成地形</li>
<li>用 Perlin Worm 生成洞穴</li>
<li>用參數表定義生態系</li>
<li>用  基於 Voxel 的算法處理光源</li>
</ul>
<p>Minecraft 也有一些軟體設計上的缺陷值得借鏡，諸如：</p>
<ul>
<li>原生的伺服器程式基本上是單執行緒的</li>
<li>OOP 的程式架構造成錯綜複雜的 Side Effect 造成難以除錯 (Debugging)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="真正的-minecraft">「真正的 Minecraft」<a href="#真正的-minecraft" class="hash-link" aria-label="Direct link to 「真正的 Minecraft」" title="Direct link to 「真正的 Minecraft」">​</a></h2>
<p>Beta 1.7 是一個特別的 Minecraft 版本，Minecraft 圈子有一群懷舊的玩家堅持這是最後一個真正的 Minecraft。原因在於 Beta 1.8 的更新中加入了諸如飢餓系統與奔跑等遊戲機制，大幅度改變遊戲體驗。</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=PLf1gm37erw" target="_blank" rel="noopener noreferrer">Better Than Adventure! - 1.7.6 Trailer (Minecraft Beta 1.7.3 mod)</a>
<ul>
<li>一個把現代 Minecraft 的一些遊戲內容移植到 Beta 1.7 的模組</li>
</ul>
</li>
<li><a href="https://github.com/ddevault/TrueCraft" target="_blank" rel="noopener noreferrer">TrueCraft</a>
<ul>
<li>一個號稱使用靜室開發重新以 C# 實做 Beta 1.7 的開源專案</li>
<li>我個人沒有成功執行過，雖然可以編譯成功但是遊戲無法正常遊玩。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="那些跟-minecraft-有關的野生專案">那些跟 Minecraft 有關的野生專案<a href="#那些跟-minecraft-有關的野生專案" class="hash-link" aria-label="Direct link to 那些跟 Minecraft 有關的野生專案" title="Direct link to 那些跟 Minecraft 有關的野生專案">​</a></h2>
<ul>
<li><a href="https://github.com/ClassiCube/ClassiCube" target="_blank" rel="noopener noreferrer">ClassiCube</a>
<ul>
<li>以 C 語言復刻 Minecraft Classic</li>
</ul>
</li>
<li><a href="https://minecraftforfreex.com/eaglercraft/" target="_blank" rel="noopener noreferrer">Eaglercraft</a>
<ul>
<li>盜版 Minecraft 的網頁移植版</li>
<li>使用 <a href="https://teavm.org/" target="_blank" rel="noopener noreferrer">TeaVM</a> 在網頁上執行 Java 生態的程式</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="那些啟發自minecraft-的開源專案">那些「啟發自」Minecraft 的開源專案<a href="#那些啟發自minecraft-的開源專案" class="hash-link" aria-label="Direct link to 那些「啟發自」Minecraft 的開源專案" title="Direct link to 那些「啟發自」Minecraft 的開源專案">​</a></h2>
<ul>
<li><a href="https://github.com/fogleman/Craft" target="_blank" rel="noopener noreferrer">fogleman/Craft</a>
<ul>
<li>總共只有大約 3k 行 C 語言實做「Voxel 遊戲的基本功能」。</li>
</ul>
</li>
<li><a href="https://github.com/satoshinm/NetCraft" target="_blank" rel="noopener noreferrer">satoshinm/NetCraft</a>
<ul>
<li>fogleman/Craft 的 fork</li>
<li>透過 emscripten 移植到網頁上</li>
</ul>
</li>
<li><a href="https://github.com/minetest/minetest" target="_blank" rel="noopener noreferrer">Minetest</a>
<ul>
<li>C++ 實做的「Voxel 遊戲引擎」</li>
<li>支援 Lua 插件</li>
<li>可以透過插件來逼近 Minecraft 的遊戲內容</li>
<li>市面上流通不少「山寨版 Minecraft」都是這專案的 fork</li>
</ul>
</li>
<li><a href="https://github.com/voxel" target="_blank" rel="noopener noreferrer">Voxel.js</a>
<ul>
<li>一個作者從 WebGL 開始刻的網頁 Voxel 專案。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="那些跟-minecraft-有關的開源專案">那些跟 Minecraft 有關的開源專案<a href="#那些跟-minecraft-有關的開源專案" class="hash-link" aria-label="Direct link to 那些跟 Minecraft 有關的開源專案" title="Direct link to 那些跟 Minecraft 有關的開源專案">​</a></h2>
<ul>
<li><a href="https://github.com/cuberite/cuberite" target="_blank" rel="noopener noreferrer">Cuberite</a>
<ul>
<li>輕量級的 Minecraft 伺服端</li>
<li>以 C++ 實做</li>
<li>使用 Lua 作為插件腳本語言</li>
</ul>
</li>
<li><a href="https://github.com/PrismarineJS/mineflayer" target="_blank" rel="noopener noreferrer">Mineflayer</a>
<ul>
<li>Headless Client 端，在前面 AI 專案的段落有提過。</li>
</ul>
</li>
<li><a href="https://github.com/MCPI-Revival/minecraft-pi-reborn" target="_blank" rel="noopener noreferrer">Minecraft: Pi Edition: Reborn</a>
<ul>
<li>讓不是 ARM 架構的電腦執行 Minecraft: Pi Edition</li>
</ul>
</li>
<li><a href="https://wiki.vg/Client_List" target="_blank" rel="noopener noreferrer">其他兼容 Minecraft 的開源 Client 端</a></li>
<li><a href="https://wiki.vg/Server_List" target="_blank" rel="noopener noreferrer">其他兼容 Minecraft 的開源 Server 端</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="特修斯的-minecraft">特修斯的 Minecraft<a href="#特修斯的-minecraft" class="hash-link" aria-label="Direct link to 特修斯的 Minecraft" title="Direct link to 特修斯的 Minecraft">​</a></h2>
<p>當使用完全開源的 Client 端實做，例如：Mineflayer；
搭配上完全開源的 Server 端實做，例如：Cuberite；
Minecraft 就昇華成純粹的協定，整個過程不涉及原本的 Minecraft 了。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/the-key-of-huanche">The Key of Huanche</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/minecraft">Minecraft</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="這個問題一直佔用我的大腦資源，然而目前我正在忙於其他 Side Project，無心處理這個問題，所以我想寫一篇文章先把這堆東西倒出去，讓腦根子清靜一點，日後再回頭來處理。"><header><h2 class="title_BVkY" itemprop="headline"><a itemprop="url" href="/blog/2024-05-26_polis-gpu-context-issue">關於 Polis 的 GPU Context 問題</a></h2><div class="container_sDB1 margin-vert--md"><time datetime="2024-05-26T00:00:00.000Z" itemprop="datePublished">May 26, 2024</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_SrKl"><div class="avatar margin-bottom--sm"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/9475660" alt="Wei Ji" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/FlySkyPie" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Wei Ji</span></a></div><small class="avatar__subtitle" itemprop="description">閃亮症候群工程屍</small></div></div></div></div></header><div class="markdown" itemprop="articleBody">
<p>這個問題一直佔用我的大腦資源，然而目前我正在忙於其他 Side Project，無心處理這個問題，所以我想寫一篇文章先把這堆東西倒出去，讓腦根子清靜一點，日後再回頭來處理。</p>
<p>這是 Polis 預計使用的架構：</p>
<p><img decoding="async" loading="lazy" src="/assets/images/01_architecture-c124b45da57979da527c27f59d830b0b.webp" width="1254" height="1504" class="img_RpFt"></p>
<p>因為 Canvas 提供一個 <code>captureStream()</code> 方法允許把 Canvas 的畫面轉換成 <code>MediaStream</code> 物件，而 <code>MediaStream</code>  又能夠抽出 <code>MediaStreamTrack</code> 透過 WebRTC 的 API 串流出去。</p>
<p>但是最近我發現一個問題，就是 WebGL (Three.js) 存在一些限制：</p>
<blockquote>
<p>一個 WebGLRenderingContext 被綁定到一個 Canvas</p>
</blockquote>
<p>而 GL context 之間是無法互通的，因此複數個 Canvas 無法共用同一  組 GPU Context。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_Wp5O padding--none margin-left--sm"><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/polis">Polis</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/hakoniwa">Hakoniwa</a></li><li class="tag_UXKs"><a class="tag_lXMw tagRegular_c460" href="/blog/tags/the-key-of-huanche">The Key of Huanche</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/blog/page/2"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 FlyPie (Wei Ji)</div></div></div></footer></div>
</body>
</html>
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>工程屍 FlyPie 的異想世界 Blog</title>
        <link>https://flyskypie.github.io/posts</link>
        <description>工程屍 FlyPie 的異想世界 Blog</description>
        <lastBuildDate>Mon, 29 Dec 2025 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[從 Docker 開始的 Systemd 小宇宙]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-29_systemd-ish</link>
            <guid>https://flyskypie.github.io/posts/2025-12-29_systemd-ish</guid>
            <pubDate>Mon, 29 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[作為一個網頁前端導向的開發者，接觸 Systemd 的角度較資深一輩的工程師（或正規 CS (Computer Science) 路線出生的人）不太一樣，當前輩們已經在進行「Systemd 大一統」跟「No Systemd」之間的宗教戰爭的時候，我才在 Docker 容器內接觸內接觸第一個行程的問題 (PID 1 Problem)。]]></description>
            <content:encoded><![CDATA[
<p>作為一個網頁前端導向的開發者，接觸 Systemd 的角度較資深一輩的工程師（或正規 CS (Computer Science) 路線出生的人）不太一樣，當前輩們已經在進行「Systemd 大一統」跟「No Systemd」之間的宗教戰爭的時候，我才在 Docker 容器內接觸內接觸第一個行程的問題 (PID 1 Problem)。</p>
<p>這裡紀錄並整理一下自己在這條路上的一些經歷和觀察。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>正確的術語應該是 OCI (Open Container Initiative) 容器，不過為了方便溝通本文會視情況使用俗稱的 Docker。另一方面，筆者在學習過程確實是先使用 Docker，使用 Docker 以外的 Runtime 其實也只是不久之前的事。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="dockerfile-中的-entrypoint-與-cmd"><code>Dockerfile</code> 中的 <code>ENTRYPOINT</code> 與 <code>CMD</code><a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#dockerfile-%E4%B8%AD%E7%9A%84-entrypoint-%E8%88%87-cmd" class="hash-link" aria-label="Direct link to dockerfile-中的-entrypoint-與-cmd" title="Direct link to dockerfile-中的-entrypoint-與-cmd">​</a></h2>
<p>實際上 <code>ENTRYPOINT</code> 才決定了第一個行程 (Process) 是誰，<code>CMD</code> 只是後面被帶進去的參數。</p>
<p>有沒有經歷過 <code>docker compose down</code> 但是某個服務 (service) 卻遲遲沒有被關閉，整個過程停頓了一會兒才把整套服務簇釋放掉？</p>
<p>這十之八九是因為 <code>ENTRYPOINT</code>  沒有處理 <code>SIGTERM</code> 的能力造成的，開發環境或許不打緊，但是在生產環境如果有請求 (request) 掛著還沒處理完，然而容器被更新強制關閉的話，帶來的問題是十分致命的。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="容器編排-container-orchestration">容器編排 (Container Orchestration)<a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#%E5%AE%B9%E5%99%A8%E7%B7%A8%E6%8E%92-container-orchestration" class="hash-link" aria-label="Direct link to 容器編排 (Container Orchestration)" title="Direct link to 容器編排 (Container Orchestration)">​</a></h2>
<p>在 Docker Compose 允許用 YAML 將多個容器組織起來構成服務簇，並且使用 <code>depends_on</code> 來設定仰賴關係並控制容器的啟動順序、<code>restart</code> 來設定重啟策略、<code>healthcheck</code> 判斷容器狀態。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>一個 service 其實可以設定多個容器（透過 <code>replicas</code> 或是 <code>scale</code>），不過為了簡化描述我在上面並沒有直接指出。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="多個-process-的容器">多個 Process 的容器<a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#%E5%A4%9A%E5%80%8B-process-%E7%9A%84%E5%AE%B9%E5%99%A8" class="hash-link" aria-label="Direct link to 多個 Process 的容器" title="Direct link to 多個 Process 的容器">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>以下不少經驗來自工作上面對的問題，專案細節就不透漏了。</p></div></div>
<p>第一次遇到這樣的需求來自業務上的要求：</p>
<blockquote>
<p>將調用 SideFX Houdini 的 Python 伺服器容器化</p>
</blockquote>
<p>它要求運行一個授權伺服器 (License Server)，透過 Python 載入的 SDK 和這個伺服器之間會定時檢查彼此的存在。當時簡單使用 <code>entrypoint.sh</code> 、<code>&amp;</code> 語法和 <code>sleep</code> 把兩個行程跑了起來。</p>
<hr>
<p>後來遇到另外一個需要解決的問題：</p>
<blockquote>
<p>LibreOffice 作為一個無頭 (headless) 伺服器運作。
Python 程式使用 UNO (Universal Network Objects) 界面與之溝通。
佈署在單一容器的 Serverless 雲環境，因此只能有一個容器。</p>
</blockquote>
<p>這次我使用了 Supervisor 來解決問題<sup><a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#user-content-fn-supervisor-23c52a" id="user-content-fnref-supervisor-23c52a" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>。</p>
<hr>
<p>接下來的案例是真正讓我將 「Docker 內的 PID 1 問題」與「主機上的 PID 1 問題」連在一起的關鍵：LinuxServer.io。</p>
<p>Blender 是一個面向 3D 設計師的軟體，它是 Maya 或 3ds Max 這類軟體的開源競爭者。LinuxServer.io 使用了某種黑魔法允許 Blender 被運行在容器內，使用者則透過去網頁瀏覽器與之互動，並且 Blender 並不是唯一被這樣操作的軟體，除此之外 LinuxServer.io 還封裝了各種 GUI 軟體到 Dokcer 容器內。</p>
<p>LinuxServer.io 使用已經存在的實作 (KasmVNC) 來達成這些目標，不過魔法的關鍵在於：</p>
<blockquote>
<p>使用 s6-overlay 運行與管理包含 X Server 在內的多個程式。</p>
</blockquote>
<p><a href="https://github.com/just-containers/s6-overlay" target="_blank" rel="noopener noreferrer">s6-overlay</a> 不只能夠啟動多個程式，還能聲明程式與程式之間的仰賴關係，來依序啟動，甚至區分了「執行一次」和「持續在背景運作」的程式。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>因為不是本文重點，所以我沒有細談整個過程，大致上就是根據那個 Blender 容器的文件與原始碼找到實作的方式，留下 repo 供參考：</p><ul>
<li><a href="https://github.com/linuxserver/docker-blender" target="_blank" rel="noopener noreferrer">https://github.com/linuxserver/docker-blender</a></li>
<li><a href="https://github.com/linuxserver/docker-baseimage-kasmvnc" target="_blank" rel="noopener noreferrer">https://github.com/linuxserver/docker-baseimage-kasmvnc</a></li>
</ul></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="嵌入式-linux-中的-etcinitdrcs">嵌入式 Linux 中的 <code>/etc/init.d/rcS</code><a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#%E5%B5%8C%E5%85%A5%E5%BC%8F-linux-%E4%B8%AD%E7%9A%84-etcinitdrcs" class="hash-link" aria-label="Direct link to 嵌入式-linux-中的-etcinitdrcs" title="Direct link to 嵌入式-linux-中的-etcinitdrcs">​</a></h2>
<p>我曾經在嵌入式 Linux 看到這樣的東西：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">$ ls /etc/init.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rcK  rcS  S01syslogd  S02klogd  S02sysctl</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>當時我也根據需求寫了一個簡單的 <code>S03sdmnt</code> 腳本來掛載 SD 卡。</p>
<p>後來才知道這是根據 System V Init 簡化後的設計。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>完整的故事跟細節我有寫另外一篇文章描述：</p><p><a href="https://flyskypie.github.io/blog/2022-12-03_3ds_linux_javascript_bad_apple/" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/blog/2022-12-03_3ds_linux_javascript_bad_apple/</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="systemd-口味的容器編排軟體">Systemd 口味的容器編排軟體<a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#systemd-%E5%8F%A3%E5%91%B3%E7%9A%84%E5%AE%B9%E5%99%A8%E7%B7%A8%E6%8E%92%E8%BB%9F%E9%AB%94" class="hash-link" aria-label="Direct link to Systemd 口味的容器編排軟體" title="Direct link to Systemd 口味的容器編排軟體">​</a></h2>
<p>Quadlet 是我試著轉向使用 Podman 得知的東西，雖然最後我並沒有用過就了，而是使用 <a href="https://github.com/containers/podman-compose" target="_blank" rel="noopener noreferrer">Podman Compose</a>，省得還要另外維護一份語法不一樣的東西。</p>
<p>下面是 Quadlet 聲明一個服務的例子<sup><a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#user-content-fn-podman-orchestration-23c52a" id="user-content-fnref-podman-orchestration-23c52a" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>：</p>
<div class="language-ini codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-ini codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=A minimal container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Container]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use the centos image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Image=quay.io/centos/centos:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># In the container we just run sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exec=sleep 60</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Restart service when sleep finishes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Start by default on boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target default.target</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="從領域驅動domain-driven的角度來看這件事">從領域驅動（Domain-driven）的角度來看這件事<a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#%E5%BE%9E%E9%A0%98%E5%9F%9F%E9%A9%85%E5%8B%95domain-driven%E7%9A%84%E8%A7%92%E5%BA%A6%E4%BE%86%E7%9C%8B%E9%80%99%E4%BB%B6%E4%BA%8B" class="hash-link" aria-label="Direct link to 從領域驅動（Domain-driven）的角度來看這件事" title="Direct link to 從領域驅動（Domain-driven）的角度來看這件事">​</a></h2>
<p>不難發現上述不同的工具都在解決幾個類似的問題：</p>
<ul>
<li>系統初始化（啟動與關機），如：掛起背景程式。</li>
<li>根據背景程式的仰賴關係依序掛起，如：應用程式仰賴資料庫。</li>
<li>處理背景程式的異常狀態，如：崩潰重啟。</li>
</ul>
<p>這些問題構成的問題領域 (Problem Domain) 可以被定位為系統初始化 (<a href="https://en.wikipedia.org/wiki/Init" target="_blank" rel="noopener noreferrer">System Init</a>) 和行程管理 (<a href="https://en.wikipedia.org/wiki/Process_supervision" target="_blank" rel="noopener noreferrer">Process Supervision</a>)。</p>
<p>而上述工具則是這個 Problem Domain 對應的解決方案領域 (Solution Domain)。</p>
<p>Systemd 則是這個 Solution Domain 中最有名的工具之一。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-supervisor-23c52a">
<p>使用 Supervisor 來管理程式 | 《Docker —— 從入門到實踐》正體中文版. Retrieved 2025-12-29, from <a href="https://philipzheng.gitbook.io/docker_practice/cases/supervisor" target="_blank" rel="noopener noreferrer">https://philipzheng.gitbook.io/docker_practice/cases/supervisor</a> <a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#user-content-fnref-supervisor-23c52a" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-podman-orchestration-23c52a">
<p>在 Podman 管理多個 container • 鰭狀漏斗. Retrieved 2025-12-29, from <a href="https://vrabe.tw/blog/manage-multi-containers-in-podman/" target="_blank" rel="noopener noreferrer">https://vrabe.tw/blog/manage-multi-containers-in-podman/</a> <a href="https://flyskypie.github.io/posts/2025-12-29_systemd-ish#user-content-fnref-podman-orchestration-23c52a" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>systemd</category>
        </item>
        <item>
            <title><![CDATA[教練我想學 K8s]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-28_learn-k8s</link>
            <guid>https://flyskypie.github.io/posts/2025-12-28_learn-k8s</guid>
            <pubDate>Sun, 28 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[最近想學 K8s 然後陸續把 Homelab 的服務從 Docker Swarm 移過去，不過一直靜不下心好好讀它，思緒糊成一團，於是想說先把一些已經知道的事情整理一下。]]></description>
            <content:encoded><![CDATA[
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/00_cover-cad795c3aa51f3adfc9ccdba21a8cf5e.webp" width="1024" height="1024" class="img_RpFt"></p>
<p>最近想學 K8s 然後陸續把 Homelab 的服務從 Docker Swarm 移過去，不過一直靜不下心好好讀它，思緒糊成一團，於是想說先把一些已經知道的事情整理一下。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="動機">動機<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#%E5%8B%95%E6%A9%9F" class="hash-link" aria-label="Direct link to 動機" title="Direct link to 動機">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>因為我實際上還未實際使用 K8s，所以以下可以當成「對 K8s 的美好幻想」。</p></div></div>
<p>簡單紀錄一下幾個讓我想學 K8s 的動機。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="image-volume">Image Volume<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#image-volume" class="hash-link" aria-label="Direct link to Image Volume" title="Direct link to Image Volume">​</a></h3>
<p>前一陣子在鼓搗 Keyclaok，並且外掛了兩個組件：</p>
<ul>
<li><a href="https://github.com/keycloakify/keycloakify" target="_blank" rel="noopener noreferrer">https://github.com/keycloakify/keycloakify</a></li>
<li><a href="https://github.com/p2-inc/keycloak-magic-link" target="_blank" rel="noopener noreferrer">https://github.com/p2-inc/keycloak-magic-link</a></li>
</ul>
<p>Keycloak 的插件機制是將 <code>*.jar</code> 檔案放到 <code>/opt/keycloak/providers/</code> 下，待啟動時被載入。</p>
<p>在 OCI (Open Container Initiative) 佈署下處理這種這整合有兩種方法：</p>
<ul>
<li>建置階段：直接在 Dockerfile 用 COPY 完成組裝。</li>
<li>佈署階段：透過 Volume 將 jar 檔案掛載進容器。</li>
</ul>
<p>前者缺乏彈性；後者 Docker 不支援，但是 K8s 支援<sup><a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#user-content-fn-k8s-image-volume-135bb9" id="user-content-fnref-k8s-image-volume-135bb9" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>話說回來這幾天在讀 Docker Compose 的 spec 看到這東西(<code>image</code>)：</p><div class="language-json codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-json codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">// service.volumes.type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  "type": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "type": "string",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "enum": ["bind", "volume", "tmpfs", "cluster", "npipe", "image"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "description": "The mount type: bind for mounting host directories, volume for named volumes, tmpfs for temporary filesystems, cluster for cluster volumes, npipe for named pipes, or image for mounting from an image."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也許 Docker 也支援了說不定。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="depends_on"><code>depends_on</code><a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#depends_on" class="hash-link" aria-label="Direct link to depends_on" title="Direct link to depends_on">​</a></h3>
<p>Docker Compose 使用 <code>depends_on</code> 來延遲一些容器的啟動，避免仰賴其他容器的服務過早的啟動，例如：後端嘗試對還沒準備完成的資料庫進行連線。</p>
<p>Docker Swarm 則不支援這個功能，它的邏輯是透過 health check：反正有仰賴的容器連線失敗會 health check 失敗，直接重啟容器直到成功為止。但是這樣的設計無法運行相對複雜的服務，例如：我嘗試在 Swarm 模式下運行 GVM (OpenVas) 並沒有成功過。</p>
<p>而 K8s 則是透過 <code>initContainers</code> 的機制來處理這類需求。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="serverless">Serverless<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#serverless" class="hash-link" aria-label="Direct link to Serverless" title="Direct link to Serverless">​</a></h3>
<p>工作時使用雲端的 Serverless 的服務 (GCP Cloud Run)，因此我對於自架 (selfhosted) 方案很感興趣，也有找到一些開源方案，不過它們多基於 K8s，例如：</p>
<ul>
<li><a href="https://github.com/fission/fission" target="_blank" rel="noopener noreferrer">https://github.com/fission/fission</a></li>
<li><a href="https://github.com/openfaas/faas" target="_blank" rel="noopener noreferrer">https://github.com/openfaas/faas</a></li>
<li><a href="https://github.com/knative/serving" target="_blank" rel="noopener noreferrer">https://github.com/knative/serving</a></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>我這裡是指基於 OCI 的 Serverless，非 OCI 的 "Function based" Serverless 方案通常都有緊支援特定程式語言的限制。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="k3s-與遠端訪問">K3s 與遠端訪問<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#k3s-%E8%88%87%E9%81%A0%E7%AB%AF%E8%A8%AA%E5%95%8F" class="hash-link" aria-label="Direct link to K3s 與遠端訪問" title="Direct link to K3s 與遠端訪問">​</a></h2>
<p>前幾天 (2025-12-23) 安裝完 K3s 設定遠端訪問時看到這個：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">$ kubectl config view</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">clusters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    certificate-authority-data: DATA+OMITTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    server: https://127.0.0.1:6443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contexts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- context:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cluster: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">current-context: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">preferences: {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- name: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-certificate-data: DATA+OMITTED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client-key-data: DATA+OMITTED</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>雖然知道 <code>certificate-authority-data</code> 大概是為了 HTTPS 的加密機制而準備的，不過我其實不知所以然。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="k8s-架構圖">K8s 架構圖<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#k8s-%E6%9E%B6%E6%A7%8B%E5%9C%96" class="hash-link" aria-label="Direct link to K8s 架構圖" title="Direct link to K8s 架構圖">​</a></h2>
<p>查資料的時候看到這張架構圖：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_k8s-eb9afbe14a7063a5e37bbb93a531086e.webp" width="1602" height="2010" class="img_RpFt"></p>
<p>我注意到 K8s 的組件之間通訊都是加密的，這讓我想到之前透過「Kubernetes The Hard Way」學習 K8s 的經驗。</p>
<p>以及某篇文章，有個老兄抱怨 K8s 難用，伺服器癱瘓的原因似乎是憑證過期，並且它們最後在 AWS 找到了歸屬。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="kubernetes-the-hard-way">Kubernetes The Hard Way<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#kubernetes-the-hard-way" class="hash-link" aria-label="Direct link to Kubernetes The Hard Way" title="Direct link to Kubernetes The Hard Way">​</a></h2>
<p><a href="https://github.com/kelseyhightower/kubernetes-the-hard-way" target="_blank" rel="noopener noreferrer">Kubernetes The Hard Way</a> 是一個架設 K8s 的教學，但是不使用現成的安裝精靈，而是手動安裝與配置每一個組件。</p>
<p>去年（2024 年 1 月）我其實試著依照這份指南的步驟嘗試在一台 x86 32 位元筆電上建立 K8s，雖然最後沒有持續下去，但是我隱約記得過程中一直在生成金鑰跟簽署憑證。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>我當時有試著將執行過得步驟寫成 Make/Ansible 腳本：</p><p><a href="https://github.com/FlySkyPie/k8s-builder-and-installer-for-x86-single-node" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/k8s-builder-and-installer-for-x86-single-node</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="正確打開-k8s-的方式難道是密碼學">正確打開 K8s 的方式...難道是密碼學？<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#%E6%AD%A3%E7%A2%BA%E6%89%93%E9%96%8B-k8s-%E7%9A%84%E6%96%B9%E5%BC%8F%E9%9B%A3%E9%81%93%E6%98%AF%E5%AF%86%E7%A2%BC%E5%AD%B8" class="hash-link" aria-label="Direct link to 正確打開 K8s 的方式...難道是密碼學？" title="Direct link to 正確打開 K8s 的方式...難道是密碼學？">​</a></h2>
<p>作為一個以開發前端業務邏輯為重心的開發者，密碼學相關的基礎概念可以說是很容易被輕忽的部份。或許我該好好的梳理以下對於加密技術的基礎概念作為。</p>
<p>當然，如果我只是要作為 K8s 的使用者，這些知識似乎沒有這麼重要，不過我同時還是要在 Homelab 架設 K8s 的維護者，我不認為紮紮時時的把基礎打好有什麼壞處。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-k8s-image-volume-135bb9">
<p>Use an Image Volume With a Pod | Kubernetes. <a href="https://kubernetes.io/docs/tasks/configure-pod-container/image-volumes/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/configure-pod-container/image-volumes/</a> <a href="https://flyskypie.github.io/posts/2025-12-28_learn-k8s#user-content-fnref-k8s-image-volume-135bb9" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>k8s</category>
        </item>
        <item>
            <title><![CDATA[知識邊界與我的專題式自學法]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-26_knowledge-boundary-and-project-based-learning</link>
            <guid>https://flyskypie.github.io/posts/2025-12-26_knowledge-boundary-and-project-based-learning</guid>
            <pubDate>Fri, 26 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[知識邊界]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="知識邊界">知識邊界<a href="https://flyskypie.github.io/posts/2025-12-26_knowledge-boundary-and-project-based-learning#%E7%9F%A5%E8%AD%98%E9%82%8A%E7%95%8C" class="hash-link" aria-label="Direct link to 知識邊界" title="Direct link to 知識邊界">​</a></h2>
<p>Matt Might 的「<a href="https://matt.might.net/articles/phd-school-in-pictures/" target="_blank" rel="noopener noreferrer">圖解博士學位 (The illustrated guide to a Ph.D.)</a>」主要是以視覺化的方式解釋「全人類的知識邊界」與博士學位之間關係。不過我認為這個概念在幫助人理解教育體系本身的設計以及自身的知識邊界非常有幫助。沒有看過得人可以點擊上面的連結或是<a href="https://researcher20.com/2010/08/18/ph-d-%E5%9C%96%E8%A7%A3-the-illustrated-guide-to-a-ph-d/" target="_blank" rel="noopener noreferrer">這個中文翻譯</a>。</p>
<p>以下我會參考這個概念解釋，加上一點我的個人見解。</p>
<blockquote>
<p>“As our circle of knowledge expands, so does the circumference of darkness surrounding it.”</p>
<p>-- 愛因斯坦</p>
</blockquote>
<p>用圓圈來形容知識，Matt Might 並不是第一個人，不過視覺化的表達可能遠比名言金句更有力量。現在想像一個圓圈代表全人類知識體系已知的知識，而圓圈外則是未知：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_circle-of-knowledge-ae59c840e2bd4a91126fbb7677fa3ece.webp" width="1024" height="768" class="img_RpFt"></p>
<p>當一個人接受了國民義務教育，它從整個知識體系中均衡的學習到了一點東西：</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,UklGRvoOAABXRUJQVlA4IO4OAABQ6QCdASoABAADPpFIokylpKMiIFUYYLASCWlu/HyZ4b0HfwseJ/lfyI57TbCKm/B498QHqA8wD9OekB5gP2q9ar0AegB/XuoA/Wb2APLf9kr9tf1p9qrVUPnP+E7U/P+t77/4CHYjKlCEslD8wY4Dz/gH/hN+YCOrGgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECBAgQIECA+mgzpzZnXs7LrLTle2Q3W1JgLUgvxOisaBAgQIECBAgQIECBATZnf/iVdm0FQYDWZY8OTMq2TwFwpXkAFeHf94hHF014rGgQIECBAgQIECBAgQIECBAgJMLIp3b0vprsi2C0WpBaVDWKoHLmM+W4tukF+J0VjQIECBAgQIECBAgQICTxN5Dy5kwy7hw4cOHDdL0ofjY4JFKikF+J0VjQIECBAgQIECBAgQHwQJZNFlEJThw4cOHDh49lopMruMiYxeKxoECBAgQIECBAgQIECA+CBgbe+0HakwFqQX4nRWIQ/ZbemFv4lRpMBakF+J0VjQIECBAgQHwQMA53oabUmAtSC/E6KxoCT2fV2KkBXWg6KxoECBAgQIECBAgQICWECdt7+zu9JAgQIECBAgQICV9pI/jAqf7akwFqQX4nRWNAgQICVqNsy2B464cOHDhw4cOHDhwrh6sNgY2GyxoECBAgQIECBAgQIEBJAk531N+J0VjQIECBAgQID4TiZpgwAWpBfidFY0CBAgQIEBLCA1rmjUmAtSC/E6KxoECBASz9am+tqTAWpBfidFY0CBAfHOBtLZU/21JgLUgvxOisaA+G6dKR79PSQIECBAgQIECBAgJWn5NAy/E6KxoECBAgQIECBASvY+dnb0kCBAgQIECBAgQHw1fAX7xOisaBAgQIECBAgQEsH0v+pIECBAgQIECBAgQICV7xm4nhw4cOHDhw4cOHDhw3THGnWNAgQIECBAgQIECAq+NTjQS62pMBacDgeW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" width="1024" height="768" class="img_RpFt"></p>
<p>在 Matt Might 的圖解中，高中是另外一個均勻的知識圈圈，開始出現知識領域專業化是大學系所才發生的事情。不過在我國教育實務上有分成普通高中跟高職；普通高中又有分組（108 課綱之後為班群），而高職則是已經開始進行類似大學系所的專業化學習（理論與實務的差異先不談）：</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="1024" height="768" class="img_RpFt"></p>
<p>普通高中是綠色的比較均勻圈圈，高職則是以較偏頗的虛線，看過銀之匙（荒川弘）這部作品的讀者可能會對這種差異更有感覺，作品中普通升學體系的主角進入技職體系所受到的衝擊就是來自於兩種體系對於知識邊界預期不太一樣。</p>
<p>如果你繼續留在學術界，完成學士、碩士的訓練；並且持續閱讀論文、學習往特定的知識領域前進；最後在人類的知識邊界挖出一角，那個成果將讓你成為博士。</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="1024" height="768" class="img_RpFt"></p>
<p>Matt Might 花比較多篇幅在醞釀這個小角，因為擴展人類知識邊界的博士並不容易，不過這並不是我今天要談的重點，所以容我快速帶過，但是到這裡為止，你應該對「知識邊界」的概念有比較清晰的想像。</p>
<p>另外在我看來，知識邊界拓展的方式從微觀尺度來講，更像是「劈裂」過去的，當每你經歷一個得以觸動的知識點時，知識邊界會以閃電一般的路徑劈裂過去。</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/05_boundary-of-knowledge-42415af4685709e9916e2bee0dee3ee6.webp" width="475" height="317" class="img_RpFt"></p>
<p>觸動的與否取決於該知識點與知識邊界的距離，以及原本「裂痕的方向」有關，這是為什麼同樣的事件、同樣的體驗可以成為某些人的知識點並拓展它的知識邊界，對某些人而言卻只是成為被忘卻的記憶。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="專題式自學法">專題式自學法<a href="https://flyskypie.github.io/posts/2025-12-26_knowledge-boundary-and-project-based-learning#%E5%B0%88%E9%A1%8C%E5%BC%8F%E8%87%AA%E5%AD%B8%E6%B3%95" class="hash-link" aria-label="Direct link to 專題式自學法" title="Direct link to 專題式自學法">​</a></h2>
<p>專題導向學習 (Project-Based Learning) 似乎是一種教育科學的方法論，並且在我國被提倡也只是最近（108 課綱）的事情而已。而我有幸在成長過程自然的捕捉到這個方法論的脈絡。</p>
<hr>
<p>「想做遊戲」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#%E9%A3%9B%E8%B2%93%E5%B7%A5%E4%BD%9C%E5%AE%A4" target="_blank" rel="noopener noreferrer">飛貓工作室</a>，</p>
<p>但是實際上沒有完成任何遊戲。</p>
<hr>
<p>「看著 LEGO® NXT 2.0，心想自己造一個」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#Project%3AMMFEDP" target="_blank" rel="noopener noreferrer">電機開發平台 (MMFEDP, Modular Multi-Faceted Electrical Develop Platform) 專案</a>，</p>
<p>但是實際上沒有完成任何跟可程式化有關的東西或是足夠實用的減速機。</p>
<hr>
<p>「看著機器人比賽，對著那種與他人合作打造機器人的憧憬，心想自己造一個」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#Project%3AITUGV" target="_blank" rel="noopener noreferrer">獨立性無人地面載具 (ITUGV, Independent Task Unmanned Ground Vehicle)</a>，</p>
<p>但是實際上沒有實現遠端遙控的機器人。</p>
<hr>
<p>「YouTube 的『homemad』影片往往包含了車銑床之類的加工方式，但是我想自己製作機器人零件，那就用鑄造的好了」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#%E5%9C%9F%E7%A0%B2%E7%86%94%E7%88%90" target="_blank" rel="noopener noreferrer">土砲熔爐</a>，</p>
<p>但是實際上沒有用它製作過機器人零件。</p>
<hr>
<p>「想和同儕分享寫程式的樂趣」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#%E7%A8%8B%E5%BC%8F%E8%A0%B1" target="_blank" rel="noopener noreferrer">程式蠱</a>，</p>
<p>但是實際上沒有讓其他人參與過。</p>
<hr>
<p>「想做 2.5D RPG」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#VB.NET%20%E5%9C%9F%E7%A0%B2%202.D%20%E9%81%8A%E6%88%B2" target="_blank" rel="noopener noreferrer">VB.NET 土砲 2.D 遊戲</a>，</p>
<p>但是實際上沒有實現遊戲該有的抽象化與職責分離。</p>
<hr>
<p>「看著 KSP 遊戲但是無法合法的擁有，心想自己造一個」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#VB.NET%20%E5%A4%AA%E7%A9%BA%E8%BB%8C%E9%81%93%E6%A8%A1%E6%93%AC%E9%81%8A%E6%88%B2" target="_blank" rel="noopener noreferrer">VB.NET 太空軌道模擬遊戲</a>，</p>
<p>但是實際上停留在 2D 模擬，而且沒有更進一步的多組件編輯機制。</p>
<hr>
<p>「心想開發一個多人連線 FPS」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#Project%3A%E9%A6%99%E5%B7%B4%E6%9C%B5%20Online" target="_blank" rel="noopener noreferrer">香巴朵 Online</a>，</p>
<p>但是實際上 3D 射擊的部份並不是使用 GPU 繪圖，而連線功能也僅停留在 2D 的實驗性開發 (prototype)。</p>
<hr>
<p>「想用論壇機制來解決抽象的『自造者銀行』」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#C%20%E5%B9%A3%E8%AB%96%E5%A3%87" target="_blank" rel="noopener noreferrer">C 幣論壇</a>，</p>
<p>但是實際上交易功能並沒有投入使用。</p>
<hr>
<p>「既然我已經做過熔爐了，這次順便解決廢氣問題好了」，於是有了：</p>
<p><a href="https://flyskypie.github.io/sideprojects-wiki/#%E7%A7%BB%E5%8B%95%E7%86%94%E7%88%90" target="_blank" rel="noopener noreferrer">畢業專題-熔爐</a>，</p>
<p>但是實際上廢氣處理系統並沒有得到足夠多的關注與測試。</p>
<hr>
<p>當我說：</p>
<blockquote>
<p>我有「閃亮事物症候群」</p>
</blockquote>
<p>不是在開玩笑的。</p>
<p>當我說：</p>
<blockquote>
<p>「智者從歷史中學習，愚者從錯誤中學習」，而我是愚者。</p>
</blockquote>
<p>不只是說說而已。</p>
<p>每一個 Side Project 其實都源自微不足道的願望，並且乍看之下所有專案都以失敗告終，不過我尚未提起我在當中獲得了什麼：</p>
<ul>
<li>「飛貓工作室」：我當過傲慢毫無能力（不論是領導能力或是技術能力）的籌備者；這讓我每次在團體或團隊中手握權力時，不斷提醒著自身與他人之間的關係。</li>
<li>「MMFEDP」、「ITUGV」：我已經成長到不必透過 NXT 2.0 這樣的東西，而是使用 Arduino、樹莓派來開發機電玩具的程度了。</li>
<li>「土砲熔爐」、「畢業專題-熔爐」：它帶給我「無法製造」的無能感是引導我前往材料系的因素之一，如今我已經能夠使用車床、銑床、鉗工、手工電弧焊、3D 列印...等等方式打造我想要的東西。</li>
<li>「程式蠱」：Zero-player game 的概念至今仍然在影響著我學習的方向，實作 2.0 的時候更是直接點開 <code>dlopen</code> 的使用經驗。</li>
<li>「VB.NET *」：雖然現在我已經不使用 VB 了，但是第一次使用參考（指標）以及從靜態記憶體到動態記憶體的過程依然是不可多得的體驗。</li>
<li>「香巴朵 Online」：它對我提供了一個很強烈的 TCP Socket 的記憶點，這讓我在使用諸如 HTTP 其他網路連線機制的時候很有幫助。</li>
<li>「C 幣論壇」：使用 Laravel 的經驗可以說是幫我在後端軟體的開發經驗上打下非常堅硬的基礎。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="專題與知識邊界">專題與知識邊界<a href="https://flyskypie.github.io/posts/2025-12-26_knowledge-boundary-and-project-based-learning#%E5%B0%88%E9%A1%8C%E8%88%87%E7%9F%A5%E8%AD%98%E9%82%8A%E7%95%8C" class="hash-link" aria-label="Direct link to 專題與知識邊界" title="Direct link to 專題與知識邊界">​</a></h2>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="1024" height="768" class="img_RpFt"></p>
<p>是的，大部分的專題目標都在我當下的知識邊界之外，這也是為什麼它們大多數都會失敗的原因。</p>
<blockquote>
<p>我們選擇在這個十年登上月球，並完成其他的事，不是因為它們很簡單，而是因為它們很困難。</p>
<p>-- 約翰．甘迺迪（John F. Kennedy）</p>
</blockquote>
<p>每一個 Side Project 都是對於「博士挑戰人類知識邊界」的微小仿作，對我而言知識不是一個被好像很偉大的人站在教室裡授予的東西，而是在知識邊界之外，透過一個又一個知識點劈開未知獲得的東西。</p>
<p>如此不斷的前進，過個幾年回過頭來看，可能會驚訝於那些曾經遙不可及的目標不知不覺已經處於自己的身後；又或是它已經處於自己當下的知識邊界觸手可及的地方。</p>]]></content:encoded>
            <category>Philosophy</category>
        </item>
        <item>
            <title><![CDATA[Biomes 研究筆記 7]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-24_biomes</link>
            <guid>https://flyskypie.github.io/posts/2025-12-24_biomes</guid>
            <pubDate>Wed, 24 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Assets]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="assets">Assets<a href="https://flyskypie.github.io/posts/2025-12-24_biomes#assets" class="hash-link" aria-label="Direct link to Assets" title="Direct link to Assets">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_assets-ffed5e017faaedd7e581476b43d1eea9.webp" width="978" height="420" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-assets" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-assets</a></li>
</ul>
<p>這個部份算是<a href="https://flyskypie.github.io/posts/2025-12-14_biomes/" target="_blank" rel="noopener noreferrer">上一次的研究筆記</a>漏掉了，這個模組沒什麼特別的，就是一堆放在 Git LFS 的檔案，只是我抽出來單獨放在一個 repository 內。</p>
<p>做這件事的時候，順便參考了幾個開源遊戲，看看它們處理遊戲素材的：</p>
<ul>
<li>0 .A.D.<!-- -->
<ul>
<li>使用 <a href="https://svn.wildfiregames.com/nightly-build/trunk/" target="_blank" rel="noopener noreferrer">SVN</a>， 因此不在 Git 討論範疇內。</li>
</ul>
</li>
<li>Luanti (Minetest)<!-- -->
<ul>
<li><a href="https://github.com/luanti-org/luanti" target="_blank" rel="noopener noreferrer">https://github.com/luanti-org/luanti</a></li>
<li>看起來是直接放在一個 repo 內。</li>
</ul>
</li>
<li>BAR (Beyond All Reason)<!-- -->
<ul>
<li><a href="https://github.com/beyond-all-reason/Beyond-All-Reason" target="_blank" rel="noopener noreferrer">https://github.com/beyond-all-reason/Beyond-All-Reason</a></li>
<li>看起來是直接放在一個 repo 內。</li>
</ul>
</li>
<li>Warzone 2100<!-- -->
<ul>
<li>不同性質的素材是分別放在獨立的 repo 內，再用 Git 的 Submodule 放到主要的 repo 內，例如：<!-- -->
<ul>
<li><a href="https://github.com/Warzone2100/data-music-opus" target="_blank" rel="noopener noreferrer">https://github.com/Warzone2100/data-music-opus</a></li>
<li><a href="https://github.com/Warzone2100/data-fonts" target="_blank" rel="noopener noreferrer">https://github.com/Warzone2100/data-fonts</a></li>
<li><a href="https://github.com/Warzone2100/data-texpages/" target="_blank" rel="noopener noreferrer">https://github.com/Warzone2100/data-texpages/</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="cayleyjs">Cayley.js<a href="https://flyskypie.github.io/posts/2025-12-24_biomes#cayleyjs" class="hash-link" aria-label="Direct link to Cayley.js" title="Direct link to Cayley.js">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_cayley-ed677b3fbd414a18fd232be8245e6773.webp" width="1549" height="392" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-cayley-js" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-cayley-js</a></li>
</ul>
<p>Cayley.js 是一個 Cayley WASM 的再封裝，除了實做了一些東西以外，還提供一些單元測試跟 Benchmark 測試。</p>
<p>處理它的時候算是踩了 Javascript 生態系一個很經典的小坑，原本我打算用 Vitest 取代原本的 AVA 單元測試框架，但是我忘記了 Vite 工具鏈是 ESM 本位主義，因此單元測試會 import Web 版本的 WASM 載入器。</p>
<p>然而 Web 與 Node.js 是屬於兩個不同的 Javascript Runtime，對於「如何載入 WASM」的方式也不同；Web 是使用 <code>fetch</code> <strong>從網路下載</strong> WASM；Node.js 則是使用 <code>fs</code> <strong>從檔案系統讀取</strong> WASM。</p>
<p>使用 Vitest 呼叫 <code>fetch</code> 會觸發 "Not implemented yet" 之類的錯誤訊息。最後是使用 Jest 取代 AVA，慶幸的是已經有人寫了遷移指南<sup><a href="https://flyskypie.github.io/posts/2025-12-24_biomes#user-content-fn-ava-to-jest-f6f5a5" id="user-content-fnref-ava-to-jest-f6f5a5" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>，照著做就完成了。</p>
<p>Benchmark 那邊則是用 <code>tsx</code> 取代 <code>ts-node</code>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="zod">Zod<a href="https://flyskypie.github.io/posts/2025-12-24_biomes#zod" class="hash-link" aria-label="Direct link to Zod" title="Direct link to Zod">​</a></h2>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-zod" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-zod</a></li>
<li><a href="https://www.npmjs.com/package/@flyskypie/biomes-zod" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/@flyskypie/biomes-zod</a></li>
<li><a href="https://github.com/ill-inc/zod" target="_blank" rel="noopener noreferrer">https://github.com/ill-inc/zod</a>
<ul>
<li>Biomes 專案自己的 Fork</li>
</ul>
</li>
</ul>
<p>Zod 是一個方便開發者在 Runtime 對 JSON 資料進行 Schema 驗證的函式庫，我其實不確定 Biomes 為什麼要刻意 fork 出一個版本，最明顯的差異是 Biomes 的版本多了這個方法：</p>
<div class="language-javascript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">annotate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"some"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>並且 Symbol 並不在 Zod 的支援路線上：</p>
<blockquote>
<p>Symbols aren't considered literal values, nor can they be simply compared with <code>===</code>. This was an oversight in Zod 3.<sup><a href="https://flyskypie.github.io/posts/2025-12-24_biomes#user-content-fn-zod-f6f5a5" id="user-content-fnref-zod-f6f5a5" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
</blockquote>
<p>考慮到這並不屬於 JSON 解析的範疇，想想也合理，不過 Biomes 專案本身已經用下去了，我也不能在不熟悉的專案的情況下貿然移除這個客製化 Zod 轉而使用原本的。Biomes 原本是直接從 GitHub 安裝，我 fork 之後做了兩件事：</p>
<ul>
<li>將原本應該被 gitignore 的發布路徑 (<code>/lib</code>) 從 Git 紀錄中清除。</li>
<li>將打包結果發布到 NPM。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="shared">Shared<a href="https://flyskypie.github.io/posts/2025-12-24_biomes#shared" class="hash-link" aria-label="Direct link to Shared" title="Direct link to Shared">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/03_shared-17f866e240d1a1e66c421e5f7e810c89.webp" width="2291" height="1121" class="img_RpFt"></p>
<p><code>ecs</code> 和 <code>shared</code> 之間有很嚴重的循環仰賴，無奈之下只好用 PNPM 的 workspace 處理。<code>ecs</code> 對 <code>server</code> 有輕微的仰賴，我直接複製那部份的程式碼進入 <code>ecs</code>，在我看來這裡解偶的效益遠比 DRY 還重要。</p>
<p><code>shared</code> 則是測試的部份對 <code>server</code> 仰賴，仰賴了 Voxeloo WASM loader 的部份，這一點我打算暫時忽略，之後再來處理，畢竟這個部份可以參考 Cayley 的處理方式。</p>
<p>這是我在 <code>shared</code> 上面臨另外一個比較麻煩的問題：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/04_shared-build-errors-502be1013e64f362bd01b74967d4b8e6.webp" width="1421" height="776" class="img_RpFt"></p>
<p><code>shared</code> 使用 Zod 大量定義 Schema，而一些複雜的 Schema 在編譯 Typescript 型別檔 (<code>.d.ts</code>) 時，無法正常推論，因此必須透過手動聲明的方式來解決：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> zChallengeCompleteMessage</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ZodObject</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ZodLiteral</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token string" style="color:#e3116c">"challenge_complete"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    challengeId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">typeof</span><span class="token plain"> zBiomesId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">object</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kind</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> z</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">literal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"challenge_complete"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    challengeId</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> zBiomesId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>而且看起來跟前面提到的 Symbol 有關...F**k...</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-12-24_biomes#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-ava-to-jest-f6f5a5">
<p>Switching from Ava to Jest for TypeScript | by Gant Laborde | Red Shift. Retrieved 2025-12-24, from <a href="https://shift.infinite.red/a6dac7d1712f" target="_blank" rel="noopener noreferrer">https://shift.infinite.red/a6dac7d1712f</a> <a href="https://flyskypie.github.io/posts/2025-12-24_biomes#user-content-fnref-ava-to-jest-f6f5a5" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-zod-f6f5a5">
<p>Migration guide | Zod. Retrieved 2025-12-24, from <a href="https://zod.dev/v4/changelog#drops-symbol-support" target="_blank" rel="noopener noreferrer">https://zod.dev/v4/changelog#drops-symbol-support</a> <a href="https://flyskypie.github.io/posts/2025-12-24_biomes#user-content-fnref-zod-f6f5a5" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>Biomes</category>
        </item>
        <item>
            <title><![CDATA[Voxel 檔案格式筆記]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-24_voxel-format</link>
            <guid>https://flyskypie.github.io/posts/2025-12-24_voxel-format</guid>
            <pubDate>Wed, 24 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[前情提要]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<p>最近我在研究一個開源專案 (<a href="https://github.com/ill-inc/biomes-game" target="_blank" rel="noopener noreferrer">ill-inc/biomes-game</a>)，並且在 2025-12-14 算是完成了一個里程碑，我成功重建專案內的素材瀏覽器，將遊戲素材讀出並且播放動畫：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_voxel-cat-15f3da5acf1413467a134204cc5060b8.webp" width="1440" height="834" class="img_RpFt"></p>
<p>「這個是怎麼幫 Voxel 上動畫的？」一個工程師這個問我。</p>
<p>「我不知道」我回道。</p>
<p>雖然我有瞄過遊戲素材檔案一眼，知道裡面有 <code>.vox</code> 和 JSON 檔，但是我不知道它們在這個專案具體是怎麼組裝起來的。</p>
<p><code>.vox</code> 這個檔案格式我其實不陌生，早在 2021 年 11 月的時候我就有一篇筆記紀錄關於各種 Voxel 儲存的檔案格式，不過並沒有整理成能夠拿給別人看的程度。於是我想說趁這個機會把東西整理出來發一篇廢文。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="gox-goxel"><code>.gox</code> (Goxel)<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#gox-goxel" class="hash-link" aria-label="Direct link to gox-goxel" title="Direct link to gox-goxel">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_goxel-2ed5b53121e3c0195ccd57d8697c4efb.webp" width="1440" height="833" class="img_RpFt"></p>
<p>Goxel 是 一個 Voxel 編輯軟體，而 <code>.gox</code> 則是它的專有（專案）格式，檔案格式的 Spec 直接寫在<a href="https://github.com/guillaumechereau/goxel/blob/069c094f8d3d72b7435483f42e6d7aafc9fb6b93/src/formats/gox.c" target="_blank" rel="noopener noreferrer">程式碼</a>的註解內：</p>
<div class="language-c codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-c codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * File format, version 2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * This is inspired by the png format, where the file consists of a list of</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * chunks with different types.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  4 bytes magic string        : "GOX "</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  4 bytes version             : 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  List of chunks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      4 bytes: type</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      4 bytes: data length</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      n bytes: data</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      4 bytes: CRC</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  The layer can end with a DICT:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      for each entry:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          4 byte : key size (0 = end of dict)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          n bytes: key</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          4 bytes: value size</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          n bytes: value</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  chunks types:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  IMG : a dict of info:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      - box: the image gox.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  PREV: a png image for preview.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  BL16: a 16^3 block saved as a 64x64 png image.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  LAYR: a layer:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      4 bytes: number of blocks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      for each block:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          4 bytes: block index</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          4 bytes: x</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          4 bytes: y</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          4 bytes: z</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          4 bytes: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      [DICT]</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *  CAMR: a camera:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      [DICT] containing the following entries:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          name: string</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          dist: float</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          rot: quaternion</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          ofs: offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          ortho: bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *   LIGH: the light:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *      [DICT] containing the following entries:</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          pitch: radian</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          yaw: radian</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> *          intensity: float</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>順便提一下，我有回報過 <a href="https://github.com/guillaumechereau/goxel/issues/292" target="_blank" rel="noopener noreferrer">Issue</a>，雖然不是我修的；其實不值得炫耀，不過回報 bug 也是 FOSS 的參與方式之一，對吧？</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="kvx-kv6-ken-silvermans-voxel-file">KVX, KV6 (Ken Silverman's Voxel file)<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#kvx-kv6-ken-silvermans-voxel-file" class="hash-link" aria-label="Direct link to KVX, KV6 (Ken Silverman's Voxel file)" title="Direct link to KVX, KV6 (Ken Silverman's Voxel file)">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/03_voxlap_lib-cddfc61769c5a43a0206826564900661.webp" width="640" height="480" class="img_RpFt"></p>
<p>在介紹這些檔案格式以前，可能需要談談 <a href="https://en.wikipedia.org/wiki/Ken_Silverman" target="_blank" rel="noopener noreferrer">Ken Silverman</a> 這個人，他是 <a href="https://en.wikipedia.org/wiki/Build_(game_engine)" target="_blank" rel="noopener noreferrer">Build 遊戲引擎</a> 的作者，並且他設計 KVX 檔案格式被用於 <a href="https://en.wikipedia.org/wiki/Shadow_Warrior_(1997_video_game)" target="_blank" rel="noopener noreferrer">Shadow Warrior</a> 和 <a href="https://en.wikipedia.org/wiki/Blood_(video_game)" target="_blank" rel="noopener noreferrer">Blood</a> 兩款遊戲。<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-kvx-format-1-60bdb6" id="user-content-fnref-kvx-format-1-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup><sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-kvx-format-2-60bdb6" id="user-content-fnref-kvx-format-2-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup></p>
<p>不過對我而言這些資訊並不是我認識他的原因，我是從這個影片得知這號人物存在的：</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/irvFiTsY05Q?si=kutgdpdHfKdOHxlp" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>根據影片的說明，我們可以找到 Voxlap 引擎的說明頁面：</p>
<p><a href="https://advsys.net/ken/voxlap.htm" target="_blank" rel="noopener noreferrer">https://advsys.net/ken/voxlap.htm</a></p>
<p>接著我們可以在網頁中看到它指向一個名為 SLAB6 的工具：</p>
<p><a href="https://advsys.net/ken/download.htm#slab6" target="_blank" rel="noopener noreferrer">https://advsys.net/ken/download.htm#slab6</a></p>
<p>這裡有一個 SLAB6 原始碼的備份：</p>
<p><a href="https://github.com/vuolen/slab6-mirror" target="_blank" rel="noopener noreferrer">https://github.com/vuolen/slab6-mirror</a></p>
<p>並且這裡有一個筆記是從 SLAB6 中抽出 <code>slab6.txt</code> 檔案格式的介紹整理而成的：</p>
<p><a href="https://gist.github.com/falkreon/8b873ec6797ffad247375fc73614fd08" target="_blank" rel="noopener noreferrer">https://gist.github.com/falkreon/8b873ec6797ffad247375fc73614fd08</a></p>
<p>該文件提供了 VOX,KVX 和 KV6 三種檔案格式的詳細說明，因此我們可以知道：</p>
<ul>
<li>VOX: 無壓縮的三維 RGB 資料。</li>
<li>KVX: Ken Silverman 比較早期 (1995 年) 設計的 Voxel 格式。</li>
<li>KV6: 在 Ken Silverman 比較後期 (2020 年) 設計的格式，原本屬於 SLAB6 這個軟體的一部分。</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>注意，這裡的 VOX 不要跟目前真正流行的 <code>.vox</code> (MagicaVoxel) 檔案格式搞混，我稍後會介紹。</p></div></div>
<p>為什麼要介紹這個看起來有點古老的格式？因為你依然可以在一些 Voxel 遊戲中看到它的蹤跡，例如： <a href="https://github.com/yvt/openspades" target="_blank" rel="noopener noreferrer">OpenSpades</a> (Ace of Spades 的 Clone)</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/04_kv6-in-OpenSpades-f602fc4f7652d5683a25cb25dbb65d6b.webp" width="1110" height="574" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="vxl">VXL<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#vxl" class="hash-link" aria-label="Direct link to VXL" title="Direct link to VXL">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/05_vxlseiii_138-8fa641a56d4e948cc9911f5384bf9607.webp" width="1278" height="998" class="img_RpFt"></p>
<p><code>.vxl</code> 是紅色警戒 2 用於繪製單位模型的格式，具體的檔案結構如以下文件所示：</p>
<blockquote>
<p>This document describes the VXL format for storing voxel (volume pixels) models for the game Tiberian Sun by Westwood Studios. <sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-vxl-60bdb6" id="user-content-fnref-vxl-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="luanti-minetest">Luanti (Minetest)<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#luanti-minetest" class="hash-link" aria-label="Direct link to Luanti (Minetest)" title="Direct link to Luanti (Minetest)">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/06_minetest-e15b75c385069ddba847e37b0df8f9d2.webp" width="1920" height="1027" class="img_RpFt"></p>
<p>Minetest 是一個「很像 Minecraft」的開源遊戲引擎，並且地圖的資料是儲存在 SQLite 中，</p>
<div class="language-sql codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-sql codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TABLE</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">blocks</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">x</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTEGER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">y</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTEGER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">z</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTEGER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">data</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BLOB</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">NOT</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">NULL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">x</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">z</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">y</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>至於當中的 BLOB 是如何編碼的，則可以在 <code>world_format.md</code> 中找到<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-minetest-spec-60bdb6" id="user-content-fnref-minetest-spec-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="vox-magicavoxel">Vox (MagicaVoxel)<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#vox-magicavoxel" class="hash-link" aria-label="Direct link to Vox (MagicaVoxel)" title="Direct link to Vox (MagicaVoxel)">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/07_MagicaVoxel-c3cf43cf57728f828ff6231cd25e1fd6.webp" width="1920" height="1080" class="img_RpFt"></p>
<p>MagicaVoxel 是一個閉源的免費 Voxel 編輯軟體。</p>
<p><code>.vox</code> 檔案是 RIFF (Resource Interchange File Format) 風格的格式<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-vox-60bdb6" id="user-content-fnref-vox-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">5</a></sup>，完整的文件和檔案 sample 可以在這裡找到：</p>
<p><a href="https://github.com/ephtracy/voxel-model" target="_blank" rel="noopener noreferrer">https://github.com/ephtracy/voxel-model</a></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="binvox">BINVOX<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-binvox-60bdb6" id="user-content-fnref-binvox-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">6</a></sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#binvox" class="hash-link" aria-label="Direct link to binvox" title="Direct link to binvox">​</a></h2>
<p>它是單色的 voxel 格式，檔案結構如下：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">#binvox 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dim 128 128 128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">translate -0.120158 -0.481158 -0.863158</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scale 7.24632</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;data&gt;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>由文本的資訊與二進制的資料構成。</p>
<p>資料則是由數個 word 組成，一個 word 用來描述一段連續的 voxel：</p>
<ol>
<li><code>0</code> or <code>1</code> 用來表示實體或是空氣</li>
<li><code>1</code>~<code>255</code> 表示前一個 byte 的資料要重複幾次</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="qb-qubicle-binary">.qb (Qubicle Binary)<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#qb-qubicle-binary" class="hash-link" aria-label="Direct link to .qb (Qubicle Binary)" title="Direct link to .qb (Qubicle Binary)">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/08_qubicle-bc7896b80e055886927f6a3cecd5eff2.webp" width="1280" height="720" class="img_RpFt"></p>
<p><a href="https://store.steampowered.com/app/454550/Qubicle_Voxel_Editor/" target="_blank" rel="noopener noreferrer">Qubicle</a> 是一個付費的 Voxel 編輯器。檔案格式的內容可以在它舊的網站找到<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-qubicle-60bdb6" id="user-content-fnref-qubicle-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">7</a></sup>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="minecraft-地圖格式">Minecraft 地圖格式<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#minecraft-%E5%9C%B0%E5%9C%96%E6%A0%BC%E5%BC%8F" class="hash-link" aria-label="Direct link to Minecraft 地圖格式" title="Direct link to Minecraft 地圖格式">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="named-binary-tag-nbt">Named Binary Tag (NBT)<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#named-binary-tag-nbt" class="hash-link" aria-label="Direct link to Named Binary Tag (NBT)" title="Direct link to Named Binary Tag (NBT)">​</a></h3>
<p>NBT 是一種 Minecraft 用於儲存資料的數據結構。而序列化的 NBT 則是 SNBT (stringified NBT)。</p>
<p>SNBT 有著類似於 JSON 的結構（與 JSON 並<strong>不兼容</strong>），比如：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">{name1:123,name2:"sometext1",name3:{subname1:456,subname2:"sometext2"}}</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>從這段程式碼可以更好的理解 NBT 和 SNBT 的關係：<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-nbtlint-60bdb6" id="user-content-fnref-nbtlint-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">8</a></sup></p>
<div class="language-javascript= codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript= codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">    var tag1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tag1 = nbtlint.parse(input.value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } catch (e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        output.value = e.message;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 這是 NBT    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var tag2 = new nbtlint.TagCompound({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Score: new nbtlint.TagInteger(1500),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pos: new nbtlint.TagList(nbtlint.TagDouble, [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new nbtlint.TagDouble(15.5),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new nbtlint.TagDouble(123),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            new nbtlint.TagDouble(-491.77),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SelectedItem: new nbtlint.TagCompound({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            id: new nbtlint.TagString("minecraft:diamond_sword"),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 這是 SNBT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 	Score: 1500,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 	Pos: [15.5d, 123d, -491.77d],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 	SelectedItem: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 		id: "minecraft:diamond_sword"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    console.log(nbtlint.stringify(tag2, "\t"));</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>「能夠儲存樹狀結構以及各種資料型別的定義」這個抽象概念本身就是 NBT，不論實作的語言是什麼；不論資料儲存在記憶體還是硬碟上。而 SNBT 就是序列化的 BNT。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="不同版本的地圖資料">不同版本的地圖資料<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%E5%9C%B0%E5%9C%96%E8%B3%87%E6%96%99" class="hash-link" aria-label="Direct link to 不同版本的地圖資料" title="Direct link to 不同版本的地圖資料">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>以下是四年前 (2021) 寫的筆記，而且我也退坑 Minecraft 一陣子了，不確定最新版本的 Minecraft 是否有所調整。</p></div></div>
<p>不同時期（版本）的 Minecraft 使用不盡相同的資料結構來儲存遊戲世界。</p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="server_leveldat">Server_level.dat<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-level.dat-60bdb6" id="user-content-fnref-level.dat-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">9</a></sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#server_leveldat" class="hash-link" aria-label="Direct link to server_leveldat" title="Direct link to server_leveldat">​</a></h4>
<ul>
<li>單一檔案</li>
<li>gzip 壓縮</li>
<li>使用於 Classic</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="java_edition_alpha_level_format">Java_Edition_Alpha_level_format<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-alpha_level_format-60bdb6" id="user-content-fnref-alpha_level_format-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">10</a></sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#java_edition_alpha_level_format" class="hash-link" aria-label="Direct link to java_edition_alpha_level_format" title="Direct link to java_edition_alpha_level_format">​</a></h4>
<ul>
<li>複數個檔案</li>
<li>使用 NBT</li>
<li>使用資料夾結構區分 chunk</li>
<li>GZip 壓縮</li>
<li>使用於 Infdev 、 Alpha 和部份版本的 Beta</li>
</ul>
<p>一個 Chunk 被定義為 16x16x128 個 Blocks ，一個 Block 消耗 20 bit：</p>
<ul>
<li>ID: 8 bits</li>
<li>Data: 4 bits</li>
<li>Light: 4 bits</li>
<li>SkyLight: 4 bits</li>
</ul>
<p>在 Infdev 版本中，一個 Chunk 被定義為 16x16x128 個 Blocks ，一個 Block 消耗 20 bit。<sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-alpha_level_format-60bdb6" id="user-content-fnref-alpha_level_format-60bdb6-2" data-footnote-ref="true" aria-describedby="footnote-label">10</a></sup></p>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="region-file-format-">Region file format <sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-region_file_format-60bdb6" id="user-content-fnref-region_file_format-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">11</a></sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#region-file-format-" class="hash-link" aria-label="Direct link to region-file-format-" title="Direct link to region-file-format-">​</a></h4>
<ul>
<li>複數個檔案</li>
<li>使用 NBT</li>
<li>使用檔案名稱區分 chunk (r.x.z.mcr)</li>
<li>GZip 或 Zlib 壓縮</li>
<li>開始使用於 Beta 1.3</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_mpuI" id="anvil-file-format-">Anvil File Format <sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fn-anvil_file_format-60bdb6" id="user-content-fnref-anvil_file_format-60bdb6" data-footnote-ref="true" aria-describedby="footnote-label">12</a></sup><a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#anvil-file-format-" class="hash-link" aria-label="Direct link to anvil-file-format-" title="Direct link to anvil-file-format-">​</a></h4>
<ul>
<li>複數個檔案</li>
<li>使用 NBT</li>
<li>使用檔案名稱區分 chunk (a.x,z.mca)</li>
<li>GZip 或 Zlib 壓縮</li>
<li>開始使用於 Java Edition 1.2.1</li>
<li>格式大致跟 Region file format 相同，只有描述 chunk 的 NBT 與部份 label 有進行調整。</li>
</ul>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-kvx-format-1-60bdb6">
<p>Ken Silverman's Projects Page. Retrieved 2025-12-24, from <a href="https://advsys.net/ken/download.htm#slab6" target="_blank" rel="noopener noreferrer">https://advsys.net/ken/download.htm#slab6</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-kvx-format-1-60bdb6" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-kvx-format-2-60bdb6">
<p>RTCM - Files - General Tools - Voxel. Retrieved 2025-12-24, from <a href="https://web.archive.org/web/20200706184402/http://www.r-t-c-m.com/knowledge-base/downloads-rtcm/general-tools-voxel/" target="_blank" rel="noopener noreferrer">https://web.archive.org/web/20200706184402/http://www.r-t-c-m.com/knowledge-base/downloads-rtcm/general-tools-voxel/</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-kvx-format-2-60bdb6" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-vxl-60bdb6">
<p>VXL_Format.txt. Retrieved 2025-12-24, from <a href="http://xhp.xwis.net/documents/VXL_Format.txt" target="_blank" rel="noopener noreferrer">http://xhp.xwis.net/documents/VXL_Format.txt</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-vxl-60bdb6" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-minetest-spec-60bdb6">
<p>luanti/doc/world_format.md. GitHub. Retrieved 2025-12-24, from <a href="https://github.com/luanti-org/luanti/blob/46436248de4d64887f5ee3f1005224495ede895c/doc/world_format.md" target="_blank" rel="noopener noreferrer">https://github.com/luanti-org/luanti/blob/46436248de4d64887f5ee3f1005224495ede895c/doc/world_format.md</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-minetest-spec-60bdb6" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-vox-60bdb6">
<p>MagicaVoxel-file-format-vox.txt. GitHub. Retrieved 2025-12-24, from <a href="https://github.com/ephtracy/voxel-model/blob/8044f9eb086216f3485cdaa525a52120d72274e9/MagicaVoxel-file-format-vox.txt" target="_blank" rel="noopener noreferrer">https://github.com/ephtracy/voxel-model/blob/8044f9eb086216f3485cdaa525a52120d72274e9/MagicaVoxel-file-format-vox.txt</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-vox-60bdb6" data-footnote-backref="" aria-label="Back to reference 5" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-binvox-60bdb6">
<p>BINVOX voxel file format. Retrieved 2025-12-24, from <a href="https://www.patrickmin.com/binvox/binvox.html" target="_blank" rel="noopener noreferrer">https://www.patrickmin.com/binvox/binvox.html</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-binvox-60bdb6" data-footnote-backref="" aria-label="Back to reference 6" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-qubicle-60bdb6">
<p>Qubicle Binary (QB) | Qubicle 3.0 Documentation. Retrieved 2025-12-24, from <a href="https://web.archive.org/web/20250417030951/https://getqubicle.com/qubicle/documentation/docs/file/qb/" target="_blank" rel="noopener noreferrer">https://web.archive.org/web/20250417030951/https://getqubicle.com/qubicle/documentation/docs/file/qb/</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-qubicle-60bdb6" data-footnote-backref="" aria-label="Back to reference 7" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-nbtlint-60bdb6">
<p>AjaxGb/NBTLint: Quickly and easily validate the stringified NBT format (SNBT) used in Minecraft commands. Retrieved 2025-12-24, from <a href="https://github.com/AjaxGb/NBTLint" target="_blank" rel="noopener noreferrer">https://github.com/AjaxGb/NBTLint</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-nbtlint-60bdb6" data-footnote-backref="" aria-label="Back to reference 8" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-level.dat-60bdb6">
<p>server_level.dat – Minecraft Wiki. Retrieved 2025-12-24, from <a href="https://minecraft.fandom.com/wiki/Server_level.dat" target="_blank" rel="noopener noreferrer">https://minecraft.fandom.com/wiki/Server_level.dat</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-level.dat-60bdb6" data-footnote-backref="" aria-label="Back to reference 9" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-alpha_level_format-60bdb6">
<p>Java Edition Alpha level format – Official Minecraft Wiki.  Retrieved 2021-02-28, from <a href="https://minecraft.gamepedia.com/Java_Edition_Alpha_level_format" target="_blank" rel="noopener noreferrer">https://minecraft.gamepedia.com/Java_Edition_Alpha_level_format</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-alpha_level_format-60bdb6" data-footnote-backref="" aria-label="Back to reference 10" class="data-footnote-backref">↩</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-alpha_level_format-60bdb6-2" data-footnote-backref="" aria-label="Back to reference 10-2" class="data-footnote-backref">↩<sup>2</sup></a></p>
</li>
<li id="user-content-fn-region_file_format-60bdb6">
<p>Region file format – Minecraft Wiki. Retrieved 2025-12-24, from <a href="https://minecraft.fandom.com/wiki/Region_file_format" target="_blank" rel="noopener noreferrer">https://minecraft.fandom.com/wiki/Region_file_format</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-region_file_format-60bdb6" data-footnote-backref="" aria-label="Back to reference 11" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-anvil_file_format-60bdb6">
<p>Anvil file format – Minecraft Wiki. Retrieved 2025-12-24, from <a href="https://minecraft.gamepedia.com/Anvil_file_format" target="_blank" rel="noopener noreferrer">https://minecraft.gamepedia.com/Anvil_file_format</a> <a href="https://flyskypie.github.io/posts/2025-12-24_voxel-format#user-content-fnref-anvil_file_format-60bdb6" data-footnote-backref="" aria-label="Back to reference 12" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>voxel</category>
        </item>
        <item>
            <title><![CDATA[Biomes 研究筆記 6]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-14_biomes</link>
            <guid>https://flyskypie.github.io/posts/2025-12-14_biomes</guid>
            <pubDate>Sun, 14 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Galois]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="galois">Galois<a href="https://flyskypie.github.io/posts/2025-12-14_biomes#galois" class="hash-link" aria-label="Direct link to Galois" title="Direct link to Galois">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_galois-c1545fd97f5c0327e6931c437207ca2e.webp" width="1679" height="804" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-galois" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-galois</a></li>
<li><a href="https://www.npmjs.com/package/@flyskypie/biomes-galois-core" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/@flyskypie/biomes-galois-core</a></li>
</ul>
<p>上一篇已經說明過 Viewer/Editor 是以 Electron 實做，並且和一個副程式透過 <code>stdio</code> 通訊。</p>
<p>經過研究發現該副程式的工作依然是採取 request-response 模式，並沒有太複雜的非同步通訊行為，因此我把處理副程式的實做改到 Nest.js 建立的 API 伺服器內，並且把原本用 Electron 呈現的 Viewer/Editor 重構成單純的 Web 應用程式。</p>
<p>呈現結果如下：</p>
<p><img decoding="async" loading="lazy" alt="viewer" src="https://flyskypie.github.io/assets/images/02_viewer-ed3efca605176b4ae6e23c005c8ad040.webp" width="1431" height="833" class="img_RpFt"></p>
<p><img decoding="async" loading="lazy" alt="editor" src="https://flyskypie.github.io/assets/images/03_editor-15f3da5acf1413467a134204cc5060b8.webp" width="1440" height="834" class="img_RpFt"></p>
<p>Editor 給我的感覺有點失望，因為它實際上並沒有編輯的能力，只是畫面更完整一點的 Viewer，並且 Block 類的素材是沒辦法讀取的，這方面的問題預計暫時先跳過，不過已知的資訊有：</p>
<ul>
<li>Trace 到 <code>voxeloo</code> 實做，看起來是單純的斷言失敗，而失敗的原因看起來是缺少 <code>texture</code> 參數。</li>
<li>Viewer 那邊是可以渲染方塊的，只是兩邊的 query 不太一樣。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="循環仰賴">循環仰賴<a href="https://flyskypie.github.io/posts/2025-12-14_biomes#%E5%BE%AA%E7%92%B0%E4%BB%B0%E8%B3%B4" class="hash-link" aria-label="Direct link to 循環仰賴" title="Direct link to 循環仰賴">​</a></h2>
<p>Galois 和 <code>shared</code> 之間原本有循環仰賴的問題，我試著移除一些看起來不是核心功能的東西，並且把真的消除不掉的仰賴直接從 <code>shared</code> 內抽出來直接放進 Galois 內。</p>]]></content:encoded>
            <category>Biomes</category>
        </item>
        <item>
            <title><![CDATA[ModuleNotFoundError: No module named 'numpy.core.multiarray']]></title>
            <link>https://flyskypie.github.io/posts/2025-12-13_numpy-issue</link>
            <guid>https://flyskypie.github.io/posts/2025-12-13_numpy-issue</guid>
            <pubDate>Sat, 13 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[重構 Biomes 過程遇到的問題，涉及比較技術細節的故障排除所以額外發一篇文分開講。]]></description>
            <content:encoded><![CDATA[<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>重構 <a href="https://github.com/ill-inc/biomes-game" target="_blank" rel="noopener noreferrer">Biomes</a> 過程遇到的問題，涉及比較技術細節的故障排除所以額外發一篇文分開講。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="原始錯誤">原始錯誤<a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#%E5%8E%9F%E5%A7%8B%E9%8C%AF%E8%AA%A4" class="hash-link" aria-label="Direct link to 原始錯誤" title="Direct link to 原始錯誤">​</a></h2>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">Exception occurred during build:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Traceback (most recent call last):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "impl/materializers.py", line 1783, in materialize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "impl/materializers.py", line 716, in materialize_ToIcon_Flora</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "impl/vox.py", line 739, in iconify_voxel_array</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "impl/render_voxels.py", line 111, in render_map</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ModuleNotFoundError: No module named 'numpy.core.multiarray'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">The above exception was the direct cause of the following exception:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Traceback (most recent call last):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "build.py", line 65, in exec_program</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "impl/lru_cache_by_hash.py", line 30, in set_default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "impl/lru_cache_by_hash.py", line 24, in make_value_cached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "build.py", line 66, in &lt;lambda&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "impl/materializers.py", line 1785, in materialize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl.types.MaterializationError: Error materializing node: DerivedNode(kind='ToIcon_Flora', deps=[Flora:0x1fc2cb2e4002fa67], dep_hashes=['57036fed7713db64e4fb917e35d1c6cc5436883b'])</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="執行上下文">執行上下文<a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#%E5%9F%B7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87" class="hash-link" aria-label="Direct link to 執行上下文" title="Direct link to 執行上下文">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_dependency-03011884509efa3eb834f8d7193bfd1b.webp" width="1028" height="411" class="img_RpFt"></p>
<p>整個呼叫鏈是從 HTTP request 觸發，在 Nest.js 內部 <code>spawn</code> 一個副程式，
而該副程式是透過 <code>pyinstaller</code> 打包的 Python 程式，
並且該程式又 <code>import</code> 了另外一個透過 <code>pybind11</code> 打包的 C++ （實作的）動態函式庫。</p>
<p>出現問題的 <code>render_voxels.py</code> 則是「透過 <code>pyinstaller</code> 打包的 Python 程式」當中的一部分。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="解決方法">解決方法<a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95" class="hash-link" aria-label="Direct link to 解決方法" title="Direct link to 解決方法">​</a></h2>
<p>在 <code>build.py</code> 所在的專案改變 numpy 的版本：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">// pyproject.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-    "numpy&gt;=1.26.0",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+    "numpy==1.26.4",</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>直後重新用 <code>pyinstaller</code> 打包一份新的執行檔。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="推論過程">推論過程<a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#%E6%8E%A8%E8%AB%96%E9%81%8E%E7%A8%8B" class="hash-link" aria-label="Direct link to 推論過程" title="Direct link to 推論過程">​</a></h2>
<p>查資料的過程會發現常見的錯誤訊息跟我的有一點點不同，不是 <code>numpy.core.multiarray</code> 而是 <code>numpy._core.multiarray</code>：<sup><a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#user-content-fn-multiarray-error-451c99" id="user-content-fnref-multiarray-error-451c99" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></p>
<blockquote>
<p>E   DeprecationWarning: numpy.core.multiarray is deprecated and has been renamed to numpy._core.multiarray. The numpy._core namespace contains private NumPy internals and its use is discouraged, as NumPy internals can change without warning in any release. In practice, most real-world usage of numpy.core is to access functionality in the public NumPy API. If that is the case, use the public NumPy API. If not, you are using NumPy internals. If you would still like to access an internal attribute, use numpy._core.multiarray._ARRAY_API.</p>
</blockquote>
<p>於是這個問題可能是來自 numpy 的破壞性更新。</p>
<p>確認一下 Biomes 專案下 <code>requirements.txt</code> 使用的版本：<code>numpy==1.24.2</code>。</p>
<p>檢查一下自己的專案配置使用 <code>"numpy&gt;=1.26.0</code>，並且 lock 檔顯示實際安裝 <code>2.3.5</code>，到這邊為止幾乎可以確定是 numpy 版本的問題，不過以防萬一還是做更嚴謹的驗證。</p>
<p>如果我們根據錯誤訊息 <code>File "impl/render_voxels.py", line 111, in render_map</code> 可以找到：</p>
<div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">    proj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> rays</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">render_orthographic_color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cm</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">cm</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        normals</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dense_normals</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        size</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        src</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">src_after_padding</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">dir</span><span class="token operator" style="color:#393A34">=</span><span class="token builtin">dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lighting_dir</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">lighting_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        up</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">up</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        far</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1000.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        zoom</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">zoom</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        distance_capacity</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>而 <code>rays.render_orthographic_color</code> 的實做實際是在 C++ 內完成的，現在我們回去看一下 C++ 實作：</p>
<div class="language-cpp codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-cpp codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;pybind11/numpy.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;pybind11/pybind11.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token macro property directive-hash" style="color:#36acaa">#</span><span class="token macro property directive keyword" style="color:#00009f">include</span><span class="token macro property" style="color:#36acaa"> </span><span class="token macro property string" style="color:#e3116c">&lt;pybind11/stl.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">render_orthographic_color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ColorMap</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> cm</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> py</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token plain">array_t</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">float</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> normals</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Vec2i size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Vec3f src</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Vec3f dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Vec3f lighting_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Vec3f up </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token number" style="color:#36acaa">0.0f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1.0f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0f</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> far </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100.0f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> zoom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0f</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">float</span><span class="token plain"> distance_capacity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Vec3f z_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">normalized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Vec3f x_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">normalized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">z_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> up</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Vec3f y_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">normalized</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">cross</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z_dir</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> ret </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> py</span><span class="token double-colon punctuation" style="color:#393A34">::</span><span class="token generic-function function" style="color:#d73a49">array_t</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name keyword" style="color:#00009f">float</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">h</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> acc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#393A34">.</span><span class="token generic-function function" style="color:#d73a49">mutable_unchecked</span><span class="token generic-function generic class-name operator" style="color:#393A34">&lt;</span><span class="token generic-function generic class-name number" style="color:#36acaa">3</span><span class="token generic-function generic class-name operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> inv_zoom </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token plain"> zoom</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> h</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> x_shift </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> x_dir</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> y_shift </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0.5f</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">h </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> y_dir</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> pos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> src </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> inv_zoom </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">x_shift </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> y_shift</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> j </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> val </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">integrate_color</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          cm</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> normals</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pos</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> z_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> lighting_dir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> far</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> distance_capacity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">acc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">acc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">y</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">acc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">z</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">acc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> j</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> val</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      pos </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> x_dir </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> inv_zoom</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ret</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>因此我們知道這個試圖 import <code>numpy.core.multiarray</code> 的 numpy 實際上應該是 <code>pybind11</code> 提供的，確認一下我們正在使用哪個版本：<code>pybind/pybind11@2.9.2</code>。</p>
<p><code>README.md</code> 說得很清楚了<sup><a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#user-content-fn-pybind11-451c99" id="user-content-fnref-pybind11-451c99" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>：</p>
<blockquote>
<p>Integrated NumPy support (NumPy 2 requires pybind11 2.12+)</p>
</blockquote>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-multiarray-error-451c99">
<p>MAINT: NumPy _ARRAY_API import deprecation warning · Issue #4886 · pybind/pybind11. Retrieved 2025-12-13, from <a href="https://github.com/pybind/pybind11/issues/4886" target="_blank" rel="noopener noreferrer">https://github.com/pybind/pybind11/issues/4886</a> <a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#user-content-fnref-multiarray-error-451c99" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-pybind11-451c99">
<p>pybind/pybind11: Seamless operability between C++11 and Python. Retrieved 2025-12-13, from <a href="https://github.com/pybind/pybind11" target="_blank" rel="noopener noreferrer">https://github.com/pybind/pybind11</a> <a href="https://flyskypie.github.io/posts/2025-12-13_numpy-issue#user-content-fnref-pybind11-451c99" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>Python</category>
            <category>Biomes</category>
            <category>numpy</category>
        </item>
        <item>
            <title><![CDATA[Biomes 研究筆記 5]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-07_biomes</link>
            <guid>https://flyskypie.github.io/posts/2025-12-07_biomes</guid>
            <pubDate>Sun, 07 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Galois Viewer]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="galois-viewer">Galois Viewer<a href="https://flyskypie.github.io/posts/2025-12-07_biomes#galois-viewer" class="hash-link" aria-label="Direct link to Galois Viewer" title="Direct link to Galois Viewer">​</a></h2>
<p><code>viewer</code> 是一個 Electron 實做。<code>server</code> 則是一個薄封裝，實作了簡單的佇列，並且會從 Python 那邊的實作 (<code>build.py</code>) spawn 一個 process。</p>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="625" height="275" class="img_RpFt"></p>
<p>從資料流的角度則如下圖所示：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_data-flow-f026ca7ba838b09fb8e9a7a53cc04973.webp" width="1069" height="532" class="img_RpFt"></p>
<p>spawn 出來的 process 是透過 FD (File descriptor) 3 和 4 跟 Electron 的後端※溝通。而兩者傳輸的資料格式則是使用 base64 編碼過得 JSON，而 JSON 的 sechma 可以在 <a href="https://github.com/FlySkyPie/biomes-aql-utils" target="_blank" rel="noopener noreferrer">biomes-aql-utils</a> 裡面找到。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>※更精確的說法是 main process，與之相對的瀏覽器端則是 renderer process，這裡選擇使用一個對 Electron 不熟悉的人應該也比較好理解的用詞。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="error-spawn-binsh-enoent-at-processchildprocess"><code>Error: spawn /bin/sh ENOENT at Process.ChildProcess</code><a href="https://flyskypie.github.io/posts/2025-12-07_biomes#error-spawn-binsh-enoent-at-processchildprocess" class="hash-link" aria-label="Direct link to error-spawn-binsh-enoent-at-processchildprocess" title="Direct link to error-spawn-binsh-enoent-at-processchildprocess">​</a></h2>
<p>目前遇到的主要障礙是以下錯誤訊息：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">Error: A JavaScript error occurred in the main process</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Uncaught Exception: Error: spawn /bin/sh ENOENT at Process.ChildProcess._handle.onexit (node:internal/child_process:282:19) at onErrorNT (node:internal/child_process:477:16) at processTicksAndRejections (node:internal/process/task_queues:83:21)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">Uncaught Exception: Error: write EPIPE at afterWriteDispatched (node:internal/stream_base_commons:164:15) at writeGeneric (node:internal/stream_base_commons:155:3) at Socket._writeGeneric (node:net:780:11) at Socket._write (node:net:792:8) at writeOrBuffer (node:internal/streams/writable:389:12) at _write (node:internal/streams/writable:330:10) at Socket.Writable._write (node:internal/streams/writable:334:10) at BatchAssetServer.send (/home/flyskypie/Desktop/2025-10-22_biomes-game_research/2025-11-16_galois-extract/galois-fe-investigation/js/server/dist/server.cjs:93:30) at /home/flyskypie/Desktop/2025-10-22_biomes-game_research/2025-11-16_galois-extract/galois-fe-investigation/js/server/dist/server.cjs:110:9 at processTicksAndRejections (node:internal/process/task_queues:96:5)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>目前盲猜是因為 spawn 發生在 Electron 內，在 Linux 上應屬於某種沙盒環境，因此「有 shell 的 spawn」沒辦法正常運作。</p>
<p>我不是很想處理 Electron 打包機制與虛擬目錄引入的複雜性，之後應該會把架構改寫成單純的 Web 前端跟 HTTP API 伺服器。</p>]]></content:encoded>
            <category>Biomes</category>
        </item>
        <item>
            <title><![CDATA[最喜歡...]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-07_favorite</link>
            <guid>https://flyskypie.github.io/posts/2025-12-07_favorite</guid>
            <pubDate>Sun, 07 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[- 我最喜歡的資料結構：Graph]]></description>
            <content:encoded><![CDATA[
<ul>
<li>我最喜歡的資料結構：Graph</li>
<li>我最喜歡的演算法：Perlin noise</li>
<li>我最喜歡的語言：ECMAScript</li>
<li>我最喜歡的物理現象：穿隧效應、絕緣破壞</li>
<li>我最喜歡的社會哲學概念：巨靈論（Leviathan, Thomas Hobbe, 1651）</li>
<li>我最喜歡的設計模式：Pipeline</li>
<li>我最有興趣的軟體架構：ECS (Entity–component–system)</li>
<li>最喜歡的 RFC：RFC 2119</li>
<li>最喜歡的 ISO：ISO 8601</li>
<li>最喜歡的 Desktop：Xfce</li>
<li>最喜歡的 CSS 開發模式：CSS Module</li>
<li>最喜歡的金屬：鋁</li>
<li>最喜歡的筆記軟體：CodiMD</li>
<li>最喜歡的歌：To Be Human (MARINA)</li>
<li>最喜歡的影集：太空無垠 (The Expanse)</li>
<li>最喜歡的輕小說：小書痴的下剋上 （本好きの下剋上）</li>
</ul>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[stdin, stdout, stderr 我有印象，但是 stdio[3], stdio[4] 是怎麼回事？]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-06_stdio</link>
            <guid>https://flyskypie.github.io/posts/2025-12-06_stdio</guid>
            <pubDate>Sat, 06 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[最近在研究 Biomes 的程式碼看到這個：]]></description>
            <content:encoded><![CDATA[
<p>最近在研究 Biomes 的程式碼看到這個：</p>
<div class="language-javascript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">process</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">spawn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      buildCommand</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"batch"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">--workspace="</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">dataDir</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">"</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"--ignore_sigint"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">concat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        additionalArgs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">cwd</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> execDir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">stdio</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"ignore"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"inherit"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"inherit"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"pipe"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"pipe"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">shell</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">windowsHide</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>恩？就算不看文件也猜得到 <code>stdio</code> 前三個是 <code>stdin</code>、 <code>stdout</code> 和 <code>stderr</code>，但是後面兩個是怎麼回事？</p>
<p>點進去看型別會看到<sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-child_process-ts-4f84c0" id="user-content-fnref-child_process-ts-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">readonly</span><span class="token plain"> stdio</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Writable </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// stdin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Readable </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// stdout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Readable </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// stderr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Readable </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Writable </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// extra</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Readable </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> Writable </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">undefined</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// extra</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在 Node.js 的官方文件則只有稍稍帶過<sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-node-4f84c0" id="user-content-fnref-node-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>：</p>
<div class="language-javascript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-javascript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Open an extra fd=4, to interact with programs presenting a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// startd-style interface.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">spawn</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'prg'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">stdio</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'pipe'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'pipe'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這個用法我不太熟悉，於是稍微往下追究。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="file-descriptor-python-被呼叫端">File Descriptor （Python 被呼叫端）<a href="https://flyskypie.github.io/posts/2025-12-06_stdio#file-descriptor-python-%E8%A2%AB%E5%91%BC%E5%8F%AB%E7%AB%AF" class="hash-link" aria-label="Direct link to File Descriptor （Python 被呼叫端）" title="Direct link to File Descriptor （Python 被呼叫端）">​</a></h2>
<p>如果直接執行該指令會得到錯誤：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">$ ./build \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    batch \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --workspace="${PWD}/data" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --ignore_sigint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Traceback (most recent call last):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "build.py", line 161, in &lt;module&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "build.py", line 115, in build_batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File "&lt;frozen os&gt;", line 1037, in fdopen</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OSError: [Errno 9] Bad file descriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[PYI-453501:ERROR] Failed to execute script 'build' due to unhandled exception!</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>回去看實做的地方則是會看到：</p>
<div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">    infile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fdopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"r"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    outfile </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fdopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"w"</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>再找一下範例程式<sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-python-sample-4f84c0" id="user-content-fnref-python-sample-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>：</p>
<div class="language-python codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-python codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Import os Library</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Open file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fd </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"test.txt"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">O_RDWR</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">O_CREAT</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Get a file object for the file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">fdopen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"w+"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Write something on open file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"This is a test content for w3schools"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Close file</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>好吧，我還是不太清楚，這個 <code>fd</code> 到底是什麼，看起來是某種檔案有關的 id，但是不知道為什麼會跟 stdio 扯上關係。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="file-descriptor-system-call">File Descriptor （System call）<a href="https://flyskypie.github.io/posts/2025-12-06_stdio#file-descriptor-system-call" class="hash-link" aria-label="Direct link to File Descriptor （System call）" title="Direct link to File Descriptor （System call）">​</a></h2>
<p>嗯...這個 <code>os.open</code> 跟 <code>os.fdopen</code> 是用整數在操作，而不是實例或物件之類的，看起來很底層，</p>
<p>讓我翻一下 System call 的資料<sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-open-4f84c0" id="user-content-fnref-open-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup><sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-read-4f84c0" id="user-content-fnref-read-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">5</a></sup><sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-write-4f84c0" id="user-content-fnref-write-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">6</a></sup>：</p>
<div class="language-c codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-c codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">char</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> oflag</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* mode_t mode */</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ssize_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fd</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">size_t</span><span class="token plain"> count</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token class-name">ssize_t</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> fildes</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> buf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">size_t</span><span class="token plain"> nbyte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="file-descriptor-unixlinux-user-space">File Descriptor （Unix/Linux User space）<a href="https://flyskypie.github.io/posts/2025-12-06_stdio#file-descriptor-unixlinux-user-space" class="hash-link" aria-label="Direct link to File Descriptor （Unix/Linux User space）" title="Direct link to File Descriptor （Unix/Linux User space）">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_system-call-6c2e86a9da3dc79a34e336a378ee7fa5.webp" width="1518" height="838" class="img_RpFt"></p>
<blockquote>
<p>上面簡單介紹了User space和Kernel space，這對於理解fd有很大的幫助。fd會存在，就是因為使用者程序無法直接訪問硬體，因此當程序向核心發起system call打開一個檔案時，在使用者處理程序中必須有一個東西標識著打開的檔案，這個東西就是fd。<sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-fd-1-4f84c0" id="user-content-fnref-fd-1-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">7</a></sup></p>
</blockquote>
<blockquote>
<p>file descriptor 和 file 之間的關係並不是一對一的。<sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-fd-2-4f84c0" id="user-content-fnref-fd-2-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">8</a></sup></p>
</blockquote>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_file-descriptor-15cad766dee73bba8289613ed3bb9711.webp" width="1204" height="898" class="img_RpFt"></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="process">Process<a href="https://flyskypie.github.io/posts/2025-12-06_stdio#process" class="hash-link" aria-label="Direct link to Process" title="Direct link to Process">​</a></h2>
<p>寫一個簡單的 Node.js 程式 spawn 這個程式把它掛起來之後，用 <code>pstree</code> 找到 PID 之後調查一下：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">$ pwd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/proc/435759</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cat cmdline |  xargs -n1 --null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--workspace=/some/where/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--ignore_sigint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ ll fd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dr-x------ 2 flyskypie flyskypie  5 Dec  6 20:34 ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dr-xr-xr-x 9 flyskypie flyskypie  0 Dec  6 20:26 ../</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lr-x------ 1 flyskypie flyskypie 64 Dec  6 20:34 0 -&gt; /dev/null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwx------ 1 flyskypie flyskypie 64 Dec  6 20:34 1 -&gt; /dev/pts/15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwx------ 1 flyskypie flyskypie 64 Dec  6 20:34 2 -&gt; /dev/pts/15</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwx------ 1 flyskypie flyskypie 64 Dec  6 20:34 3 -&gt; 'socket:[1744182]'</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lrwx------ 1 flyskypie flyskypie 64 Dec  6 20:34 4 -&gt; 'socket:[1744184]'</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>在檔案系統中，每個磁碟有多個分區，每個分區有多個柱面組，每個柱面組有一個inode陣列。上面的數字2248868代表inode的一個編號，稱為inode編號。可以用來唯一標識改該檔案，也可以定位inode在磁碟中的位置。在socketfs虛擬檔案系統中，socket對應的inode並不像普通的檔案系統，位於磁碟上，而是位於核心的socket結構中（記憶體）。<sup><a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fn-inode-4f84c0" id="user-content-fnref-inode-4f84c0" data-footnote-ref="true" aria-describedby="footnote-label">9</a></sup></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="結論">結論<a href="https://flyskypie.github.io/posts/2025-12-06_stdio#%E7%B5%90%E8%AB%96" class="hash-link" aria-label="Direct link to 結論" title="Direct link to 結論">​</a></h2>
<p>"一切皆是文件" 是 Unix/Linux 的核心哲學之一，即便是 <code>stdin</code>, <code>stdout</code>, <code>stderr</code> 這些標準的 IO (<code>stdio</code>, standard input/output)，實際上跟「打開檔案進行讀寫」的行為處於一套相同的體系：File Descriptor。</p>
<p>File Descriptor 是作業系統發給 Process 的整數 ID；<code>stdin</code>, <code>stdout</code>, <code>stderr</code> 固定為 0, 1, 2。透過 <code>open</code> 之類的操作界面 (System call)，系統會另外分配 ID 並且再連結到對應要進行讀寫的檔案。</p>
<p>Node.js 在 Spawn 的時候可以在 <code>stdin</code>, <code>stdout</code>, <code>stderr</code> 以外再額外指定兩條管道，它們在 process 內的 File Descriptor 為 3 和 4。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-12-06_stdio#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-child_process-ts-4f84c0">
<p>DefinitelyTyped/types/node/child_process.d.ts. GitHub. Retrieved 2025-12-06, from <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/e70e0eca2af7ad212c893ee94bbcb1ba33b4dd3d/types/node/child_process.d.ts#L181-L191" target="_blank" rel="noopener noreferrer">https://github.com/DefinitelyTyped/DefinitelyTyped/blob/e70e0eca2af7ad212c893ee94bbcb1ba33b4dd3d/types/node/child_process.d.ts#L181-L191</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-child_process-ts-4f84c0" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-node-4f84c0">
<p>Child process | Node.js v25.2.1 Documentation. Retrieved 2025-12-06, from <a href="https://nodejs.org/api/child_process.html#optionsstdio" target="_blank" rel="noopener noreferrer">https://nodejs.org/api/child_process.html#optionsstdio</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-node-4f84c0" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-python-sample-4f84c0">
<p>Python os.fdopen(). W3Schools Online Web Tutorials. Retrieved 2025-12-06, from <a href="https://www.w3schools.com/python/ref_os_fdopen.asp" target="_blank" rel="noopener noreferrer">https://www.w3schools.com/python/ref_os_fdopen.asp</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-python-sample-4f84c0" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-open-4f84c0">
<p>open (system call) - Wikipedia. <a href="https://en.wikipedia.org/wiki/Open_(system_call)" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Open_(system_call)</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-open-4f84c0" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-read-4f84c0">
<p>read (system call) - Wikipedia. <a href="https://en.wikipedia.org/wiki/Read_(system_call)" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Read_(system_call)</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-read-4f84c0" data-footnote-backref="" aria-label="Back to reference 5" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-write-4f84c0">
<p>write (system call) - Wikipedia. <a href="https://en.wikipedia.org/wiki/Write_(system_call)" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Write_(system_call)</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-write-4f84c0" data-footnote-backref="" aria-label="Back to reference 6" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-fd-1-4f84c0">
<p>理解linux中的file descriptor(檔案描述符) | Bigbyto. <a href="https://wiyi.org/linux-file-descriptor.html" target="_blank" rel="noopener noreferrer">https://wiyi.org/linux-file-descriptor.html</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-fd-1-4f84c0" data-footnote-backref="" aria-label="Back to reference 7" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-fd-2-4f84c0">
<p>Linux 的 file descriptor 筆記 - Kakashi's Blog. <a href="https://kkc.github.io/2020/08/22/file-descriptor/" target="_blank" rel="noopener noreferrer">https://kkc.github.io/2020/08/22/file-descriptor/</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-fd-2-4f84c0" data-footnote-backref="" aria-label="Back to reference 8" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-inode-4f84c0">
<p>linux /proc/[pid]/fd 中socket描述符後面的數字是什麼意思？inode（information node）_proc fd socket-CSDN部落格. <a href="https://blog.csdn.net/Dontla/article/details/124854177" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/Dontla/article/details/124854177</a> <a href="https://flyskypie.github.io/posts/2025-12-06_stdio#user-content-fnref-inode-4f84c0" data-footnote-backref="" aria-label="Back to reference 9" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[Biomes 研究筆記 4]]></title>
            <link>https://flyskypie.github.io/posts/2025-12-01_biomes</link>
            <guid>https://flyskypie.github.io/posts/2025-12-01_biomes</guid>
            <pubDate>Mon, 01 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Galois Shader]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="galois-shader">Galois Shader<a href="https://flyskypie.github.io/posts/2025-12-01_biomes#galois-shader" class="hash-link" aria-label="Direct link to Galois Shader" title="Direct link to Galois Shader">​</a></h2>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,UklGRlQXAABXRUJQVlA4WAoAAAAQAAAA1wEAEwEAQUxQSDQAAAABH6CQbQTI33MWu0cjIuJcmIpkw+ho1FFSrPe9Ef2fgJ3I3xX5+I//+I//+I//cIf/diI/VlA4IPoWAAAQewCdASrYARQBPpFInkulpCMhozYJQLASCWVu/F+5M70HYom8APEGwL4DzXrB/aPpl91XU/1t5cvL3i7/039V9w36Q9gD9UP1r9bf1D/uN6gP6F/a/2q95b/bepT+4+oB/Zuod9Bfy5PZZ/r//S9LLVLfFf9N/I7wM/uHib4v/S/tJyvOsP976Kfyj7Jfj/7h5//6PwV4AX5N/MP7p+YfBXgA/I/6F/xf7l4u3+p6I/Z/2AP5n/av+XxmHoXsB/0X/D+rX/af+7zB/T3/h/1nwFfrP/0vXD9iX7yezT+7Apr2oI0cH5jmBMJuR+N6qvzHMCYTb5xeTCvBFgz4FyL5LkXyXIvkuRsd4qPM+Bci0CUkF9KQr4PdE4bnnqNx1cK9LHj7ro4b2aXmylJA0wT0FY8FlR5nwLkXrsoA580o78jHFC5NwOJ6WgWHI3KNwZK+PKryC1VCJ3MqPgT0tcvXKoXxhdvJFR5burDJE29+YLgGemMlkvTCRlbIGzVZdovXwBIpa+MyFL7Jq2Myju7oz1a7u9RQmBQQdHkN007dn92dgm5XGXw51t6Al54XWSi65GVv4FlMKAN6Mo+pN4lVmiVYbvL40XVSaFsGxwhbCT2rotzjEQxUxvuh7QXItaaHOXB5QXdqF70QPON96rzzkmsNiE4QmvbEaHhB5GY+h89fajzA0hUB+AeJN1VGBlCq0zKP73Hy2N8bbGhLPFiiOGmkUA8CwTpqSP7lb4p5G6sZVSwOReNTP0X328Uuk87Gv9THEGtvEygY32WAa3FwUDhtCU8MMKYoPMtLPmurm8PTq9RsFrRAhDIxOlHhGm2rlT9YHNhlo002vfS5Gx3isQAHbO8KH8TaCmBv4zspp9eDNdzIYLSeXE7Mz4ATGUyjPQcBJMgRHkbUGJZpnesgz++hRsd4pmSyNQ1Cs5uV9OAHQDSuRaOBkIle/eCHBxJlzJy2RpKPmY5ztYUYBLKjzQFC5JwKkGkJg6N5nws/R5nwLkXyXIvkuRfJco32lBci+S5F8fWn/gwKzg83T2wVgm4URJnmfyM7EmzV9XCIVxnJCvkKL5LkXyXItMJpX3uXEtqnf/+L4CVQ0sIXHS8EVDd0DDAjxHtT7WiPxhVaHL8XC5ToEtCzliDk8IrypOJlyU6PP0ZwfiYYwQXVqSmE56A+oLkXyXIvkuQYvRB5LX1ZgAAIMZDJCU0guRfJci+S5BsGw8TiptjMKQTKwWF34uTWzTOkooAWiKDEuDOwjrVr5A5n69HgVHmfAuRfJ25YVfCbnK5GkxSMWJlAqv8xzAmE3I/G9VX5jmBMJkasBsgA/hr4GTzNbg4IMAPTJRI9FXHhIhds92K2wWIAIIHgyQorAMoyYM99um343KeHrBKhglgr4I2EhmX60NRcG6E8jdcu8A8RFqP8z5mvvhQqcxTCmfYsd3jZe903D56sJCHv/kTxkiXKae1aSQDS8fP02ZbouGt6EpaXqRmfnp/H3v3jwzJeB52AVnt+r+MPng4+kB///cbf240POjWlrsi2N8kM8PsY1uHW5A3nigBvis1OBHhtnT17Egglyjav06RxSX2Htr3HqqUKTyjocTE+mkLtG0yQ01QwkF45Emb8hP2yiH+MOBj68oWxFAJKWJCKLi1hGfF4t2Uh4rtaGFdxegkC/9nvqdEGXI8XW8LdDn1TNx/wCqiQ1yqLB9tLXRAbbT3gcKJ+ROVuZS9z5Q+YAEQpl9S/eycKfB6zuoX77odRin4TWOWr0umWt2qNynSYzH71XLLo1ZqT63AOGdLdWlG7wmzGC4B4hMSu2XrikC02ZBUsL5iHLjsntHxZCOxN9jQpv+Q2Sl7RKz3X3962Ti3Y4sGofsV+hu0iFYaOsJFql3N84mg5nH8bJB4Yp51EeMGeR2U9QIFyLDtjvE8+6r7Wb8DiFPOW2Kiwsi+I4Cw/naauqlnJhjU9XzP4yqQPkCwTSw1aRbod30v1NANJgG9XtnVxG0q9Ie+5E0HnzcofIkVneTbOZlmazhy3a0NwsJhQgc++5TG22a8wzmuV+fAv43lB6w0Vn9+1RdpOx8B/vpTLpJuDVxzuAyTxgB2VGLu4Ymp8Gy+3f+VsfsJDqRUGUjZ8LLq8ktW2er6UrKnMOE96cL/Q4X7e2mJQp35lK0JabrsF76G6YX0pYhFqTFW374kyc3vyOsHjjFimL1+R+7Am9ovcarbdKHvC79aTZGUvmG2XydXz8ie8u06E21egomeYvwUiTFCloMhLORHwRq9bIOU/R7GeHI5txub3fyRtavWNSvGy+adJ22J6kQKuLq6OM5Yu5sLk8qlfR/lTsha4gznZrG94aU8nHQTgO8Ema1B/VLz2VHyB25XRz6NE//8FFkD8vNG13NgSP/SwHLKX8bE+ClV6rCoiCh24GBjfYclA45RmfbD7rZ0X/c+fzlxSV9I2OjefnPDfStlDqVAJe4MCGoE3etUH4cU0W5AwXP/6jTOsHjhV7bgXdUGJN/hBgVk/Jppo6z8ip43HjwvHb7FwdfhCHv3T7vn7xO/r7qeJePJO5gtgg9UvMAaFa9ks+Xm46UetxKzk5iYwfe5jfZMzEgRn31zGSiJmeigXsquxw2W2ngEy5uVw+5rwuyn2Yl7wpGkwlczHDhMde8HrIzm+fcxXdCb873Ravjxvg3znG028t0wQtdOVrH4TO68Kyih0jnlWwhk4neghIGPIcQi2L24WX/Fc+41kEFbfSx0kSK7zAKw5/IzB2rKfdjFmtcvOz45ENKd7G/xz1UMTrJfBgdHGFfLpuJ4iSopC/ZXTdOggYGrv4OYg+HeB7CDheKRgX5C/E/8qin75f+LK0E+M77Zr1i3iVTJ+0lhIe85TnxRTQxBT0hbLq3TEGLTgTtZhofwGrEMxt2FlRUbpkCQnoFaZCKx8hhEbEWO54DNSGCuUekvZiu7xkgs3aRBoX19ApurBCsddfh1SfCE0+xZoJaK0dFmhywsd0Nk5x5ylIfpfzUYupjZ4Va/+Rc7zx8H3ZB0j9Qj4p4XdDmnp/g12Byhh4/g+VGldCYTbkddLgjwDj1OTiJofyqyIZIOn93TG+oI1FIp6t3jywEack337800odTp0iQ2XNfUj/B+D/TFr2wv4vFrJC77TgbO+HrN1B/AoT+MoEeUDDbWVlFp4ZX9xrjas3XyBG4uVOl+pMt5VPo7rEN7junxVQNIo0I32OxS0yd6F912Uupzp5KJEcTXKG/+N/ndsQAXSN7USETRTifOxhztsgduPNVkPcxw9RqdPo+LrJD19+B7FPxsAIVP/avLdGbeL10P7pxIQ1nlmgookESsG0KSknQK/7bySefH5tD6oSOb590TTqnLbArMPDr2zj3aLDrfLMqwYXofnayuTglNnIvKa3LQWXogy8YVtdRWeEKq7lZE8pOszLLlSrO8ThTHPFNnqz14vo6WvHpsHYOgKtheoudrBes9qxDN6Yyf0p4jnQUht2Wx2GBBJ/IgTA2jYJaclUPsxyUbLDdHsZ69vDAs/dGILyPaizD8jqbk8V+UKZsmIqkPHUcmnc0oQoaZ3mtYnIOgklWjDgGJlaYRanT4mbFGkTbfOi8P3qjcXSxyWTSLauCJV8KUhq9jxESl5uptZn0nuqvNBWJQhBSmSxw6wr6kr66rR4x7x6Ba9j2cA4AVRuEbukSuk2/QfKZ+AXv2m4PvK200Fxix4mrPAtk2FaL7dbMKSpI7qoXgw2wfzyNTpMbFLYgMWzpkHeowP2Y7jdRxlmoCCHIs4gG/g01LHhpL5VnCd0fGYXm4yQOG6O6DIqZ1xRXD4GCHiiIl7Nbhcn7a0hv65LZqaMd5bNcOdu8bIMfIjHwbgF0U5D+hZ0sjWjJYAxYF1Qz1GKipmSSvKmmfFK551WzUzcJ/+WTNaQ6AG3x926eTeVXNMzV/ug5vTVuxwRUAm8i43Id1RV/0K0N5PpqlA6x5likvh1F9Ff3ZEn2x5Axw+GMUzXNRzp4V/biSYUDnill9awO2dnLQ5cG1myI7PjYm75Iif4Ug4rKnXiFuALDzvTna+MIHqXcVEvTfBriZRFpkdcvsfrs/Pr3k0iEoVUztOjnD8f3a+nR+8hGJM3R+IhVAwebWoS8/O06XRoeGQXKzOCDwJuXsef55W0N4oH3+nej5mf3rbgc+8ejr8UBiBWjt1JZkA2IKgR5775sg39yOjp78afuuqtMVn2K2D55wSzpFx/Se+Q0TwY9POaw98dezFx8BlUCX4nwpNFCypyWGaZEFP+zvt552YMvbPth9Gejgyvq0b0Fr3icKXG+VcB1kIhijfmHfEwAocj51Af/EyGDDO34XYCTkIGWmFwwKCnFMZkIb8/Zn3IFdaAprBfHWcnf0wmFSeeYlGlmZM4qKz3djILlSE8Rx/u+i34qhnpuze+09OZNWZfxrcaJpSj0XEGSOR+VdT7eC90rR2pmBR0kqnBazkL2P9z0ve+oJM5oJEhTiR/zFFz7urjuyRTbG7xqjxifvlxInaJpkOJAIyMQAou0auKENPxIxQJDYDjAoDxq3/+3ah72zP+MUZShv+vRzq1l/WzlVc4zvgtB46STGBH5cIHupc28N43Te3hRMfWJ2cDFJ55ZvRZKSW9nVOAUFoIuiXyJN+PMkNL6Bd6UjS6rzAfOyjqv+Nmg12b8W6+RYKNRbqVkFbClVPUKHt4pNBNOsi+u5uQBBMlBD6jR6Paw80ahnI+7PQJIOZEqxhL07dhF4gcLC0v1r4kW5KIKoiOjjjEf51HDXBrff/xNYowGhhTkkrEf6dcm4IMzJTxLQ6pq3ck45f/NMUC2ZkVPCduoxArJQ7+NvnmjLb9HNd5ws+UYaVaVLj7ZrRAfdWR06ZmK4ryvZrKPTMJGJP4tOegtulA4/c89t2K4dmwc57t77oTOtC3aFtwqGv1byDMiOzuEAMp0Hi4+0uVmGUZxgI1sp/Va4E9oWMYQnCKaHBb1QbohlcdNpaJwOaommI0w7L9yf0KVgw3tDiP4Bdt3537XwLHXqRj9iiOcfgObTJkiUB79iGh85uWosTRY1qPI5PAPIbg9PCxofndKIVjXGsczlhDOJJCaUSu0f+pXlU5Gg1N6wmircUL5QYf5/rMPXEhFdnIv+KM5ZWVWoiX0OSKSqkyzlc/5PxIV9nUvGMmS0b3D2J6nZ/uf/uIbjgkjvPtHyq6B5hQyzXEIu8YNlpOqFFmEc2fJfA4QoPydFPcmh4V0janEn3DpKE8IIFxuBnX8A1nIKsLb9gAK+DeHeVgQvJRev5dTdKq5kZDTTO5rAxn4gbuYHy/oId0YFoYTEajOsStphN4VEB3K+2Mw8teQVovGuMHP6Lzp6nCZ8g66to4nAmx8nl/P4O774KZzJdoLYXLT+wlPJYDi9TdsRtGLZlWPPu0wh6vwL2KTEyfSxnXtBSqeU2MaFi0dyqmptSfx64BOmT8ox18hym5RxyOD02MGYWLpL+5e8erzJucLJ+dnUgeG8v+PT4htkyGztcbaSzZ1RQTMLQ2kuTi8d3HmHf/5bg9v58iNZa/5AJoHJhZW8L89RKVpr1KTA3Yn/LHcHafz5Onyhs7EFTLlSYHAkMvM27pcnOygMZSYNWGAUEH0zDAESOIk+dftcJfucCKwoiL4efVqRUzI5neBj0J10/Dw/5shU+N90karveFW1FA7vmV5l9SCPebu7U8jyJGKdNsBFa0OJC6cDnAiR8IbCy3SjFe0TfMDQsdVac95+N9NX89IG9tQ8beEawGnE7qtUspFlLf2OMy9aiJz10PkCWiu7yQeUAF8BQwdu/bDlsnYqi315rI0sDQICsNrGjn4ip4N+ntX+V5Ho3QLep+JJxGDqhk4u+nDfIbxvlygsbpKYVFG+ygjlOEqY+DXmEc5uXdN9vYqybt8L3qfPlzCEi0InmhJ0xVtm0bGAj5/QSfKuGIwKjF0oKXOpFQAqMfhwraH+9Hmda4gGc3/vmEapQPQLK60fhqOjxAVYSRty7yv9/fojRKq9a6cvyCZoXlwOfaXk5e1+UZqirDdpw4i3SpwAdjuJmUpWCZD1Z2SukrI/JJCl8QfDIki+MGd+AwgVZdA1LOZRVWH5rSdVV5uIE3Ao//yAAAAAACV8oCdX+1ciW/5YSY6+IpCEw/jRcXx4oL1B+rX0uspvigE/BRHXoFTsJmy3bKvzOvVO9vWegRaIPt11mrnWqCULvE7WUfdkIO+jDvkxqA3XnK5GrpJr/mF6g3PG6WGdyLoIvt1oxjd0l9AwfhtXDF1LXxiwfuvj/T6VkDtlziH7sGpLlQTHho52KvnuZjwxfR+5oUOaUfndOM5G6kzfs+cncdbGpPXWvD19LIzPXtJuVFNdc7tnYOMQRFsY6o2Ei5z4cYlyl/h5OSTaJN7HvSXTwi2BH+pQrZdeIiT2fT/zc26XmeCU2ljuBeSm2cwPuGPsYza/7Xz+UVLsAkc3F8gHCXkU1GKP7ehYOw6iZetuT1f/2ERKp5+si6zUF0TbiOSQZD4BMPGd2JMtPi9gRyadDnSV242fc9NZ41lbtHkYlZWOUPVBVpJGpY7zMx1HYs99QVOJlteSXhz9yVYR4+cfZylnMXlsUwf30R1iLH7X/U8JPbZw5sYiBQ0D69KDEIKiQFr6vm24ydE8wno03BGF8El7Lib/e+TTUJ7kBcA4EaVqiAaGIJy/EpNtfUlgEHQh8KcSOumogf/VfpqfT/dkLxeilf3sous1BFa7rdOZT6maFzW/9TNZ9tDttUO50T80v3cpRpdTqlz8MKfzMQYiViO6twXvvhWVF9h6wuGJQCMTh+t+iayjpikfWB9X9CqCBZGj3iW3y4Y/926vVR4Rd417Ntc8izi8Y4tVLnfEUlH3ikAiC51nXrVm53DIxCrQFwDCL+inyZgaTfdKimMTVNkIdcQA4nfzMJduvhzAbqj9XFILcHS89ZLtv+pbg38nhGDrEgh8AZh6Kvm8eg3jB3iD5TKjWkcOJ/mTBlZptmZEXYkp5c5/cI8lPveipnvfgpH0x4PgwHJ2rEoeYA+TW+9jzwn2Ti2aNyII9IpxwX3gWXsCE/St+13pBtoCW6W5K3291Lw2HVuqLfmF5ccBjY6qk/lsHXmNVktLBFz5SUt6TShQeZ0ItxfvFJZtsW4pLVU2j/5iPgAGrXhLFFbyNKPNR25fjD+RjMBG5R+vZGDJGyFUA6LNgZSEt/0lKL0SSfBYDUT/fXmcxPl2FrqVZeacfIZD7xiIi84d1r7B7xeNZLS2K9czBwUQTan9VO7TsSSSlAxdCWe5cOOvAs+pyn1eRFTFu8xrHu9M0+NeHHTl4YnD9b9E8/0re0i0UUNf+O8llM3zB+X/bYXXqwCTi2S/XVkaTiYOhMimVbqkAd9FihzbJGvFWezkgj5pKNagtH7567aG1MuBVizW5in9FT3EGS5trEosn0NRljvVRO47HwgcdUGUAAxwEt7bT8luEyS/0usuJjoKoKR6PDJoWU+vuF/6IJTm4w/55j/CktzQssFlP5juHCYV+r7Xqd2kq5CVBKZP5VgzpEPI30KJB7PBVcPIAm3bL5Y0X8xMFdx2q3EOTY8ZSWgoylVXXp9TSUnVQXB3l/75sIO7v9tZIPg4dG6N72+sUW5U+RcY96mrvyFxeopfIoJC/+C/sG/55YKxrWT2tx3hmLWnPG5VMq+BjKZeurvbdB9X5WGLVq233XftmvoFO1NuY10e45+05mhltaAWQ9Qtr4Syz+LqtsOi2yonT0CSZd93qEhhT0M5WSZX/Bf2Df89CfaodZG/ohudGqh7XQzABYBYC/fWamtDCoDGt0OXHEwduhWXQPoLfCm2bLgAAAA==" width="472" height="276" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-galois-shader" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-galois-shader</a></li>
<li><a href="https://www.npmjs.com/package/@flyskypie/biomes-galois-shader" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/@flyskypie/biomes-galois-shader</a></li>
</ul>
<p>這個組件在原本的專案有幾個神奇的事情：</p>
<ol>
<li>使用 Bazel 封裝 Rust 程式碼，而不是標準 Rust 專案的 <code>Cargo.toml</code>。</li>
<li>使用 Rust 當生成器，生成 Typescript。</li>
</ol>
<p>"使用 Bazel 封裝"是什麼意思？ <code>BUILD.bazel</code> 內容如下：</p>
<div class="language-bazel codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-bazel codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">load("@rules_rust//rust:defs.bzl", "rust_binary", "rust_library")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">package(default_visibility = ["//visibility:public"])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rust_library(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = "shader_preprocessor",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    srcs = ["preprocess.rs"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deps = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "@crate_index//:regex",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rust_library(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = "materials",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    srcs = ["materials.rs"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deps = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "@crate_index//:serde",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "@crate_index//:serde_json",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rust_library(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = "shader_link_info",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    srcs = ["link_info.rs"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deps = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "@crate_index//:glsl",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rust_binary(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name = "shader_gen_ts",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    srcs = ["gen_ts.rs"],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    deps = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ":materials",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ":shader_link_info",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ":shader_preprocessor",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "@crate_index//:clap",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "@crate_index//:convert_case",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        "@crate_index//:glsl",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>編譯結果是一個 CLI 的執行檔。</p>
<p>回過來說，這個組件主要的目的是：</p>
<ul>
<li>把 Shader 檔案轉成 Typescript 字串。</li>
<li>提供可以 hot load 的 Three.js <code>RawShaderMaterial</code>。</li>
<li>懶得寫 Typescript，直接用生的（？）</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="galois-viewer">Galois Viewer<a href="https://flyskypie.github.io/posts/2025-12-01_biomes#galois-viewer" class="hash-link" aria-label="Direct link to Galois Viewer" title="Direct link to Galois Viewer">​</a></h2>
<p>Galois 的部份還在重構中，所以還沒上傳，不過當前進度大概如下：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_galois-viewer-8c635fc82eec54ee6dee9bbc173db3e8.webp" width="1788" height="729" class="img_RpFt"></p>
<p>目前是使用 PNPM 的 workspace/monorepo 來同時包容所有子組件。沒有使用單純的專案架構是因為不同子組件的性質不盡相同，例如：<code>viewer</code> 是 Electron app；<code>server</code> 是 process 封裝；<code>editor</code> 是另外一個 Electron app。</p>
<p>有些組件會作為 app 發布、有些則是作為套件被 import、有些涉及 React 、有些又沒有涉及 React，透過 workspace 分別設定每個組件的組態我覺得比較恰當。</p>
<p>剛剛提到 <code>server</code> 實際上會呼叫 CLI spawn process，而呼叫的對象在原始實做是 <code>python py/assets/build.py</code>，目前我是直接使用 <code>pyinstaller</code> 來打包 Python CLI 成獨立的執行檔。</p>
<p>並且目前的進度， <code>viewer</code> 在跟 <code>server</code> 的執行檔整合還有一點問題需要排除：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/03_galois-viewer-0f19465cad9ba23638354106624a6b02.webp" width="1420" height="855" class="img_RpFt"></p>]]></content:encoded>
            <category>Biomes</category>
        </item>
        <item>
            <title><![CDATA[Biomes 研究筆記 3]]></title>
            <link>https://flyskypie.github.io/posts/2025-11-23_biomes</link>
            <guid>https://flyskypie.github.io/posts/2025-11-23_biomes</guid>
            <pubDate>Sun, 23 Nov 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[Galois]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="galois">Galois<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#galois" class="hash-link" aria-label="Direct link to Galois" title="Direct link to Galois">​</a></h2>
<blockquote>
<p>Galois is a collection of tools for asset generation. Galois introduces a custom DSL for defining assets (e.g. meshes, textures, game objects, configuration files, maps, worlds), a build system for generating binary asset data, and tools for viewing and editing assets through a UI.</p>
</blockquote>
<p>以上是 README 的原始描述。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="遊戲素材">遊戲素材<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#%E9%81%8A%E6%88%B2%E7%B4%A0%E6%9D%90" class="hash-link" aria-label="Direct link to 遊戲素材" title="Direct link to 遊戲素材">​</a></h3>
<p><code>src/galois/data</code> 目錄下是該專案大部分透過 Git LFS (Large File Storage) 儲存的資料所在的路徑，內容如下：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">tree -L 1 src/galois/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">src/galois/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── animations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── audio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── color_palettes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── crops</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── editor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── flora</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── gaia</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── glass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── icons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── item_meshes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── mapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── maps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── npcs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── placeables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── textures</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── wearables</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>並且當中的結構與 <code>biomes_data_snapshot.tar.gz</code> 的內容大致吻合：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_biomes_data_snapshot.tar.gz-15f2dd92fb81e7a21c7ecf3a400cd8df.webp" width="780" height="430" class="img_RpFt"></p>
<p><code>biomes_data_snapshot.tar.gz</code> 是什麼呢？它是 Biomes 透過腳本在本地運行時，理論上應該被下載的檔案，但是官方的伺服器已經不再提供該檔案，GitHub 上有一些 issue 有反應這件事：</p>
<ul>
<li><a href="https://github.com/ill-inc/biomes-game/issues/93" target="_blank" rel="noopener noreferrer">Create a mirror for missing biomes_data_snapshot.tar.gz · Issue #93 · ill-inc/biomes-game</a></li>
<li><a href="https://github.com/ill-inc/biomes-game/issues/91" target="_blank" rel="noopener noreferrer">Unable to download biomes_data_snapshot.tar.gz | host - static.biomes.gg is down · Issue #91 · ill-inc/biomes-game</a></li>
</ul>
<p>換言之，這個 <code>biomes_data_snapshot.tar.gz</code> 是檔案想接手這個開源專案的人第一個會碰到的問題（在不理解程式直接使用官方提供的腳本試圖運行該專案的話），而這個 <code>biomes_data_snapshot.tar.gz</code> 檔案的祕密就藏在 Galois 組件內。</p>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>打包用的腳本其實存在於 <code>scripts/b/data_snapshot.py</code>，不過我認為理解資料比輸出資料還重要。</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="素材瀏覽器與編輯器">素材瀏覽器與編輯器<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#%E7%B4%A0%E6%9D%90%E7%80%8F%E8%A6%BD%E5%99%A8%E8%88%87%E7%B7%A8%E8%BC%AF%E5%99%A8" class="hash-link" aria-label="Direct link to 素材瀏覽器與編輯器" title="Direct link to 素材瀏覽器與編輯器">​</a></h3>
<p>在 <code>src/galois/js</code> 中可以看到 <code>editor</code> 和 <code>viewer</code>：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">tree -L 1 src/galois/js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">src/galois/js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── assets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── components</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── editor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── index.d.ts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── lang</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── publish</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── python</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── scripts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── tsconfig.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── viewer</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>根據程式碼判斷，它們應該是 Electron + React 實現的 GUI 工具。</p>
<p>這個組件的定位使其不涉及遊戲本身的實做，並且提供一些必要的封裝給遊戲開發使用，因此作為我的下一個解析目標。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="aql-asset-query-language-utilities">AQL (Asset Query Language) utilities<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#aql-asset-query-language-utilities" class="hash-link" aria-label="Direct link to AQL (Asset Query Language) utilities" title="Direct link to AQL (Asset Query Language) utilities">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_biomes-aql-utils-aa727af30982f25ae99afda2cc9ec683.webp" width="1028" height="614" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-aql-utils" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-aql-utils</a></li>
<li><a href="https://www.npmjs.com/package/@flyskypie/biomes-aql-utils" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/@flyskypie/biomes-aql-utils</a></li>
</ul>
<p>這個模組在 Biomes 的原始路徑是：<code>src/galois/js/lang</code>，
並且當中缺少一些的 Typescript 程式碼是由 <code>src/galois/py/assets</code> 下的 Python 腳本生成的，
因為涉及跨語言的操作，而且沒有其他仰賴，因此我將其抽出作為獨立的套件。</p>
<p>"Asset Query Language" 只是根據內部實現的邏輯跟被呼叫的方式先隨便取的暫時性名稱，它被呼叫的時候大致上長這樣：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> l </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@/galois/lang"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> skeleton </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toSkeleton</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">animationInfo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">skeleton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> tPose </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExtractInitialPose</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">animationsGltf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> skeleton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> posedVoxJointMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToPosedVoxJointMapFromVoxLayers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vox</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> skeleton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> gltf </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> l</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ToGLTF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">meshJointMap</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tPose</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">l</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ExtractAllAnimations</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">animationsGltf</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> skeleton</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>不然 <code>lang</code> 並不是一個方便理解的名稱。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="當前挑戰">當前挑戰<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#%E7%95%B6%E5%89%8D%E6%8C%91%E6%88%B0" class="hash-link" aria-label="Direct link to 當前挑戰" title="Direct link to 當前挑戰">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/03_challenge-overview-39e769328e691c575c86acf45cd07d79.webp" width="765" height="690" class="img_RpFt"></p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="galois-的外部仰賴">Galois 的外部仰賴<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#galois-%E7%9A%84%E5%A4%96%E9%83%A8%E4%BB%B0%E8%B3%B4" class="hash-link" aria-label="Direct link to Galois 的外部仰賴" title="Direct link to Galois 的外部仰賴">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/04_challenge-galois-be11980612527423c6c31de36ed1ad3e.webp" width="764" height="690" class="img_RpFt"></p>
<p>首先， Galois 對 <code>shared</code> 有仰賴，這個部份沒有什麼問題，畢竟 <code>shared</code> 職責上就是處理那些同時會被前端與後端使用的通用邏輯。</p>
<p>但是 Galois 對 <code>server</code> 仰賴就有問題了，因為 <code>server</code> 是應用程式的後端實做，在素材瀏覽或編輯階段不應該對後端邏輯有所仰賴。</p>
<p>仔細看發現跟發布有關，或許可以將該部份暫時從 Galois 中移除，剩下的部份一小部份如果實做不是很多可以視情況直接從 <code>server</code> 移過來。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="shared-的循環仰賴">shared 的循環仰賴<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#shared-%E7%9A%84%E5%BE%AA%E7%92%B0%E4%BB%B0%E8%B3%B4" class="hash-link" aria-label="Direct link to shared 的循環仰賴" title="Direct link to shared 的循環仰賴">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/05_challenge-circular-dependency-0eaf5c00a6d6c217d5989d50dc9de1bb.webp" width="765" height="690" class="img_RpFt"></p>
<p>因為 <code>ecs</code> 組件大部分的程式碼用 Python 生成的，可以的話我想拉出來變成單獨的套件，但是因為它跟 <code>shared</code> 之間有密切的耦合（循環仰賴），無奈之下只能用 monorepo 處理。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="shared-的測試仰賴">shared 的測試仰賴<a href="https://flyskypie.github.io/posts/2025-11-23_biomes#shared-%E7%9A%84%E6%B8%AC%E8%A9%A6%E4%BB%B0%E8%B3%B4" class="hash-link" aria-label="Direct link to shared 的測試仰賴" title="Direct link to shared 的測試仰賴">​</a></h3>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/06_challenge-shared-194365ea6a41d60838e89a509db6ddff.webp" width="765" height="690" class="img_RpFt"></p>
<p><code>shared</code> 也有對 <code>server</code> 的仰賴，另外一個則是 <code>voxeloo</code>，但是它使用的是不明的實做：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> wasmLoader </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"@/gen/shared/cpp_ext/voxeloo-simd/wasm"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">wasmLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wasmBinary</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">readFile</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">wasmFile</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    wasmMemory</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">makeWasmMemory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之前我用 Emscripten 編譯出來的 Voxeloo WASM 本身並沒有符合上述 <code>wasmLoader</code> 界面的東西，Bazel 裡面我也看不出來這個東西是在哪裡實做的。</p>
<p>這個部份是寫在單元測試內的東西，不影響遊戲本體運作，因此我合理懷疑這個是專案經過重構後遺留的痕跡，某個時間點之後就不再維護單元測試而只注重遊戲運行正常與否，造成單元測試內的實作已經過期。</p>]]></content:encoded>
            <category>Biomes</category>
        </item>
        <item>
            <title><![CDATA[Biomes 研究筆記 2]]></title>
            <link>https://flyskypie.github.io/posts/2025-11-16_biomes</link>
            <guid>https://flyskypie.github.io/posts/2025-11-16_biomes</guid>
            <pubDate>Sun, 16 Nov 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[voxeloo WASM 綁定]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="voxeloo-wasm-綁定"><code>voxeloo</code> WASM 綁定<a href="https://flyskypie.github.io/posts/2025-11-16_biomes#voxeloo-wasm-%E7%B6%81%E5%AE%9A" class="hash-link" aria-label="Direct link to voxeloo-wasm-綁定" title="Direct link to voxeloo-wasm-綁定">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_voxeloo-wasm-93981868a6eac61a244ae4e7db721f07.webp" width="842" height="614" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-voxeloo-wasm" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-voxeloo-wasm</a></li>
<li><a href="https://www.npmjs.com/package/@flyskypie/biomes-voxeloo-wasm" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/@flyskypie/biomes-voxeloo-wasm</a></li>
</ul>
<p>Biomes 對 <code>voxeloo</code> 實做了兩種綁定/交叉編譯，將其從 C++ 專案轉換成其他語言的函式庫，其中一個是 Python，並且透過 pybind11 實現；另外一個則是 WASM 並且透過 Emscripten 實現。要注意的是編譯結果有分成一般跟 SIMD (Single Instruction Multiple Data) 兩種。</p>
<p>考量 Biomes 有自己分別在 client 和 server 端實做自己的 WASM 載入函式：</p>
<p><a href="https://github.com/ill-inc/biomes-game/blob/main/src/server/shared/voxeloo.ts#L21" target="_blank" rel="noopener noreferrer"><code>src/server/shared/voxeloo.ts</code></a>:</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadVoxeloo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">VoxelooModule</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://github.com/ill-inc/biomes-game/blob/main/src/client/game/webasm.ts#L22" target="_blank" rel="noopener noreferrer"><code>src/client/game/webasm.ts</code></a>:</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadVoxeloo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  clientConfig</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> WasmConfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">VoxelooModule</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我就不在 WASM binding 這一層做其他處理了，直接將 Emscripten 編譯的結果發布到 NPN 上。</p>
<p>順道一提，我有試著讓編譯過程執行在 Docker 內，但是並沒有成功，換句話說當前編譯過程可能仰賴我的 host 安裝的某些東西，但是現階段我不打算處理這個問題，等有機會再回來看要怎麼解決，確保「能成功編譯的環境」不會失傳。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="cayley"><code>cayley</code><a href="https://flyskypie.github.io/posts/2025-11-16_biomes#cayley" class="hash-link" aria-label="Direct link to cayley" title="Direct link to cayley">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_cayley-ccb5b2b2424e7b2cdcfa997f657bb4e2.webp" width="842" height="321" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-cayley-rs" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-cayley-rs</a></li>
</ul>
<p><code>cayley</code> 看起來是另外一個運算吃重的模組，以 Rust 撰寫。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="wasm-綁定">WASM 綁定<a href="https://flyskypie.github.io/posts/2025-11-16_biomes#wasm-%E7%B6%81%E5%AE%9A" class="hash-link" aria-label="Direct link to WASM 綁定" title="Direct link to WASM 綁定">​</a></h3>
<ul>
<li><a href="https://www.npmjs.com/package/@flyskypie/biomes-cayley-wasm" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/@flyskypie/biomes-cayley-wasm</a></li>
</ul>
<p>這裡遇到一個小插曲：</p>
<ul>
<li><code>cayley</code>  專案使用 Rust <code>1.70.0</code>
<ul>
<li><code>WORKSPACE.bazel</code> 內有寫： <code>RUST_VERSION = "1.70.0"</code>。</li>
</ul>
</li>
<li>專案的 <code>wasm-bindgen</code> 是 <code>0.2.83</code>
<ul>
<li><code>Cargo.lock</code> 內有寫。</li>
</ul>
</li>
<li><code>wasm-bindgen</code> 要求 <code>wasm-bindgen-cli</code> <code>0.2.83</code></li>
<li><code>wasm-bindgen-cli</code> <code>0.2.83</code> 要求 Rust 1.82+<!-- -->
<ul>
<li><code>wasm-bindgen-cli</code> <code>0.2.83</code> 有一個仰賴要求 1.82+</li>
</ul>
</li>
</ul>
<p>我不知道這個相依性地獄 (dependency hell) 是怎麼產生的，也不打算深究，直接包進 Docker 裡面分階段在不同的 Rust 版本編譯。</p>
<p>Biomes 原本只有發布 <code>bundler</code> 和 <code>nodejs</code> 兩種版本，後者是給 CommonJS 用的，前者則是直接 <code>import</code> WASM 檔案，需要專案有使用 Webpack 或是 Loader 之類的自動翻譯模組，因此我額外加上了 <code>web</code> 當作 ESM 的預設包，顧名思義是給瀏覽器用的。</p>
<p><code>wasm-bindgen-cli</code> 工具蠻完整的，除了 WASM 載入器的 Javascript 有準備好，用來給 Typescript 的 <code>.d.ts</code> 也有生成，該說不愧是網頁前端友善（？）的 Rust 嗎？</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="python-綁定">Python 綁定<a href="https://flyskypie.github.io/posts/2025-11-16_biomes#python-%E7%B6%81%E5%AE%9A" class="hash-link" aria-label="Direct link to Python 綁定" title="Direct link to Python 綁定">​</a></h3>
<ul>
<li><a href="https://pypi.org/project/biomes-cayley-py/" target="_blank" rel="noopener noreferrer">https://pypi.org/project/biomes-cayley-py/</a></li>
</ul>
<p>Python 這邊是使用 pyo3/maturin 的工具完成，並且這次我試著發布到 PyPI 去，有點意外 Rust 的部份也一併被上傳，從 Python 安裝的時候似乎會在本地跑編譯。</p>]]></content:encoded>
            <category>Biomes</category>
        </item>
        <item>
            <title><![CDATA[Biomes 研究筆記 1]]></title>
            <link>https://flyskypie.github.io/posts/2025-11-02_biomes</link>
            <guid>https://flyskypie.github.io/posts/2025-11-02_biomes</guid>
            <pubDate>Sun, 02 Nov 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[前一陣子在 GitHub 上找到有興趣的專案，放到口袋清單之後，終於在上週 (2025-10-22) 忍不住把它拿出來玩了，這裡紀錄一下到目前為止 (2025-11-02) 的進度。]]></description>
            <content:encoded><![CDATA[
<p>前一陣子在 GitHub 上找到有興趣的專案，放到口袋清單之後，終於在上週 (2025-10-22) 忍不住把它拿出來玩了，這裡紀錄一下到目前為止 (2025-11-02) 的進度。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="來自-global-illumination-inc-的-biomes">來自 Global Illumination, Inc. 的 Biomes<a href="https://flyskypie.github.io/posts/2025-11-02_biomes#%E4%BE%86%E8%87%AA-global-illumination-inc-%E7%9A%84-biomes" class="hash-link" aria-label="Direct link to 來自 Global Illumination, Inc. 的 Biomes" title="Direct link to 來自 Global Illumination, Inc. 的 Biomes">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/00_cover-1f4ed71723e8afa0911cef2ea6e1dcc0.webp" width="2861" height="1823" class="img_RpFt"></p>
<p>Biomes 是一個（理論上）能夠在瀏覽器執行的開源方塊沙盒多人連線角色扮演遊戲 (MMORPG)。</p>
<p>為什麼我說「理論上」呢？因為這個專案已經葛屁兩年了，在親眼看到以前說不準它的實際情況。</p>
<p>並且專案停滯的時間點剛好是 OpenAI 收購 Global Illumination （Biomes 背後的公司團隊） 的時間點<sup><a href="https://flyskypie.github.io/posts/2025-11-02_biomes#user-content-fn-openai-acquisition-eacf67" id="user-content-fnref-openai-acquisition-eacf67" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="動機">動機<a href="https://flyskypie.github.io/posts/2025-11-02_biomes#%E5%8B%95%E6%A9%9F" class="hash-link" aria-label="Direct link to 動機" title="Direct link to 動機">​</a></h2>
<p>不熟悉我的讀者可能不理解我沒事幹麻去撿一個死兩年專案的屍體，這些是我曾經寫過相關的文章：</p>
<ul>
<li><a href="https://flyskypie.github.io/blog/2024-05-29_I-like-minecraft-but-its-might-no-the-way-you-think/" target="_blank" rel="noopener noreferrer">我喜歡 Minecraft，不過可能不是一般人認知的那種</a></li>
<li><a href="https://flyskypie.github.io/blog/about-ecs-distributed-minecraft-rl-rbnn-bar-code-language/" target="_blank" rel="noopener noreferrer">關於我想用 ECS 實作 Minecraft 以分散式架構運行並在其中用增強式學習訓練完全視覺化之遞迴布林類神經網路以產出二維條碼人造語言那檔事</a></li>
<li><a href="https://flyskypie.github.io/blog/2021-12-04_from-goxel-to-blender/" target="_blank" rel="noopener noreferrer">從 Goxel 到 Blender (Voxel art → 綁人物模型骨架)</a></li>
<li><a href="https://flyskypie.github.io/blog/2021-07-18-Project_Malmo_Intro/" target="_blank" rel="noopener noreferrer">Project Malmo 簡介</a></li>
<li><a href="https://flyskypie.github.io/blog/2021-06-11_minerl-competition-structure/" target="_blank" rel="noopener noreferrer">MineRL 挑戰 2021 - 競賽流程（翻譯）</a></li>
<li><a href="https://flyskypie.github.io/blog/2021-06-10_minerl-challenge_rules/" target="_blank" rel="noopener noreferrer">MineRL 挑戰 2021 - 比賽規則（翻譯）</a></li>
<li><a href="https://flyskypie.github.io/blog/2020-05-23-A_Way_to_Reward_Agent_Which_Constructed_Voxel_World_Minecraft_by_Shannon_Entropy/" target="_blank" rel="noopener noreferrer">一種利用資訊熵獎勵智能體構建方塊世界(Minecraft)的方法</a></li>
</ul>
<p>作為一個開源 Minecraft 愛好者（？），我一直都有在關注開源軟體圈中與 Minecraft 的發展，特別是物色一個適合的目標 fork 它改成我想要的樣子。</p>
<p>Biomes 乍看之下完成度很高：</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/vPHEtewFm3M?si=W_73CRz42ZFpddc1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>而且是使用貼近 Web 的技術（Typescript, WASM...）實做，對我而言理解的門檻會低得多（比起 C++ 實做的 Minetest）。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="專案的第一印象">專案的第一印象<a href="https://flyskypie.github.io/posts/2025-11-02_biomes#%E5%B0%88%E6%A1%88%E7%9A%84%E7%AC%AC%E4%B8%80%E5%8D%B0%E8%B1%A1" class="hash-link" aria-label="Direct link to 專案的第一印象" title="Direct link to 專案的第一印象">​</a></h2>
<ul>
<li><a href="https://github.com/ill-inc/biomes-game" target="_blank" rel="noopener noreferrer">https://github.com/ill-inc/biomes-game</a>
<ul>
<li>2.6k ⭐</li>
</ul>
</li>
</ul>
<p>該專案使用異構單體庫結構，也就是：</p>
<ul>
<li>單庫(<a href="https://en.wikipedia.org/wiki/Monorepo" target="_blank" rel="noopener noreferrer">Monorepo</a>)：使用一個 Git 庫存放所有模組與程式碼。</li>
<li>異構(<a href="https://en.wikipedia.org/wiki/Polyglot_(computing)" target="_blank" rel="noopener noreferrer">Polyglot</a>)：多個模組涉及不同的程式語言與技術棧(Techstack)。</li>
<li>單體(<a href="https://en.wikipedia.org/wiki/Monolithic_application" target="_blank" rel="noopener noreferrer">Monolithic</a>)：所有程式碼會組裝成單一的 Web 服務。</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>「異構單體庫」並不是一個正式用語，但是我試著用中文組裝成一個最簡要能表達多個複雜的概念的詞彙。</p></div></div>
<p>並且透過 <a href="https://github.com/bazelbuild/bazel" target="_blank" rel="noopener noreferrer">Bazel</a> 這個工具來處理複雜的仰賴鏈，接著在外面套一層 Python 腳本，所有操作都需要透過 <a href="https://github.com/ill-inc/biomes-game/blob/main/scripts/b/b.py" target="_blank" rel="noopener noreferrer">b.py</a> 完成。</p>
<p>雖然試著用 Bazel 把專案跑起來，但是似乎是工具版本不符的原因，整個過程並不順利。加上個人不是很喜歡這種「全家桶」結構，因此下一步就是開始拆專案。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="拆拆拆">拆拆拆<a href="https://flyskypie.github.io/posts/2025-11-02_biomes#%E6%8B%86%E6%8B%86%E6%8B%86" class="hash-link" aria-label="Direct link to 拆拆拆" title="Direct link to 拆拆拆">​</a></h2>
<p>一些比較大型模組會有自己獨立的 <code>README.md</code>：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">find . -name README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./voxeloo/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./docs/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/client/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/shared/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/server/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/server/bob/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/server/shared/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/benchmarks/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/galois/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./src/galois/js/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.githooks/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./scripts/tsconfig-replace-paths/README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./.devcontainer/README.md</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>接著是找到外部仰賴最少，即仰賴鏈最上游的模組。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="docs"><code>docs</code><a href="https://flyskypie.github.io/posts/2025-11-02_biomes#docs" class="hash-link" aria-label="Direct link to docs" title="Direct link to docs">​</a></h2>
<p><a href="https://flyskypie.github.io/biomes-docs/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_docs-045cbe97b415d71895a62b2487905427.webp" width="1434" height="821" class="img_RpFt"></a></p>
<p>第一個抽出的模組是網頁文件：</p>
<p><a href="https://github.com/FlySkyPie/biomes-docs" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-docs</a></p>
<p>它不仰賴別人的模組也沒有被仰賴，並且有自己獨立的 <code>package.json</code>，很容易抽出。</p>
<p>從 <code>yarn</code> 轉換成 <code>pnpm</code>、修復幽靈仰賴；並且處理的圖片都儲存在 git LFS 的問題之後就能正常運作了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="geometryhpp-和-light_kernelhpp"><code>geometry.hpp</code> 和 <code>light_kernel.hpp</code><a href="https://flyskypie.github.io/posts/2025-11-02_biomes#geometryhpp-%E5%92%8C-light_kernelhpp" class="hash-link" aria-label="Direct link to geometryhpp-和-light_kernelhpp" title="Direct link to geometryhpp-和-light_kernelhpp">​</a></h2>
<p><img decoding="async" loading="lazy" src="data:image/webp;base64,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" width="419" height="318" class="img_RpFt"></p>
<p>接下來的兩個模組則是用 Python 生成 <code>.hpp</code> 函式庫：</p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-voxeloo-geometry" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-voxeloo-geometry</a></li>
<li><a href="https://github.com/FlySkyPie/biomes-voxeloo-light-kernelry" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-voxeloo-light-kernelry</a></li>
</ul>
<p>其中一個還使用了 Jinja2 — 基於 Python 的樣板引擎/函式庫。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="voxeloo"><code>voxeloo</code><a href="https://flyskypie.github.io/posts/2025-11-02_biomes#voxeloo" class="hash-link" aria-label="Direct link to voxeloo" title="Direct link to voxeloo">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/03_voxeloo-96d501775008dbb4c721c8b17cadd051.webp" width="689" height="614" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-voxeloo" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-voxeloo</a></li>
</ul>
<p>接著是名為 <code>voxeloo</code> 的組件，使用了前述程序化生成的 <code>.hpp</code>。</p>
<p>在原本使用 Bazel 處理的仰賴鏈中，還包含了一些指向 GitHub 的外部函式庫，例如：<code>catch2</code>、<code>eigen</code>、<code>robin-hood-hashing</code>、<code>zstd</code>...。</p>
<p>在這方面我使用 <a href="https://github.com/cpm-cmake/CPM.cmake" target="_blank" rel="noopener noreferrer">CPM.cmake</a> 來處理仰賴關係，只要目標有撰寫良好的 <code>CMakeLists.txt</code>，就可以把 C++ 專案當成套件拉進專案使用。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="第三方函式庫">第三方函式庫<a href="https://flyskypie.github.io/posts/2025-11-02_biomes#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%87%BD%E5%BC%8F%E5%BA%AB" class="hash-link" aria-label="Direct link to 第三方函式庫" title="Direct link to 第三方函式庫">​</a></h3>
<ul>
<li><a href="https://github.com/FlySkyPie/OpenSimplexNoise" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/OpenSimplexNoise</a></li>
</ul>
<p>OpenSimplexNoise 原本的 Git Repo 沒有 <code>CMakeLists.txt</code>，所以我 fork 之後加上 <code>CMakeLists.txt</code>。</p>
<ul>
<li><a href="https://github.com/FlySkyPie/tomasakeninemoeller" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/tomasakeninemoeller</a></li>
</ul>
<p><code>opttritri.h</code> 和 <code>tribox3.h</code> 這兩個檔案原本是直接放在專案內的，我就稍微朔源了一下然後一樣加上 <code>CMakeLists.txt</code>。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="voxeloo-python-綁定"><code>voxeloo</code> Python 綁定<a href="https://flyskypie.github.io/posts/2025-11-02_biomes#voxeloo-python-%E7%B6%81%E5%AE%9A" class="hash-link" aria-label="Direct link to voxeloo-python-綁定" title="Direct link to voxeloo-python-綁定">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/04-voxeloo-py-d6384fd2ce5389a633fbcfac78781a4f.webp" width="814" height="614" class="img_RpFt"></p>
<ul>
<li><a href="https://github.com/FlySkyPie/biomes-voxeloo-py" target="_blank" rel="noopener noreferrer">https://github.com/FlySkyPie/biomes-voxeloo-py</a></li>
</ul>
<p>Biomes 對 <code>voxeloo</code> 實做了兩種綁定/交叉編譯，將其從 C++ 專案轉換成其他語言的函式庫，其中一個是 Python，並且透過 pybind11 實現。</p>
<p>我使用 scikit-build 作為 Python 的建置後端 (Build Backend) 將奇打包成一個 Python 庫 (Python Wheel)，並且補上型別資訊 (Stub)。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-11-02_biomes#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-openai-acquisition-eacf67">
<p>OpenAI收購AI設計公司Global Illumination | iThome. Retrieved 2025-10-06 from <a href="https://www.ithome.com.tw/news/158307" target="_blank" rel="noopener noreferrer">https://www.ithome.com.tw/news/158307</a> <a href="https://flyskypie.github.io/posts/2025-11-02_biomes#user-content-fnref-openai-acquisition-eacf67" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>Biomes</category>
        </item>
        <item>
            <title><![CDATA[「演出」]]></title>
            <link>https://flyskypie.github.io/posts/2025-11-02_perform</link>
            <guid>https://flyskypie.github.io/posts/2025-11-02_perform</guid>
            <pubDate>Sun, 02 Nov 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[我曾經有一個同事，是動畫師之類的，雖然不同部門、不算熟、也沒什麼深入聊過，但是我認為我從他身上學到一個很重要的概念—「演出」。]]></description>
            <content:encoded><![CDATA[
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/00_cover-7ccf2a7910d8e6703903d1a923778cc1.webp" width="1024" height="725" class="img_RpFt"></p>
<p>我曾經有一個同事，是動畫師之類的，雖然不同部門、不算熟、也沒什麼深入聊過，但是我認為我從他身上學到一個很重要的概念—「演出」。</p>
<p>他經常會用「演出」來形容一段角色動畫，也經常在做動畫前先自己用肢體表現一次，呈現多種角色動作的形式。當下我其實沒有太多想法，直到後來我才隱約知道他說的「演出」是什麼意思。</p>
<p>這是當下我知道的「演出」：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_Mixamo_character_animation_example_grid-92b6cb9d82dbffc5a67b2539721701c4.webp" width="810" height="556" class="img_RpFt"></p>
<p>後來我看到了：</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/G9qzPEviH5g?si=5HmVPm6CXI_i7Stn" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>這是透過動作捕捉器，直接將人類演員的肢體動作錄製成能在遊戲內使用的動畫影格，動作更自然也不用讓動畫師手工調整。</p>
<p>接著我看到了：</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/SmTNegGiv9M?si=_fFgU8zTF6ZHHUVz" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>很多短影音往往包含了有趣的上下文與故事，但是仔細觀察會發現這個影片中的角色的動作跟前一個動作捕捉演員有著接近的神韻：一些明顯且誇大的神情或肢體「演出」。</p>
<hr>
<p>岔開一下話題，這是一個我很享受的 Factorio 影片：</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/hYcAsNCH7Zc?si=nSgaZ0DnV3W7TsJh" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>然後這是那個 Factorio 影片的幕後花絮：</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/HNocVPYDLo8?si=ZIgi2BAL160cWI8d" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin"></iframe>
<p>可以發現影片的整體節奏並不像正片一樣緊湊，作者的情緒起伏也沒這麼浮誇。</p>
<p>作者也表示，劇本是模仿 3Blue1Brown 的緒事風格「事情可能怎麼被發現」，而刻意營造出「他自己發現」的氛圍。</p>
<hr>
<p>簡單來說，「演出」一種精細設計的虛假呈現；是一種謊言，如果任何戲劇作品出現不現實的情節，那十之八九是一種「演出」。</p>]]></content:encoded>
            <category>Philosophy</category>
        </item>
        <item>
            <title><![CDATA[從賣油翁談「人寫程式」與「人寫提示詞讓 LLM 寫程式」的抉擇]]></title>
            <link>https://flyskypie.github.io/posts/2025-10-06_oil-seller</link>
            <guid>https://flyskypie.github.io/posts/2025-10-06_oil-seller</guid>
            <pubDate>Mon, 06 Oct 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[我不太記得孔子在國文課本裡說了什麼，但是我記得賣油翁的一句：]]></description>
            <content:encoded><![CDATA[
<p>我不太記得孔子在國文課本裡說了什麼，但是我記得賣油翁的一句：</p>
<blockquote>
<p>「但手熟爾」，只是手藝熟練罷了</p>
</blockquote>
<p>真正和這句話發生共鳴來自於我高職在練習證照的學科與術科；以及我那算到幾乎快爛掉的基本電學習題的經歷，並且真正發酵是我開始使用 Linux 幾年之後，那幾個原本在學科考古題裡面的指令已經內化成我日常生活的一部分。</p>
<p>程式語言是手段；不是目標，事實是軟體工程師其實經常需要根據需求學習新的語言，原因可能是為了維護舊專案或是針對特定問題的語言特性...等等。不過我認為依然需要選擇一門程式語言當作「母語」，必須是成為肌肉記憶最後帶進棺材的一部分，它可以成為學習其他語言時進行典範 (Paradigm) 參考的基準<sup><a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller#user-content-fn-javscript-python-paradigm-79a662" id="user-content-fnref-javscript-python-paradigm-79a662" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>。</p>
<p>Javascript/Typescript 是我選擇作為「母語」的語言，我會持續學習它的歷史、它的生態、它的語法，當我試著重構一些老專案的時候，我可以看到過去的開發者如何在 Promise 尚未納入規範就開始使用 Promise<sup><a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller#user-content-fn-legacy-promise-79a662" id="user-content-fnref-legacy-promise-79a662" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>；當我試著在 3DS 上建立 Javscript Runtime <sup><a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller#user-content-fn-3ds-javscript-79a662" id="user-content-fnref-3ds-javscript-79a662" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>，我窺見了 Node.js 的工具鏈以及 Runtime 和 Engine 的差別...</p>
<p>我決定向賣油翁學習，精練一門手藝這件事甚至早在 ChatGPT 橫空出世以前。前一陣子在公司的壓力之下我被迫嘗試使用 Cursor，然而實際上它非常的不好使，有一些特定的任務我要花大量的時間撰寫提示詞來約束它。</p>
<p>「那是你提示詞下的不好」「你應該要多搭配一些規則」...有些人或許會這樣說，不過我想那些「有些人」的心中沒有賣油翁；它們或許本來就討厭寫程式，寫提示詞對它們而言是一種解放。不過對我而言，與其「節省時間」寫提示詞，「浪費時間」打磨我的手藝，反而才是我認為正確的道路 — 賣油翁的道路。</p>
<p>也不是完全不能用 LLM 寫程式，但是老實說用例十分有限：</p>
<ul>
<li>如果我不熟悉語言、不熟悉當下的開發主題或領域<!-- -->
<ul>
<li>我無從驗證 LLM 生成內容的好壞或是有效與否，因此不宜用 LLM。</li>
</ul>
</li>
<li>如果我熟悉語言、當下的開發主題或領域，但是 LLM 很難命中我的預期解法<!-- -->
<ul>
<li>需要花大量的時間琢磨提示詞，但是同樣的時間我自己寫更快，因此不宜用 LLM。</li>
</ul>
</li>
<li>如果我熟悉語言、當下的開發主題或領域，並且 LLM 很來電，很快就命中我的預期解法。<!-- -->
<ul>
<li>節省手工開發時間，採用。</li>
</ul>
</li>
</ul>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-javscript-python-paradigm-79a662">
<p>從 Javascript 到 Python 的範式遷移 (Paradigm Migration) | 工程屍 FlyPie 的異想世界. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/blog/2024-06-09_from-javascript-to-python-paradigm-migration/" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/blog/2024-06-09_from-javascript-to-python-paradigm-migration/</a> <a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller#user-content-fnref-javscript-python-paradigm-79a662" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-legacy-promise-79a662">
<p>kriskowal/q: A promise library for JavaScript. Retrieved 2025-10-06 from <a href="https://github.com/kriskowal/q" target="_blank" rel="noopener noreferrer">https://github.com/kriskowal/q</a> <a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller#user-content-fnref-legacy-promise-79a662" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-3ds-javscript-79a662">
<p>3DS x Linux x Javascript x Bad Apple | 工程屍 FlyPie 的異想世界. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/blog/2022-12-03_3ds_linux_javascript_bad_apple/" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/blog/2022-12-03_3ds_linux_javascript_bad_apple/</a> <a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller#user-content-fnref-3ds-javscript-79a662" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>LLM</category>
            <category>Philosophy</category>
        </item>
        <item>
            <title><![CDATA[回到一切的原點、LLM 系統的基石 - LLMs.txt、向量資料庫與 RAG]]></title>
            <link>https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag</link>
            <guid>https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag</guid>
            <pubDate>Mon, 06 Oct 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[標題主要是描述我的主觀體驗的時序，讀者不需要在意。]]></description>
            <content:encoded><![CDATA[
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>標題主要是描述我的主觀體驗的時序，讀者不需要在意。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="rag-retrieval-augmented-generation">RAG (Retrieval-augmented generation)<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#rag-retrieval-augmented-generation" class="hash-link" aria-label="Direct link to RAG (Retrieval-augmented generation)" title="Direct link to RAG (Retrieval-augmented generation)">​</a></h2>
<p>LLM 除了「幻覺問題」以外，令一個毛病是：LLM 會過期，訓練完成後定型的權重無法包含訓練之後發生的事情或知識，它就像電影「我的失憶女友 (50 First Dates, 2004)」中的角色；一個順行性失憶症患者，時間被凝固並困在某個時間點的人。</p>
<p>並且訓練與微調 LLM 模型的成本十分高昂，而 RAG 的架構是讓 LLM 真正進入實用化的推手，概念很簡單：把最新或正確的資訊跟使用者的疑問句一起放在輸入，經過 LLM 將文字揉捏之後就能得到最新或是正確的回答了。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="向量資料庫-vector-database">向量資料庫 (Vector Database)<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#%E5%90%91%E9%87%8F%E8%B3%87%E6%96%99%E5%BA%AB-vector-database" class="hash-link" aria-label="Direct link to 向量資料庫 (Vector Database)" title="Direct link to 向量資料庫 (Vector Database)">​</a></h3>
<p>向量資料庫是 RAG 系統內很重要的一個組件，跟傳統資料庫不一樣的是，傳統資料庫通常仰賴 id 來索引資料，但是向量資料庫則是用一組向量（aka 一堆數字）來索引資料。透過嵌入這個動作（通常由一種不是 LLM 的類神經模型處理），我們可以把一團字變成一團數字，例如：</p>
<p><code>[一團字]</code> → （嵌入） → <code>[1,2,3...](一團數字)</code></p>
<p>接著我們可對另外一團字做一樣的事情：</p>
<p><code>[另外一團字]</code> → （嵌入） → <code>[4,5,6...](另外一團數字)</code></p>
<p>接著我們就可以計算兩團字的距離：</p>
<p>$$
距離 = F(一團數字, 另外一團數字)
$$</p>
<p>當向量資料庫儲存了一堆字團跟數字，我們拋出一個一團，就能用這團字找到另外一團「最接近」的字。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="agent-coding">Agent Coding<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#agent-coding" class="hash-link" aria-label="Direct link to Agent Coding" title="Direct link to Agent Coding">​</a></h2>
<p>透過將 LLM 與 IDE (Integrated Development Environment)，人們透過聊天視窗的形式輸入描述，就能看到 LLM 作為「Agent」在 IDE 上揮灑出程式碼，後來甚至衍生出「Vibe Coding」一詞，並刮起了一陣席捲軟體開發產業的旋風。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="mcp-model-context-protocol">MCP (Model Context Protocol)<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#mcp-model-context-protocol" class="hash-link" aria-label="Direct link to MCP (Model Context Protocol)" title="Direct link to MCP (Model Context Protocol)">​</a></h2>
<p>MCP 提供了一套更適合 LLM 呼叫的界面，很多人用「LLM 的 USB」來形容它，人們可以透過 MCP 提供一系列工具給 LLM 呼叫，包含讀取的：讀檔案、讀文件、讀網頁、讀 API...；包含寫入的：新增檔案、編輯檔案、操作 git、操作 SQL 資料庫...</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="ask-模式">Ask 模式<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#ask-%E6%A8%A1%E5%BC%8F" class="hash-link" aria-label="Direct link to Ask 模式" title="Direct link to Ask 模式">​</a></h2>
<p>這些 Agent Tool 除了「Agent 模式」讓 LLM 能夠幫你寫程式以外，通常也有內建「Ask 模式」，也就是鎖定寫入相關的功能，讓人可以「問」關於專案下的問題，不過索引的效果並不是很理想而且容易滿出 LLM 的上下文窗口。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="context7-mcp">Context7 MCP<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#context7-mcp" class="hash-link" aria-label="Direct link to Context7 MCP" title="Direct link to Context7 MCP">​</a></h2>
<p>最早我是因為公司內部推廣而得知這東西的存在，簡單來說它會告訴 Agent 「這裡有一個 MCP 可以查詢函式庫的用法，你不知道的話可以問我」，適合用來處理較新的軟體開發環境，比如在網頁前端領域尤其有效。</p>
<p>它的運作方式是輸入一個 GitHub 程式庫的連結，它會去拉取、搜尋文件相關的檔案（如：<code>.md</code>,<code>.mdx</code>...）並且壓成一個像是這樣的純文字資料準備給 LLM 使用：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CODE SNIPPETS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TITLE: Quickstart Cypress Setup with create-next-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DESCRIPTION: Use `create-next-app` with the `with-cypress` example to bootstrap a new Next.js project with Cypress already configured. This is the fastest way to get started.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SOURCE: https://github.com/vercel/next.js/blob/canary/docs/01-app/02-guides/testing/cypress.mdx#_snippet_0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LANGUAGE: bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CODE:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npx create-next-app@latest --example with-cypress with-cypress-app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\```</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TITLE: Example `create-next-app` Interactive Prompts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DESCRIPTION: An example of the series of questions asked by the `create-next-app` CLI during the interactive setup process. It covers project naming, language choices, tooling, and directory structure.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SOURCE: https://github.com/vercel/next.js/blob/canary/docs/01-app/01-getting-started/01-installation.mdx#_snippet_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LANGUAGE: text</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>而 MCP 的作用就是當它被 Agent 呼叫時，就從這份文件抽出一些資訊回傳給 Agent。</p>
<p>我當時就有留意到這個工具並沒有開源而抱有警覺，不出所料，最近打開它的網站時發現已經不能匿名登記新的 Git 程式庫了，必須要登入。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="其他替代方案">其他替代方案<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#%E5%85%B6%E4%BB%96%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88" class="hash-link" aria-label="Direct link to 其他替代方案" title="Direct link to 其他替代方案">​</a></h2>
<p>雖然我不喜歡用 LLM 寫程式<sup><a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#user-content-fn-oil-seller-c14b03" id="user-content-fnref-oil-seller-c14b03" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>，但是當進入專案時，透過某方式能夠快速掌握專案的情況對我而言確實是一個需求。於是我開始尋找一些類似的方案。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="嵌入體系">嵌入體系<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#%E5%B5%8C%E5%85%A5%E9%AB%94%E7%B3%BB" class="hash-link" aria-label="Direct link to 嵌入體系" title="Direct link to 嵌入體系">​</a></h3>
<ul>
<li><a href="https://github.com/Mintplex-Labs/anything-llm" target="_blank" rel="noopener noreferrer">https://github.com/Mintplex-Labs/anything-llm</a>
<ul>
<li>49.7k ⭐</li>
</ul>
</li>
</ul>
<p>AnythingLLM 能夠「從 GitHub 匯入程式庫」，不過更接近：瀏覽一個程式庫然後選擇一些檔案進行嵌入（並儲存到向量資料庫），實際上它不像 Context7 有預處理能力。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="打包體系">打包體系<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#%E6%89%93%E5%8C%85%E9%AB%94%E7%B3%BB" class="hash-link" aria-label="Direct link to 打包體系" title="Direct link to 打包體系">​</a></h3>
<ul>
<li><a href="https://github.com/yamadashy/repomix" target="_blank" rel="noopener noreferrer">https://github.com/yamadashy/repomix</a>
<ul>
<li>19k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/coderamp-labs/gitingest" target="_blank" rel="noopener noreferrer">https://github.com/coderamp-labs/gitingest</a>
<ul>
<li>12.2k ⭐</li>
</ul>
</li>
</ul>
<p>這些工具能夠將給定的 GitHub 程式庫「打包」成單一純文字檔，但是實際上就是黏貼所有程式碼，再加上一點 markdown meta 做修飾，老實說，這種事情 Grunt 或 Gulp 之類的工具也能做。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="llmstxt"><code>LLMs.txt</code><a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#llmstxt" class="hash-link" aria-label="Direct link to llmstxt" title="Direct link to llmstxt">​</a></h2>
<p>狹義來講 <code>LLMs.txt</code> 是 <code>robots.txt</code> 的 LLM 版<sup><a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#user-content-fn-llms-txt-c14b03" id="user-content-fnref-llms-txt-c14b03" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>，也就是介紹網站給 LLM 看的純文本文件。</p>
<p>廣義來講 <code>LLMs.txt</code> 是指各種經過「純文本化」處理；為了要給 LLM 使用的文字檔<sup><a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#user-content-fn-langchain-llms-txt-c14b03" id="user-content-fnref-langchain-llms-txt-c14b03" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>，比如： Context7 對外可見的文本或是 Repomix/Gitingest 之類工具生成的檔案。</p>
<p>如果直接使用 <code>LLMs.txt</code> 則很容易超出 LLM 的上下文窗口，要嵌入使用的話反而多了一道切塊 (chunking) 的步驟，可能製造更多問題。</p>
<p>推測 Context7 背後的實作很有可能還是向量函式庫，才能在 MCP 進行檢索的時候抽出相關的資訊塊。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="回歸原本---rag">回歸原本 - RAG<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#%E5%9B%9E%E6%AD%B8%E5%8E%9F%E6%9C%AC---rag" class="hash-link" aria-label="Direct link to 回歸原本 - RAG" title="Direct link to 回歸原本 - RAG">​</a></h2>
<p>反思 <code>LLMs.txt</code> 的問題之後，回過頭來看現在常見的開發架構：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">LLM &lt;- Agent Tool -&gt; MCP -&gt; Context7 -&gt; Vector Database</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>唉，這不就還是 RAG 系統嗎？只是多了一些絢麗的詞彙包裝而已。</p>
<p>2024 年初為了幫公司的專案進行規劃，開始學習 LLM 系統，當時因此認識了 RAG 系統。幾個月後 MCP 橫空出世、Vide Coding 成為顯學；</p>
<p>「當時的寫的計畫已經過時了」老闆說道，</p>
<p>但是問題的本質其實並沒有改變得太多。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-oil-seller-c14b03">
<p>從賣油翁談「人寫程式」與「人寫提示詞讓 LLM 寫程式」的抉擇. Retrieved 2025-10-06 from <a href="https://flyskypie.github.io/posts/2025-10-06_oil-seller" target="_blank" rel="noopener noreferrer">https://flyskypie.github.io/posts/2025-10-06_oil-seller</a> <a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#user-content-fnref-oil-seller-c14b03" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-llms-txt-c14b03">
<p>The /llms.txt file – llms-txt. Retrieved 2025-10-06 from <a href="https://llmstxt.org/" target="_blank" rel="noopener noreferrer">https://llmstxt.org/</a> <a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#user-content-fnref-llms-txt-c14b03" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-langchain-llms-txt-c14b03">
<p>llms.txt. Retrieved 2025-10-06 from <a href="https://langchain-ai.github.io/langgraph/llms-txt-overview/" target="_blank" rel="noopener noreferrer">https://langchain-ai.github.io/langgraph/llms-txt-overview/</a> <a href="https://flyskypie.github.io/posts/2025-10-06_the-cornerstone-of-llm-system-rag#user-content-fnref-langchain-llms-txt-c14b03" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>LLM</category>
        </item>
        <item>
            <title><![CDATA[花式打 LLM]]></title>
            <link>https://flyskypie.github.io/posts/2025-10-05_llm-api-chain</link>
            <guid>https://flyskypie.github.io/posts/2025-10-05_llm-api-chain</guid>
            <pubDate>Sun, 05 Oct 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[前情提要]]></description>
            <content:encoded><![CDATA[
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<blockquote>
<p>後來我才知道這是某種 bug，LiteLLM 以明碼將資料寫入資料庫後卻試圖用 salt 將資料解密<sup><a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#user-content-fn-litellm-bug-fb5197" id="user-content-fnref-litellm-bug-fb5197" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>，在這之前已經花了好幾個好時進行故障排除以及跟 LLM 對話的鬼打牆，十分高血壓。</p>
</blockquote>
<p>上週(2025-09-28)折騰了一番還是沒能把 LiteLLM 跟 LangFuse 整合在一起。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="本文">本文<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#%E6%9C%AC%E6%96%87" class="hash-link" aria-label="Direct link to 本文" title="Direct link to 本文">​</a></h2>
<p>透過純參數的方式配置而不是在 GUI 設定 callback，我成功將 LiteLLM 和 LangFuse 整合在一起並且佈署到我的 Homelab 去，並且試著跑了一下 AnythingLLM 觀察一下攔截提示詞的效果，現在整個 LLM 的呼叫鏈如下：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_llm-api-chain-d5f1e8289d8655a31c5d834d1bb53942.webp" width="1741" height="539" class="img_RpFt"></p>
<p>應用程式 →
LiteLLM →
LangFuse | OpenRouter →
DeepInfra →
DeepSeek<!-- -->:DeepSeek<!-- --> V3.1 模型</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="應用程式-application">應用程式 (Application)<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F-application" class="hash-link" aria-label="Direct link to 應用程式 (Application)" title="Direct link to 應用程式 (Application)">​</a></h3>
<ul>
<li><a href="https://github.com/Mintplex-Labs/anything-llm" target="_blank" rel="noopener noreferrer">https://github.com/Mintplex-Labs/anything-llm</a>
<ul>
<li>48.7k ⭐</li>
</ul>
</li>
</ul>
<p>一般作為 Client 呼叫 OpenAI Compatibility API 的應用程式，雖然我使用 AnythingLLM 實驗，但是也可以是非常簡單的 HTTP Call，例如：</p>
<div class="language-typescript codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-typescript codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"http://web.litellm.arachne/v1/chat/completions"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> headers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"Authorization"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">env</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation constant" style="color:#36acaa">LLM_GATEWAY_API_KEY</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"Content-Type"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application/json"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> payload </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"model"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"deepseek/deepseek-chat-v3.1:free"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"messages"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"role"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"system"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"content"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"You are a helpful assistant."</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"role"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"user"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">"content"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Hello!"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string-property property" style="color:#36acaa">"modalities"</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">"text"</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> response </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"POST"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  headers</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="llm-gateway">LLM Gateway<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#llm-gateway" class="hash-link" aria-label="Direct link to LLM Gateway" title="Direct link to LLM Gateway">​</a></h3>
<ul>
<li><a href="https://github.com/BerriAI/litellm" target="_blank" rel="noopener noreferrer">https://github.com/BerriAI/litellm</a>
<ul>
<li>28.6k ⭐</li>
</ul>
</li>
</ul>
<p>我使用 LiteLLM 作為 LLM Gateway 方案，它的作用是作為一個代理伺服器，隔在應用程式和真正的 LLM API 之間。</p>
<p>有什麼作用？它可以儲存真實的、由第三方服務（例如：OpenAI、Google）提供的 API Key，然後對組織或團隊的其他人分發 Gateway 產生的 API Key，就能分別管理與控制每個人的流量與額度；還有將多個不同的 LLM 來源其中與統一到一個地方管理...等等的好處。</p>
<p>不過就我的目的單純是為了側錄上下文與提示詞，用來分析到底是應用程式的提示詞工程有問題還是 LLM 本身的性能問題。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="llm-observability">LLM Observability<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#llm-observability" class="hash-link" aria-label="Direct link to LLM Observability" title="Direct link to LLM Observability">​</a></h3>
<ul>
<li><a href="https://github.com/langfuse/langfuse" target="_blank" rel="noopener noreferrer">https://github.com/langfuse/langfuse</a>
<ul>
<li>15.9k ⭐</li>
</ul>
</li>
</ul>
<p>就像 Grafana Loki 能夠儲存 Log 並提供可觀測性一樣，不過 LLM Observability 更注重 LLM API 的輸入和輸出，這些紀錄將作為調整 RAG 或微調參數的重要依據。那些「免費使用的 LLM」多數也是在幹這件事，讓哪些免費仔作為幫忙生產資料的工具，所以何不自己在本地就先存一份呢？</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="openrouter">OpenRouter<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#openrouter" class="hash-link" aria-label="Direct link to OpenRouter" title="Direct link to OpenRouter">​</a></h3>
<p>OpenRouter 本身也有 Gateway 的作用，除了它能夠在多個 Provider 之間平衡負載來提高可用性之外，作為一個 LLM API 代理，隔在你和 Provider 之間，發揮類似 VPN 的作用，讓 Provider 更難對使用者進行鎖定。</p>
<h3 class="anchor anchorWithStickyNavbar_mpuI" id="llm-provider">LLM Provider<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#llm-provider" class="hash-link" aria-label="Direct link to LLM Provider" title="Direct link to LLM Provider">​</a></h3>
<p>OpenAI、Google、Claude 都是所謂的 LLM 供應商，也就是你可以付錢給它們，它們給你 LLM 服務。</p>
<p>DeepInfra 比較不一樣的地方是它只把自己定位在「LLM 基礎設施」。舉例來說，DeepSeek<!-- -->:DeepSeek<!-- --> V3.1 是一個有開放權重的 LLM，你有設備的話大可以下載模型後自己讓 GPU 運行 LLM，只是這樣做的成本可能太高，於是你選擇外包，DeepInfra 就是這樣的存在。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="結論">結論<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#%E7%B5%90%E8%AB%96" class="hash-link" aria-label="Direct link to 結論" title="Direct link to 結論">​</a></h2>
<p>一個 LLM Provider 背後可能有很多模型，而一個 Gateway 背後也可以代理很多 LLM Provider，
模型不應該閉源成為不可取代的存在；LLM Provider 也不應該是獨一無二不可取代的存在，這樣的話會產生供應商鎖定，
多樣性是生命的出路，更是自由的道路，即便這可能是一個花式砸自己腳的道路。</p>
<p>至於那些閉源工具？只要它支援第三方 LLM API，我就用可觀測工具把它的提示詞挖出來瞧瞧。</p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-litellm-bug-fb5197">
<p>[Bug]: LangFuse callback failed to config in the LiteLLM Proxy Admin UI Panel · Issue #14854 · BerriAI/litellm. Retrieved 2025-10-01, from <a href="https://github.com/BerriAI/litellm/issues/14854" target="_blank" rel="noopener noreferrer">https://github.com/BerriAI/litellm/issues/14854</a> <a href="https://flyskypie.github.io/posts/2025-10-05_llm-api-chain#user-content-fnref-litellm-bug-fb5197" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>LLM Proxy</category>
            <category>LLM Gateway</category>
            <category>LLM Observability</category>
        </item>
        <item>
            <title><![CDATA[2025-09-27 （技術性）折騰的週末]]></title>
            <link>https://flyskypie.github.io/posts/2025-10-01_note</link>
            <guid>https://flyskypie.github.io/posts/2025-10-01_note</guid>
            <pubDate>Wed, 01 Oct 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[本篇廢文沒什麼敘事結構，單純把週末的一些體驗記下來。]]></description>
            <content:encoded><![CDATA[
<div class="theme-admonition theme-admonition-info admonition_a71W alert alert--info"><div class="admonitionHeading_ZphC"><span class="admonitionIcon_vqjX"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_fKWC"><p>本篇廢文沒什麼敘事結構，單純把週末的一些體驗記下來。</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="技能樹科技樹">技能樹/科技樹<a href="https://flyskypie.github.io/posts/2025-10-01_note#%E6%8A%80%E8%83%BD%E6%A8%B9%E7%A7%91%E6%8A%80%E6%A8%B9" class="hash-link" aria-label="Direct link to 技能樹/科技樹" title="Direct link to 技能樹/科技樹">​</a></h2>
<p>最近看了一個關於 Factorio 的影片<sup><a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fn-factorio-89c025" id="user-content-fnref-factorio-89c025" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/03_factorio-50d83d0e2d6c70ef2eab4704323833b5.webp" width="646" height="362" class="img_RpFt"></p>
<p>但是因為「開源制約」的關係我不能直接玩 Factorio。</p>
<details class="details_kzw7 alert alert--info details_D2hA" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_UYJG"><p>標題：開源制約（誓約）
字號：願字 00014 號
級別：動作級願景</p><p>主文：
我希望只用開源軟體。</p><p>描述：
正如馬克思所批評的，當土地被地主持有、生產要素被企業主持有，就會造成人與人的不平等，從而產生特權階級。然而物質世界的特性就是如此，每個產品背後的生產成本，生產的人或是計畫生產的人期望報酬是天經地義的，但是當我們看向「人類智慧」的時候，走得是另外一種模式；當我們在基本教育中學到「牛頓第二定律」的時候，課本裡面寫的可不是「牛頓 © 第二定律™」，這是因為這些智慧被視為公共財，並且知識傳遞的成本相對於產品要低得多並沒有「這裡有 100 份牛頓第二定律，只有 100 個人可以使用牛頓第二定律」這種事。</p><p>軟體公司僱用勞工生產軟體，然後銷售軟體，並且處心積慮的透過各種設計與算計企圖榜定消費者，這是資本主義架構下的常態，無力研發軟體的弱勢經濟體在國際貿易的秩序下只能淪為被壓榨的一方，因為他們為了提高產能的關鍵生產要素只能來自第一世界。</p><p>開源軟體在這個架構下開啟新的規則，把「軟體商品」轉換成「人類智慧」，它跟企圖綁架使用者的企業的「惡意」（商用軟體）不同，它是來自第一世界的「善意」、它是第一世界自願獻給全體人類的過剩的產能，開源軟體能夠舒緩人與人的不平等、國際貿易造成的不平等。</p><p>我自認生於一個不算富裕的原生家庭，也使用過盜版軟體，但是自從抓住開源的橄欖枝，我認為這是一個即便貧窮也能活得公平、光明磊落的道路。</p><p>級別計算：</p><ul>
<li>投入規模：執行開源制約，動作級。</li>
<li>影響規模：影響個人，動作級。</li>
<li>綜合級數：動作級。</li>
</ul></div></div></details>
<p>那...我把我的 HomeLab 的關聯性做成 Factorio 風格的科技樹好了！找一找還真的有人做過類似的東西：</p>
<ul>
<li><a href="https://github.com/andrico1234/beautiful-skill-tree" target="_blank" rel="noopener noreferrer">https://github.com/andrico1234/beautiful-skill-tree</a>
<ul>
<li>383 ⭐</li>
</ul>
</li>
</ul>
<p>不過安裝之後沒辦法用 Vite 正常 import，大概是 <code>package.json</code> 格式不支援的關係，畢竟這個專案的主要程式碼已經五年沒更新了。</p>
<p>後來 clone 下來試著自己打一些補丁，跑起來之後發現效果沒有到很好。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="前情提要">前情提要<a href="https://flyskypie.github.io/posts/2025-10-01_note#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81" class="hash-link" aria-label="Direct link to 前情提要" title="Direct link to 前情提要">​</a></h2>
<p>最近因為工作需求開始玩 LLM，但是有時候 Agent 犯蠢我也不清楚到底是 Model 能力極限還是提示詞工程的鍋，因此我認為有必要來點可觀測性。</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/01_Observability-0e5e0bd28551226a8d71ae5c6deeaafb.webp" width="500" height="436" class="img_RpFt"></p>
<p>後來我只找了 <a href="https://github.com/langfuse/langfuse" target="_blank" rel="noopener noreferrer">Langfuse</a> ，它確實能夠紀錄 request 和 response，但是它仰賴使用 SDK 作為呼叫其他 LLM  API 的封裝。在諸如 Clien 之類的 Agent 工具是沒辦法輕易把 Langfuse SDK 注入進去的，我需要的是能夠作為 Proxy 伺服器擋在工具和 LLM API 之間。</p>
<p>接著我找到了 <a href="https://github.com/BerriAI/litellm" target="_blank" rel="noopener noreferrer">LiteLLM</a> ，它確實能作為 Proxy 擋在工具和 LLM API 之間，並且支援 OpenAI Compatible 界面（目前 LLM API 的實質產業標準），不過問題是它不能紀錄詳細的 request 資訊，因此我無法得知</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="litellm-x-langfuse">LiteLLM x Langfuse<a href="https://flyskypie.github.io/posts/2025-10-01_note#litellm-x-langfuse" class="hash-link" aria-label="Direct link to LiteLLM x Langfuse" title="Direct link to LiteLLM x Langfuse">​</a></h2>
<p>後來我發現可以在 LiteLLM 設定 callback 來整合 Langfuse<sup><a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fn-litellm-langfuse-89c025" id="user-content-fnref-litellm-langfuse-89c025" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>，於是週末我就想說來試試看。</p>
<p>但是 LiteLLM 卻一直跟我抱怨：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">Error decrypting value for key: LANGFUSE_SECRET_KEY, Did your master_key/salt key change recently? </span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>但是我甚至沒有設定任何的持久化，<code>LANGFUSE_SECRET_KEY</code> 也是第一次新增，怎麼會有「salt 變動」的問題？</p>
<p>後來我才知道這是某種 bug，LiteLLM 以明碼將資料寫入資料庫後卻試圖用 salt 將資料解密<sup><a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fn-litellm-bug-89c025" id="user-content-fnref-litellm-bug-89c025" data-footnote-ref="true" aria-describedby="footnote-label">3</a></sup>，在這之前已經花了好幾個好時進行故障排除以及跟 LLM 對話的鬼打牆，十分高血壓。</p>
<p>LLM 會耍蠢 → 試著建立 LLM API 可觀測性 → 遇到問題 → 試著用 LLM 故障排除 → LLM 繼續耍蠢，啊啊啊啊啊 <code>(#╯O皿O)╯┻━┻</code></p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="替代方案">替代方案<a href="https://flyskypie.github.io/posts/2025-10-01_note#%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88" class="hash-link" aria-label="Direct link to 替代方案" title="Direct link to 替代方案">​</a></h2>
<p>好，此路不通，換條路總可以了吧？於是我陸續嘗試了這些方案：</p>
<ul>
<li><a href="https://github.com/Helicone/helicone" target="_blank" rel="noopener noreferrer">https://github.com/Helicone/helicone</a>
<ul>
<li>4.5k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/langwatch/langwatch" target="_blank" rel="noopener noreferrer">https://github.com/langwatch/langwatch</a>
<ul>
<li>2.5k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/theopenco/llmgateway" target="_blank" rel="noopener noreferrer">https://github.com/theopenco/llmgateway</a>
<ul>
<li>504 ⭐</li>
</ul>
</li>
<li><a href="https://github.com/lunary-ai/lunary" target="_blank" rel="noopener noreferrer">https://github.com/lunary-ai/lunary</a>
<ul>
<li>1.4k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/comet-ml/opik" target="_blank" rel="noopener noreferrer">https://github.com/comet-ml/opik</a>
<ul>
<li>14.2k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/Arize-ai/phoenix" target="_blank" rel="noopener noreferrer">https://github.com/Arize-ai/phoenix</a>
<ul>
<li>7.1k ⭐</li>
</ul>
</li>
<li><a href="https://github.com/tensorzero/tensorzero" target="_blank" rel="noopener noreferrer">https://github.com/tensorzero/tensorzero</a>
<ul>
<li>10.4k ⭐</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="helicone">Helicone<a href="https://flyskypie.github.io/posts/2025-10-01_note#helicone" class="hash-link" aria-label="Direct link to Helicone" title="Direct link to Helicone">​</a></h2>
<p>它有一個「All in one」 Docker 映像檔<sup><a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fn-helicone-all-in-one-89c025" id="user-content-fnref-helicone-all-in-one-89c025" data-footnote-ref="true" aria-describedby="footnote-label">4</a></sup>：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull helicone/helicone-all-in-one:v2025.08.08</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然而問題是我的對外網路是無線（行動）網路，Registry 限流機制加上拉取大型映像檔，這種錯誤訊息對我而言是家常便飯：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">Error: copying system image from manifest list: writing blob: storing blob to file "/var/tmp/container_images_storage2694550315/6": happened during read: Digest did not match, expected sha256:ceaab54d6be3e54965b66b4b01da68ebc45a6f4efeebb16cad2270a35281db35, got sha256:8aa0a595a4e118e8633d634f1b061f8824856dfbfdef65801198a647dfc00ab1</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>雖然我還是有方法可以拉取，但是資料進不了我的本地鏡像站，不過那是另外一個故事，總之映像檔過於肥大的方案對我而言不是一個可行方案。</p>
<p>官方文件上除了「All in one」沒有其他資訊了，於是我試著在它的 GitHub 上閒逛找到了：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">migrations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/dockerfiles/dockerfile_migrations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">jawn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> helicone</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">jawn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> valhalla/dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">container_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> helicone</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/dockerfiles/dockerfile_web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">worker-openai-proxy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> worker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/dockerfiles/dockerfile_worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">worker-helicone-api</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> worker</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ../worker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker/dockerfiles/dockerfile_worker</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>沒有預編 image!?</strong> <code>(#╯O皿O)╯┻━┻</code></p>
<p>※<a href="https://hub.docker.com/u/helicone" target="_blank" rel="noopener noreferrer">DockerHub 下的帳號</a>跟<a href="https://github.com/Helicone/helicone-helm-v3" target="_blank" rel="noopener noreferrer">給 K8s 用的 Helm</a> 其實有線索，只是當下我沒想到。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="langwatch">LangWatch<a href="https://flyskypie.github.io/posts/2025-10-01_note#langwatch" class="hash-link" aria-label="Direct link to LangWatch" title="Direct link to LangWatch">​</a></h2>
<p>四個映像檔平均 1 GB 多，最大的有 2 GB，下載幾次沒成功就放棄了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="llm-gateway">LLM Gateway<a href="https://flyskypie.github.io/posts/2025-10-01_note#llm-gateway" class="hash-link" aria-label="Direct link to LLM Gateway" title="Direct link to LLM Gateway">​</a></h2>
<p>下載之後有成功執行，不過問題蠻多的：</p>
<ul>
<li>沒有內建 OpenRouter</li>
<li>雖然可以透過 Custom Providers 加入，但是 UI 上只能加一個（不確定是不是 bug）</li>
<li>加入、刪除後再加入會撞 ID 而發生錯誤，這應該是 bug</li>
<li>確認可以 Proxy 把 request 打出去，但是沒有留下任何紀錄<!-- -->
<ul>
<li>設定有 <code>POSTHOG_HOST</code> 之類的參數</li>
<li>Logging 有 Google Log API 的資訊</li>
<li>推測可觀測日誌的持久化可能根本不在它的實做之中，需要仰賴外部（非 OSS 商業）服務完成。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="lunary">Lunary<a href="https://flyskypie.github.io/posts/2025-10-01_note#lunary" class="hash-link" aria-label="Direct link to Lunary" title="Direct link to Lunary">​</a></h2>
<blockquote>
<p>The Docker setup is available only with Lunary Enterprise Edition<sup><a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fn-lunary-89c025" id="user-content-fnref-lunary-89c025" data-footnote-ref="true" aria-describedby="footnote-label">5</a></sup></p>
</blockquote>
<p>好喔。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="opik">Opik<a href="https://flyskypie.github.io/posts/2025-10-01_note#opik" class="hash-link" aria-label="Direct link to Opik" title="Direct link to Opik">​</a></h2>
<p>因為 <code>ghcr.io/comet-ml/opik/opik-guardrails-backend</code> 太肥了，我一直拉不下來就放棄了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="phoenix">Phoenix<a href="https://flyskypie.github.io/posts/2025-10-01_note#phoenix" class="hash-link" aria-label="Direct link to Phoenix" title="Direct link to Phoenix">​</a></h2>
<p>官方文件有謎之 <code>frontend</code> 和 <code>backend</code><sup><a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fn-phoenix-89c025" id="user-content-fnref-phoenix-89c025" data-footnote-ref="true" aria-describedby="footnote-label">6</a></sup>：</p>
<div class="language-yaml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-yaml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">context</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./backend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dockerfile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Dockerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">frontend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> frontend</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>這次我有先檢查 <a href="https://hub.docker.com/u/arizephoenix" target="_blank" rel="noopener noreferrer">Docker Hub 的帳號</a>，沒看到對應的映像檔就先跳過了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="tensorzero">TensorZero<a href="https://flyskypie.github.io/posts/2025-10-01_note#tensorzero" class="hash-link" aria-label="Direct link to TensorZero" title="Direct link to TensorZero">​</a></h2>
<p>它的設定方式不是很直覺：</p>
<div class="language-toml codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-toml codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain"># A function defines the task we're tackling (e.g. generating a haiku)...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[functions.generate_haiku]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type = "chat"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ... and a variant is one of many implementations we can use to tackle it (a choice of prompt, model, etc.).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Since we only have one variant for this function, the gateway will always use it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[functions.generate_haiku.variants.gpt_4o_mini]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type = "chat_completion"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">model = "openai::gpt-4o-mini"</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>而且還有不遵守 OpenAI 的奇怪 API：</p>
<div class="language-shell codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-shell codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X POST "http://localhost:3000/inference" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -H "Content-Type: application/json" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -d '{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "function_name": "generate_haiku",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    "input": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      "messages": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          "role": "user",</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          "content": "Write a haiku about artificial intelligence."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }'</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="johnny-decimal">Johnny Decimal<a href="https://flyskypie.github.io/posts/2025-10-01_note#johnny-decimal" class="hash-link" aria-label="Direct link to Johnny Decimal" title="Direct link to Johnny Decimal">​</a></h2>
<p>映像檔下載的等待時間，利用時間做點什麼好了。之前已經考慮使用 <a href="https://johnnydecimal.com/" target="_blank" rel="noopener noreferrer">Johnny Decimal</a> 來結構化硬碟上的資料很久了，來研究一下吧！</p>
<p>於是一邊下載映像檔，一邊跟 LLM 聊，最後生出了這個：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">00-09	治理與策略 (Governance &amp; Strategy)	高階決策、目標設定、公司文化與法規遵從。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">00	公司治理與章程 (Governance &amp; Charter)	公司章程、股東協議、組織架構文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">01	董事會與會議 (Board &amp; Meetings)	董事會成員名單、會議議程與紀錄、決議事項</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">02	高階策略與規劃 (Executive Strategy)	年度/長期策略目標、年度業務規劃、執行報告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">03	企業風險管理	企業風險管理框架、內部審查報告（非財會專屬）。所有非財會的合規文件應移到 64 法規遵循 (Finance &amp; Legal)。04 應專注於宏觀風險框架（如自然災害、重大系統性風險）。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10-19	核心營運與交付 (Core Operations &amp; Delivery)	產品/服務的生產、交付與維護（含硬體）。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10	標準作業流程 (SOPs &amp; Work Instructions)	各部門的標準作業流程文件、工作指南</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11	生產管理 (Production Management)	生產排程、物料需求計畫 (MRP)、產量報告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12	品管與品質保證 (Quality Control &amp; QA)	產品/服務檢驗標準、不合格品報告、ISO認證文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13	物流與倉儲 (Logistics &amp; Warehousing)	成品出貨單、庫存管理、運輸安排文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14	設備維護與校準 (Equipment Maint. &amp; Calib.)	廠房或主要生產設備的定期維護紀錄、校準報告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20-29	市場與客戶獲取 (Market &amp; Customer Acquisition)	外部溝通、品牌建立、收入產生、銷售。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20	行銷策略與計畫 (Marketing Strategy &amp; Plans)	年度行銷計畫、預算、品牌指南</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">21	市場研究與分析 (Market Research &amp; Analysis)	競爭者分析、消費者調研報告、市場趨勢報告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22	內容與素材 (Content &amp; Collateral)	產品型錄、宣傳手冊、網站內容、廣告素材庫</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">23	銷售營運 (Sales Operations)	銷售預測、績效報告、佣金計畫、銷售工具</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">24	客戶關係管理 (CRM)	主要客戶檔案、客戶滿意度調查、銷售流程文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30-39	系統與基礎設施 (IT &amp; Infrastructure)	數位與物理支撐系統、網路、資料庫。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30	基礎設施 (Infrastructure)	伺服器、網路設備、機房配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">31	系統與應用 (Systems &amp; Applications)	內部軟體、ERP、CRM 系統資料</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32	服務台與支援 (Helpdesk &amp; Support)	服務請求、故障排除文件、SLA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">33	資訊安全 (Information Security)	資安政策、入侵偵測報告、備份計畫</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34	IT 專案 (IT Projects)	進行中的重大系統升級、新系統導入文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">40-49	創新與開發 (Innovation &amp; Development)	未來產品/服務的創造與研發。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">40	研發策略與專案 (R&amp;D Strategy &amp; Projects)	研發預算、長期技術路線圖、專案啟動文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">41	概念與規格 (Concepts &amp; Specifications)	產品需求文件 (PRD)、設計規範、功能藍圖</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">42	原型與測試 (Prototypes &amp; Testing)	測試計畫、實驗結果、原型機設計文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">43	智慧財產權 (Intellectual Property - IP)	專利申請文件、商標文件、技術文件保護</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">44	產品發布與生命週期 (Launch &amp; Lifecycle)	上市計畫、發布後評估、產品退役文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">50-59	供應鏈與外部資源 (Supply Chain &amp; External Resources)	原料採購、供應商關係、庫存管理。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">50	供應鏈策略與管理 (SCM Strategy &amp; Mgt)	供應鏈風險評估、長期供應策略</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">51	供應商管理 (Supplier Management)	供應商合約、績效評估、合格供應商名單</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">52	直接物料採購 (Direct Material Procurement)	採購訂單 (PO)、詢價文件 (RFQ)、物料規格</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">53	間接物料採購 (Indirect Material Procurement)	非生產相關耗材、服務採購文件 (如顧問服務)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">54	進出口與關務 (Import/Export &amp; Customs)	報關文件、貿易法規、原產地證明</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">60-69	財務、會計與法務 (Finance, Accounting &amp; Legal)	金流管理、預算、資產、合規性。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">60	會計與總帳 (Accounting &amp; General Ledger)	日常交易、科目表、會計政策</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">61	預算與規劃 (Budgeting &amp; Planning)	年度預算文件、預測模型</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">62	稅務與審計 (Taxation &amp; Audit)	稅務申報文件、內部/外部審計報告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">63	法務與合約 (Legal &amp; Contracts)	法律顧問文件、標準合約模板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64	法規遵循 (Compliance)	產業法規、隱私權政策、政府報告</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">65	資產與固定資本	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">70-79	人力資本 (Human Capital)	員工健康、培訓、福利、情感支持。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">70	招募與入職 (Recruitment &amp; Onboarding)	職位描述、面試指南、入職文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">71	薪酬與福利 (Payroll &amp; Benefits)	薪資計算、健保/勞保文件、福利計畫</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">72	員工發展與培訓 (L&amp;D)	培訓課程資料、績效評估文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">73	員工政策與手冊 (Policies &amp; Manuals)	員工手冊、行為準則、請假規則</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">80-89	衡量與績效 (Measurement &amp; Performance)	績效指標 (KPI) 追蹤、數據分析、反饋機制。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">90-99	通用與個人化 (General &amp; Personal)	無法分類的通用文件、個人專屬資料。</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>還有這個：</p>
<div class="codeBlockContainer_HtHN theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_XzDj"><pre tabindex="0" class="prism-code language-text codeBlock_Kgad thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_xOgw"><span class="token-line" style="color:#393A34"><span class="token plain">10	標準作業流程 (SOPs)	家務 SOP 與規範 (如：洗碗SOP、洗衣指南、緊急處理清單)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11	生產排程 (Production Mgt)	日常排程與執行 (如：每日/週家務排班表、任務追蹤)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12	品管與品質保證 (QC &amp; QA)	服務品質檢查與標準 (如：清潔檢查表、用餐滿意度回饋)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13	物流與倉儲 (Logistics)	庫存與儲存管理 (如：食物、耗材庫存、儲物空間地圖)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14	設備維護與校準 (Equipment Maint.)	硬體維護紀錄 (如：電器保固卡、房屋定期檢查、維修紀錄)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">60	會計與總帳 (Accounting &amp; General Ledger)	家庭總帳、月度/年度收支表、交易紀錄。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">61	預算與規劃 (Budgeting &amp; Planning)	年度預算、突發基金目標、大額支出規劃。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">62	投資組合與計畫	投資帳戶、投資策略、績效紀錄。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">63	保險與風險保障	醫療、人壽、財產保險單、理賠文件。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">64	稅務與法務文件	年度報稅文件、法律合約、遺囑、授權書。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">65	房產與不動產資產	房屋所有權文件、房貸紀錄、物業稅單、租賃合約。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">66	動產與淨值計算	車輛、貴重收藏、主要家具清單、家庭淨值計算表。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">67	債務與貸款管理	房貸、車貸、其他借款、還款紀錄。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">70	成員招募與入職	結婚證書、生育文件、新成員入家（入職）SOP、背景資料。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">71	基礎健康管理	家庭病史、預防接種紀錄、體檢報告。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">72	情感與心理支持	情感回饋機制 (問卷)、衝突處理SOP、諮詢紀錄。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">73	教育與個人發展	學習計畫、課程報名、技能樹追蹤、履歷文件。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">74	成員生命週期與檔案	身分證明文件、個人職責總綱、成員離家/離職（如成年獨立、過世）文件。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">75	福利與休閒計畫	旅遊規劃、休閒活動清單、年度休假安排。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">76	危機與應急準備	急救包清單、緊急聯絡人名單、災害應對計畫。</span><br></span></code></pre><div class="buttonGroup_PN__"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_lePV" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_mz7K"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_aySJ"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>好像有奇怪的東西混進去了？喔，那又是另外一個關於「公司化家庭」的故事了。</p>
<p>弄著弄覺得我應該要用個表格來處理它，啊，該來在我的 Homelab 上安裝 Office 了。</p>
<h2 class="anchor anchorWithStickyNavbar_mpuI" id="web-office">Web Office<a href="https://flyskypie.github.io/posts/2025-10-01_note#web-office" class="hash-link" aria-label="Direct link to Web Office" title="Direct link to Web Office">​</a></h2>
<p>我之前已經試著架設 <a href="https://github.com/CollaboraOnline/online" target="_blank" rel="noopener noreferrer">Collabora Online</a> 了，但是因為它是無頭的伺服器，需要跟 Nextcloud 之類的東西做整合，但是我其實對於這種「All in One」 NAS 類的服務沒有很有興趣，於是就擱置了。</p>
<p>這次來試試 <a href="https://github.com/ONLYOFFICE/DocumentServer" target="_blank" rel="noopener noreferrer">ONLYOFFICE</a> 好了，於是又多了一個肥肥的映像檔要下載。</p>
<p>下載完後發現：</p>
<p><img decoding="async" loading="lazy" src="https://flyskypie.github.io/assets/images/02_onlyoffice-0ba749bfd154a209863e15eea1771cb2.webp" width="1440" height="834" class="img_RpFt"></p>
<p>你也沒有頭啊！？<code>(#╯O皿O)╯┻━┻</code></p>
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_mpuI sr-only" id="footnote-label">Footnotes<a href="https://flyskypie.github.io/posts/2025-10-01_note#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-factorio-89c025">
<p>E X P A N D I N G to THE STARS in Factorio - YouTube.  Retrieved 2025-10-01, from <a href="https://youtu.be/hYcAsNCH7Zc?si=y-izHtLKDbKaoEqk" target="_blank" rel="noopener noreferrer">https://youtu.be/hYcAsNCH7Zc?si=y-izHtLKDbKaoEqk</a> <a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fnref-factorio-89c025" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-litellm-langfuse-89c025">
<p>Open Source Observability for LiteLLM Proxy - Langfuse. Retrieved 2025-10-01, from <a href="https://langfuse.com/integrations/gateways/litellm" target="_blank" rel="noopener noreferrer">https://langfuse.com/integrations/gateways/litellm</a> <a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fnref-litellm-langfuse-89c025" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-litellm-bug-89c025">
<p>[Bug]: LangFuse callback failed to config in the LiteLLM Proxy Admin UI Panel · Issue #14854 · BerriAI/litellm. Retrieved 2025-10-01, from <a href="https://github.com/BerriAI/litellm/issues/14854" target="_blank" rel="noopener noreferrer">https://github.com/BerriAI/litellm/issues/14854</a> <a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fnref-litellm-bug-89c025" data-footnote-backref="" aria-label="Back to reference 3" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-helicone-all-in-one-89c025">
<p>Docker - Helicone OSS LLM Observability. Retrieved 2025-10-01, from <a href="https://docs.helicone.ai/getting-started/self-host/docker" target="_blank" rel="noopener noreferrer">https://docs.helicone.ai/getting-started/self-host/docker</a> <a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fnref-helicone-all-in-one-89c025" data-footnote-backref="" aria-label="Back to reference 4" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-lunary-89c025">
<p>Docker - Lunary API Reference. Retrieved 2025-10-01, from <a href="https://docs.lunary.ai/docs/more/self-hosting/docker" target="_blank" rel="noopener noreferrer">https://docs.lunary.ai/docs/more/self-hosting/docker</a> <a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fnref-lunary-89c025" data-footnote-backref="" aria-label="Back to reference 5" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-phoenix-89c025">
<p>Docker | Arize Phoenix. Retrieved 2025-10-01, from <a href="https://arize.com/docs/phoenix/self-hosting/deployment-options/docker" target="_blank" rel="noopener noreferrer">https://arize.com/docs/phoenix/self-hosting/deployment-options/docker</a> <a href="https://flyskypie.github.io/posts/2025-10-01_note#user-content-fnref-phoenix-89c025" data-footnote-backref="" aria-label="Back to reference 6" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section>]]></content:encoded>
            <category>LLM Proxy</category>
            <category>LLM Gateway</category>
            <category>LLM Observability</category>
        </item>
        <item>
            <title><![CDATA[LLM 與機械手臂的類比]]></title>
            <link>https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm</link>
            <guid>https://flyskypie.github.io/posts/2025-09-09_llm-and-robot-arm</guid>
            <pubDate>Tue, 09 Sep 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[LLM 生成文件的能力似乎被不少工程師視作「自動補全文件」的解方，畢竟很多工程師都很懶得寫文件，但是我認為「作為 LLM context input 的文件」跟「給人類閱讀的文件」應該嚴格區分，因為 LLM 能夠很輕易的產生或更新大量的文件，但是人類的認知負荷容量並不會因此提昇，每個人能夠處理的資訊量依然是固定的，大量的甚至可能灌水的生成式內容反而會大幅度的消耗人類的處理量能並且提高認知負荷。]]></description>
            <content:encoded><![CDATA[
<p>LLM 生成文件的能力似乎被不少工程師視作「自動補全文件」的解方，畢竟很多工程師都很懶得寫文件，但是我認為「作為 LLM context input 的文件」跟「給人類閱讀的文件」應該嚴格區分，因為 LLM 能夠很輕易的產生或更新大量的文件，但是人類的認知負荷容量並不會因此提昇，每個人能夠處理的資訊量依然是固定的，大量的甚至可能灌水的生成式內容反而會大幅度的消耗人類的處理量能並且提高認知負荷。</p>
<p>即便機械手臂在製造業能夠造成產能的提昇，實際上工廠依然是嚴格分離機械手臂和人類的工作區以免發生事故，只有特殊處理的「協作型機械手臂」能夠和人類直接處於同一個空間工作，這些協作型機械手臂透過特別的反饋來避免傷害工作人員。我認為 LLM 應該也有相同的問題，只是由比較不明顯的「精神傷害」取代傳統的「物理傷害」，因此不應該讓 LLM 的生成式內容「直接侵害人類的工作空間」。</p>]]></content:encoded>
            <category>Philosophy</category>
        </item>
    </channel>
</rss>